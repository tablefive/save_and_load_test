<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>B사감:The New World</title>
<style title="Twine CSS">@keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@keyframes rumble{25%{top:-0.1em}75%{top:0.1em}0%,to{top:0px}}@keyframes shudder{25%{left:0.1em}75%{left:-0.1em}0%,to{left:0px}}@keyframes buoy{25%{top:0.25em}75%{top:-0.25em}0%,to{top:0px}}@keyframes sway{25%{left:0.25em}75%{left:-0.25em}0%,to{left:0px}}@keyframes pulse{0%{transform:scale(0, 0)}20%{transform:scale(1.2, 1.2)}40%{transform:scale(0.9, 0.9)}60%{transform:scale(1.05, 1.05)}80%{transform:scale(0.925, 0.925)}to{transform:scale(1, 1)}}@keyframes zoom-in{0%{transform:scale(0, 0)}to{transform:scale(1, 1)}}@keyframes shudder-in{0%, to{transform:translateX(0em)}5%, 25%, 45%{transform:translateX(-1em)}15%, 35%, 55%{transform:translateX(1em)}65%{transform:translateX(-0.6em)}75%{transform:translateX(0.6em)}85%{transform:translateX(-0.2em)}95%{transform:translateX(0.2em)}}@keyframes rumble-in{0%, to{transform:translateY(0em)}5%, 25%, 45%{transform:translateY(-1em)}15%, 35%, 55%{transform:translateY(1em)}65%{transform:translateY(-0.6em)}75%{transform:translateY(0.6em)}85%{transform:translateY(-0.2em)}95%{transform:translateY(0.2em)}}@keyframes fidget{0%, 8.1%, 82.1%, 31.1%, 38.1%, 44.1%, 40.1%, 47.1%, 74.1%, 16.1%, 27.1%, 72.1%, 24.1%, 95.1%, 6.1%, 36.1%, 20.1%, 4.1%, 91.1%, 14.1%, 87.1%, to{left:0px;top:0px}8%, 82%, 31%, 38%, 44%{left:-1px}40%, 47%, 74%, 16%, 27%{left:1px}72%, 24%, 95%, 6%, 36%{top:-1px}20%, 4%, 91%, 14%, 87%{top:1px}}@keyframes slide-right{0%{transform:translateX(-100vw)}}@keyframes slide-left{0%{transform:translateX(100vw)}}@keyframes slide-up{0%{transform:translateY(100vh)}}@keyframes slide-down{0%{transform:translateY(-100vh)}}@keyframes fade-right{0%{opacity:0;transform:translateX(-1em)}to{opacity:1}}@keyframes fade-left{0%{opacity:0;transform:translateX(1em)}to{opacity:1}}@keyframes fade-up{0%{opacity:0;transform:translateY(1em)}to{opacity:1}}@keyframes fade-down{0%{opacity:0;transform:translateY(-1em)}to{opacity:1}}@keyframes flicker{0%,29%,31%,63%,65%,77%,79%,86%,88%,91%,93%{opacity:0}30%{opacity:0.2}64%{opacity:0.4}78%{opacity:0.6}87%{opacity:0.8}92%, to{opacity:1}}@keyframes blur{0%{filter:blur(2rem);opacity:0}25%{opacity:1}to{filter:blur(0rem);opacity:1}}.dom-debug-mode tw-story,.dom-debug-mode tw-passage,.dom-debug-mode tw-sidebar,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{outline:1px solid #f5a3da;min-height:32px;display:block !important}.dom-debug-mode tw-story::before,.dom-debug-mode tw-passage::before,.dom-debug-mode tw-sidebar::before,.dom-debug-mode tw-include::before,.dom-debug-mode tw-hook::before,.dom-debug-mode tw-expression::before,.dom-debug-mode tw-link::before,.dom-debug-mode tw-dialog::before,.dom-debug-mode tw-columns::before,.dom-debug-mode tw-column::before,.dom-debug-mode tw-align::before{position:absolute;top:0;left:0;height:16px;background-color:#f5a3da;color:black;font-size:16px;font-weight:normal;font-style:normal;font-family:monospace;display:inline-block;line-height:100%;white-space:pre;z-index:999997}.dom-debug-mode tw-story:hover,.dom-debug-mode tw-passage:hover,.dom-debug-mode tw-sidebar:hover,.dom-debug-mode tw-include:hover,.dom-debug-mode tw-hook:hover,.dom-debug-mode tw-expression:hover,.dom-debug-mode tw-link:hover,.dom-debug-mode tw-dialog:hover,.dom-debug-mode tw-columns:hover,.dom-debug-mode tw-column:hover,.dom-debug-mode tw-align:hover{outline:1px solid #fc9}.dom-debug-mode tw-story:hover::before,.dom-debug-mode tw-passage:hover::before,.dom-debug-mode tw-sidebar:hover::before,.dom-debug-mode tw-include:hover::before,.dom-debug-mode tw-hook:hover::before,.dom-debug-mode tw-expression:hover::before,.dom-debug-mode tw-link:hover::before,.dom-debug-mode tw-dialog:hover::before,.dom-debug-mode tw-columns:hover::before,.dom-debug-mode tw-column:hover::before,.dom-debug-mode tw-align:hover::before{background-color:#fc9;transition:background-color 1s}.dom-debug-mode tw-passage,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{padding:1em;margin:0}.dom-debug-mode tw-story::before{content:'<tw-story tags="' attr(tags) '">'}.dom-debug-mode tw-passage::before{top:-16px;content:'<tw-passage tags="' attr(tags) '">'}.dom-debug-mode tw-sidebar::before{top:-16px;content:"<tw-sidebar>"}.dom-debug-mode tw-hook::before{content:'<tw-hook name="' attr(name) '">'}.dom-debug-mode tw-expression::before{content:'<tw-expression name="' attr(name) '">'}.dom-debug-mode tw-link::before{content:'<tw-link name="' attr(name) '">'}.dom-debug-mode tw-dialog::before{content:"<tw-dialog>"}.dom-debug-mode tw-columns::before{content:"<tw-columns>"}.dom-debug-mode tw-column::before{content:"<tw-column>"}.dom-debug-mode tw-align::before{content:"<tw-align>"}.dom-debug-mode tw-include::before{content:'<tw-include type="' attr(type) '" title="' attr(title) '">'}.debug-mode tw-expression{display:inline-block !important}.debug-mode tw-expression[type=variable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"$" attr(name)}.debug-mode tw-expression[type=tempVariable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"_" attr(name)}.debug-mode tw-expression[return=boolean]{background-color:rgba(179,179,179,0.2)}.debug-mode tw-expression[return=array]{background-color:rgba(255,102,102,0.2)}.debug-mode tw-expression[return=dataset]{background-color:rgba(255,128,0,0.2)}.debug-mode tw-expression[return=number]{background-color:rgba(255,179,102,0.2)}.debug-mode tw-expression[return=datamap]{background-color:rgba(255,255,102,0.2)}.debug-mode tw-expression[return=changer]{background-color:rgba(179,255,102,0.2)}.debug-mode tw-expression[return=lambda]{background-color:rgba(102,255,102,0.2)}.debug-mode tw-expression[return=hookname]{background-color:rgba(102,255,204,0.2)}.debug-mode tw-expression[return=string]{background-color:rgba(102,255,255,0.2)}.debug-mode tw-expression[return=datatype]{background-color:rgba(102,153,255,0.2)}.debug-mode tw-expression[return=gradient],.debug-mode tw-expression[return=colour]{background-color:rgba(204,102,255,0.2)}.debug-mode tw-expression[return=instant],.debug-mode tw-expression[return=macro]{background-color:rgba(240,117,199,0.2)}.debug-mode tw-expression[return=command]{background-color:rgba(153,153,255,0.2)}.debug-mode tw-expression.false{background-color:rgba(255,0,0,0.2) !important}.debug-mode tw-expression[type=macro]::before{content:"(" attr(name) ":)";padding:0 0.5rem;font-size:1rem;vertical-align:middle;line-height:normal;background-color:inherit;border:1px solid rgba(255,255,255,0.5)}.debug-mode tw-hook{background-color:rgba(0,85,255,0.1) !important}.debug-mode tw-hook::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"["}.debug-mode tw-hook::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]"}.debug-mode tw-hook[name]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]<" attr(name) "|"}.debug-mode tw-pseudo-hook{background-color:rgba(255,170,0,0.1) !important}.debug-mode tw-collapsed::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"{"}.debug-mode tw-collapsed::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"}"}.debug-mode tw-verbatim::before,.debug-mode tw-verbatim::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"`"}.debug-mode tw-align[style*="text-align: center"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 50%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: left"]{background:linear-gradient(to right, rgba(255,204,189,0.25) 0%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: right"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 100%)}.debug-mode tw-column{background-color:rgba(189,228,255,0.2)}.debug-mode tw-enchantment{animation:enchantment 0.5s infinite;border:1px solid}.debug-mode tw-link::after,.debug-mode tw-broken-link::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(passage-name)}.debug-mode tw-include{background-color:rgba(204,128,51,0.1)}.debug-mode tw-include::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(type) ' "' attr(title) '"'}@keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}tw-debugger{position:fixed;box-sizing:border-box;bottom:0;right:0;z-index:999999;min-width:10em;min-height:1em;padding:0em 0.5em 0.5em 1em;font-size:1.25em;font-family:sans-serif;color:#000;border-left:solid #000 2px;border-top:solid #000 2px;border-top-left-radius:.5em;background:#fff;opacity:1}tw-debugger select{margin-right:1em;width:12em}tw-debugger button{border-radius:3px;border:solid #999 1px;margin:auto 4px;background-color:#fff;font-size:inherit;color:#000}tw-debugger button.enabled{background-color:#eee;box-shadow:inset #ddd 3px 5px 0.5em}tw-debugger .panel{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;bottom:100%;left:-2px;right:0;padding:1em;max-height:40vh;overflow-y:scroll;overflow-x:hidden;z-index:999998;background:#fff;border:inherit;border-bottom:solid #999 2px;border-top-left-radius:.5em;border-bottom-left-radius:.5em;font-size:0.8em}tw-debugger .panel:empty,tw-debugger .panel[hidden]{display:none}tw-debugger .panel-source,tw-debugger .panel-row-source{font-family:monospace;overflow-x:scroll;white-space:pre;-ms-flex-preferred-size:100%;flex-basis:100%}tw-debugger .panel-row-source{margin:5px 0}tw-debugger .panel-rows{width:100%;overflow-x:scroll}tw-debugger .panel-rows>*{display:table-row}tw-debugger .panel-rows>div:nth-of-type(2n){background:#EEE}tw-debugger .panel-row-buttons{text-align:right}tw-debugger .panel-variables .panel-rows:empty::before{content:"~ No variables ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-enchantments .panel-rows:empty::before{content:"~ No enchantments ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-errors .panel-rows:empty::before{content:"~ No errors... for now. ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-rows:empty+.panel-variables-bottom{display:none}tw-debugger .panel-storylets:not(.panel-exclusive) .storylet-exclusive,tw-debugger .panel-storylets:not(.panel-urgent) .storylet-urgent{display:none}tw-debugger .panel-variables-bottom{padding-top:5px}tw-debugger .enchantment-row{min-height:1.5em}tw-debugger .variable-path{opacity:0.4}tw-debugger .temporary-variable-scope,tw-debugger .enchantment-local{font-family:sans-serif;font-weight:normal;opacity:0.8;font-size:0.75em}tw-debugger .temporary-variable-scope:not(:empty)::before,tw-debugger .enchantment-local:not(:empty)::before{content:" in "}tw-debugger .variable-name,tw-debugger .enchantment-name{font-family:monospace;font-weight:bold}tw-debugger .variable-type{color:#444;font-weight:normal;text-overflow:ellipsis;overflow:hidden;max-width:10em}tw-debugger .error-row{display:table-row;background-color:rgba(230,101,204,0.3)}tw-debugger .error-row:nth-of-type(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .error-row>*{display:table-cell;padding:0.25em 0.5em}tw-debugger .error-row .error-message{cursor:help}tw-debugger .error-row .error-passage{color:#444}tw-debugger .storylet-row{background-color:rgba(201,233,222,0.3)}tw-debugger .storylet-row:nth-child(2n){background-color:rgba(128,203,178,0.3)}tw-debugger .storylet-row.storylet-closed{font-style:italic;opacity:0.4;background-color:rgba(217,217,217,0.3)}tw-debugger .storylet-row.storylet-closed:nth-child(2n){background-color:rgba(166,166,166,0.3)}.storylet-error tw-debugger .storylet-row{background-color:rgba(230,101,204,0.3)}.storylet-error tw-debugger .storylet-row:nth-child(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .storylet-row .storylet-name,tw-debugger .storylet-row .storylet-value{display:inline-block;width:50%}tw-debugger .tabs{padding-bottom:0.5em}tw-debugger .tab{border-radius:0px 0px 0.5em 0.5em;border-top:none}tw-debugger .resizer{position:absolute;height:3em;border-left:2px solid #ccc;border-right:2px solid #ccc;top:10px;left:4px;width:8px;cursor:ew-resize}tw-dialog{z-index:999997;border:#fff solid 2px;padding:2em;color:#fff;background-color:#000;display:block}@media (min-width: 576px){tw-dialog{max-width:50vw}}tw-dialog input[type=text]{font-size:inherit;width:100%}tw-dialog-links{text-align:right;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}tw-backdrop{z-index:999996;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.8);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}tw-backdrop ~ tw-backdrop{display:none}tw-link,.link,tw-icon,.enchantment-clickblock{cursor:pointer}tw-link,.enchantment-link{color:#4169E1;font-weight:bold;text-decoration:none;transition:color 0.2s ease-in-out}tw-passage [style^="color"] tw-link:not(:hover),tw-passage [style*=" color"] tw-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-link:hover,tw-passage [style*=" color"][hover="true"] tw-link:hover,tw-passage [style^="color"] .enchantment-link:not(:hover),tw-passage [style*=" color"] .enchantment-link:not(:hover),tw-passage [style^="color"][hover="true"] .enchantment-link:hover,tw-passage [style*=" color"][hover="true"] .enchantment-link:hover{color:inherit}tw-link:hover,.enchantment-link:hover{color:#00bfff}tw-link:active,.enchantment-link:active{color:#DD4B39}.visited{color:#6941e1}tw-passage [style^="color"] .visited:not(:hover),tw-passage [style*=" color"] .visited:not(:hover),tw-passage [style^="color"][hover="true"] .visited:hover,tw-passage [style*=" color"][hover="true"] .visited:hover{color:inherit}.visited:hover{color:#E3E}tw-broken-link{color:#993333;border-bottom:2px solid #993333;cursor:not-allowed}tw-passage [style^="color"] tw-broken-link:not(:hover),tw-passage [style*=" color"] tw-broken-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-broken-link:hover,tw-passage [style*=" color"][hover="true"] tw-broken-link:hover{color:inherit}.enchantment-mouseover{border-bottom:2px dashed #999}.enchantment-mouseout{border:rgba(64,149,191,0.6) 1px solid}.enchantment-mouseout:hover{background-color:rgba(175,197,207,0.75);border:transparent 1px solid;border-radius:0.2em}.enchantment-clickblock{width:100%;height:100%;display:block}.enchantment-clickblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;color:rgba(65,105,225,0.5);transition:color 0.2s ease-in-out}.enchantment-clickblock>:not(tw-enchantment):hover::after{color:rgba(0,191,255,0.5)}.enchantment-clickblock>:not(tw-enchantment):active::after{color:rgba(222,78,59,0.5)}.enchantment-clickblock>:not(tw-enchantment)::after{box-shadow:inset 0 0 0 0.5vmax}.enchantment-clickblock>tw-passage::after,.enchantment-clickblock>tw-sidebar::after{box-shadow:0 0 0 0.5vmax}.enchantment-mouseoverblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:2px dashed #999}.enchantment-mouseoutblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:rgba(64,149,191,0.6) 2px solid}.enchantment-mouseoutblock:hover>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;background-color:rgba(175,197,207,0.75);border:transparent 2px solid;border-radius:0.2em}tw-link.enchantment-button,.enchantment-link.enchantment-button,.enchantment-button:not(.enchantment-link) tw-link,.enchantment-button:not(.enchantment-link) .enchantment-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block}tw-dialog-links{padding-top:1.5em}tw-dialog-links tw-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block;display:inline-block}html{margin:0;height:100%;overflow-x:hidden}*,:before,:after{position:relative;box-sizing:inherit}body{margin:0;height:100%}tw-storydata{display:none}tw-story{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;font:100% Georgia, serif;box-sizing:border-box;width:100%;min-height:100%;font-size:1.5em;line-height:1.5em;padding:5% 5%;overflow:hidden;background-color:#000;color:#fff}tw-story [style*=content-box] *{box-sizing:border-box}@media (min-width: 576px){tw-story{padding:5% 20%}}tw-story tw-consecutive-br{display:block;height:1.6ex;visibility:hidden}tw-story select{background-color:transparent;font:inherit;border-style:solid;padding:2px}tw-story select:not([disabled]){color:inherit}tw-story textarea{resize:none;background-color:transparent;font:inherit;color:inherit;border-style:none;padding:2px}tw-story input[type=checkbox]{transform:scale(1.5);margin:0 0.5em}tw-story tw-noscript{animation:appear 0.8s}tw-passage{display:block}tw-sidebar{text-align:center;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}@media (min-width: 576px){tw-sidebar{left:-5em;width:3em;position:absolute;-ms-flex-direction:column;flex-direction:column}tw-enchantment[style*="width"]>tw-sidebar{width:inherit}}tw-icon{display:inline-block;margin:0.5em 0;font-size:66px;font-family:"Verdana",sans-serif}tw-icon[alt]{opacity:0.2}tw-icon[alt]:hover{opacity:0.4}tw-icon[data-label]::after{font-weight:bold;content:attr(data-label);font-size:20px;bottom:-20px;left:-50%;white-space:nowrap}tw-meter{display:block}tw-hook:empty,tw-expression:empty{display:none}tw-error{display:inline-block;border-radius:0.2em;padding:0.2em;font-size:1rem;cursor:help;white-space:pre-wrap}tw-error.error{background-color:rgba(223,58,190,0.6);color:#fff}tw-error.warning{background-color:rgba(223,140,58,0.6);color:#fff;display:none}.debug-mode tw-error.warning{display:inline}tw-error-explanation{display:block;font-size:0.8rem;line-height:1rem}tw-open-button,tw-folddown{cursor:pointer;line-height:0em;border-radius:1px;border:1px solid black;font-size:0.8rem;margin:0 0.4rem;padding:2px;white-space:pre}tw-folddown::after{content:"\25b6"}tw-folddown.open::after{content:"\25bc"}tw-open-button::after{content:"Open"}tw-notifier{border-radius:0.2em;padding:0.2em;font-size:1rem;background-color:rgba(223,182,58,0.4);display:none}.debug-mode tw-notifier{display:inline}tw-notifier::before{content:attr(message)}tw-colour{border:1px solid black;display:inline-block;width:1em;height:1em}tw-enchantment:empty{display:none}h1{font-size:3em}h2{font-size:2.25em}h3{font-size:1.75em}h1,h2,h3,h4,h5,h6{line-height:1em;margin:0.3em 0 0.6em 0}pre{font-size:1rem;line-height:initial}small{font-size:70%}big{font-size:120%}mark{color:rgba(0,0,0,0.6);background-color:#ff9}ins{color:rgba(0,0,0,0.6);background-color:rgba(255,242,204,0.5);border-radius:0.5em;box-shadow:0em 0em 0.2em #ffe699;text-decoration:none}center{text-align:center;margin:0 auto;width:60%}blink{text-decoration:none;animation:fade-in-out 1s steps(1, end) infinite alternate}tw-align{display:block}tw-columns{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between}.transition-in{animation:appear 0ms step-start}.transition-out{animation:appear 0ms step-end}[data-t8n^=dissolve].transition-in,[data-t8n=fade].transition-in{animation:appear .8s}[data-t8n^=dissolve].transition-out,[data-t8n=fade].transition-out{animation:appear .8s reverse}[data-t8n^=shudder].transition-in{display:inline-block !important;animation:shudder-in .8s}[data-t8n^=shudder].transition-out{display:inline-block !important;animation:shudder-in .8s reverse}[data-t8n^=rumble].transition-in{display:inline-block !important;animation:rumble-in .8s}[data-t8n^=rumble].transition-out{display:inline-block !important;animation:rumble-in .8s reverse}[data-t8n^=pulse].transition-in{animation:pulse .8s;display:inline-block !important}[data-t8n^=pulse].transition-out{animation:pulse .8s reverse;display:inline-block !important}[data-t8n^=zoom].transition-in{animation:zoom-in .8s;display:inline-block !important}[data-t8n^=zoom].transition-out{animation:zoom-in .8s reverse;display:inline-block !important}[data-t8n^=blur].transition-in{animation:blur .8s;display:inline-block !important}[data-t8n^=blur].transition-out{animation:blur .8s reverse;display:inline-block !important}[data-t8n^=slideleft].transition-in{animation:slide-left .8s;display:inline-block !important}[data-t8n^=slideleft].transition-out{animation:slide-right .8s reverse;display:inline-block !important}[data-t8n^=slideright].transition-in{animation:slide-right .8s;display:inline-block !important}[data-t8n^=slideright].transition-out{animation:slide-left .8s reverse;display:inline-block !important}[data-t8n^=slideup].transition-in{animation:slide-up .8s;display:inline-block !important}[data-t8n^=slideup].transition-out{animation:slide-down .8s reverse;display:inline-block !important}[data-t8n^=slidedown].transition-in{animation:slide-down .8s;display:inline-block !important}[data-t8n^=slidedown].transition-out{animation:slide-up .8s reverse;display:inline-block !important}[data-t8n^=fadeleft].transition-in{animation:fade-left .8s;display:inline-block !important}[data-t8n^=fadeleft].transition-out{animation:fade-right .8s reverse;display:inline-block !important}[data-t8n^=faderight].transition-in{animation:fade-right .8s;display:inline-block !important}[data-t8n^=faderight].transition-out{animation:fade-left .8s reverse;display:inline-block !important}[data-t8n^=fadeup].transition-in{animation:fade-up .8s;display:inline-block !important}[data-t8n^=fadeup].transition-out{animation:fade-down .8s reverse;display:inline-block !important}[data-t8n^=fadedown].transition-in{animation:fade-down .8s;display:inline-block !important}[data-t8n^=fadedown].transition-out{animation:fade-up .8s reverse;display:inline-block !important}[data-t8n^=flicker].transition-in{animation:flicker .8s}[data-t8n^=flicker].transition-out{animation:flicker .8s reverse}
</style>
</head>
<body>
<tw-story><noscript><tw-noscript>JavaScript needs to be enabled to play B사감:The New World.</tw-noscript></noscript></tw-story>
<tw-storydata name="B사감:The New World" startnode="1" creator="Twine" creator-version="2.3.14" ifid="35DA48A4-3798-47A0-8AA4-74589C9C9A7A" zoom="0.6" format="Harlowe" format-version="3.2.2" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">@import url('https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@700&display=swap');
body, tw-story
{
  color : navy;
  background-color: white;
  font-family: 'Nanum Myeongjo', serif;

}

img {
  max-width: 100%;
  height: auto;
}

.save tw-link {
  	color: #4169E1;
  	border-radius: 16px;
	border: 1px solid #4169E1;
  	text-align: center;
  	display: block !important;
}</style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="A1 인트로" tags="전사" position="404,171" size="100,100">(set: $storyStyle to (background: #EDEEE2) + (color: #616266) )
(enchant: ?Page, $storyStyle)
B사감이 감독하는 그 기숙사에 금년 가을 들어서 괴상한 일이 생겼다. 

그것은 다른 일이 아니라 밤이 깊어서 새로 한 점이 되어 모든 기숙생들이 달고 곤한 잠에 떨어졌을 제 난데없는 깔깔대는 웃음과 속살속살하는 말낱이 새어 흐르는 일이었다. 

그러나 이 수수께끼가 풀릴 때는 왔다. 어째 공교롭게 한방에 자던 학생 셋이 한꺼번에 잠을 깨었다. 첫째 처녀가 소변을 보러 일어났다가 그 소리를 듣고 둘째 처녀와 셋째 처녀를 깨우고 만 것이다.

“저 소리를 들어보아요. 아닌 밤중에 저게 무슨 소리야?”하고 첫째 처녀는 호동그래진 눈에 무서워하는 빛을 띠운다.
이때에 그 괴상한 소리는 땍때글 웃었다. 세 처녀는 으쓱하며 귀를 소스라쳤다.

“오! 태훈 씨! 그러면 작히 좋을까요?”
간드러진 여자의 목소리다.

“경숙 씨가 좋으시다면야 내야 얼마나 기쁘겠습니까? 아아, 오직 경숙 씨에게 바친 나의 타는 듯한 가슴을 인제야 아셨습니까?”
정열에 뜬 사내의 목청이 분명하다.
한동안 침묵…….

“인제 고만 놓아요. 키스가 너무 길지 않아요. 행여 남이 보면 어떡해요?”
아양 떠는 여자 말씨.

“길수록 더욱 좋지 않아요? 나는 내 목숨이 끊어질 때까지 키스를 하여도 길다고는 못하겠습니다. 그래도 짧은 것을 한하겠습니다.”

사내의 피를 뿜는 듯한 이 말끝은 계집의 자지런 웃음으로 묻혀버렸다.



[[다음 페이지 -&gt;A2_인트로2]]</tw-passagedata><tw-passagedata pid="2" name="A2_인트로2" tags="" position="619,300" size="100,100">(set: $storyStyle to (background: #EDEEE2) + (color: #616266) )
(enchant: ?Page, $storyStyle)
세 처녀는 얼굴을 마주 보았다. 그들의 얼굴은 놀랍고 무서운 빛이 없지 않았으되 점점 호기심에 번쩍이기 시작하였다. 그들의 머릿속에는 한결같이 로맨틱한 생각이 떠올랐다. 이 안에 있는 여자 애인을 보려고 학교 근처를 뒤돌고 곰돌던 사내 애인이 타는 듯한 가슴을 걷잡다 못하여 밤이 이슥하기를 기다려 담을 뛰어넘었는지 모르리라.

셋째 처녀는 대담스럽게 그 방문을 빠끔히 열었다. 그 틈으로 여섯 눈이 방 안을 향해 쏘았다. 이 어쩐 기괴한 광경이냐! 전등불은 아직 끄지 않았는데 침대 위에는 기숙생에게 온 소위 ‘러브레터’의 봉투가 너저분하게 흩어졌고, 그 알맹이도 여기저기 두서없이 펼쳐진 가운데 B 여사 혼자-아무도 없이 제 혼자 일어나 앉았다. 

누구를 끌어당길 듯이 두 팔을 벌리고 안경 벗은 근시 안으로 잔뜩 한곳을 노리며 그 굴비쪽 같은 얼굴에 말할 수 없이 애원하는 표정을 짓고는 키스를 기다리는 것같이 입을 쫑긋이 내어민 채 사내의 목청을 내어가면서 아까 말을 중얼거린다. 그러다가 그 넋두리가 끝날 겨를도 없이 급작스레 앵돌아지는 시늉을 내며 누구를 뿌리치는 듯이 연해 손짓을 하며 이번에는 톡톡 쏘는 계집의 음성을 지어
“난 싫어요, 난 싫어요. 당신 같은 사내는 난 싫어요.”
하다가 제물에 자지러지게 웃는다.

“에그머니, 저게 웬일이야!”
첫째 처녀가 소곤거렸다.

“아마 미쳤나 보아, 밤중에 혼자 일어나서 왜 저러고 있을꾸?”
둘째 처녀가 맞방망이를 친다.

“에그 불쌍해!”
하고 셋째 처녀는 손으로 고인 때 모르는 눈물을 씻었다…….

-&lt;조선문단&gt;, 1925. 2. 

(if: (saved-games:) contains &quot;test&quot;)[
[[B사감:THE NEW WORLD(새로운 이야기) -&gt;S1_사건의 시작]]
(link: &quot;B사감:THE NEW WORLD(이어 하기)&quot;)[(load-game:&quot;test&quot;)]
]
(else:)[
=&gt;&lt;=
(button:)[[START! B사감:THE NEW WORLD -&gt;S1_사건의 시작]]
(set: _style to (text-style:&quot;buoy&quot;),$word to &quot;START! B사감:THE NEW WORLD&quot;)(enchant:$word, _style)
&lt;==
]

&lt;style&gt;
	tw-link {
		  	color: #4169E1;
  			border-radius: 16px;
			border: 1px solid #4169E1;
  			text-align: center;
  			display: block !important;
	}
&lt;/style&gt;


</tw-passagedata><tw-passagedata pid="3" name="S1_사건의 시작" tags="" position="825,456" size="100,100">세 명의 처녀가 B사감의 때아닌 연기에 놀라 한참을 구경하고 난 뒤, 그 ‘미친’ 꼴에 더 이상 흥미를 느끼지 못한 때 천천히 몸을 돌려 다시 조용히 복도를 걷기 시작한다.

세 처녀의 발소리가 조용한 밤중에 멀어져간다.
텅 빈 방 안을 돌아다니며 연기를 하던 B사감이 돌연 문가를 향해 고개를 돌린다.
서로 사랑을 속삭이던 연인의 표정과 전혀 다른, 평상시와 다를 바 없는 무감한 표정이다.



&lt;center&gt;
&lt;img src=&quot;./images/S1.JPG&quot; width=600, height=788&gt;
&lt;/center&gt;



&quot;드디어 갔군…….&quot;

고개를 돌려보기도 하고, 팔과 다리를 번갈아 뻗어보며 몸을 푼 B사감이 속삭인다.

&quot;아직 녹슬지 않은 것 같네.&quot;

그리고는 아에이오우, 입을 여러 번 풀어본 B사감은 침대 위에 한껏 어질러져 있는 러브레터를 긁어모아 겉봉투에 적혀 있는 이름을 확인하며 한 장 한 장, 환히 타오르고 있는 벽난로에 집어넣기 시작한다.

&quot;애들이란…… 참.&quot;

마지막 러브레터를 던지려던 찰나. 
B사감은 갑자기 고개를 들어 방문 쪽을 향해 돌아본다.
그리고 B사감은……






 
[[“앗, 이러다 늦겠어” 시계를 확인하고 기숙사를 나선다. -&gt;Y1]]
[[인기척이 사라진 것을 깨닫고 두꺼운 돋보기 안경을 벗는다. -&gt; W1]]
[[누군가에게 방문을 열어준다. -&gt; X1]]

&lt;span class=&quot;save&quot;&gt;(link:&quot;저장하기&quot;)[(save-game:&quot;test&quot;)]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="4" name=" W1" tags="" position="731,712" size="100,100">두꺼운 안경알에 숨겼던 B사감의 눈동자가 반짝인다.
이윽고 그녀는 능숙한 손놀림으로 올린 머리를 풀고 화장을 하기 시작한다. 학생들 앞에서는 거의 무표정에 가까워던 표정은 이내 사라졌다. 화장을 끝낸 후, B사감은 장농 깊숙히 숨겨둔 양장을 꺼내 입는다. 

15분쯤 흘렀을까. 

마지막 점검을 위해 거울 앞에 선다. 거울에 비친 그녀는 더이상 사십세의 노처녀 B사감이 아니다. 그녀는 만족스러운 듯 씩 웃고는 말한다. 

&quot;이제 시작해볼까?&quot;

시계를 확인 한 그녀는 혼잣말로 중얼거린다.

&quot;아이쿠 이러다 늦겠는 걸.&quot;

급히 방문을 나온다. 





[[다음 페이지 -&gt; w2]]</tw-passagedata><tw-passagedata pid="5" name="정책 정의" tags="" position="1253,131" size="200,200">&lt;줄바꿈&gt;
한단락- 점1
대사 - 위와 아래 각각 점 1
선택지 - 점 6개


&lt;인칭&gt; 3인칭


다음 페이지


기본적으로 소설 형식
대사 처리에서 필요 시 
B사감: ( 지문 )

W- 김은정
X- 이은솔
Y - 손진원
Z - 권보연</tw-passagedata><tw-passagedata pid="6" name=" w2" tags="" position="732,861" size="100,100">가슴이 뻥 뚫릴 것만 같다. 
가을에서 겨울로 넘어가는 이맘 때쯤이면 항상 이런 시원한 바람이 분다.
학교 기숙사에 갇혀 하루 종일 답답했던 그녀의 마음이 어느정도 상쾌해진다. 

운동장을 가로질러 걷던 그녀는 갑작스럽게 지난 날들이 떠올랐다. 정체를 숨기고 이곳에 지낸지 거의 1년이 넘어간다. 

&#39;여사감이라……. 흥! 예전같았으면 꿈도 꾸지 않았을 일이다. 그동안의 우여곡절이 이 순간을 위한 것일까? 드디어 오늘 그를 만난다.&#39; 

기다렸던 순간이 왔다고 생각하니 B사감의 마음은 더욱 다급해진다. 
혹시 들킬까봐 깊게 눌러쓴 모자를 다시 한번 부여잡고 급하게 정문을 향한다.
캄캄한 밤, 굳게 닫힌 학교 정문은 여전히 암흑 속에 묻혀있다. 





[[다음 페이지-&gt; W3]]</tw-passagedata><tw-passagedata pid="7" name=" W3" tags="" position="733,1012" size="100,100">정문에 도착했다. 
B사감은 아무것도 하지 않은 채 닫힌 철문을 조용히 바라본다. 

이윽고 어디선가 발자국 소리가 들린다. 
B사감은 고개를 돌렸다. 어느새 성큼 다가온 남자. 그는 한진권 수위다. 
램프를 들어 B사감의 얼굴을 비추자, 그녀는 미동도 하지 않은채 조용히 눈짓하며 문을 가리켰다. 

이전에도 여러번 해본 것처럼 익숙한 B사감의 지시에 따라 한진권은 문을 연다. 그는 그녀와 눈빛을 교환하며 자뭇 흐뭇한 표정으로 어둠속으로 사라졌다. 

교정을 빠져나온 B사감은 한숨을 쉰다. 

오늘 밤 학생들과 한바탕 벌인 연극때문에 약속된 시간이 훌쩍 지나버렸다. 평상시 같았으면 가로등 길을 따라 조용히 걸었을 것이다. 이때가 아니면 곰곰히 생각을 정리하고 다음 행동을 계획할 시간이 없기 때문이다. 

그러나 이미 너무 늦었다. 
전철을 탈까? 사람이 많아 들키지는 않을까 걱정된다. 
아니면 새로운 길을 탐색하는 건 어떨까. 

B사감은 고민한다.






[[평상시대로 가로등이 켜진 한적한 길을 걷는다. -&gt;Y2]]
[[으슥한 길을 걷는다. -&gt; W302]]
[[전차를 기다린다. -&gt; W303]]</tw-passagedata><tw-passagedata pid="8" name=" W302" tags="" position="731,1157" size="100,100">늦었지만 괜찮다. 
아직 그는 오지 않았다. 

B사감은 조용히 자신의 차례가 오기를 기다린다. 
이곳은 돈의동에 자리잡은 풍과 흥취가 넘치는 요정 &#39;청풍&#39;이다. 
&#39;대하&#39;와 &#39;오진암&#39;과 함께 3대 요정으로 불리는 &#39;청풍&#39;은 날로 기세가 높아졌다. 
가장 오랫동안 화류계에서 부동의 자리를 지킨 &#39;오진암&#39;을 위협할 정도로 손님은 늘어만 갔다. &#39;청풍&#39;의 거센 바람을 불게 한 장본인이 바로 B사감 &#39;자야&#39;다. 

&#39;한밤중&#39;이라는 뜻의 자야. 
노래는 물론이요, 춤에도 소질이 두드러져 &lt;무산향&gt;, &lt;검무&gt;에 능했으며, 특히 &lt;춘앵무&gt;는 그녀를 따라갈 자가 없었다. 또한 &#39;문학기생&#39;이라고 불릴 정도로 시와 수필을 발표하기도 했다. 이러한 그녀를 보기위해 많은 남성들은 밤마다 줄을 서며 기다렸고, 기다리다 못해 돗자리를 깔고 화투를 치기 일쑤였다. 

이들을 피해 B사감은 여염집 규수처럼 한옥으로 들어가 뒷문을 통해 요정을 드나들었다. 

옷고름을 정비한 후 자야는 떨리는 마음을 가다듬는다.


닫혀있던 병풍이 스르륵 열리고 그녀는 천천히 자신을 바라보는 무리를 향해 고개를 든다.






[[다음 페이지-&gt;W4]]</tw-passagedata><tw-passagedata pid="9" name=" W303" tags="" position="890,1011" size="100,100">전차를 기다린다. 
오랜만에 전철을 탈 생각을 하니 약간 흥분이 되기도 한다. 

&#39;흠, 이상한데. 왜 아무도 없지?&#39; 

자신말고는 역에 아무도 없음을 그제서야 알아챈 B사감은 뭔가 이상하다고 느꼈다. 

한참을 기다린 후에야 그녀는 눈치를 챘다. 밤이 늦어 마지막 전차가 이미 떠난 것이다. 
허탈감을 느꼈지만 어쩔 수 없다고 생각하며 다시 기숙사로 돌아온다. 

화장을 지우고, 평상시 모습으로 돌아온 B사감은 침대에 앉았다.

그때, 누군가 방문을 두드린다. 





[[다음 페이지 -&gt; X1]] </tw-passagedata><tw-passagedata pid="10" name="W4" tags="" position="732,1313" size="100,100">총독부 철도국장이 새롭게 부임했다. 
오무라 국장은 자신이 맡은 임무의 막중함을 잘 알고 있다. 

섬나라 일본에게 조선은 만주를 거쳐 러시아까지 진출할 최고의 거점이자, 전쟁 군수와 병사를 조달할 최상의 자원 요충지다. 조선의 철도는 일본 섬나라와 드넓은 대륙을 이어줄 생명줄과도 같다. 

오무라 국장은 철도 건설의 대업을 이루기위해서는 조선의 철광을 차지해야만 했다. 
이미 10년전부터 전국 규모의 지질조사를 비롯한 화석연구, 매광 장려금, 광산세까지 모든 법적 조치는 끝났다. 

중요한 것은 철광을 제련한 거대한 제련소가 필요하다. 그러한 면에서 노량진 선광 제련소를 운영하는 조선의 김사장은 오무라 국장의 야망을 이룰 첫번째 조력자였다. 

오무라는 옆에 앉아 조용히 술잔만 만지작거리는 아들을 못마땅한 듯 쳐다본다.

&quot;요스마! 김사장에게 술 한잔 따라 드려라!&quot;

&quot;앗…… 네!&quot;

오무라는 김사장에게 말했다.

&quot;이 놈이 조선은 처음이라. 잘 알지를 못하는 구려.&quot;

술잔을 받아든 김사장은 기분이 좋은 듯 너스레를 떨며 말했다. 

&quot;하하, 사위가 따라주는 술은 언제나 좋지요.&quot;

소란스럽던 장내가 조용해진다. 이윽고 음악이 흘러나온다.




[[다음 페이지-&gt;W5]]</tw-passagedata><tw-passagedata pid="11" name="W5" tags="" position="733,1462" size="100,100">B사감은 부드러운 듯 강하게 허공을 향해 손을 뻗는다. 

그녀는 허리를 곧추 세운 후 사뿐히 발을 밟고 옷자락을 가볍게 흔든다. 선율에 따라 미끄러지듯 움직이는 그녀의 자태는 마치 봄바람에 흔들리는 버드나무처럼 자연스러우며 아름답다.

모든 것이 정지하듯 요스마는 B사감을 쳐다본다. 

그녀의 춤은 요스마에게 말을 걸기 시작했다. 그동안 답답하고 억눌린 마음을 알아주기라도 하듯 B사감의 몸짓은 부드럽고 포근하기만 하다. 이러한 속내를 들키기라도 하듯 요스마는 이내 고개를 숙이고 만다. 

&#39;그녀의 얼굴이 보고 싶다!&#39; 

요스마는 B사감을 쳐다보고 싶다는 욕망과 더이상 쳐다봐서는 안된다는 막연한 두려움에 몹시 혼란스러웠다. 

얼마나 흘렀을까……
춤이 멈추고 청아한 목소리가 흘러나왔다. 



&lt;img src=&quot;./images/W5.JPG&quot; width=800, height=600&gt;



마이크 앞에 선 B사감은 노래를 부른다. 어디선가 들어본 듯한 이 노래는……






[[1920년대 유행한 엔카, 시들은 방초-&gt; W601]]
[[사의 찬미-&gt;W602]]
[[BTS의 다이너마이트-&gt;W603]]</tw-passagedata><tw-passagedata pid="12" name=" W601" tags="" position="581,1612" size="100,100">일본 대중음악계를 휩쓴 일본 엔카의 구성진 가락이 흘러나온다. 라시도미파로만 구성된 음계인 엔카는 마치 트로트처럼 구슬프다. 

낯익은 가락에 장단을 맞추며 즐거워하는 다른 관료들과 달리 오무라 국장은 인상을 찌뿌렸다. 조선의 가장 큰 요리집에서 전통 춤과 음악을 들을 것을 기대한 그는 실망한 기색을 내비쳤다. 누구를 위한 허세였는지 몰라도 그는 조선을 일본과 같이 동등하게 대한다는 인상을 남들에게 싶어했다.

이를 눈치챈 김사장은 공중에 손을 휘휘 저으며 사인을 보낸다. 

이윽고 다른 노래가 흘러나왔다. 






[[다음 페이지-&gt;W602]]</tw-passagedata><tw-passagedata pid="13" name="W602" tags="" position="734,1611" size="100,100">//광막한 광야에 달리는 인생아
너의 가는 곳 그 어데이냐
쓸쓸한 세상 험악한 고해에 
너는 무엇을 찾으러 가느냐


웃는 저 꽃과 우는 저 새들이
그 운명이 모두 다 같구나
삶에 열중한 가련한 인생아
너는 칼 위에 춤추는 자로다


이래도 한세상
저래도 한평생
돈도 명예도
사랑도 다 싫다//





요스마는 깜짝 놀란다. 그녀가 자신을 바라보고 있다! 그것은 착각이 아니다! 
그는 요동치는 마음을 추스르고 그녀가 자신에게 다가오는 것을 망연자실 바라본다. 






&quot;안녕하세요. 저는 자야라고 해요.&quot;






[[다음 페이지-&gt;W7]]</tw-passagedata><tw-passagedata pid="14" name="W603" tags="" position="887,1615" size="100,100">시끄러운 전자음과 함께 장내는 소란스러워졌다. 

&quot;커즈 아이 아임 스타스 투나잇~&quot;

&quot;왓치 미 브링 더 파이어 셋 더 나잇 올라잇~&quot;

알아듣지 못하는 이상한 외계어가 튀어나왔다.

이뿐만이 아니었다.
B사감의 춤사위는 요상한 것이 신들린 사람처럼 손과 발을 흔들어댄다. 
7명이 함께 추는 춤을 B사감 혼자 감당한다는 것은 예초에 무리인지 모른다. 

급기야 B사감은 손님들의 테이블을 걷어차며 밖으로 튀쳐나갔다. 그리고는 이건 아무것도 아니라는 듯, 두 손으로 머리를 쓸어올리며 윙크를 해덌다. 한쪽 다리를 연속으로 걷어차며 뛰어다니는 그녀의 모습에 손님들은 혼비백산 달아나기 시작했다. 

다이나마이트가 터지듯 그렇게 청풍은 풍지박살이 났다. 

&quot;다나나나 에에~ 다나나나나 에에~&quot;






[[다음 페이지-&gt; W293]] </tw-passagedata><tw-passagedata pid="15" name="W7" tags="" position="731,1758" size="100,100">B사감은 요스마를 찬찬히 바라본다. 그의 눈동자는 흔들리고 있다. 그것은 신호다. 

&quot;아…… 저는 조선이 처음입니다.&quot;

멋쩍은 듯 자신을 소개하며 요스마는 말문을 연다. 

&quot;아하. 그러세요? 그럼 조선의 춤과 노래도 처음이셨겠어요? 아이참. 더 잘할 것 그랬나봐요. 처음 선보이는 건데.&quot;

소리없이 웃는 B사감의 모습에 요스마는 더듬거리며 말을 이었다.

&quot;아닙니다. 너무 멋졌습니다.&quot;

&quot;하하. 다행이에요. 이곳이 초행길이라 많이 낯설죠? 경성만은 못해도 이곳도 멋진 곳이 아주 많답니다.&quot;

이윽고 B사감은 말을 이어간다.

&quot;혹시 어디 어디 가보셨어요?&quot;

&quot;아…… 글쎄요.&quot;

&quot;그렇담 제가 이참에 가이드나 해드릴까요? 저도 콧바람이나 쐴까봐요. 날씨도 좋은데요.&quot;

마냥 아이처럼 좋아하는 B사감의 얼굴을 보며 요스마는 어리둥절한다. 






[[다음 페이지-&gt; W8]]</tw-passagedata><tw-passagedata pid="16" name=" W8" tags="" position="732,1902" size="100,100">토요일 3시 까페 스미레.

혹시나 약속 시간에 늦을까 요스마는 일찌감치 점심을 마치고 서둘러 집을 나선다. 
북적거리는 종로 거리를 걸으며 번화가로 변한 이곳이 신기하기만 하다. 

까페에 도착한 요스마는 아이처럼 설레는 마음을 애써 진정시킨다. 

&#39;내가 술에 취했는가? 아님, 조선이 처음이라서?&#39;

그날 밤이 마치 꿈만 같다. 꿈에서 깨면 모든 것이 사라지듯, 그녀도 나타나지 않을지도 모른다. 이런 저런 생각에 빠져있던 요스마는 인기척에 고개를 든다. 

그녀가 원피스를 입고 서 있다. 

생머리일 줄 알았던 머리카락은 의외로 풍성한 곱슬머리라 짙은 하늘색 원피스와 잘 어울린다. 원피스는 단정한 디자인이었지만 시원하게 파인 목이 그녀의 흰 살결을 돋보이게 만든다. 

요스마는 그날과 몹시도 다르게 수수하게 차려입은 그녀가 왠지 마음에 든다. 

환한 미소의 그녀를 보며 요스마는 자기도 모르게 웃음을 짓는다.






[[다음 페이지-&gt;W9]]</tw-passagedata><tw-passagedata pid="17" name="W9" tags="" position="784,2055" size="100,100">시간이 흘렀다. 

어색했던 침묵도 차츰 사라지고 언제 그랬냐는 듯이 말도 놓는다. 
길을 걷던 사람들은 다정하게 얘기를 나누는 연인의 모습에 자기도 모르게 까페 안을 쳐다본다. 

오똑한 콧날에 형형한 눈빛을 지닌 요스마는 멋스럽게 차려입은 서구식 양복이 무척이나 잘 어울렸다. 그의 이국적인 생김새와 다르게 B사감은 청아하면서도 단정한 얼굴로 요스마를 물끄러미 쳐다보고 있다. 그날 밤의 요염한 모습은 어디에도 찾아 볼 수 없다.

요스마가 입을 연다.

&quot;그… 노래말이요.&quot;

&quot;아하, 아직도 생각하세요?&quot;

B사감은 조용히 웃는다.

&quot;참, 이상하지. 그대가 부른 노래가 나에게 마치 질문처럼 들렸단 말이오. 그대는 돈, 명예, 사랑 중에 무엇이 가장 소중하오?&quot;
 
B사감은 물끄러미 요스마를 쳐다본다. 그리고 대답한다. 
 
 
 
 
 
  
 [[돈 -&gt; W101 ]]
 [[명예 -&gt; W102]]
 [[사랑 -&gt; W103]]</tw-passagedata><tw-passagedata pid="18" name=" W101 " tags="" position="455,2658" size="100,100">&quot;흠, 하나만 고르라니 너무 어려운 질문인데요.&quot;

이윽고 B사감은 눈을 흘긴다. 

&quot;당최 요즘 세상에 돈없는 사랑이 가능할까요? 이렇게 말하니 속물같죠?&quot;

B사감의 질문에 요스마는 급히 답한다.

&quot;아니요. 하하. 오히려 솔직해서 좋소.&quot; 

이에 B사감은 그에게로 몸을 바짝 당긴 후 호기심에 가득한 눈으로 묻는다.

&quot;만약 돈과 사랑 중 하나를 택하라고 한다면 무엇을 택하시겠어요?&quot;

갑작스러운 질문에 당황한 기색이 역력하다. 이에 아랑곳하지 않고 B사감은 재촉하듯 묻는다. 

&quot;만약 저와 집안에 물려받을 유산 중 하나를 선택하라고 한다면요? 부를 버리고 저를 선택하시겠어요? 가난해도 사랑을 찾으시겠냐는 말이에요?&quot;

농담처럼 건낸 그녀의 말에 요스마는 멍해진다. 
어찌보면 한없이 우스운 질문이지만, 왠일인지 그는 가슴 한쪽이 아파옴을 느꼈다. 

한참을 머뭇거리다 요스마는 다음과 같이 답했다. 


&quot;가난한 내가
 아름다운 나타샤를 사랑해서
 오늘밤은 푹푹 눈이 나린다.
 
 나타샤는 사랑을 하고
 눈운 푹푹 날리고
 나는 혼자 쓸슬히 앉어 소주를 마신다.&quot;
 
 
요스마는 대답대신 즉석에서 시를 읊었다. 가만히 듣고 있던 B사감은 자뭇 심각해진다. 무언가 말하려던 찰나 테이블이 흔들린다. 
  
누군가 부딪쳤다. 
물끄러미 올려다 보는 데, B사감의 얼굴이 사색으로 변한다. 

그는 누구인가?






[[영희 -&gt; W11]]
[[이탁 -&gt; W12]]
[[한진권 -&gt; W13]]</tw-passagedata><tw-passagedata pid="19" name=" W102" tags="" position="948,2181" size="100,100">&quot;저같은 여자는 물어보나마나 사랑이겠죠? 그렇지 않나요? 당신은 어때요?&quot;

B사감은 명예대신 사랑이라고 거짓말로 대답한다. 

여사감으로 변장한 이유도, 청풍에 드나든 이유도, 그리고 지금 요스마와 앉아 있는 이유도 모두 명예때문이다. 그렇다고 사심이 깃든 명예는 아니다. 조국을 위한 응당해야 하는 일이자 국가의 독립을 위해서 하는 일이다.    

&quot;하하. 질문이 너무 과격했나?&quot;

요스마는 말을 이어갔다

&quot;모르겠소. 내가 아는 건 이 세상은 너무 허무하다는 것이오&quot;

인생이 허무하다고 말하는 그의 대답에 B사감은 속으로 비웃는다. 
댓가없이 누리기만 한 부자집 아들의 철없는 투정이라고 생각하니 화가 치민다. 그러나 속마음을 숨긴 B사감은 멍하니 창밖을 바라보는 요스마의 손을 꼭 붙잡는다. 

위로 말을 건내려던 찰나 테이블이 흔들린다. 
  
누군가 부딪쳤다. 
물끄러미 올려다 보는 데, B사감의 얼굴이 사색으로 변한다. 

그는 누구인가?






[[영희 -&gt; W11]]
[[이탁 -&gt; W12]]
[[한진권 -&gt; W13]]</tw-passagedata><tw-passagedata pid="20" name=" W103" tags="" position="1183,2115" size="100,100">&quot;눈물로 된 이 세상에 나 죽으면 그만일까?……
 사랑을 찾는 건 너무 허무하겠죠? 그래도 저는 끝까지 사랑을 선택할래요.&quot;
 
 B사감은 현해탄에 빠져 죽은 윤심덕의 사연을 생각하며 대답했다. 이에 요스마는 사뭇 진지하게 대답한다. 
 
 &quot;그게 무슨말이요! 자야가 죽다니.&quot;
 
 &quot;하하. 아니에요. 괜한 말을 드렸어요. 
  저 같은 하루살이 인생은 그날 그날이 무척 위태롭답니다. 
  꽃을 찾는 나비처럼 진정한 사랑을 찾아 떠돌아다닐 뿐이에요.&quot;
  
자못 체념하는 듯 들리는 그녀의 말에 요스마는 양미간을 찌뿌린다. 그리고 그녀의 손을 꼬옥 붙잡는다. 무언가 말하려던 찰나 테이블이 흔들린다. 
  
누군가 부딪쳤다. 
물끄러미 올려다 보는 데, B사감의 얼굴이 사색으로 변한다. 

그는 누구인가?






[[영희 -&gt; W11]]
[[이탁 -&gt; W12]]
[[한진권 -&gt; W13]]
 
 
 </tw-passagedata><tw-passagedata pid="21" name=" W12" tags="" position="705,2283" size="100,100">그는 이탁이다. 

이탁은 극단 새 세상의 단원으로 극단활동을 통해 급속히 친해진 사이다.

극단 새 세상은 희곡을 읽고 비평을 하는 모임으로, 직접 극을 창작하고 직접 연기해 무대에 올리기도 한다. B사감은 극단의 거의 유일하다시피 한 여성 단원이다. 그녀는 학교에 알리지 않은 채 몰래 극단 활동을 하고 있다. 

이탁은 다른 남성 단원과 다르게 옷맵시에 전혀 신경쓰지 않은 무심함과 수더분한 인상을 갖고 있다. B사감에게 있어 이탁은 전날 발표한 작품만큼이나 언제나 놀랍고 참신한 생각을 가진 오묘한 자였다. 흥미를 끄는 그의 행동과 말투, 그리고 알 수 없는 기계를 사용하는 등 B사감은 이탁이 혹여나 자신과 같은 스파이가 아닌지 의심하기도 했다. 

합평회 때 이탁이 쓴 연애 소설을 두둔 한 것 역시 그의 정체를 알고 싶었기 때문이다. 

그런데 여기서 만날 줄이야. 






[[다음 페이지 -&gt; W121]]
 </tw-passagedata><tw-passagedata pid="22" name=" W13" tags="" position="1250,2286" size="100,100">그는 수위 한진권이다. 

한진권은 놀란 B사감에게 눈짓을 한다. 

&quot;아이고, 죄송합니다. 아이고, 죄송합니다.&quot; 

그의 어설픈 연기에 B사감은 생각한다. 

&#39;연기를 해도 이렇게 못할까.&#39;

그의 부담스러울 만큼 큰 목소리와 거친 억양때문에 오히려 주목을 끈다. 까페 손님 모두 그를 쳐다보자 B사감은 눈살을 찌뿌린다.  

&#39;무슨 큰일이라도 생겼나? 왜 갑자기 까페에 들어온거지?&#39;

B사감은 의협단에 들어오는 순간부터 그가 마음에 들지 않았다.

사십에 가까운 노총각인 그는 곰보자국투성인 얼굴이, 남자다운 맛이란 약에 쓰려도 찾을 수 없었다. 시들고 거칠고 마르고 누렇게 뜬 품이 곰팡 슬은 굴비가 생각날 뿐아니라 약간 어눌한 말투와 걸음걸이를 가지고 있었다. 게다가 발연기는 가히 최고라고 할 만했다. 

바닥을 보니 조그만한 쪽지가 떨어져 있다. 
분명 한진권이 놓고 간 것이다. 아무렇지도 않게 주워들며 B사감은 생각한다.

&#39;하마터면 쪽지를 들킬 뻔했다. 학교에서 말해줘도 될 사안을 왜 하필 까페까지 찾아와 훼방 놓는단 말인가.&#39; 

쪽지는 오늘 밤 비밀 작전 회의에 관한 것이다. 






[[다음 페이지-&gt;W15]]</tw-passagedata><tw-passagedata pid="23" name=" W11" tags="" position="660,2794" size="100,100">그는 영희였다. 
학교에서 항상 반갑게 인사하던 영희가 바로 눈앞에 서있다. B사감은 몹시 당황했다.
특히나 영희는 지난 주말 나와 친구 정혜의 데이트를 몰래 지켜보고 추궁한 적이 있었다.

&quot;앗, 죄송합니다. 제가 미처 보지 못했습니다.&quot;

연신 고개를 숙이며 죄송하다고 말하는 영희와 B사감의 눈이 마주친다. 
순간 B사감은 영희가 자신을 알아볼까 두려웠다. 

&#39;아니야, 이렇게 입었는 데 나를 알아 볼 리가 없지. 모른 체 하자&#39;

아무렇지도 않은 듯 태연하게 B사감은 영희를 쳐다본다. 

&#39;아! 이럴 수가. 영희의 눈빛이 이상하다. 나를 알아본 것일까?&#39;






[[선생님, 저기로 잠시 자리를 옮기실까요? -&gt; X7 쏟아지는 찻잔]]
[[안녕하세요, 요스마군. -&gt; W14]]</tw-passagedata><tw-passagedata pid="24" name=" W14" tags="" position="682,2988" size="100,100">영희의 눈빛이 흔들린 건 요스마 때문이다.

놀란 가슴을 진정하고 보니, 영희와 요스마는 대화를 하고 있다. 

둘 사이가 무척이나 긴장돼 보인다. 
영희는 흘끔 흘끔 B사감을 쳐다보며, 얼른 자리를 피하고 싶어한다. 
요스마도 마찬가지로 B사감과 같이 있는 장면을 들키기라도 한 듯 빨개진 얼굴로 영희를 올려다본다. 

B사감은 아무런 말 없이 대화가 끝나기를 기다린다. 
지금 중요한 것은 영희가 나의 정체를 모른다는 사실이다. 여기까지 와서 허무하게 작전을 실패할 수는 없다. 

&#39;나보다 더 수고한 동료들이 있다.&#39; 

이것만 기억하자고 B사감은 마음을 다잡는다. 

&quot;자야, 미안하오. 내가 다 설명하리다.&quot;

요스마는 미안한듯 이 말을 남기고 자리를 떠났다. 


학교로 돌아오는 길.
B사감은 요스마가 들려준 이야기를 되씹는다. 그는 자신이 조선에 온 이유가 바로 노량진 선광 제련소 첫째 딸 영희와 정략결혼을 하기 위해서라고 했다. 그리고 이 결혼은 강제로 진행된 거라며 자신의 난처한 상황을 토로했다. 

B사감은 희미하게 웃으며 늦은 저녁 교정으로 들어선다. 그리고 속으로 되뇌인다.

&#39;영희야. 내가 이 학교에 들어 온 이유가 바로 너때문이다.&#39;






[[다음 페이지-&gt;W15]]</tw-passagedata><tw-passagedata pid="25" name="W15" tags="" position="1247,2433" size="100,100">고요한 밤.
강당의 작은 창문으로 미세한 불빛이 흘러나온다. 

보일락 말락한 등불에 의지해 남자 두 명과 여성 한 명이 탁자 위에 놓인 무언가를 보고 있다. 여성만 출입 가능한 무화여학교 강당에 외간 남자라니 놀랄 만한 일이다. 
무리 중 덥수룩한 수염에 매서운 눈매를 가진 남성이 먼저 입을 연다.

&quot;오전 11시요. 주례를 설 목사도 이미 결정되었다고 하오.&quot;

단호한 그의 말투에 서슴치 않고 다른 남성이 묻는다.

&quot;이 지도가 확실합니까? 틀림없어야 합니다!&quot;

약간 성난 목소리로 그는 대답한다. 

&quot;틀림없소! 탈출로도 이미 확보하였소. 걱정마시게. 그보다는……?&quot;

말끝을 흐리며 수염난 남성은 걱정스러운 눈빛으로 B사감을 쳐다본다. 

B사감은 희미한 웃음을 지으며, 말없이 고개를 끄덕인다. 

이들은 독립 비밀 결사조직의 의협단원인 김강과 박석주다.
암살과 테러를 전문으로 하는 의협단원은 부산경찰서 폭파사건에이어 조선총독부 청사 폭파 의거까지 성공시키면서 명성이 높아졌다. 물론 그만큼 의협단을 잡으려는 일제의 탄압도 심해졌다. 이들에게 위장과 잠복은 필수다. 

무엇보다 이번 거사를 위해 B사감을 여학교에 잠입시킨 것은 거사의 핵심이었다.






[[다음 페이지-&gt;W16]]</tw-passagedata><tw-passagedata pid="26" name=" W121" tags="" position="991,2517" size="100,100">&quot;괜찮소?&quot;

이탁이 미안한 듯 B사감을 쳐다본다. 

이탁을 쳐다보는 요스마의 눈빛이 사뭇 긴장한 듯 하다. 아무래도 B사감을 대하는 이탁의 자유분방한 태도가 같은 남자로서 요스마에게 위협적이었던 모양이다. 

B사감은 차라리 잘되었다고 생각한다. 요스마와 첫 데이트가 성공적으로 진행되던 찰나, 무언가 아쉬운 듯 작별을 하고 싶었기 때문이다.

B사감은 미소를 지으며 이탁을 올려다 본다. 

&quot;이 군, 여기서 만나네요.&quot; 

이탁을 올려다보며 B사감은 말을 잇는다.

&quot;이크, 이런 내 정신 좀 봐라. 제가 그때 한 약속을 까먹었지 뭐예요?&quot;

B사감은 이탁에게 한쪽 눈을 찡긋한다. 이윽고 까페에서 나갈 수 있게 도와달라고 무언의 표정을 지어보인다. 이탁은 극단에서 함께 호흡을 맞추었던 경험으로 이내 B사감의 의도를 알아챈다. 

&quot;하하, 내 그럴 줄 알아서 이렇게 직접 왔소!&quot; 

요스마는 B사감과 이탁을 번갈아보며 못내 아쉬운 표정을 짓는다. 






[[다음 페이지-&gt;Y16-1]]</tw-passagedata><tw-passagedata pid="27" name="W16" tags="" position="1246,2582" size="100,100">의협단은 소문대로 명랑함과 심각함이 기묘하게 혼합된 집단이었다. 
언제나 죽음을 눈앞에 두고 있다고 생각한 이들은 살아있는 한 자유로운 생활을 해야 한다는 사명감 비슷한 것이 있었다. 

의협단원 B사감 역시 연극활동은 물론이요, 수영, 테니스, 승마와 같은 운동을 통해 최상의 컨디션을 유지했다. 매일 같이 저격 연습도 게을리하지 않았다. 

김강, 박석주, B사감이 계획한 이번 거사는 총독부 철도국장 오무라를 암살하는 것이다. 
기회만 엿보고 있던 이들은 그의 차남이 김사장 첫째 딸 영희와 결혼한다는 소식을 접하고 이때다 싶었다. 그리고 B사감은 영희가 다니는 무화여학교에 잠입하겠다고 자원했다. 

이제 곧 결혼식이다. 정동 교회는 신랑과 신부를 축하하러 온 일본의 각계 인사로 가득찰 것이다. 같은 시간 한 자리에 이 정도의 사람이 모인다는 것은 흔치 않은 일이다. 

B사감은 확신이 있었다. 
그날 밤, 자야라는 이름으로 요스마에게 접근한 이후, 둘의 관계는 의심할 여지 없이 가까워져있었다. 






[[다음 페이지-&gt;W17]]</tw-passagedata><tw-passagedata pid="28" name="W17" tags="" position="1250,2746" size="100,100">&quot;자야… 나는 말이요. 가끔은 이들이 부러울 때가 있소. 내가 하는 말 이해하겠소?&quot;

요스마는 연일 신문 첫 면을 장식한 의협단의 밀양경찰서 폭탄사건을 가리켰다. 

&quot;네? 그게 무슨 말씀이세요?&quot;

&quot;그대는 혹시 의협단이라고 들어봤소?&quot;

&quot;당연하죠. 청풍에 오는 손님들 모두 그 얘기만 한답니다.&quot;

B사감은 누구도 아닌 요스마가 의협단을 부러워 한다니 쉽사리 이해가 가지 않았다. 

&quot;내가 듣기로 이들은 스포티한 멋진 양복에, 머리를 손질하고, 어떤 경우에도 결벽할 정도로 말쑥하게 차려입고 다닌다고 하더구먼. 어디서 그런 용기가 나오는지?&quot;

B사감은 부러움이 섞인듯한 그의 말투에 내심 코웃음을 쳤다. 

&#39;네가 의협단에 대해 무엇을 안단 말이냐? 나라를 잃어버린 설움을 네가 아느냐? 철없는 사내 같으니라고.&#39; 

요스마는 아랑곳하지 않고 계속 말을 이어간다. 

&quot;그런데 말이요. 나는 이들의 뜨거운 가슴이 부럽소. 덧없이 살아온 지난 20년보다 이들처럼 무언가에 미쳐서 지낸 하루, 그 하루가 난 부럽소.&quot;



B사감은 처연하게 흔들리는 불빛 아래 요스마와 나눈 대화를 회상한다. 
가끔 높은 신분의 자제들이 이러한 객기를 부리고는 한다. 그러나 요스마의 말에는 무언가 알 수 없는 절망과 결의가 있었다. 

&#39;더이상 복잡하게 생각하지 말자!&#39;라고 다짐한 B사감은 자신이 준비가 되었음을 알렸다.
어두운 강당 세사람의 밀담은 계속된다. 


그런데 이들을 멀리서 지켜보는 자가 있다. 이들은……






[[고양이-&gt;W18]]
[[한진권-&gt;W18]]
[[영희 -&gt;W19]] </tw-passagedata><tw-passagedata pid="29" name="W18" tags="" position="956,3133" size="100,100">다음날 아침.

평상시라면 수업이 한참 진행됐어야 할 시간인데 학교는 무척 어수선한다. 
아침 일찍부터 일본 순사가 갑작스럽게 학교에 들이닥쳤다. 
최교장 선생님은 영문도 모른채 알절부절이다. 혹시나 학교에 그리고 학생들에게 무슨 피해라도 갈까 노심초사다. 

한진권 수위는 득의만만한 얼굴로 학교를 돌아다닌다. 
그는 일본 순사를 보자마자 연신 고개를 끄덕이며 곧바로 순사를 B사감의 방으로 안내했다.

한진권은 지금까지 B사감의 의심스러운 행적을 순사에게 고해 바치고 있었다. 의협단 주변을 맴돌며 잔심부름을 하면서 수집한 정보를 일본에 판 한진권은 이중첩자였던 것이다. 


B사감의 방.
옷장, 침대, 서랍장 할 것 없이 난잡하게 헤집어졌다. B사감은 아무말도 않은 채 교회의 도면과 총을 감춰둔 곳이 들킬까봐 노심초사다.

이때 갑자기 달려온 요스마. 
요스마의 얼굴을 본 B사감은 그제서야 한진권이 요스마에게도 자신의 정체를 폭로했음을 알았다. 






[[다음 페이지-&gt;W21]]</tw-passagedata><tw-passagedata pid="30" name="W19" tags="" position="1511,3047" size="100,100">다음날 아침. 

영희는 B사감의 방문을 두드린다. 

&quot;들어오세요.&quot;

담담한 B사감의 말투다. 영희는 조용히 문을 닫고 그녀 앞에 섰다. 

&quot;어젯밤 저는 강당에서 나오시는 선생님을 보았습니다.&quot;

청천벽력과도 같은 말에 B사감은 어리둥절해졌다. 
다짜고짜 불쑥 꺼낸 영희의 말과 형형한 눈빛에 가슴이 멈추는 듯하다.

&#39;이게 무슨 말인가, 어젯밤 강당이라면, 설마? 다른 단원들도 보았을까?&#39; 아니야! 그럴리가. 그렇게 조심하고 또 조심했는데. 그래. 나만 본것이다. 다른 이들은 못 본 것이다. 시치미를 떼면 그만일 것이야.&#39;

이렇게 B사감은 가슴을 진정시켰다. 그리고 짐짓 엄숙한 말투로 되물었다.

&quot;갑자기 강당이라니 무슨 말이냐? 그것도 어젯밤이라니. 기숙사 규정상 학생은 밤에 돌아다닐 수 없어. 잘 알고 있지 않니? 영희야?&quot;

영희는 신경질적인 B사감의 말에 입술을 꼭 깨문다. 






[[다음 페이지-&gt; X3 영희의 통보1]]</tw-passagedata><tw-passagedata pid="31" name="W21" tags="" position="739,3223" size="100,100">요스마의 눈길을 감당할 수가 없다. 
정체가 발각되는 것은 상관 없지만, 그동안 고생했던 모든 수고가 물거품이 된다는 생각과 자신을 믿고 거사를 진행해 준 동지들에게 드는 미안함에 그녀의 마음이 뒤죽박죽이다.

왜 더 신중하게 행동하지 못했는지 자책하는 도중 결국 비밀의 서랍은 열리고 말았다. 

서랍 속 놓여있는 지도와 총. 

아뿔싸. B사감은 자신도 모르게 두눈을 찔끔 감는다. 

서랍을 연 자는 누구인가?






[[요스마가 발견한다.-&gt;W22]]
[[영희가 발견한다.-&gt;W23]]
[[한진권이 발견한다.-&gt;W24]]</tw-passagedata><tw-passagedata pid="32" name="W22" tags="" position="787,3382" size="100,100">요스마는 아무것도 보지 못했다는 듯, 조용히 비밀의 서랍을 닫는다. 
그 이후로도 수색은 한참이나 진행되었다. B사감의 방에서 아무것도 나오지 않자 순사는 입맛을 다신다. 

&quot;흥. 실례했소!&quot;

이윽고 순사는 뒤를 홱 돌아보며 한진권을 부른다.

&quot;한진권!&quot; 

한진권은 순사와 교장앞에서 쩔쩔메며 연신 식은땀을 딲는다. 

요스마는 두눈을 질끈 감은 B사감에게 말없이 다가와서 귓속말을 건낸다.

&quot;자야……&quot;

&quot;……&quot;

&quot;오늘 밤 그 까페로 나와주시오. 기다리겟소.&quot;

B사감은 자신을 숨겨준 요스마를 이해할 수가 없다. 아니, 그보다는 지금 이대로는 모든 계획이 수포로 돌아간다는 생각에 짓눌려 숨을 쉴수도 없다. 

&#39;요스마는 도대체 무슨 생각인 것일까. 아니다. 지금은 우선 알려야 한다! 배신자 한진권! 그 놈이 이렇게 영약할 줄이야.&#39;

분해서 눈물이 나올 것만 같다. B사감은 연락책을 통해 급하게 단원들에게 사실을 건냈다. 분명 누군가 남아 자신을 감시하고 있을 것을 알지만 그녀는 조용히 교정을 나선다. 






[[다음 페이지-&gt;W25]]</tw-passagedata><tw-passagedata pid="33" name="W23" tags="" position="668,3379" size="100,100">영희는 아무렇지도 않은 듯 조용히 서랍을 닫는다. 그리고는 요스마 앞에가서 놀란 듯 기절한다. 

학교는 구급차를 부르고 한바탕 소동이 벌어졌다. 일본 순사는 아무것도 나오지 않자, 아무래도 더 이상은 수색을 진행할 수 없다고 생각했다. 한진권의 밀고에 갑자기 수색을 결정하긴 했지만, 여학교에 이렇게 불쑥 찾아오는 것은 상부의 핀잔을 받기 딱 좋다. 그리고 무화여학교는 일본 고위층과 연이 닿은 고위급 여식들이 다니는 학교가 아닌가. 

&quot;수색 중단! 그리고 너! 한진권, 따라와!&quot;

영희의 기지로 수색은 일단 중단되었다.

난장판이 된 방을 바라보며 B사감은 지금까지 상황을 이해해보려 애쓴다. 그리고 영희의 수상쩍은 행동이 무엇을 의미하는지 곰곰히 생각한다.






[[다음 페이지-&gt;W231]]</tw-passagedata><tw-passagedata pid="34" name="W24" tags="" position="1093,3353" size="100,100">한진권은 능글맞게 웃으며 서랍속 지도와 권총을 꺼내든다. 
자신의 말이 맞지 않느냐는 듯 의기양양하게 순사를 향해 걸어간다.

순간 B사감의 눈앞이 아찔해진다. 
의협단에 첫 발을 내디던 순간, 자신이 여자라는 이유만으로 애국심을 의심받았던 날들, 능력을 보이기 위해 밤을 지새우며 훈련하던 밤, 그리고 함께 죽을 것을 약속한 동지들. 

그때 등뒤에 무언가가 건내진다. 그것은 요스마가 건낸 총이었다. 

순간 B사감은 순사를 향해 총을 쏘고, 요스마를 인질로 잡는다. 

&quot;움직이지마! 다가오면 죽인다&quot; 






[[다음 페이지-&gt;W2400]]</tw-passagedata><tw-passagedata pid="35" name="W25" tags="" position="898,3534" size="100,100">이상하리만치 까페에는 사람이 없다. 
문을 열고 들어자서자 고개숙인 요스마가 보인다. 
B사감은 크게 숨을 한번 내쉰 후, 그의 앞자리에 앉는다.

몇 분이 흘렀을까, 더이상은 이 정적의 무게를 감당할 수 없다. B사감은 무겁게 먼저 입을 연다. 

&quot;왜…… 그러셨어요?&quot;

&quot;자야!&quot;

요스마는 나지막히 B사감의 이름을 부른 후, 그녀의 두손을 꼭 잡는다. 

&quot;이때까지 그대만큼 나를 이해하는 사람을 만나보지 못했소. 태어난 나라도 다르고, 살아온 배경도 다른데, 나의 슬픔과 외로움을 알아주는 그대가 참으로 신기했소. 자야, 나는 말이요……. 그대가 오직 작전을 위해 이때까지 나를 만났다고는 생각하지 않소…. 그렇지 않소?&quot;

간절한 눈으로 B사감을 바로보던 요스마는 잠시 숨을 고르며 말을 이어간다. 

&quot;나도…… 모르겠소. 어쩌면 내심 원했을지도 모르오. 알다시피 나는 이 결혼도 싫고, 지금까지 나를 옥죄어 온 모든 굴레에서 벗어나고만 싶소. 지금의 이 감정을 어떻게 설명해야할지 모르겠지만, 자야, 나는 그대를 잃을 수 없소. 나는 그대를 잃어서는… 안 돼오!&quot; 







[[다음 페이지-&gt; W26]]</tw-passagedata><tw-passagedata pid="36" name=" W26" tags="" position="1531,3926" size="100,100">B사감은 요스마의 눈빛에서 알 수 없는 갈망을 본다. 제일 처음 그를 만났을 때, 그는 방황하고 있었다. 그것은 무언가를 잃은 슬픔의 눈빛이 아니었다. 그것은 길을 잃은 강아지마냥 갈 곳을 못 찾아 헤메이는 눈빛이었다. 물론 가끔 그가 안쓰럽지 않은 것은 아니었다. 그러나 이 정도일 줄은 상상도 못했다. 이것은 너무나도 뜻밖의 고백이다. 

B사감은 아무말도 하지 않은 채 고개만 끄덕인다. 

&quot;자야! 당신이 무슨 생각을 하는지는 몰라도 나는 그대 곁에 있고 싶소. 그대가 나에게 바라는 것이 있다면 말해보시오! 무엇이든지 상관없소. 내가 도와주리다.&quot;

자신을 도와주겠다는 말에 B사감은 반가우면서도 한편으로 의혹을 떨칠 수 없다. 

&#39;그는 믿을만한 사람인가? 지금까지 누려온 명예와 부를 버리고 나를 선택할 수 있는가.&#39;

물론 우유부단하다고 느낄때도 있었지만, 그렇다고 아주 신념이 없는 사람은 아니었다. 

선택의 순간, B사감은 생각한다. 자신이 믿을 수 있는 것은 오직 직관뿐이다.  








[[도움 수락-&gt;W27]]  
[[도움 거절-&gt;W30]] </tw-passagedata><tw-passagedata pid="37" name="W27" tags="" position="932,3788" size="100,100">요스마의 고백을 받아들인 B사감은 곰곰히 생각한다.

이미 계획했던 바대로 움직일 수는 없다. 계획이 밝혀진 이상 함께 작전을 수행하기로 약속한 다른 단원들 모두 잠적했을 것이다. 그것이 가장 먼저 취해야 하는 수순이었다.

&#39;이제 작전을 수행할 자는 나뿐이다. 요스마에게 무슨 부탁을 할 수 있을까? 그에게 나라와 아버지를 배반하라고 시키는 것은 너무 잔인하다. 차라리 요스마를 따라 일본으로 우선 잠적할까? 그에게는 힘과 권력이 있으니, 이후 거사를 도모할 수 있지 않을까.&#39; 

B사감은 연신 고개를 흔들며 마음을 다진다.

&#39;아니다. 여기서 나약해지면 안돼. 차라리 요스마를 이용하자. 이거야말로 최고의 작전이야. 그가 이미 내 수중에 들어왔고, 이제 나는 어느 때보다 안전하게 결혼식장에 들어갈 수 있다!&#39;

B사감은 요스마를 쳐다본다. 그의 뜨거운 눈길을 보는 순간 그녀의 가슴은 요동쳤다.

&#39;아~ 이를 어쩐단 말인가.&#39;

그녀는 살얼음판과도 같았던 고된 인생 길에서 그만 쉬고 싶기도 했다. 작전은 이미 돌이킬 수 없이 틀어졌다. 그 대신 모든 것을 버리고 나를 선택한 남자가 바로 내 눈앞에 있지 않은가. 이게 바로 모든 여성이 꿈꾸는 가장 행복한 순간이 아닐까.

수많은 순간들이 주마등처럼 지나간다. 그동안 가슴 뜨거웠던 순간도 많았지만, 그렇다고 온전히 나만을 위해 살았다고 할 수도 없었다. 여자라서 능력을 의심 받기 일쑤였고, 그만큼 노력해서 얻은 임무지만, 이제는 사감도 기생도 그 누구도 아닌 나이고 싶기도 했다. 

&#39;행복해지고 싶다&#39;라는 생각이 불연듯 그녀를 엄습한다. 






[[다음 페이지-&gt;W28]]</tw-passagedata><tw-passagedata pid="38" name="W30" tags="" position="1421,4105" size="100,100">화려한 결혼식장.

정동 교회로 들어서는 골목길은 차들로 가득찬다. 양복을 입은 하객들이 하나둘씩 모여든다. 총을 든 군인들과 하객의 틈에 낀 경찰들이 곳곳에 숨어서 이들을 지켜본다. 삼엄한 경계와 다르게 결혼식장은 화려한 꽃과 샹들리에로 장식되어있다. 
결혼식장에 들어서는 모든 사람은 한명식 검문소를 지나야 한다. 무기 반입은 금지되었다. 

음악이 울리고 이윽고 신랑이 입장한다. 

신랑은 검은 연미복을 입은 요스마다. 요스마의 얼굴 표정은 무언가 모르게 긴장되어 있다. 

잠시후, 결혼식가와 함께 하얀 면사포를 둘러 쓴 신부가 입장한다. 피아노 선율에 맞춰 긴 복도를 걸어오는 신부. 

요스마는 신부의 손을 건네받는다. 그리고 조심스럽게 그녀의 베일을 올린다. 

드러난 신부의 얼굴. 그녀를 본 요스마는 알 수 없는 표정을 짓는다. 

그녀는 누구인가? 



&lt;img src=&quot;./images/W30.JPG&quot; width=800, height=600&gt;





[[영희-&gt; W401]]
[[B사감-&gt; W402]]</tw-passagedata><tw-passagedata pid="39" name="W28" tags="" position="1074,4174" size="100,100">B사감은 결심한듯 입을 연다.



&quot;요스마……&quot;





[[&quot;나를 도와줘.&quot; -&gt;W30]] 
[[&quot;나와 떠나자.&quot; -&gt;W29]] </tw-passagedata><tw-passagedata pid="40" name="W29" tags="" position="1055,4428" size="100,100">&quot;뿌~우~웅&quot;

어스름한 새벽 안개와 함께 멀리 뱃고동 소리가 들린다. 
항구 저편에 곧 떠날 준비를 마친 배들이 산적해 있다.

모자를 푹 눌러쓴 B사감은 왠지 모르게 조급한 마음이 든다. 
막상 요스마에게 떠나자고 했지만, 그것이 맞는 결정이었는지 아직도 판단이 서지 않는다. 아니, 그보다 더 중요한 건 요스마의 마음이 진심인지 의심이 든다. 

뿌연 안개 속 누군가 모습을 드러낸다. 

훤칠한 키에 중절모. 그의 실루엣이 틀림없다. 

모습을 드러낸 자는 누구인가? 






[[요스마-&gt; W291]]
[[한진권-&gt;W292]]</tw-passagedata><tw-passagedata pid="41" name=" W401" tags="" position="1342,4272" size="100,100">영희를 바라보는 요스마의 표정은 하나의 미동도 없다.

주례자 앞에 선 요스마와 영희. 둘을 바라보는 하객들은 엄숙한 결혼 서약을 듣는다. 

주례를 맡은 신부는 요스마의 대답을 들은 후, 영희에게도 같은 질문을 한다. 

&quot;그대는 평생 결혼을 서약합니까?&quot;

&quot;…….&quot;

영희는 말성인다. 이윽고 그녀는 당차게 말한다.

&quot;아니요.&quot;

대답이 끝나기도 전에 영희는 요스마의 손을 뿌리치고 옆에 서있던 신부 들러리에게 달려간다. 신부 들러리로 신분을 감추었던 B사감은 환하게 웃으며 영희의 손을 잡는다. 둘은 서로를 응시하며 숨겨둔 총을 꺼낸다.



&lt;img src=&quot;./images/W401.JPG&quot; width=800, height=600&gt;






[[다음 페이지-&gt;W40000]]</tw-passagedata><tw-passagedata pid="42" name=" W402" tags="" position="1693,4114" size="100,100">B사감은 요스마를 향해 조용히 미소를 짓는다.

그리고 B사감은굳게 잡은 요스마의 손을 뿌리치고, 햐얀 웨딩드레스 밑에서 총을 꺼낸다. 
그런 B사감을 바라보는 요스마의 표정은 체념한 듯 차분하다. 

그녀가 처음 총을 겨눈 사람은 총독부 철도국장 오무라다. 
단 한치의 망설임없이 총알은 그의 가슴에 박혔다. 아수라장이 된 결혼식장에서 그녀는 자신을 밀고한 한진권을 애타게 찾는다. 비겁하게 탁자에 몸을 숨긴 한진권. 
B사감은 손살같이 달려가 그를 죽인 후 요스마를 인질 삼는다. 

피범벅이 된 웨딩드레스와 한손에 든 권총을 든 신부. 

모두들 어리둥절한 가운데 그녀는 결혼식장을 빠져나간다.



&lt;img src=&quot;./images/W402.JPG&quot; width=800, height=600&gt;







[[다음 페이지-&gt;W50]]</tw-passagedata><tw-passagedata pid="43" name="W50" tags="" position="1772,4276" size="100,100">&lt;img src=&quot;./images/W50.jpeg&quot; width=800, height=600&gt;
&lt;audio src=&quot;./sounds/W50.mp3&quot; type=&quot;audio/mp3&quot; autoplay=&quot;true&quot; loop=&quot;true&quot; hidden=&quot;true&quot;&gt;&lt;/audio&gt;



파란 하늘 광활한 몽골의 대지. 


시원한 바람을 맞으며 말타는 사람들이 여기저기 보인다. 
B사감 역시 누군가와 함께 말을 타고 있다. 그녀는 고개를 돌려 질문을 건넨다.

&quot;어때? 상쾌하지 않아?&quot;

&quot;응. 참말로&quot;

둘은 서로를 바라보며 환히 웃는다. 



-THE END-


&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]]</tw-passagedata><tw-passagedata pid="44" name=" W291" tags="" position="835,4331" size="100,100">&quot;자야!&quot;

익숙한 목소리, 나만을 바라보는 눈동자, 확신에 찬 웃음. 

요스마다!
그를 보자 B사감은 어느새 마음이 놓인다.

&quot;뿌~우~웅&quot;

다시 한번 뱃소리가 어스름히 밝아오는 새벽을 가른다. 

뱃머리에 올라앉은 B사감과 요스마는 두손을 꼭잡고 조선을 바라본다. 우선 둘은 일본으로 돌아가 짐을 정리한 후, 만주로 그리고 러시아로, 마지막 유럽행 열차를 타기로 계획했다. 새로운 삶을 살기를 약속한 둘은 두려움과 설레임으로 자신 앞에 펼쳐진 미래를 점쳐본다. 

&#39;다시 조선에 돌아올 수 있을까?&#39;

B사감은 나지막히 속삭인다.






[[다음 페이지-&gt;W294]]</tw-passagedata><tw-passagedata pid="45" name="W292" tags="" position="757,4150" size="100,100">&lt;img src=&quot;./images/W292.JPG&quot; width=800, height=600&gt;



앗! 한진권!

그의 능글맞은 웃음이 보인다. 뒤로는 순경들이 일렬로 대기하고 있다. 도망갈 길이 없다. B사감은 온 몸에 힘이 풀려 주저앉고 만다. 

결국 B사감은 양손이 동아줄로 묶인채 힘없이 끌려간다. 그 와중에서도 그녀는 주변을 두리번 거린다. 혹시 요스마가 오지 않았을까 살피며 그녀는 생각한다.

&#39;그가 밀고한 것일가? 뭐하러 이제서야? 아니야. 혹시…….&#39;

갑자기 B사감은 요스마가 무사한지 걱정이되었다. 복잡한 생각에 B사감의 몸은 몹시도 흔들렸다. 지나가는 행인 모두 매서운 밤바람에 옷깃을 여민다. 그들 중 B사감을 멀리서 바라보는 자가 있으니 이는 요스마다. 

무어라 말하는 요스마. 그의 목소리는 커다란 뱃소리에 묻혀 들리지 않는다.






[[다음 페이지-&gt; W293]]</tw-passagedata><tw-passagedata pid="46" name=" W293" tags="" position="632,4523" size="100,100">정신병동 502호

B사감이 수감된 곳이다. 

그녀는 하루종일 먼 하늘만 바라볼 뿐, 무엇도 하지 않는다. 

조용히 노래만 읇조릴 뿐.



-THE END-



&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="47" name="W294" tags="" position="801,4527" size="100,100">몇십 년이 흘렀다. 
조선은 독립이 되었고, 일본은 패전국이라는 불명예를 안고 미군정의 감시를 받고 있다.

일본의 한 선술집.

구슬픈 노랫가락이 흘러나온다. 

// 광막한 광야에 달리는 인생아
 너의 가는 곳 그 어데이냐
 쓸쓸한 세상 험악한 고해에 
 너는 무엇을 찾으러 가느냐

 이래도 한세상
 저래도 한평생
 돈도 명예도
 사랑도 다 싫다//

지나가는 수많은 행인들 중 누구 한 명 돌아보는 이 없는 술집이건만, 유독 한 여인만 무엇에 홀린 듯 발걸음을 멈춘다. 

그녀는 B사감이다. B사감은 현재 일본인으로 개명하고 자신의 신분을 숨기며 살고있다. 요스마와의 결혼도, 유럽으로의 도주도 모두 성공하지 못했다. 

&#39;그가 용기가 없었던 것일가. 어디서부터 잘못되었을까? 이토록 허무한 인생에서 나는 무엇을 찾아 헤매었던가.&#39;

그녀의 눈에서 눈물이 또르르 흘러내린다.



-THE END-



&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="48" name="W231" tags="" position="708,3526" size="100,100">영희의 퇴원날. 

B사감은 영희가 기숙사에 다시 돌아올 날을 몹시도 기다렸다. 영희를 만나 물어보고 싶은 질문이 참 많았기 때문이다. 

방과후 B사감은 영희를 조용히 강당으로 부른다. 

&quot;좀 걸을까?&quot;

B사감의 요청에 영희는 말없이 고개를 끄덕인다. 

학교 건물에서 벗어나 기숙사 건물에 들어선 두 사람. 아무도 없는 기숙사 건물은 쥐죽은 듯이 고요하다. 두 사람은 말없이 영희의 방을 향해 걷고만 있다. 

드디어 도착한 영희의 방. 영희는 갑자기 휙 몸을 돌려 B사감을 바라본다. 그리고 입을 열었다. 

&quot;선생님, 저는 남성을 사랑하지 않습니다. 제 말을 믿어주시겠어요?&quot;

B사감은 놀란 눈으로 영희를 바라본다. 영희는 흔들림 없이 곧고 정한 눈으로 B사감을 마주 바라본다. 

이 순간 동요한 이가 있다면 그것은 영희가 아니라 B사감이었을 것이다. 






[[다음 페이지-&gt;W232]]</tw-passagedata><tw-passagedata pid="49" name="W232" tags="" position="752,3670" size="100,100">B사감은 영희의 말을 들은 사람이 없는지 황급히 주변을 돌아본다. 다행히 모두 방과후 야외 활동을 나갔는지 학생은 한명도 보이지 않는다. 

한 마디 알 수 없는 말을 남기고 방으로 들어간 영희에 대해 B사감은 어찌해야 할지 모를 뿐이다. 사감실로 돌아온 B사감은 책상 의자에 걸터 앉아 또 다시 깊은 한숨을 내쉰다. 

&#39;남성을 사랑하지 않는다는 게 무슨 말이지? 그러니까 여자를 좋아한다는 말인가…. 그래서 나에게 파혼을 도와달라는 것인가?&#39;

&#39;내가 하려는 행위가 자신의 아버지에게도 피해가 갈 것이라는 것을 모르는가?&#39;

&#39;파혼을 도와주면… 그 후엔?&#39;

온갖 생각에 머리가 어지럽던 B사감의 시선 끝에 흰 편지 봉투가 들어온다.
겉봉에는 정갈한 글씨로 //&#39;B에게&#39;// 라는 글자가 쓰여있고 보낸 이는 적혀 있지 않다.
B사감은 손을 뻗어 책상 한켠에 치워둔 편지를 집는다. 망설임 끝에 봉투에서 편지를 꺼내든다.

//&quot;…나는 너의 조그만 입이 좋고, 목덜미가 좋고, 뽀이얀 볼도 좋았다. 나는 네게 결코 현명한 벗은 되지 못 했으나 우리는 별과 같이 즐거웠더랬지. 너와 더불어 즐거웠던 순간을 무덤 속에 간들 잊을 수 있을까. 도저히 너를 잊을 수 없는 나는, 이제 너를 떠나는 슬픔을 얼마든지 참으려 한다. 이런 나를 너는 나무라지도 미워하지도 않는구나. 이해 없는 세상에 너만은, 나를 알아다오.&quot;// (*지하련이 최정희에게 보낸 편지 각색)

“…함께 떠나잘 때는 언제고. 그리 갔으면 잘 살기나 하지.”

B사감은 옛 얼굴을 하나 떠올린다. 반들반들한 얼굴을 가진 그의 이름은 정혜. 이전과 같은 눈빛으로 두 번 다시 볼 수 없는 사람.

&quot;영희는 또 어째서…. 다들 어떻게 알고 날 찾아 오는 건지.&quot;

창은 굳게 닫혀 있었지만 B사감의 얼굴에 여름의 밤바람이 나부끼는 듯했다.
B사감은 편지를 접어 서랍에 넣어두고 눈을 감는다.






[[다음 페이지-&gt; X24 영희의 방]]</tw-passagedata><tw-passagedata pid="50" name=" X2_영희의 위협" tags="" position="1298,685" size="100,100">지난 주말, 영희는 우연히 B사감과 그녀의 친구 정혜가 걸어가는 모습을 본다. 
정혜를 바라보는 B사감의 눈빛은 어딘지 묘하다. 
영희는 B사감이 정혜에게 친구 이상의 감정을 느끼고 있음을 눈치챈다. 

&quot;선생님께 마음에 품은 분이 있다는 걸 알고 있습니다. 게다가 선생님 혼자만의 마음이 아니지요? 하지만 이정혜 씨는 이미 결혼하신 분이 아닙니까. 이 사실이 밝혀지면 그분도, 선생님도 곤란해지실 테죠. 선생님을 난처하게 만들고 싶지는 않습니다. 그저 저를 조금만 도와주세요.&quot;

B사감이 표정 변화 없이 잠자코 있자 영희가 말을 이어간다.

&quot;저희 아버지를 아시지요. 아버님은 가진 것에 만족할 줄 모르십니다. 제 결혼에 큰 기대를 걸고 있으세요.&quot; 

&quot;상대가 누구지?&quot;

&quot;총독부 철도국장의 차남 오무라 요스마입니다. 하지만 저는 이 결혼을 원치 않습니다. 선생님께서 저를 좀 도와주셨으면 합니다.&quot;

B사감이 여전히 굳은 얼굴로 아무 말이 없자 영희는 다급하게 말한다. 
&quot;이정혜 씨의 결혼 생활은 이미 충분히 불행합니다. 그분이 더 힘겨워지셔도 좋습니까?&quot;






[[&quot;이정혜라니, 나는 그런 사람 모른다.&quot; -&gt; X3 영희의 통보1]]
[[&quot;부끄러운 일은 한 적 없어.&quot; -&gt; X5 영희의 통보2]]</tw-passagedata><tw-passagedata pid="51" name=" X3 영희의 통보1" tags="" position="1549,916" size="100,100">&quot;선생님의 대답은 그것입니까. 후회하지 않으실까요.&quot; 

&quot;…&quot;

&quot;좋습니다. 이번주 토요일 3시 까페 스미레에서 기다리겠습니다. 오시든 오시지 않든 선생님의 선택입니다.&quot; 

말을 마친 영희는 허리 숙여 인사하고 사감실을 나간다. B사감은 한동안 그녀가 나간 문을 바라보다가 크게 한숨 쉰다.
 
 
 
 
 
 
 [[토요일 3시 까페 스미레로 이동. -&gt; X4_까페 데이트 1 ]]</tw-passagedata><tw-passagedata pid="52" name=" X4_까페 데이트 1 " tags="" position="1554,1065" size="100,100">



토요일 3시 종로 거리. 
검정색 양복을 입은 한 남자가 까페 스미레 주변을 맴돈다. 그는 여기저기 발걸음을 옮기면서도 힐끔거리며 까페 안의 영희를 살펴 본다. 

그러다 갑자기 이쪽을 쳐다보는 영희와 눈이 마주친다. 무심히 고개를 돌리려던 영희가 갑자기 무언가 깨달았다는 표정으로 그 남자를 뚫어져라 쳐다본다. 남자는 허둥대며 몸을 숨기려 하지만 이미 영희가 심술궂은 표정을 지은 채 다가오고 있다.

&quot;선생님, 그거 변장하신 거예요?&quot;

민망해진 B사감이 못 들은 척 딴청을 피우자 영희는 즐거운 듯이 B사감의 팔짱을 끼고 그녀를 까페로 데려간다. B사감을 빨개진 얼굴을 숨기려는 듯 모자를 푹 눌러쓰고 영희에게 가만히 끌려간다.






[[다음 페이지 -&gt; X10_홍차와 커피 1]]</tw-passagedata><tw-passagedata pid="53" name=" X5 영희의 통보2" tags="" position="1766,914" size="100,100">&quot;선생님의 대답은 그것입니까. 후회하지 않으실까요.&quot; 

&quot;…&quot;

&quot;좋습니다. 이번주 토요일 3시 까페 스미레에서 기다리겠습니다. 오시든 오시지 않든 선생님의 선택입니다.&quot; 

말을 마친 영희는 허리 숙여 인사하고 사감실을 나간다. B사감은 한동안 그녀가 나간 문을 바라보다가 크게 한숨 쉰다.
 
 
 
 
 
 
 [[토요일 3시 까페 스미레로 이동. -&gt; X6_까페 데이트 2 ]]</tw-passagedata><tw-passagedata pid="54" name=" X6_까페 데이트 2 " tags="" position="1767.3333333333333,1060" size="100,100">토요일 3시 종로 거리. 
영희는 까페 스미레 창가의 녹색 소파에 앉아 창밖을 바라보며 B사감이 오기를 기다린다. 

&#39;역시 오지 않으시는 건가.&#39;

영희가 작게 한숨을 쉬는 순간 그녀의 옆 얼굴에 인영이 드리운다. 옆을 돌아보자 그곳에는 평소에 보지 못한 원피스를 입은 B사감이 서있다. 

학교에서 B사감은 항상 흰 블라우스를 목 끝까지 채우고 검은색 중간 길이의 치마를 입는다. 바짝 당긴 올림 머리에 은테 안경을 쓴 그녀는 엄격한 것을 넘어 금욕적으로까지 보였다. 

그런데 오늘은 어쩐 일인지 그녀의 트레이드 마크인 안경도 쓰지 않고 머리까지 풀어 내렸다. 생머리일 줄 알았던 머리카락은 의외로 풍성한 곱슬머리라 짙은 하늘색 원피스와 잘 어울린다. 원피스는 단정한 디자인이었지만 평소보다는 목이 드러나있어 그녀의 흰 살결이 돋보인다. 



&lt;img src=&quot;./images/X6.JPG&quot; width=800, height=600&gt;






[[다음 페이지 -&gt; X11_홍차와 커피2]]</tw-passagedata><tw-passagedata pid="55" name=" X7 쏟아지는 찻잔" tags="" position="1493,1442" size="100,100">그때 여급이 두 잔의 홍차를 들고 오다 한 손님의 발에 걸려 비틀거린다. 찻잔이 영희에게 쏟아지려는 찰나 어느 새 다가온 B사감이 넘어질 뻔한 여급을 붙잡는다.  

순식간에 벌어진 일에 까페 안의 모든 사람들이 어안이 벙벙한 얼굴로 B사감을 쳐다본다.
B사감은 순간적으로 아차 싶은 표정을 짓는다.

놀란 영희는 커다란 두 눈을 깜박이다 활짝 웃으며 말을 건넨다.

&quot;감사합니다. 선생님 덕분에 옷이 젖지 않았어요. 몸이 정말 날래시던데, 따로 단련을 하시나요?&quot;

당황한 듯 보이는 B사감은 영희의 말에 대꾸도 하지 않고 입을 다문다.  
이유를 알 수 없는 어색한 기류가 둘 사이에 흐르기 시작했다.






어색한 분위기 속에서 B사감은…
[[이만 가보겠다며 자리를 뜬다. -&gt; X201 학교 강당에서 작전 회의 (액션루트 W15 변형)]] 
[[영희와의 대화를 이어나간다. -&gt; X13 인형의 집1]]</tw-passagedata><tw-passagedata pid="56" name=" X8 인형의 집2" tags="" position="1770,1330" size="100,100">여급이 B사감이 주문한 커피와 영희가 주문한 향기로운 홍차를 가져온다.

&quot;아참, 선생님. 요즘 유행하는 &lt;인형의 집&gt; 연극을 보셨습니까? 나혜석 씨가 그렇게 호평을 했다던데요.&quot;

&quot;응. 초대권을 받아서 초연을 보러 갔지. 혜석이도 내 바로 뒷자리에 있었어.&quot;

&quot;저도 초연날 다녀왔습니다. 선생님과 닮은 분을 보았는데 아마 선생님이 맞으셨나봐요. 연극은 어떠셨나요?&quot;

&quot;다들 극찬하더구나.&quot;

&quot;선생님께서는 그다지 재미가 없으셨나 봅니다.&quot;

&quot;글쎄, 나라면 마지막 장면에서 그렇게 연기하지 않았을 거야.&quot; 

영희는 호기심 어린 얼굴로 B사감의 이야기를 경청한다.

&quot;노라 역을 맡은 이월화 씨는 노라가 남편과 싸우고 집을 떠나는 장면을 마치 체념한 듯한 태도로 연기했어. 하지만 나라면, 좀 더 희열에 가득찬… 그래, 어떤 미래가 기다릴지는 전혀 알 수 없지만 그 모든 고통과 불행마저 온전히 나 자신의 선택에 의한 거라면…!&quot;  

열정에 가득찬 B사감의 눈빛은 영희 너머에 있는 무언가를 바라보고 있는 것만 같다.

&quot;선생님…?&quot;

영희의 존재마저 잊은 듯 연극 이야기에 열중하던 B사감이 다시 영희에게로 시선을 보낸다. 






B사감은…
[[영희에게 양해를 구하고 극단 합평회에 참석한다. -&gt; X102 합평회에 가는 B사감(Y1 변형)]] 
[[영희와의 대화를 이어나간다. -&gt; X9 B사감의 진심]]</tw-passagedata><tw-passagedata pid="57" name=" X9 B사감의 진심" tags="" position="2050,1504" size="100,100">&quot;그렇담 선생님은 독신으로 살아가기 위해 교사가 되신 건가요?&quot;

&quot;그렇다고 말할 수 있겠지? 또 후학을 양성하는 길이 은사님들께 입은 은혜를 갚을 수 있는 유일한 방법이라 생각했고.&quot;

&quot;그렇다곤 해도 저희에게 너무 엄격하신 거 아닌가요? 선생님에 대한 원망이 자자합니다.&quot; 

영희가 특유의 장난스러운 미소를 지으며 B사감에게 어리광부리듯 얘기한다. 지난 밤 B사감을 찾아왔을 때와는 사뭇 다른, 제 나잇대로 보이는 해맑은 모습이다. 

그런 영희를 귀여운 듯 바라보며 B사감은 짐짓 혼내는 듯한 말투로,
&quot;너희 학년 같은 천방지축은 또 처음 봤다. 너희가 나중에 선생이 되어봐야 내 맘을 이해하겠지!&quot;라며 응수한다. 

학교에선 수업 외 시간에 한두마디나 겨우 하던 B사감이지만 오늘은 어쩐 일인지 시간 가는 줄 모르고 즐겁게 이야기를 이어나간다.





[[다음 페이지 -&gt; X12_저녁 산책]]</tw-passagedata><tw-passagedata pid="58" name=" X10_홍차와 커피 1" tags="" position="1554,1198" size="100,100">까페 스미레 안 창가 자리에 마주보고 앉은 두 사람.
B사감은 흘깃거리는 주변 사람들의 시선에 신경이 쓰이지만 영희는 B사감만 바라보며 이유 없이 생글거린다. B사감이 어색함을 이기지 못하고 먼저 말을 꺼낸다.

&quot;그래서 오늘 날 부른 용건이 뭐지?&quot;

영희는 여전히 입에 미소를 띄우며 그녀를 쳐다본다. 

&quot;선생님 뭐가 그리 급하세요. 까페에 왔으니 음료부터 주문하셔야죠.&quot;

영희가 B사감에게 메뉴판을 내민다.
B사감은 어떤 음료를 주문할까?

&lt;img src=&quot;./images/X10.jpeg&quot; width=800, height=600&gt;

[[홍차 -&gt; X7 쏟아지는 찻잔]]
[[커피 -&gt; X8 인형의 집2]]

&lt;style&gt;
	img {
		display: block; 
		margin: 0px auto;
	}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="59" name=" X11_홍차와 커피2" tags="" position="1764,1193" size="100,100">영희가 아무 말 없이 B사감을 빤히 바라보자 B사감은 의아한 눈으로 그녀를 쳐다본다.
퍼뜩 정신을 차린 영희는 B사감에게 인사를 건넨다.

&quot;선생님, 어서 오세요. 오시지 않을까 걱정했습니다.&quot;

&quot;일단 얘기를 들어보지. 파혼하려는 이유를 먼저 얘기해봐. 합당하다면 돕도록 하마.&quot;

&quot;앉으시지도 않고 뭐가 그리 급하십니까. 우선 좀 앉으셔서 음료라도 드시죠.&quot;

영희가 B사감에게 메뉴판을 내민다.
B사감은 어떤 음료를 주문할까?






[[홍차 -&gt; X7 쏟아지는 찻잔]]
[[커피 -&gt; X8 인형의 집2]]</tw-passagedata><tw-passagedata pid="60" name=" X12_저녁 산책" tags="" position="2051,1671" size="100,100">어느새 해질녘이다. 식사 후 경복궁 앞으로 산책을 간 둘은 기숙사로 돌아갈 시간이 다가오자 아쉬움을 느낀다. 

&quot;이제 그만 기숙사로 돌아가야겠지요?&quot; 

&quot;그래, 벌써 시간이 이렇게 되었구나.&quot;

시간 가는 줄 모르고 영희와의 하루를 보낸 B사감은 그제서야 오늘 만남의 목적을 기억해낸다. 잠시 망설이던 B사감은 영희에게 긴장되는 목소리로 말한다.

&quot;…정혜와 내 관계에 대해 어떻게 알았는지 모르겠지만, 아마 네 짐작이 맞을 거다. 만약 우리가 세간에 알려진 것보다 진지한 사이였다는 것이 밝혀진다면 그애에게도 나에게도 쉽지 않은 상황이 벌어질 테지.&quot;

&quot;두 분을 곤란케 하려는 의도는 추호도 없습니다. 그저, 이런 이야기라도 없으면 선생님께서 제 말을 들어주시지 않을까봐 두려웠어요. 저를 더이상 믿지 못 하시겠다 해도 변명의 여지가 없지만요.&quot;

&quot;글쎄…. 근거는 없지만 네 말에 신뢰가 가는구나. 네 말이 진심이기를 원하는 내 바람 때문일지는 몰라도. 정혜와 내 이야기는 제쳐 두고, 우선은 네 사연을 들어보고 싶다, 영희야.&quot;

자신을 곧은 눈으로 바라보는 B사감. 항상 다른 이들을 그런 눈빛으로 쳐다보았던 영희지만 정작 자신이 그 시선의 대상이 되자 낯설고 어색하다. B사감을 마주 바라보던 영희는 어느새 자신이 숨을 멈추고 있다는 사실을 깨닫는다. 오후 내내 함께 있었음에도 어째서 갑자기 B사감의 앞에 서 있다는 것이 이토록 긴장되는 것일까. 그녀가 옆에 있다는 사실조차 신경 쓰이기 시작한다. 

B사감의 머리카락이 바람에 흩날려 얼굴을 간지럽히지만 피해야겠다는 생각조차 들지 않는다. B사감에게라면 비밀을 말해도 괜찮을 것 같다는 생각이 들기 시작한다. 아직 8시도 되지 않았건만 어느새 하늘은 어두워지고 안국동 네거리의 불빛이 유난히 아름답다.



&lt;img src=&quot;./images/X12.JPG&quot; width=800, height=600&gt;






[[다음 페이지 -&gt; X14_기숙사 앞에서]]</tw-passagedata><tw-passagedata pid="61" name=" X13 인형의 집1" tags="" position="1482,1615" size="100,100">어색함을 느끼던 영희가 먼저 말을 꺼낸다.

&quot;아참, 선생님. 요즘 유행하는 &lt;인형의 집&gt; 연극을 보셨습니까? 나혜석 씨가 그렇게 호평을 했다던데요.&quot;

&quot;응. 초대권을 받아서 초연을 보러 갔지. 혜석이도 내 바로 뒷자리에 있었어.&quot;

&quot;저도 초연날 다녀왔습니다. 선생님과 닮은 분을 보았는데 아마 선생님이 맞으셨나봐요. 연극은 어떠셨나요?&quot;

&quot;다들 극찬하더구나.&quot;

&quot;선생님께서는 그다지 재미가 없으셨나 봅니다.&quot;

&quot;글쎄, 나는 &lt;인형의 집&gt;을 볼 때마다 결말에 의문이 들어서 말이야…. &lt;인형의 집&gt;을 쓴 헨릭 입센은 가정의 속박에서 벗어나 자유를 찾는 여성을 그리고 싶었다지? 하지만 노라가 아무 직업도 없이 맨몸으로 사회에 나간 것을 정말 자유라고 말할 수 있을까?&quot;

&quot;그렇지요. 더군다나 노라는 아무런 교육도 받지 못 하고 오로지 가정의 주부가 될 여자로 키워진 인물이니까요.&quot;






[[다음 페이지 -&gt; X9 B사감의 진심]]</tw-passagedata><tw-passagedata pid="62" name=" X14_기숙사 앞에서" tags="" position="2059,1816" size="100,100">학교 정문 앞에 선 두 사람. 머뭇거리던 영희가 B사감을 담벼락 옆으로 끌고 간다. 한층 가까워진 탓에 영희의 상쾌한 향기가 느껴진다.

&quot;선생님, 들어가기 전에 말씀드릴 것이 있습니다.&quot; 

영희가 조심스레 말을 꺼낸다.

아까 질문에 대한 대답일까? 영희가 갑자기 입을 다무는 바람에 두 사람의 대화는 그대로 멈추고 말았었다. 학교에 올 때까지 두 사람은 간간히 옅은 한숨만 내쉴 뿐 아무 말도 하지 않고 걸었던 것이다. B사감은 긴장된 마음을 숨기고 평소와 다름 없는 표정으로 영희의 말을 기다린다.  

&quot;&lt;인형의 집&gt; 초연날 함께 계셨던 친우분이 누굽니까?&quot;

영희의 뜬금 없는 질문에 잔뜩 긴장하고 있던 B사감은 맥이 쭉 빠진다. 






[[다음 페이지 -&gt; X15 이탁이 누구예요?]]</tw-passagedata><tw-passagedata pid="63" name=" X15 이탁이 누구예요?" tags="" position="2061,1969" size="100,100">&quot;하하! 물어본다는 게 그거였니? 이탁이라는 친구다. 예전에 다니던 연극 모임에서 만났지. 허우대는 멀쩡한데 아주 웃기는 사람이야. 이탁한테 관심이 있는 건가? 원한다면 소개해주마.&quot;

B사감의 눈치 없는 대답에 영희의 기분은 언짢아진다.

&quot;그런 게 아.닙.니.다.&quot;

B사감은 갑자기 화난 듯 보이는 영희의 감정 변화를 전혀 이해하지 못하고 눈동자만 굴린다. 

&#39;내가 무슨 실수를 했나?&#39;

&quot;이만 들어가보겠습니다! 선생님도 피곤하실 텐데 어서 들어가보시지요.&quot;

영희는 급히 인사를 건네곤 들어가버린다. 영희를 붙잡으려던 손이 민망하게 공중에 멈춰 있다. 그녀의 뒷모습을 멍하니 보며 B사감은 생각한다. 

&#39;그래서 파혼은 왜 한다는 건데? 이유는 알려줘야지!&#39;






[[다음 페이지 -&gt; X16 다음날 학교에서]]</tw-passagedata><tw-passagedata pid="64" name=" X16 다음날 학교에서" tags="" position="2061,2116" size="100,100">&lt;audio src=&quot;./sounds/X16.wav&quot; type=&quot;audio/wav&quot; autoplay=&quot;true&quot; hidden=&quot;true&quot;&gt;&quot;&lt;/audio&gt;
월요일 아침 무화여학교.

B사감은 여느 때와 다름 없이 흰 블라우스의 단추를 목까지 채우고 잔머리 한올 없이 머리를 바짝 올려 묶은 모습이다. 그녀는 은빛 안경테 너머로 복도 끝에서 동무들과 이야기 중인 영희를 바라보고 있다. 

영희는 동무들과 팔짱을 끼고 화기애애하게 이야기를 나누고 있다. 

&quot;영희야 우리가 지난 금요일에 뭘 봤는지 아니? 그 동안 입이 근질거려서 혼났다.&quot;

&quot;뭘 봤는데?&quot;

&quot;아니 글쎄 B선생이 말이야, 밤마다 사감실에서 몰래…. 아휴 망측해서 난 말 못하겠다. 범례야 네가 대신 말해줄래?&quot;

&quot;일 없다. 나는 왠지 선생님이 안쓰럽더구나. 혼자 그러시는 모습을 보니 눈물까지 나더라.&quot;

&quot;안쓰럽기는! 우리 앞으로 온 러브레터는 망설이지도 않고 그 자리에서 찢던 사람이 정작 자기는 밤마다 그런 짓을 벌이고 있었다는 게 말이나 되니. 나는 웃음을 참느라 혼났다.&quot;

그때 옆에서 잠자코 듣던 경희가 동무의 옆구리를 툭툭 친다. 

&quot;얘, 그만 말하렴. B선생님 오신다.&quot;






[[다음 페이지 -&gt; X17 경호의 난동]]</tw-passagedata><tw-passagedata pid="65" name=" X17 경호의 난동" tags="" position="2066,2255" size="100,100">어느새 바로 옆까지 다가온 B사감이 서늘한 눈빛으로 학생들을 응시하고 있다.

&quot;정숙. 너희들은 어쩜 매일같이 그리 할 얘기가 많은지 모르겠다.&quot;

학생들은 B사감이 자기들 말을 들은 건 아닌지 눈치를 살핀다. 하지만 B사감은 평소에도 눈살을 찌푸리며 화나 있는 듯한 표정이라 구분하기가 여간 어려운 것이 아니다.

그때 방금 B사감이 걸어온 복도 끝에서 웅성거리는 소리가 들린다.

&quot;이영희!!!! 어디 있냐!!! 어서 나와!!!&quot;

&quot;아니, 이 학생은 글쎄, 남학생은 출입할 수 없다는데도 막무가내네. 학생 얼른 돌아가.&quot;

남학생의 앳된 목소리와 그를 말리는 수위 한진권의 목소리가 무화여학교의 복도에 울려퍼진다.

&quot;어머 영희야, 이거 경호 학생 목소리가 아니니?&quot;

범례의 물음에 영희의 얼굴이 하얗게 질린다. 






[[다음 페이지 -&gt; X18 B사감의 추궁]]</tw-passagedata><tw-passagedata pid="66" name=" X18 B사감의 추궁" tags="" position="2066,2410" size="100,100">&quot;경호가 누구지?&quot;

B사감이 영희에게 차가운 목소리로 묻는다.

&quot;보성전문학교의 김경호 군이어요.&quot;

&quot;보성의 학생들은 해마다 거르지 않고 난동을 부리는군. 거기 학생이 왜 너를 찾지?&quot;

&quot;…&quot;

&quot;네 정인인가? 졸업하기 전까지 연애는 안 된다고 누누히 말했건만.&quot; 

B사감이 작게 쯧, 혀차는 소리에 영희는 분한 듯 고개를 숙이고 입술을 깨물 뿐 아무 대답도 하지 않는다. 보다 못한 범례가 동무 대신 항변한다.

&quot;그게 아니에요, 선생님! 영희는 김경호 군에게 아무 마음도 없습니다. 영희는 오라버니 심부름으로 경호 군에게 몇번 책을 가져다 주었을 뿐인데 경호 군이 멋대로 오해한 것입니다. 영희가 몇번이고 거절했는데도 경호 군이 매일같이 학교에 러브레터를 보내온 것입니다. 선생님이 며칠 전에 찢은 편지도 경호 군에게서 온 것이에요.&quot;






[[다음 페이지 -&gt; X19 김경호 vs. 수위 한진권]]</tw-passagedata><tw-passagedata pid="67" name=" X19 김경호 vs. 수위 한진권" tags="" position="2066,2560" size="100,100">&quot;이쪽이 거절 의사를 내비쳤으면 마음을 접어야지, 어째서 학교까지 찾아와 저 소란을 피우는 건지…. 영희 네가 답해봐라.&quot;

&quot;그게… 어디서 제가 요스마 군과 정혼했다는 소식을 듣고는 제게 진실한 사랑을 저버린 매국노라며 날뜁니다. 하루는 사랑을 속삭이는 편지를 보내고 하루는 또 입에 담기 어려운 말로 저를 원망하는 편지를 보내왔습니다. 제가 편지에 답하지 않으니 학교까지 찾아왔나 봅니다.&quot; 

&quot;하….&quot; 

B사감이 깊은 한숨을 쉬며 이마를 짚는다. 

소란이 일어난 곳을 돌아보니 여전히 김경호와 수위 한진권이 실랑이 중이고 그 주위를 여학생들이 에워싸고 있다. 

그때 김경호가 휘두른 팔에 한진권이 힘 없이 나동그라진다. 유일한 방해물을 손쉽게 해치운 김경호는 구경하려 몰려 있는 여학생들을 밀치며 망설임 없이 영희에게 다가간다. 

어느새 영희의 앞까지 당도한 경호. 
연인이었던 영희가 자신을 배신한 일은 전부 경호의 머릿속에서만 있었던 왜곡에 불과했지만, 착각 속에 빠진 그는 앞뒤 가리지 않고 기세등등하게 영희에게 다가온다. 

영희는 경호를 피하지 않고 당당히 그를 마주본다. 그러나 경호의 억센 손이 영희의 눈 앞까지 오자 그만 눈을 질끈 감아 버린다.

바로 그 순간, 곳곳에서 비명소리가 들려온다.






[[다음 페이지 -&gt; X20 B사감의 제압]]</tw-passagedata><tw-passagedata pid="68" name=" X20 B사감의 제압" tags="" position="2068,2710" size="100,100">&lt;audio src=&quot;./sounds/X20.m4a&quot; type=&quot;audio/mp3&quot; autoplay=&quot;true&quot; hidden=&quot;true&quot;&gt;&lt;/audio&gt;
눈을 질끈 감았던 영희는 쿵 소리에 놀라 살며시 눈을 뜨고 주위를 둘러본다.
영희의 눈 앞에 펼쳐진 광경은, 뜻밖에도 바닥에 나동그라져 있는 경호다.

&quot;얘, 영희야 너 보았니? 방금 B선생님께서 저이를 쓰러트렸어!&quot;

&quot;응? 그, 그게 무슨 말이니?&quot; 이 모든 상황이 얼떨떨한 영희는 평소답지 않게 말까지 더듬으며 범례에게 반문한다.

&quot;경호 군이 너에게 덤벼드는 것을 B선생님이 보시곤 그이 팔을 붙잡더니 순식간에 등 뒤로 넘겨버리시더라! 저이는 맥없이 넘어져서 저 꼴이야. 선생님이 그렇게 재빠르신 모습은 처음 보았다.&quot;

영희는 모든 것이 이해되지 않는다는 듯 아무 말이 없다. 범례는 평소와 다른 영희의 모습을 눈치채지 못하고 옆에 있는 여학생 무리로 재빨리 옮겨간다. 방금 전까지 B사감이 안쓰럽다며 울상을 하던 범례는 어느새 B사감의 열렬한 지지자가 되어서 그녀의 무용담을 신나게 말하고 있다.

다리에 힘이 풀려 복도에 풀썩 주저 앉은 영희는 B사감을 바라본다.
B사감은 이 소란과 아무 상관 없는 사람인 양 침착하게 제 할 일을 할 뿐이다. 복도에 나뒹군 후 아픔보다도 수치와 굴욕 때문에 얼굴을 들지 못하던 김경호를 일으켜 세우고 수위 한진권에게 넘긴다. 한진권은 절뚝거리며 다가와 얌전해진 김경호를 데리고 학교 밖으로 인도한다. 






[[다음 페이지 -&gt; X21 영희의 고백]]</tw-passagedata><tw-passagedata pid="69" name=" X21 영희의 고백" tags="" position="2066,2859" size="100,100">상황이 일단락되자 B사감은 영희에게 다가온다.
B사감은 주저앉은 영희를 안아 일으켜 세우려 한다. 그러나 영희는 몸을 일으킬 생각이 없는 듯 가만히 멈춰있다. 

&quot;괜찮니?&quot;

B사감의 걱정스러운 목소리가 영희의 귀에 당도한다. 괜찮냐는 질문은 부적절하다. B사감이 다가오자 어지럽던 영희의 마음이 어느새 차분해져 있기 때문이다. 그녀의 단정한 이마 위 몇가닥 삐져나온 잔머리까지 보일 정도로 B사감이 가깝다. 잔머리 하나도 용서치 않을 듯 엄격하게 머리를 틀어올린 B사감이었으나 경호와의 몸싸움 때문에 머리가 조금 흐트러졌으리라. 지난 밤 그녀의 머리카락에서 맡았던 향기가 다시 느껴지는 듯한 착각이 든다. 

영희는 눈을 감고 B사감의 하얀 귀에 속삭이듯 말한다.

&quot;선생님 저와 경호 군은 아무 관계도 아닙니다. 저는, 남성을 사랑하지 않습니다. 제 말을 믿어주시겠습니까?&quot;

B사감은 놀란 눈으로 영희를 바라본다. 영희는 흔들림 없이 곧고 정한 눈으로 B사감을 마주 바라본다.

이 순간 동요한 이가 있다면 그것은 영희가 아니라 B사감이었을 것이다.






[[다음 페이지 -&gt; X22 B사감의 고뇌]]</tw-passagedata><tw-passagedata pid="70" name=" X22 B사감의 고뇌" tags="" position="2066,3009" size="100,100">B사감은 영희의 말을 들은 사람이 없는지 황급히 주변을 돌아본다. 다행히 학생들은 방금 일어난 사건을 떠들기 바빠 영희와 B사감에게 눈길을 두고 있지 않다. 다시 고개를 돌리니 어느새 영희는 혼자 일어나 아무 일도 없었다는 표정으로 치마를 툭툭 털고 있다. 

&quot;선생님 저 오늘은 몸이 좋지 않은데 제 방에 들어가서 쉬어도 될까요?&quot;

&quot;그래, 그러는 게 좋겠다. 내가 데려다주마.&quot; 

B사감은 얼떨떨한 표정을 지으면서도 누구보다 침착한 목소리로 대답한다. 

학교 건물에서 벗어나 기숙사 건물에 들어선 두 사람.
아무도 없는 기숙사 건물은 쥐죽은 듯이 고요하다. 아까의 소란은 마치 모두 거짓 같다. 

두 사람은 말없이 영희의 방을 향해 걷고만 있다. 적막한 기숙사에는 두 사람의 발걸음 소리만 들려온다.

영희를 방에 데려다주고 B사감 자신도 사감실로 돌아온다. 이토록 머리가 어지러운 날 수업이 없다는 것은 행운일까, 불행일까. B사감은 책상 의자에 걸터 앉아 또 다시 깊은 한숨을 내쉰다. 





[[다음 페이지 -&gt; X23 B사감의 선택]]</tw-passagedata><tw-passagedata pid="71" name=" X23 B사감의 선택" tags="" position="2068,3166" size="100,100">&lt;audio src=&quot;./sounds/X23.wav&quot; type=&quot;audio/wav&quot; autoplay=&quot;true&quot; hidden=&quot;true&quot;&gt;&lt;/audio&gt;
정신 없이 하루가 지나 어느새 풀벌레 우는 밤이 찾아온다. 벌써 한참의 시간이 흘렀지만 여전히 B사감은 아침의 일에 대해 생각하고 있었다.

&#39;남성을 사랑하지 않는다는 게 무슨 말이지? 그러니까 여자를 좋아한다는 말인가…. 그래서 나에게 파혼을 도와달라 한 건가? 왜 하필 나에게 그런 부탁을 했지? 내가 자신과 동류라고 생각했기 때문인가.&#39;

&#39;파혼을 도와주면… 그 후엔?&#39;

&#39;그 아이가 나에게 바라는 게 무엇이지?&#39;

온갖 생각에 머리가 어지럽던 B사감의 시선 끝에 흰 편지 봉투가 들어온다. 겉봉에는 정갈한 글씨로 //&#39;B에게&#39;// 라는 글자가 쓰여있고 보낸 이는 적혀 있지 않다.

B사감은 손을 뻗어 책상 한켠에 치워둔 편지를 집는다. 망설임 끝에 봉투에서 편지를 꺼내든다. 

//&quot;…나는 너의 조그만 입이 좋고, 목덜미가 좋고, 뽀이얀 볼도 좋았다. 나는 네게 결코 현명한 벗은 되지 못 했으나 우리는 별과 같이 즐거웠더랬지. 너와 더불어 즐거웠던 순간을 무덤 속에 간들 잊을 수 있을까. 도저히 너를 잊을 수 없는 나는, 이제 너를 떠나는 슬픔을 얼마든지 참으려 한다. 이런 나를 너는 나무라지도 미워하지도 않는구나. 이해 없는 세상에 너만은, 나를 알아다오.&quot; //      (*지하련이 최정희에게 보낸 편지 각색)
 
“…함께 떠나잘 때는 언제고. 그리 갔으면 잘 살기나 하지.”

창은 굳게 닫혀 있었지만 B사감의 얼굴에 여름의 밤바람이 나부끼는 듯했다.
B사감은 편지를 접어 서랍에 넣어두고 눈을 감는다.

한참동안 생각에 빠져 있던 B사감이 무언가 결심한 듯 눈을 뜬다.






B사감의 선택은?
[[영희의 방으로 찾아간다. -&gt; X24 영희의 방]]
[[영희에 대한 고민은 잠시 접어두고, 이탁과 함께 극단 합평회에 간다. -&gt; X101 오랜만에 만난 이탁]] 
[[학교 강당에 내려간다. -&gt; X201 학교 강당에서 작전 회의 (액션루트 W15 변형)]]</tw-passagedata><tw-passagedata pid="72" name=" X24 영희의 방" tags="" position="2212,3332" size="100,100">B사감은 결심한 듯 조용히 사감실에서 나온다. 

복도에는 아무도 없지만 방 안에서 저들끼리 떠드는 소리가 들린다. 낮의 조용했던 기숙사와는 전혀 다른 곳인 것만 같다. 가끔씩 이미 불을 끄고 잠자리에 든 방도 있다. 

힘든 하루였으니 영희도 벌써 잠에 들었을까? 아니면 동무들과 오늘 있었던 일로 이야기꽃을 피우고 있을지도 모르겠다. 

영희가 다른 학생들과 함께 있다면, B사감은 영희의 안부만 묻고 다시 사감실로 돌아올 계획이다. 하지만 만약 영희 혼자 방에 있다면 그땐 어찌해야 할까. 거기까지는 계획을 세우지 못했다.

똑똑.
B사감이 조심히 영희의 방문을 두드린다. 방에서는 아무 소리도 들리지 않는다.

달칵. 불을 켜는 소리와 함께 방 안쪽에서 영희의 목소리가 들린다.

&quot;누구세요?&quot;

&quot;…나다.&quot;

문이 열리면서 천천히 영희의 얼굴이 나타난다.

&quot;선생님, 들어오세요. 마침 아무도 없습니다.&quot;

&quot;흠, 다들 어딜 간 거지? 모두 벌점 받을 각오하라고 전해라.&quot;

영희는 B사감의 거짓 엄포에 걱정하는 기색도 없이 빙그레 웃으며 B사감에게 의자를 권한다.






[[다음 페이지 -&gt; X25 영희의 선택]]</tw-passagedata><tw-passagedata pid="73" name=" X101 오랜만에 만난 이탁" tags="" position="1923,3328" size="100,100">긴 고민 끝에 참석하기로 결정한 합평회였으나, 결과는 대실패였다. 항상 어디로 튈지 모르는 이탁이 이번에는 여학생들의 사랑 이야기를 극본으로 써왔던 것이다. B사감은 이탁의 이야기를 들으며 이상하리만치 설렜지만, 그녀를 제외한 회원 모두가 이탁을 야유했다. 그들의 야유가 마치 자신을 향한 비난같이 느껴져 뒷맛이 씁쓸했다. 작가 본인보다 더 풀이 죽은 채 기숙사로 돌아가려는 B사감을 누군가 뒤따라온다. 

&quot;B, 왜 이리 기가 죽었는가. 누가 보면 오늘 욕 먹은 글이 자네 작품인 줄 알겠네.&quot;

&quot;이 군, 자네는 속도 좋은 친굴세. 어떻게 그 조롱에 가까운 비판을 사람 좋은 웃음 지어가며 들을 수 있는 건가?&quot;

&quot;글쎄, 비결이 궁금한가? 가는 길에 알려줌세! 학교로 돌아가는 길이지?&quot;

&quot;흠 비결이랄 게 따로 있겠는가? 그냥 웃어 넘기고 마는 거겠지. 자네 마음이 제일 속상할 텐데 날 위로한답시고 흰소리 늘어놓을 필요 없네. 오랜만에 만났으니 가는 길에 담소나 나누자고.&quot; 






[[이탁과 함께 경성의 밤거리를 걷는다. -&gt;Y16]]</tw-passagedata><tw-passagedata pid="74" name=" X201 학교 강당에서 작전 회의 (액션루트 W15 변형)" tags="" position="2067,3327" size="100,100">고요한 밤, 학교 강당 아래쪽에 난 작은 창문으로 미세한 불빛이 흘러나온다. 

보일락 말락한 등불에 의지해 남자 두 명과 여성 한 명이 탁자 위에 놓인 무언가를 자세히 보고 있다. 여성들만 출입 가능한 무화여학교 강당에 외간 남자라니 놀랄 만한 일이다. 이들 중 덥수룩한 수염 위로 날카로운 눈빛을 뿜는 한 남성이 입을 연다.

&quot;오전 11시요. 주례를 설 목사도 이미 결정되었다고 하오.&quot;

&quot;이 지도가 확실합니까? 틀림없어야 합니다!&quot;

&quot;틀림없소. 탈출로도 이미 확보하였소. 걱정마시게. 그보다는……?&quot;

두 남성은 동시에 B사감을 쳐다본다. 
B사감은 희미한 웃음을 지으며, 말없이 고개를 끄덕인다. 

이들은 독립 비밀 결사조직의 의협단원인 김강과 박석주였다. 암살과 테러를 전문으로 하는 의협단원들은 부산경찰서 폭파사건에이어 조선총독부 청사 폭파 의거까지 성공시키면서 명성이 높아지고 었었다. 그만큼 의협단을 잡으려는 일제의 탄압도 심해져 위장과 잠복이 필수였다. 특히 이번 거사에 B사감을 무화여학교에 잠입시킨 것은 작전의 핵심 전략이었다.






[[다음 페이지-&gt;X202 의협단원들 (W16 변형)]]</tw-passagedata><tw-passagedata pid="75" name=" X25 영희의 선택" tags="" position="2206,3468" size="100,100">&quot;네 말을 듣고 많이 고민했다. 묻고 싶은 것이 참 많더구나. 지금부터 하는 얘기에 부디 노여워하지 말아다오.&quot;

잠시 숨을 고르고 B사감은 말을 계속한다.

&quot;잠깐의 들뜸이 아니라, 진정 여성을 사랑한다고 확신하니? 네 나이 때는 많이들 착각한다는 그런 고루한 얘기를 반복하고 싶지는 않아. 하지만 네가 네 선택을 후회하지 않을 만큼의 확신을 갖고 있는지 먼저 확인할 필요가 있구나.&quot;

&quot;글쎄요, 선생님. 얼마만큼 확실해야 확신이라고 답할 수 있을까요? 선생님은 어떠세요? 여전히 옛 선택을 후회하지 않으시나요?&quot;

쓸쓸한 웃음을 지어 보이는 영희의 얼굴 위로 누군가의 표정이 겹쳐 보인다. 
하지만 B사감은 준비해 온 조언을 건네야만 한다. 그것이 비록 그녀가 경멸하는 말일지라도.

&quot;너는… 아직 어려서 모르겠지만 세상을 거스르며 살아가는 건 결코 자유로운 일이 아니란다. 모두가 비난하고 외면하는 길을 선택할 때, 그 선택이 고귀하고 가치 있는 것처럼 느껴질 테지만 사실 그렇지 않아. 네가 가장 원하는 것이라며 선택한 길이 평생 널 괴롭히고 짓밟을 거야. 그런 삶은 결코 자유롭지 않아, 영희야.&quot;

&quot;선생님은 그럼 제가 어떤 선택을 하길 바라시나요?&quot;

&quot;부모가 정해준 요스마 군과 결혼해. 아주 잠시만 너를 속이면 그 후론 모든 것이 평안할 거다. 너도 결국 깨달을 거야, 결국 제 한몸 편한 것이야 말로 가장 큰 자유라는 것을.&quot;

B사감의 말을 듣던 영희가 절망스러운 표정을 짓는다. 이내 눈을 감고 고개를 가로젓는다. 

혹시 영희라면 정혜와는 다른 선택을 할까? 

B사감은 또 다시 누군가에게 상처받고 싶지 않았다. 차라리 누구에게도 기대하지 않는 삶을 살겠노라 결심했고 또 그 결심을 착실히 이행해왔다. 하지만 이 어린 소녀 앞에서 과거의 결심이 귀퉁이부터 조금씩 무너진다. 억누를 수 없는 기대감이 스멀스멀 차오른다. 

&quot;그렇다면 마지막으로 묻고 싶은 게 있다. 신중히 고민하고 답해주렴…. 나와 함께 떠나겠니?&quot;

줄곧 체념한듯 대답하던 영희가 의외의 말에 놀라 눈을 크게 뜨고 B사감을 쳐다본다. 드디어 B사감이 아닌, 영희가 선택해야 할 차례이다.






영희는…
[[함께 떠나겠다고 답한다. -&gt; X500 사라진 신부]]
[[그럴 수 없다고 거절한다. -&gt; X26 그날 밤]]</tw-passagedata><tw-passagedata pid="76" name=" X500 사라진 신부" tags="" position="2138,3622" size="100,100">어느새 영희의 결혼식 날 아침이다.

두 사람의 결혼이 이뤄지는 정동 교회 주변은 이미 차들로 가득찼다. 양복을 입은 하객들부터 한복을 입은 하객, 기모노를 입은 하객들까지 다양하게 모여 있다. 하객들 사이에 숨어 있는 경찰들이 예리한 눈초리로 주변을 살핀다. 결혼식장에 들어서는 모든 사람은 한명씩 검문소를 지나야 한다. 삼엄한 경계와 다르게 결혼식장은 화려한 꽃과 샹들리에로 장식되어있다.  

음악이 울리고 신랑이 입장한다. 
신랑은 검은 연미복을 입은 요스마다. 요스마의 얼굴 표정은 무언가 모르게 긴장되어 있다. 

잠시후 음악이 울리지만 신부는 나타나지 않는다. 하객들은 웅성거리고 신부 측 부모는 사색이 된 채 이 장면을 외면한다. 






[[다음 페이지 -&gt; X501 수군거리는 하객들]]</tw-passagedata><tw-passagedata pid="77" name=" X26 그날 밤" tags="" position="2292,3622" size="100,100">&lt;audio src=&quot;./sounds/X26.mp3&quot; type=&quot;audio/mp3&quot; autoplay=&quot;true&quot; hidden=&quot;true&quot;&gt;&lt;/audio&gt;
영희의 대답이 끝나기도 전에 B사감의 얼굴에는 그럴 줄 알았다는 체념의 빛이 스쳐간다. B사감은 입가에 연신 미소를 띄우지만 씁쓸한 눈빛까지 지울 수는 없는 듯하다.

&quot;그래, 잘 알았다. 곤란한 질문이었을 텐데 답해줘서 고맙구나. 이만 가보도록 할게.&quot;

&quot;선생님, 가지 마세요.&quot;

영희가 방을 떠나려는 B사감에게 다가가 조심스레 손목을 잡는다. B사감이 망설이는 동안 영희는 문을 다시 닫는다. 

모두가 잠든 시간, 기숙사는 적막하다. 

B사감에게 조용히 다가가는 영희. B사감의 뺨에 있는 솜털까지 보일 정도로 가까워진다. 귓볼에서 목으로 이어지는 선을 가만히 바라보다 손가락으로 살짝 쓸어본다. 그런 영희를 숨죽인 채 바라보고 있는 B사감. 영희는 문득 그녀의 검은 머리카락이 다시 보고 싶다고 생각한다.

머리끈을 풀자 단정하게 틀어올린 B사감의 머리가 이내 검게 물결친다. 영희는 그녀의 머리카락을 매만지다 B사감의 입술에 자신의 입술을 포갠다. B사감은 눈을 감는다.



&lt;img src=&quot;./images/X26.JPG&quot; width=800, height=600&gt;



하지만 그날 밤, 달라진 것은 아무것도 없었다.






[[다음 페이지 -&gt; X27 영희의 결혼식]]</tw-passagedata><tw-passagedata pid="78" name="X202 의협단원들 (W16 변형)" tags="" position="1828,3474" size="200,100">의협단은 소문대로 명랑함과 심각함이 기묘하게 혼합된 집단이었다. 언제나 죽음을 눈앞에 두고 있다고 생각한 이들은 살아있는 한 자유로운 생활을 해야 한다는 사명감 비슷한 것이 있었다. B사감 또한 연극활동은 물론이요, 수영, 테니스, 승마와 같은 운동을 통해 최상의 컨디션을 유지하였다. 매일 같이 저격 연습도 게을리하지 않았다. 

김강, 박석주, B사감이 꾸린 원 계획은 총독부 철도국장 오무라를 암살하는 것이었다. 그러나 오무라 국장의 차남이 김사장의 첫째 딸과 결혼한다는 소식을 접하고 거사를 수정하였다. 이제 곧 정동 교회는 신랑과 신부를 축하하러 온 일본의 각계 인사들이 참여할 것이다. 이들이 한 자리에 모인 것은 쉽지 않은 절호의 기회다. 

B사감은 확신이 없었다. 영희의 결혼식에 참석하는 것은 쉬운 일이었지만 자신의 역할을 수행할 수 있을지 자신이 없었다. 영희가 먼저 파혼을 도와달라며 자신을 찾아왔지만, 결혼식에서 신랑 아버지를 죽여달라는 의미는 결코 아니었을 테니까. 하지만 고민할 시간이 많이 남지 않았다.






[[영희의 결혼식으로. -&gt;X203 베일을 벗은 신부 (W30 변형)]]</tw-passagedata><tw-passagedata pid="79" name="X203 베일을 벗은 신부 (W30 변형)" tags="" position="1866,3960" size="100,100">화려한 결혼식장.

정동 교회로 들어서는 골목길은 차들로 가득찼다. 양복을 입은 하객들이 하나둘씩 모여든다. 하객들 사이에 숨어 있는 경찰들이 예리한 눈초리로 주변을 살핀다. 결혼식장에 들어서는 모든 사람은 한명씩 검문소를 지나야 한다. 무기 반입은 금지되었다. 삼엄한 경계와 다르게 결혼식장은 화려한 꽃과 샹들리에로 장식되어있다.  

음악이 울리고 신랑이 입장한다. 
신랑은 검은 연미복을 입은 요스마다. 요스마의 얼굴 표정은 무언가 모르게 긴장되어 있다. 

잠시후 음악과 함께 하얀 면사포를 둘러 쓴 신부가 입장한다. 
피아노 소리에 맞춰 긴 복도를 걸어오는 신부. 

요스마는 신부의 손을 건네받는다. 그리고 조심스럽게 그녀의 베일을 올린다. 
드러난 신부의 얼굴. 
그녀는 본 요스마는 알 수 없는 표정을 짓는다. 
그녀는 누구인가? 






[[영희-&gt; X204 신부 영희 (W401 변형)]]
[[B사감-&gt; X205 신부 B사감 (W402 변형)]]</tw-passagedata><tw-passagedata pid="80" name=" X204 신부 영희 (W401 변형)" tags="" position="1868,4121" size="100,100">영희는 요스마를 바라보며 조용히 웃는다.
주례자 앞에 선 요스마와 영희. 둘을 바라보는 하객들은 엄숙한 결혼 서약을 듣는다. 

주례를 맡은 신부는 요스마의 대답을 들은 후, 영희에게도 같은 질문을 한다. 

&quot;그대는 평생 결혼을 서약합니까?&quot;

&quot;……&quot;

영희는 망설인다. 이윽고 당차게 말한다.

&quot;아니요.&quot;

대답이 끝나기도 전에 영희는 요스마의 손을 떨치고 신부 들러리에게 달려간다.
그녀는 B사감이었다. 둘은 서로 응시하며 총을 꺼낸다. 






[[다음 페이지 -&gt;W50]]</tw-passagedata><tw-passagedata pid="81" name=" X205 신부 B사감 (W402 변형)" tags="" position="2054,3925" size="100,100">B사감은 요스마를 향해 조용히 미소를 짓는다.
그녀는 굳게 잡은 요스마의 손을 뿌리치고 햐얀 웨딩드레스 밑에서 총을 꺼낸다. 
그런 B사감을 바라보는 요스마의 표정은 체념한 듯 차분하다. 

그녀가 처음 총을 겨눈 사람은 총독부 철도국장 오무라다. 단 한치의 망설임 없이 총알은 그의 가슴에 박혔다. 소란이 일어나자마자 급하게 도망가던 관료에게 쏜살같이 달려가 그를 죽인 후 요스마를 인질로 삼는다. 

피범벅이 된 웨딩드레스와 한손에 권총을 든 신부. 

모두들 어리둥절한 가운데 그녀는 결혼식장을 빠져나간다. 







[[다음 페이지-&gt;X206 결혼식과 추격전]]</tw-passagedata><tw-passagedata pid="82" name="X206 결혼식과 추격전" tags="" position="2113,4143" size="100,100">결혼식장에 모인 사람들은 무슨 일이 벌어진 건지 이해하지 못하겠다는 표정으로 멍하니 그들을 쳐다본다. 어리둥절해하는 사람들을 뒤로 한 채 B사감은 영희와 함께 벌써 저만치 달려가고 있다.

유일하게 결혼식장 건물 앞에 서있던 수위 한진권이 그들을 허둥지둥 뒤쫓는다. 어설프게 따라오는 한진권을 B사감이 가볍게 제압한다.

&quot;아니, 한 수위 당신은 왜 우릴 쫓는 거요?&quot;

&quot;아악, 나도 모르게 본능적으로 그만…. B사감 아프오! 안 쫓아갈 테니 그만 놔주시게!&quot;

&quot;하하, 이 사람은 끝까지 싱겁구만. 잘 지내시게 한 수위! 가자, 영희야. 이제서야 사람들이 쫓아오기 시작하는구나.&quot;

B사감의 말대로 저멀리 몇몇 사람들이 뒤따라오기 시작한다. 신랑 요스마가 그 선두에 있다.
요스마는 그들을 향해 뛰어오며 소리친다.

&quot;영희씨, 행운을 빕니다! 나 대신 용기를 내주어서 고마워요!&quot;

요스마의 외침을 뒤로한 채 B사감과 영희는 계속해서 달린다. 영희의 흰 드레스 자락이 시원스레 바람에 휘날리고 두 사람의 웃음소리가 상쾌하게 울려 퍼진다. 



&lt;img src=&quot;./images/X30.JPG&quot; width=800, height=600&gt;



그날 밤 기차에 올라탄 두 사람. 어디로 향하는지는 아무도 알 수 없다.



-THE END-



&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="83" name=" X501 수군거리는 하객들" tags="" position="2133,3758" size="100,100">신부 측 하객으로 온 무화여학교의 교사들도 수군거리기 시작한다. 

&quot;세상에, 영희가 결혼식을 앞두고 사라졌다는 게 사실이었군요.&quot;

&quot;제 아버지에게 금방 붙잡힐 줄 알았는데 의외네요. 도대체 어디로 도망간 걸까요?&quot;

&quot;글쎄, 일찌감치 자퇴서를 내놓고 집에다가는 시집가기 전에 마지막으로 수업을 듣고 싶다고 말해서 시간을 벌었다고 하더군요. 벌써 5일 전에 영희와 인상착의가 비슷한 여학생이 부산행 기차를 탔다고 하더라고요. 지금쯤이면 이미 일본으로 건너가지 않았겠어요?&quot;

&quot;시아버지될 사람이 철도국장인데 기차를 타고 도망가다니, 얌전한 아이인줄로만 알았는데 참 맹랑하군요. 그건 그렇고, 자퇴서를 냈으면 바로 집에 연락이 갈 텐데 어째서 부모가 몰랐을까요? 정말 소문처럼 B사감이 그 애를 도와준 걸까요.&quot;

&quot;예…. 최마리아 교장이 이 일을 함구령에 붙였지만 역시 그렇지 않겠어요? 영희가 자퇴서를 낸지 얼마 후에 B사감도 갑자기 퇴직계를 제출한 이유가 뭐겠어요. 최 교장은 B사감을 후임으로까지 생각했던 것 같은데 아깝게 된 일이죠.&quot;

&quot;글쎄요. 최 교장이 B사감을 아낀 건 사실이지만 B사감은 이곳에 발을 붙이고 지낸다는 느낌이 없었는 걸요. 마치 어느날 갑자기 사라질 것만 같았죠. 영희와의 일은 의외지만 B사감이 떠나버린 건 전혀 놀랍지 않아요.&quot;

…

같은 시간 동경행 기차 안. 교사들의 추측이 맞았을까. B사감과 영희처럼 보이는 두 사람이 손을 꼭 잡은 채 곤히 잠들어 있다.






[[Epilogue -&gt; X502 Epilogue 1]] </tw-passagedata><tw-passagedata pid="84" name=" X27 영희의 결혼식" tags="" position="2296,3760" size="100,100">영희는 결국 대답을 번복하지 않았다. 영희의 마음이 그러하다면 B사감이 더이상 무엇을 도와줄 수 있을까. 이럴 거면 왜 파혼을 도와달라고 부탁한 것인지, 그녀의 마음을 도저히 모르겠다. B사감은 자포자기의 심정으로 영희의 결혼식 날짜를 기다린다.

…

어느새 영희의 결혼식날 아침이다.

두 사람의 결혼이 이뤄지는 정동 교회 주변은 이미 차들로 가득찼다. 양복을 입은 하객들부터 한복을 입은 하객, 기모노를 입은 하객들까지 다양하게 모여 있다. 하객들 사이에 숨어 있는 경찰들이 예리한 눈초리로 주변을 살핀다. 결혼식장에 들어서는 모든 사람은 한명씩 검문소를 지나야 한다. 삼엄한 경계와 다르게 결혼식장은 화려한 꽃과 샹들리에로 장식되어있다.  

음악이 울리고 신랑이 입장한다. 
신랑은 검은 연미복을 입은 요스마다. 요스마의 얼굴 표정은 무언가 모르게 긴장되어 있다. 

잠시후 음악과 함께 하얀 면사포를 둘러 쓴 신부가 입장한다. 
피아노 소리에 맞춰 긴 복도를 걸어오는 신부. 

요스마는 신부의 손을 건네받는다. 그리고 조심스럽게 그녀의 베일을 올린다. 
드러난 신부의 얼굴. 
그녀는 본 요스마는 알 수 없는 표정을 짓는다. 
그녀는 누구인가? 






[[영희-&gt; X28 마지막 선택]]
[[B사감-&gt; X205 신부 B사감 (W402 변형)]]</tw-passagedata><tw-passagedata pid="85" name=" X28 마지막 선택" tags="" position="2529,3920" size="100,100">영희는 요스마를 바라보며 조용히 웃는다.
주례자 앞에 선 요스마와 영희. 둘을 바라보는 하객들은 엄숙한 결혼 서약을 듣는다. 

주례를 맡은 신부는 요스마의 대답을 들은 후, 영희에게도 같은 질문을 한다. 

&quot;그대는 평생 결혼을 서약합니까?&quot;

&quot;…&quot;

영희가 신부 서약에 대답하지 않고 침묵하자 주례가 다시 한번 묻는다.

&quot;결혼을 서약합니까?&quot;

그때 주례가 아닌 B사감을 돌아보는 영희.






B사감은 어떤 행동을 할까.
[[고개를 끄덕인다. -&gt; X29 결혼 서약]]
[[자리에서 일어선다. -&gt; X30 도망치는 신부]]</tw-passagedata><tw-passagedata pid="86" name=" X29 결혼 서약" tags="" position="2528,4072" size="100,100">&quot;신부, 대답하세요. 결혼을 서약합니까?&quot;

주례의 독촉에 영희는 마침내 고개를 끄덕인다. 

주례가 만족스럽게 웃으며 신성한 결혼이 성사됐음을 선포한다. 잠시 당황했던 하객들도 우레와 같은 박수를 보낸다. 

신랑신부를 축하하는 하객들 사이로 B사감은 조용히 사라진다.






[[다음 페이지 -&gt; X31 Epilogue 2]]</tw-passagedata><tw-passagedata pid="87" name=" X30 도망치는 신부" tags="" position="2389,3953" size="100,100">&lt;audio src=&quot;./sounds/X30.mp3&quot; type=&quot;audio/mp3&quot; autoplay=&quot;true&quot; hidden=&quot;true&quot;&gt;&lt;/audio&gt;
B사감은 벌떡 일어나서 영희 대신 &quot;아니오!&quot;라고 대답한다. 

모두가 자신을 바라보는 동안 영희에게 달려가 그녀의 손을 잡고 뛰쳐 나간다. 결혼식장에 모인 사람들은 무슨 일이 벌어진 건지 이해하지 못하겠다는 표정으로 멍하니 그들을 쳐다본다. 어리둥절해하는 사람들을 뒤로 한 채 두 사람은 벌써 저만치 달려가고 있다.

유일하게 결혼식장 건물 앞에 서있던 수위 한진권이 그들을 허둥지둥 뒤쫓는다. 어설프게 따라오는 한진권을 B사감이 가볍게 제압한다.

&quot;아니, 한 수위 당신은 왜 우릴 쫓는 거요?&quot;

&quot;아악, 나도 모르게 본능적으로 그만…. B사감 아프오! 안 쫓아갈 테니 그만 놔주시게!&quot;

&quot;하하, 이 사람은 끝까지 싱겁구만. 잘 지내시게 한 수위! 가자, 영희야. 이제서야 사람들이 쫓아오기 시작하는구나.&quot;

B사감의 말대로 저멀리 몇몇 사람들이 뒤따라오기 시작한다. 신랑 요스마가 그 선두에 있다.
요스마는 그들을 향해 뛰어오며 소리친다.

&quot;영희씨, 행운을 빕니다! 나 대신 용기를 내주어서 고마워요!&quot;

요스마의 외침을 뒤로한 채 B사감과 영희는 계속해서 달린다. 영희의 흰 드레스 자락이 시원스레 바람에 휘날리고 두 사람의 웃음소리가 상쾌하게 울려 퍼진다. 



&lt;img src=&quot;./images/X30.JPG&quot; width=800, height=600&gt;



그날 밤 기차에 올라탄 두 사람. 어디로 향하는지는 아무도 알 수 없다.






[[두 사람의 결말 -&gt; X502 Epilogue 1]] </tw-passagedata><tw-passagedata pid="88" name=" X31 Epilogue 2" tags="" position="2533,4208" size="100,100">영희의 결혼식이 끝나고 며칠 후, 다시 무화여학교.

B사감은 교장실의 문을 두드린다.

&quot;들어오세요.&quot;

들어서는 B사감을 보며 최마리아 교장이 환하게 웃는다.

&quot;B, 무슨 일인가요? 어서 들어와요.&quot;

B사감은 최 교장이 권하는 자리에 앉으며 흰 봉투를 내민다. 봉투 겉봉에는 정갈한 글씨로 &#39;퇴직원&#39;이라는 글씨가 쓰여 있다.

최 교장은 한쪽 눈썹을 올리더니 이내 한숨을 쉰다.

&quot;휴…. 결국 떠나는군요. 더 붙잡는 건 내 욕심이겠죠? 어디로 갈지는 정했나요?&quot;

&quot;불란서에 동향 출신의 친우가 있어서 그곳에 가보려 합니다. 그동안 보살펴주신 은혜 감사드립니다, 최 선생님.&quot;

&quot;제자들을 떠나보내는 건 이제 익숙해졌다고 생각했는데, 이번엔 유독 아쉽네요. B, 어디서든 행복하길 바래요. 내 도움이 필요하다면 언제든지 연락하고요.&quot;

&quot;항상 감사합니다, 선생님. 조선에 돌아오면 또 찾아뵙겠습니다. 그동안 건강하세요.&quot; 






[[다음 페이지 -&gt; X32 Epilogue 2]]</tw-passagedata><tw-passagedata pid="89" name=" X32 Epilogue 2" tags="" position="2538,4342" size="100,100">최 교장과 인사를 나눈 뒤 B사감은 짐을 챙기러 집으로 간다.

방에 들어가자 책상 위에는 B사감 앞으로 온 편지가 놓여 있다. 영희에게서 온 편지다. 

B사감은 가볍게 웃고는 혼잣말로 중얼거린다.

&quot;또 편지를 받고 말았네.&quot;

B사감은 잠시 편지를 바라보다 뜯지 않은 채 책상 서랍에 넣는다.

간소하게 챙겨둔 짐을 들고 가벼운 걸음으로 집을 나선다. 
오늘따라 햇빛이 따사롭고 바람은 상쾌하다. 앞으로 즐거운 일만 가득할 거라 기대하며 B사감은 힘차게 발걸음을 내딛는다.



&lt;img src=&quot;./images/X32.jpeg&quot; width=800, height=600&gt;




-THE END-



&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="90" name=" X502 Epilogue 1" tags="" position="2270,4090" size="100,100">2021년의 한국. 
1920년대 일본과 조선 여학생들에게 선풍적 인기를 끌었던 &#39;S소설&#39; &lt;그녀에게서 온 편지&gt;의 작가 요시모토 아이코가 조선인이었다는 연구가 발표된다. 아이코의 정체는 누구일까?



-THE END-



&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="91" name="Y2" tags="" position="90,660" size="100,100">B사감이 서점에 들어서자마자 알은체를 하던 남자.
그의 이름은 이탁이다.

극단 새 세상의 단원들은 남자가 대부분이며 모두 수려한 외모를 가지고 있다. 희곡을 읽고 비평을 하는 것뿐만 아니라, 직접 창작하거나 연기까지 하기 때문일까.

그중에서도 단연 눈에 띄는 이는 B사감과 이탁이다.

B사감은 거의 유일하다시피 한 여성 단원. 그런데다가 경성 거리를 돌아다니면 누구나 고개를 돌려 다시 쳐다볼 만큼 자유분방하면서도 매력적인 차림새를 하고 다닌다.

그런 B사감과 반대로, 이탁은 평범한 양복차림이다. 아니, 경성의 다른 모던보이들과 다르게 양복은 입긴 했지만 옷맵시에 전혀 신경을 쓰지 않은 티가 난다. 외양 역시 극단의 다른 수려한 외모를 지닌 이들과 비교했을 때 퍽 수더분한 인상이다.

안 어울릴 것 같은 두 사람이지만, 그렇기 때문에 더더욱 서로를 눈여겨보는 이들이다.

“오셨소.”

“오늘도 일찍 오셨군요.”

“예에, 그렇습니다.”

두 사람은 넉살 좋게 인사를 나눈다.






[[다음 페이지-&gt;Y6]]</tw-passagedata><tw-passagedata pid="92" name="Y3" tags="" position="1136,1164" size="100,100">&#39;새로 들어온 단원인가?&#39;

처음 보는 남자에게 호기심이 생긴 B사감은 그의 곁으로 가 앉는다. 그러나 그를 향해 주의를 기울이는 B사감과 다르게 남자는 B에게 전혀 관심을 보이지 않는다.

&quot;저, 안녕하십니까. 새 세상 단원이시지요?&quot;

&quot;아아, 그런데. 자넨 뭐지?&quot;

다짜고짜 B사감에게 반말을 던지는 남자. B의 미간에는 살풋 주름이 잡힌다.
딱 봐도 자신을 낮잡아 보는 그에게 화가 난 B사감은 팔짱을 끼고 대꾸한다.

&quot;뭐긴. 새 세상 단원이지.&quot;

꽤 위압감 넘치는 B사감의 말에 남자는 당황한 얼굴로 입술만 달싹일 뿐이다. B사감은 그를 위아래로 훑어본다.
그러나 언짢은 B사감의 기색을 보고도 남자는 사과하지 않는다. 오히려 B의 화를 더욱 지피는 말을 내뱉는다.

&quot;아녀자가 무슨 극을 하겠다고….&quot;

그의 말에 화가 난 B사감은 모임을 계속할 마음이 사라지는 것을 느낀다. 멀리서 B사감의 반응을 알아챈 극단의 단장이 달려와 중재하려 했지만, B는 단호하다.

&quot;형. 저 남자가 새 세상에 계속 나온다면 나는 여길 나오지 않겠소.&quot;

&quot;B, 걱정하지 말게. 저이는 오래 있지 않을 걸세. 우리로서도 저리 꽉 막힌 이보다야 B가 더 소중하니까. 오늘은 돌아가 화를 풀고, 다음 모임 때는 꼭 나오게.&quot;

단장의 말에 B사감은 고개를 끄덕인다. 학교로 다시 돌아가는 발걸음은 그리 가볍지만은 않다. 그렇지만 단장을 믿고 언젠가 다시 새 세상 모임을 가져야 겠다고 B사감은 생각한다.






[[다음 페이지-&gt;Y7]]</tw-passagedata><tw-passagedata pid="93" name="Y4" tags="" position="537,670" size="100,100">그의 이름은 오무라 요스마. 이번에 새로 부임한 총독부 철도국장 오무라의 아들이다.

그의 얼굴은 이미 사진에서 본 적이 있는 B사감은 조심스럽게 그의 곁에 앉는다.

&#39;왜 오무라 요스마가 여기에 있는 거지?&#39;

요스마 곁에 앉은 사람 덕분에 B사감의 궁금증은 금방 풀린다.

&quot;조선의 연극에 대해 관심이 많으시다고 해서 모셨는데…. 어떠십니까?&quot;

&quot;흠….여긴 내가 있을 곳이 아닌 것 같군.&quot;

초라한 서점 안을 둘러본 요스마가 결국 자리에서 일어난다. 요스마 곁에 있던 다른 이들까지 일어나면서 새 세상 단원들은 자리를 더 좁히려고 책상을 옮기기 시작한다.

요스마가 서점을 나서는 뒷모습을 보고 B사감은 생각한다.






[[요스마의 뒤를 따라간다.-&gt;Y400]]
[[요스마는 신경쓰지 말자. 아까 눈여겨 본 빈 자리로 간다.-&gt;Y5]]</tw-passagedata><tw-passagedata pid="94" name="Y5" tags="" position="345,406" size="100,100">B사감은 빈 자리를 향해 걸어간다. 그런데 주인이 없는 줄 알았던 그 자리에 한 남자가 다가온다.

&quot;아, 김 형의 자리였군요.&quot;

&quot;B, 오늘도 참석했군. 학교에서 뭐라 하진 않나?&quot;

&quot;그럭저럭 괜찮습니다.&quot;

그는 B사감에게 그다지 우호적이지 않는 극단 단원 중 한 명이다. B사감은 왠지 껄끄러운 마음이 들어 그의 옆에 앉지 않기로 한다.

대신, 서점에 들어섰을 때부터 우호적인 표정으로 자신에게 미소를 보내고 있던 남자를 떠올리고는 발걸음을 옮긴다.






[[다음 페이지-&gt;Y2]]

&lt;span class=&quot;save&quot;&gt;(link:&quot;저장하기&quot;)[(save-game:&quot;test&quot;)]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="95" name="Y6" tags="" position="272,831" size="100,100">&quot;오늘도 잘 오셨소, 동무들. 그간 잘 지내셨소이까?&quot;

한껏 잘 차려입은 남자가 한 명 한 명, 눈을 맞춰오며 인사를 건넨다. 그는 새 세상의 단장으로 모임을 이끈 지 벌써 1년이 넘는다.
B사감은 이탁의 옆에 앉아 극단 동인들과 인사를 나눈다. 개중에는 오늘 처음 보는 이들도 여럿 있다.

&quot;오늘은 단원들 중에 창작한 작품이 있으면 같이 읽고 토론하는 시간을 갖기로 했는데…. 말은 꺼내 놓았지만 단장인 나도 아직 몇 자 적지 못했소이다. 허허, 이것 참 부끄럽구만.&quot;

소탈한 단장의 말에 동인들 몇몇이 서로의 얼굴을 바라보며 웃음을 터뜨린다.
분위기를 보아하니, 대부분 완성된 이야기를 가지고 오지 못한 것 같다.

&quot;그래도 혹시 모르니, 크흠. 작품을 써 온 이가…?&quot;

단장의 물음에 B사감은 천천히 손을 들어 보인다. 품에는 아까 방에서 가지고 나온 봉투가 들려 있다.
B사감이 제법 의기양양한 표정으로 옆을 돌아보니, 이탁 역시 자랑스럽게 왼손을 들고 있다. 아까는 몰랐지만, 어느 사이엔가 원고를 꺼내 무릎 위에 올려둔 것이다.

&quot;오, 무려 두 명이나! 이거 놀랍구려. 언제 우리가 이렇게 창작욕이 마구 샘솟는 모임이었소?&quot;

&quot;와하하! 기대되는 구려!&quot;

주변의 기대에 B사감과 이탁은 서로를 바라보고 호탕하게 웃으며 자랑스럽게 찬사를 받아들인다.

&quot;자, 자. 시간 상 두 작품 모두 읽는 건 힘들 것 같은데. 혹시 둘 중 한 명이 양보를 해줄 수 있겠나?&quot;

단장의 물음에 이탁과 B사감의 시선이 다시 마주친다.
이탁이 B사감을 향해 묻는다.

&quot;나는 뭐, 지금 해도 괜찮고 나중에 해도 괜찮소. 어떻게, 먼저 발표 하겠소?&quot;

B사감은 조금 망설인다.
새 세상 모임의 동인들은 기본적으로 우호적이고 성실한 이들이었지만, 작품 비평에 있어서는 꽤 날카롭고 예리한 면이 있다.
먼저 발표를 해도 좋지만, 이탁의 작품을 보고 더 완성도 높은 작품을 발표하는 것도 나쁘지 않겠다는 생각이 든다.
물론 한편으로는 몇 날 며칠 고민한 자기의 작품을 한시라도 빨리 동인들에게 보여주고 싶은 마음도 없지 않아 있다.
B사감을 바라보는 이탁의 표정은 한껏 여유롭다.
누가 발표할 것인지, 선택은 B사감에게로 넘어온 것이다.

&#39;어떻게 할까…?&#39;






[[먼저 발표한다.-&gt;Y8]]
[[이탁에게 먼저 발표를 권유한다.-&gt;Y9]]</tw-passagedata><tw-passagedata pid="96" name="Y8" tags="" position="198,983" size="100,100">&quot;내가 먼저 발표하겠네.&quot;

B사감은 용감하게 손을 들고 자리에서 일어선다. B사감의 말에 단원들이 웃음을 흘리기 시작한다. 극단 새 세상의 유일한 여성 단원, 게다가 일반 신여성들과도 다른 B사감의 호탕한 성격과 행동에 단원들은 B사감이 눈에 띄면 환호인지 조롱인지 모를 반응을 보인다.

B사감은 당당하게 자기가 써온 작품을 나눠주고는, 단장이 서 있던 자리로 옮겨 발표를 시작한다.

&quot;나는 역동적인 연극을 구상해보았네. 영웅적인 여성 주인공을 쓰고 싶기도 했고…. 연극 무대에 올렸을 때 충격적이면서도 아름다운 이미지를 표현해내고 싶은 마음에 글을 쓰기도 했지.&quot;

B사감의 설명에 단원들의 표정은 썩 좋지 않다.
그러나 단 한 사람, 이탁만큼은 흥미롭다는 듯이 얼굴 가득 미소를 지으며 어깨를 으쓱인다.
그는 자주 어깨를 으쓱하는 버릇을 가지고 있다. B사감은 그런 그의 추임새가 항상 우습고 친근한 것처럼 느껴진다.
그런 추임새만큼, 이탁은 언제나 놀랍고 참신한 생각과 의견을 가지고 있다.

&#39;그라면 재미있는 작품이라고 말할지도 모르지.&#39;

기대하는 마음으로 B사감은 자기 작품을 발표한다.






[[작품을 발표한다.-&gt;Y800]]</tw-passagedata><tw-passagedata pid="97" name="Y9" tags="" position="347,983" size="100,100">&quot;먼저 하시지요, 이 군.&quot;

&quot;알겠네.&quot;

B사감의 말에 이탁은 자신이 써온 이야기를 간단히 정리한 종이뭉치를 동인들에게 나누어주기 시작한다.
자유분방한 그 움직임은 생기가 가득하고, 가끔은 우스꽝스럽게 보이기도 한다.
이탁의 행동에 몇몇 동인들은 웃음을 흘린다.

모든 종이를 나눠준 이탁이 갈 길을 잃자, 단장이 그를 이끌어 자신의 자리로 오게 한다.
순식간에 동인들 앞에 선 이탁이 어깨를 으쓱해 보인다.
그는 자주 어깨를 으쓱하는 버릇을 가지고 있다.

B사감은 그런 그의 추임새가 항상 우습고 친근한 것처럼 느껴진다.
그런 추임새만큼, 이탁은 언제나 놀랍고 참신한 생각과 의견을 가지고 있다.

&quot;우선, 내 작품은 작가인 내가 이야기를 다 결정할 수 없는 것이 특징이오.&quot;

&quot;무슨 뜻이오? 이 군은 하여간…. 언제나 알아듣기 어려운 소리를 하지.&quot;

&quot;서로 다른 선택지를 만들고, 독자가 자기 판단으로 결정하는 것이라오. 상호작용이 있는 이야기지.&quot;

이탁의 말에 B사감은 눈을 빛냈으나, 동인들은 손사래를 친다.

&quot;그럼 작가는 무얼 하는데?&quot;

한 동인의 물음에 이탁은 머리를 긁적인다.

&quot;이 정도 말하면 알아들어야지. 허나 알아듣지를 못하니….&quot;

무언가 생각하던 이탁이 이내 고개를 젓는다.

&quot;흥. 설명하기 좀 귀찮소. 그냥 시작해도 되려나?&quot;

그런 그의 태도에 B사감은 터져나오는 웃음을 참으려 애를 쓸 수밖에 없다.

&#39;이런 무시하는 태도…. 이 군다워. 참으로 골때리는 친우로군.&#39;

B사감의 웃음을 이탁이 본 것인지, 이탁은 다시 빠르게 어깨를 으쓱인다.
왠지 모르게 그의 표정은 홀가분해 보인다.





[[다음 페이지-&gt;Y10]]</tw-passagedata><tw-passagedata pid="98" name="Y7" tags="" position="1359,1132" size="100,100">방으로 돌아온 B사감의 마음은 실망감으로 가득하다.
자신을 향해 수군거리는 세 명의 처녀들은 물론, 처음 보는 단원까지.

&#39;내가 연극을 하든, 무엇을 하든 무슨 상관이란 말인가.&#39;

그런 B사감의 상념을 깨는 노크소리가 들린다.

똑똑.
문을 두드리는 소리에 B사감은 무겁게 눈꺼풀을 들어 올린다.
오늘 아침 제가 찢은 러브레터의 수신자, 영희가 눈앞에 서 있다.
최근 여학생들 사이에도 단발 바람이 부는 듯하지만, 영희는 다소곳이 양갈래로 머리를 땋아 내렸다. 

“네 편지라면 이미 찢어버렸다. 애먼 데 관심 두지 말고 학교생활 착실히 하다 얌전히 졸업해라. 네 아비가 어련히 좋은 혼처를 안 구해줄까.”

수줍은 듯 바닥만 보던 영희가 이내 고개를 들고 그녀를 똑바로 쳐다본다.

“그런 연유로 찾아온 것이 아녜요.”

B사감의 얼굴에 의문이 떠오른다. 

&quot;그럼 무슨 일이지?&quot;

영희는 잠시 머뭇거리다 결심한 듯한 표정으로 말한다.

&quot;선생님과 그 사람의 관계를 압니다.&quot;






Q. 그 사람은 누구일까?
[[이정혜 -&gt; X2_영희의 위협]]
[[이탁 -&gt; X100 이탁의 방문]]</tw-passagedata><tw-passagedata pid="99" name="Y10" tags="" position="347,1133" size="100,100">&quot;내 이야기의 주인공은 모두 여성이오. 영희와 범네. 둘이 사랑하는 사이가 되고, 나는 그 둘의 진한 사랑에 대해 써보았소.&quot;

이탁의 발표에 B사감은 조금 놀란 표정을 짓는다.
이러한 반응은 B사감뿐만이 아니다. 조용했던 서점 안은 새 세상 동인들의 술렁이는 목소리로 금방 가득차기 시작한다.
카랑카랑한 이탁의 목소리는 그것을 뚫어버린다.

&quot;이 작품의 분류는 GL이라 이름지었어. 걸즈 러브(Girl&#39;s Love). 여성 간의 진정한 연애 소설인 것이지.&quot;

&quot;허허, 연애라니. 단순히 S언니 관계를 두고 말하는 것이겠지?&quot;

&quot;아니. 서로 우애를 나누는 것 이상의, 둘이 평생 사랑을 나누며 사는 이야기지. 시작하겠소. 방해하지 마시오. 자꾸 방해하면 나도 그쪽을 치밀하게 방해하겠소. 들을 거요, 말 거요?&quot;

&quot;방해하지 말아요. 이 군, 저는 들을게요!&quot;

B사감은 흥미로운 이탁의 내용을 듣기 위해 동인들의 웅성거림을 단칼에 잘라버린다. 조선 사회에서 두 여성의 연애 이야기라, B사감으로서는 상상하지도 못한 이야기다.

&#39;너도 말하자면 신교육을 받은 신여성이니, 건실한 남자와 연애라도 하여 혼례를 올리라&#39;고 매번 당부하던 어머니와 사촌들의 목소리가 귀에 울리는 것 같다.
그놈의 건실한 남자, 남자….
어디, 남자 없는 이야기 좀 들어보자는 심보가 생긴다.





[[이탁의 작품 이야기를 들어 본다.-&gt;Y11]]</tw-passagedata><tw-passagedata pid="100" name="Y11" tags="" position="347,1283" size="100,100">주말이 지나고 다시 월요일. 학교에서 마주친 둘. 한 학년 선후배인 영희와 범네는 모른 척 지나간다. 학생들은 러브레터 사건으로 인해 두 사람 사이가 틀어졌으리라고 짐작한다. 갑자기 복도에서 소란이 일어난다.

영희에게 러브레터를 보냈던 보성전문학교 학생 경호가 찾아온다. 영희는 그와 만나고 싶지 않다고 했지만, 막무가내인 경호. 게다가 영희 외에도 그가 관심 두고 있던 다른 학생 달래가 일본인 재력가 요시마와 정혼했다는 소식을 알고 그녀를 돈에 먼 매국노라고 매도하며 날뛴다.

경호를 제압하는 범네. 경호를 수위에게 넘긴다. 주저앉은 영희를 안아 일으켜 세우려 한다. 범네 품에 안긴 영희가 귓속말한다.

&quot;언니…. 저는 남자가 싫습니다.&quot;
&quot;….&quot;

범네는 놀란 눈으로 영희를 쳐다본다. 생각이 복잡해진 것이다.
범네는 우선 영희를 방에 데려다준다. 범네는 제 방으로 돌아와 밤이 될 때까지 꼼짝 않고 생각을 정리한다.

Q.한밤 중. 범네는 영희 방으로 찾아갈까?
A. 찾아간다.
B. 찾아가지 않는다.





[[이탁의 부연 설명을 듣는다.-&gt;Y12]]</tw-passagedata><tw-passagedata pid="101" name="Y12" tags="" position="347,1429" size="100,100">&quot;와하하! 뭐 이런 이야기가 다 있담. 남자가 싫다니, 그것 참 망측한 이야기구려.&quot;

새로 모임에 참석한 이의 목소리가 서점 안을 쩌렁쩌렁 울린다. 그의 큰 목소리에 인상을 찌푸리면서도, 다른 동인들 역시 표정은 그다지 좋아 보이지 않는다.

&quot;내용은 그렇다고 합세. 그런데 독자가 선택하는 이야기라니, 그것 참 복잡하군.&quot;

&quot;내 의견은 조금 다릅니다. 복잡할 것은 그다지 없는 것 같소. 결국 독자가 원하는 이야기로 가면 되는 것이 아니오.&quot;

&quot;독자가 원하는 것? 그렇지만 우리는 대중의 가벼운 이야기들을 맹신해선 안 되네. 지금 우리 대한의 땅에서 필요한 것은 우매한 대중을 계도할 이야기야.&quot;

&quot;그래서, 결국 여자 둘이 무엇을 하고 사는가? 남자가 없는 집안은 음양의 조화가 맞지 않으니….&quot;

동인들의 날선 비판이 쏟아져 내린다. 이탁이 발표한 작품을 흥미롭게 들었던 B사감의 표정이 돌처럼 굳어질 정도의 비평이다.
그러나 정작 발표자인 이탁의 얼굴은 생글생글하다. 그리고 차분히 제 의견을 덧붙일 뿐이다.

&#39;이렇게까지 비판받을 일이란 말인가.&#39;






[[훌륭한 작품이었다며 이탁을 두둔한다.-&gt;Y13]]
[[이탁의 대답을 기대하며 가만히 토론을 지켜본다.-&gt;Y14]]</tw-passagedata><tw-passagedata pid="102" name="Y13" tags="" position="249,1587" size="100,100">&quot;저는 좋은 작품이라 생각합니다. 조선 땅에서 보기 드문 신선한 이야기이고, 작가가 독자의 선택을 배려하고 있으니 매우 자유분방하고 좋기만 하군요.&quot;

B사감이 번쩍 손을 들고 일어나 이탁의 작품을 두둔한다. 올곧고 단단한 B사감의 눈빛에 반발을 계속하던 극단 단원들은 침묵한다. 그러나 이탁의 급진적인 작품에 공감할 수 없다는 분위기다.

&quot;아무리 그래도 이리 망측한 이야기가…….&quot;

&quot;사내가 싫다는 것이 무어 망측한 이야기라고만 할 수 있겠습니까. 제 눈에 차지 않는 사내가 많으면 그럴 수도 있지요.&quot;

B사감이 웃는 낯으로 말하였지만, 분명 그 안에는 냉소가 어려있다. 짓궂은 단원이 B사감을 일부러 겨냥하며 말한다.

&quot;하여간 노처녀 히스테리 아니오. 노처녀 히스테리는 남자를 잊어버리는 병에 걸린다는 이야기인가 보지.&quot;

와하하하!
그 단원의 말과 함께 서점 안은 금방 왁자지껄 웃는 소리로 가득해진다. B사감은 분한 얼굴로 무어라 대꾸하려했지만, 이탁의 따끔한 한 마디가 들려온다.

&quot;불리하면 웃어 버리는 것이 노총각 히스테리인가 보지? 다음엔 그것에 관한 이야기를 써오겠네. 질문이 없으면 이제 자리를 파해도 되지 않겠나.&quot;

B사감은 생글생글 웃는 낯의 이탁의 표정이 유독 날카로워진 것을 확인한다.





[[다음 페이지-&gt;Y15]]</tw-passagedata><tw-passagedata pid="103" name="Y14" tags="" position="466,1584" size="100,100">B사감은 자기 작품에 대해 변호할 이탁의 대답을 기다린다. 그러나 그는 아무 말 없이 좋은 비판이라며 고개를 끄덕이고 만다. 결국 몰매만 잔뜩 맞고 토론은 끝이 난다.

동인들은 새 모임을 기약한다. 그러나 이탁의 이야기에 긍정적이던 B사감은 괜히 자기 혼자 분해 제가 가지고 온 작품을 꼭 품에 안고 있을 뿐이다.
어쩌면 자기의 자식과도 같은 작품도 이렇게 손가락질 당할지도 모른다.
두려움보다는 반발이 앞선다.
통념에 맞지 않는 이야기라고 앞다투어 비판하는 모습에 동인들에게 배신감까지 느낄 지경이었으니.

&quot;여어, B. 돌아가는 길이 먼데 안 일어나는가.&quot;

이탁이 웃는 낯으로 B사감에게 다가온다.

&#39;이탁, 자네는 속도 없는가.&#39;

발표를 한 것은 이탁인데, B사감의 마음이 훨씬 어둡다는 느낌을 받는다.
막상 여유만만한 이탁의 얼굴을 보니 B사감의 걱정은 조금 씻어내려가는 것 같다.
다른 이들은 몰라도 이탁이라는 친우만큼은 제 이야기를 고이 들어줄 것 같은, 어떤 신뢰가 떠올랐기 때문일까.






[[다음 페이지-&gt;Y15]]</tw-passagedata><tw-passagedata pid="104" name="Y15" tags="" position="364,1755" size="100,100">다른 단원들은 오늘 발표의 내용이 퍽 불편했는지 이탁과 B사감을 힐끔거리며 금방 자리를 뜬다. 이탁은 B사감과 함께 나가기 위해 가만히 제 짐을 챙긴다. 단원 대부분이 이탁의 극본을 놔두고 가, 챙겨야 할 것이 많다.

&quot;나는 이 군의 작품이 마음에 드오. 가져가도 괜찮겠소?&quot;

&quot;하하. B의 마음에 들었다니 성공했구만. 마음껏 가져 가게나. 그럼 나갈까?&quot;

&quot;시간이야 많이 남을 터이니 학교까지 배웅 부탁하오.&quot;

&quot;하하. B는 역시 당해낼 수 없구만. 알았네.&quot;

두 사람은 함께 서점을 나선다.






[[다음 페이지-&gt;Y16]]</tw-passagedata><tw-passagedata pid="105" name="Y16" tags="" position="170,1916" size="100,100">
경성의 밤거리는 퍽 어둡다. 가로등은 간신히 어둠을 헤치며 빛을 내고 있었지만, 방금까지 머물고 있었던 서점의 환한 불빛에 비하면 호롱불이나 마찬가지.
그러나 B사감은 그 정취가 마음에 들어 개의치 않고 천천히 길을 걷는다.

&#39;이상하지. 이 군과 걸으면 별 불안도 걱정도 사라지니.&#39;

B사감은 이내 양손을 깍지 끼고 제 뒷머리를 받친 채 방만하게 걷는 이탁을 보며 고개를 젓는다. 어디 조선인이 그리 불량하게, 그것도 야밤에 그리 다니는지. 순사가 한소리 할 법한 모양새다. 이리 물정을 모르니 B사감은 노심초사하며 곁에서 훈수를 두곤 한다.

&quot;…뭐 그리 쳐다보나?&quot;

&quot;아무 생각이 없어 보여서.&quot;

&quot;잘 아는군.&quot;

띠링!

이질적인 소리가 허공을 가른다. B사감은 흠칫 놀랐다가 소리의 진원지를 쳐다본다. 이탁은 한 손으로 제 상의 앞섶을 벅벅 긁으며 무언가를 꺼낸다. 작고 네모난데 빛이 나는 물건이다. B사감은 고개를 갸웃한다. 언젠가 이탁이 저걸 사용하는 걸 본 적이 있기 때문이다.
앞은 빛나고 뒤는 어두운, 두께감 있는 철판인데 묘하게 가벼워 보인다. 빛이 나는 곳 안에는 알록달록한 공깃돌 같은 것이 뭉쳐있는데 이탁의 손에 따라 휙휙, 흩어졌다 뭉치며 다른 빛깔로 바뀐다.





[[&quot;그…것이 뭐요?&quot;-&gt;Y17]]</tw-passagedata><tw-passagedata pid="106" name="Y17" tags="" position="168,2066" size="100,100">&lt;img src=&quot;./images/Y17.jpeg&quot; width=800, height=600&gt;



&quot;음? 이거? 아무것도 아니오.&quot;

무감하게 대꾸한 이탁이 순간 그 철판을 귀에 가져다댄다. 그리고 혼잣말을 미친듯이 하기 시작한다.

&quot;어! 난데. 그래! 25년 지부장. 그래, 그래!&quot;

이탁은 힐끔, B사감의 얼굴을 보며 고개를 반대편으로 돌린다. 이탁의 말소리 말고도 다른 소리가 들리는 것 같아 B사감은 한참을 고개를 빼든다.
이탁은 조선어로 말하던 것을, 영어 비슷한 말로 무어라 말한다. 일본어도 썼다가… 점점 알 수 없는 언어들을 쏟아내고는 빠르게 철판을 손가락으로 톡톡 두드리고는 바지 주머니에 얼른 집어 넣는다.

&quot;자네, 지금 내 앞에서 외국어 실력이라도 뽐내는 건가?&quot;

&quot;아? 아하하하! 어떻게 알았지?&quot;

능청스럽게 웃어보이는 이탁이 순간 미워져 B사감은 발로 그의 정강이를 후려치는 척 한다.

&quot;어허이, 어허이! 거긴 아프다고. 자네 힘 좀 생각하게!&quot;

&quot;이 군은 어디 혼나봐야 해. 그래야 순사에게 안 끌려가지.&quot;

그 말에 껄껄 웃던 이탁이 학교로 꺾어지는 길목 앞에서 말을 꺼낸다.

&quot;B. 괜찮다면 좀 더 걷겠나? 오늘 합평 모임에 대해 할 이야기가 있네.&quot;






[[&quot;글쎄, 시간이 조금 늦어서…….&quot;-&gt;Y18]]
[[&quot;그래. 바라던 바였네.&quot;-&gt;Y19]]</tw-passagedata><tw-passagedata pid="107" name="Y18" tags="" position="95,2216" size="100,100">&quot;어차피 몰래 나온 학교 아닌가. 내가 들키지 않게 도와줄 터이니 아주 잠깐만 시간을 내 주게나.&quot;

이렇게까지 말하는데 거절할 이유야 없다. B사감은 고개를 끄덕이고는 이탁과 밤산책을 좀 더 즐기기로 한다.





[[다음 페이지-&gt;Y19]]</tw-passagedata><tw-passagedata pid="108" name="Y19" tags="" position="235,2413" size="100,100">학교로 빠지는 길을 지나쳐 두 사람은 좀 더 걷기로 한다.

&quot;오늘 합평은 다들 너무했네. 좋은 작품일 수도 있는데 자기들 마음에 들지 않는다고 그렇게 비난일색일 것은 없지 않은가.&quot;

기다렸다는 듯이 B사감이 먼저 화두를 꺼낸다. 이탁은 B사감의 어깨를 두드린다.

&quot;괜히 열내지 말게. 열 사람이 아니라 말해도 한 사람은 좋다고 하지 않겠나.&quot;

&quot;흥. 이왕이면 둘이나 셋이면 더 좋으련만.&quot;

&quot;아니야. 특출난 하나가 제격이지.&quot;

이탁의 말에 B사감은 갑자기 무엇인가 떠올랐다는 듯이 묻는다.

&quot;참, 자네 글은 어떻게 되었나? &lt;인형의 집&gt;에 대한 연극 비평 말이야.&quot;

&quot;무명의 나부랭이가 쓴 글이 어디 잡지에 실렸겠나.&quot;






[[일단 이탁을 위로한다.-&gt;Y20]]
[[그럴 줄 알았다며 장난스럽게 타박한다.-&gt;Y23]]</tw-passagedata><tw-passagedata pid="109" name="Y20" tags="" position="364,2488" size="100,100">&quot;괜찮아. 다음 글은 실리게 될 걸세. 뭐…. 솔직히 말하자면 나도 놀랐소. 노라의 미래에 대해 그렇게 비관적인 평은 어디서도 볼 수 없었으니.&quot;

B사감의 말에 이탁은 고개를 젓는다.

&quot;아무런 경제력도, 기술도 없는 노라가 집을 나서서 무얼 하겠나. 현실은 생각보다 매섭네. 특히 돈이 가장 무서운 것이지. 결국 돈이 노라의 숨통을 쥘 테야.&quot;

&quot;너무 비관적인 것 아닌가. 나는 자네라면 조금 희망적인 이야기를 할 줄 알았는데.&quot;

B사감이 의외라는 듯 말한다. 방금 전까지 합평 작품에 대해 비슷한 생각을 가지고 있던 것과는 완전히 다른 반응이었으니.

&quot;나는 사실 노라에게 기대하는 것이 많았네. 노라는 조선의 여성을 앞으로 이끌어갈 인물이라고 생각하지. 자신을 옭아매는 것에서 벗어나려는 결단력과 행동력. 그것은 귀감이 될만한 일 아닌가?&quot;

&quot;그렇게 생각할 수 있지. 그렇지만 결단력 이전에 가출한 노라의 인생이 불보듯 뻔한 일임은 자명하지.&quot;

&quot;오랜만에 나왔네, 비관적인 이 군.&quot;






[[다음 페이지-&gt;Y21]]</tw-passagedata><tw-passagedata pid="110" name="Y21" tags="" position="178,2546" size="100,100">이탁은 가끔 어울리지 않게 비관적인 면모를 보일 때가 많다.

&#39;염세적이랄까. 그냥 부정적인 것일까. 혼자 골똘히 생각하는 때도 많고.&#39;

뚫어져라 바라보는 시선을 느꼈는지 이탁이 머리를 긁적인다.

&quot;그냥 내 생각일 뿐이네.&quot;

&quot;알고 있네. 나도 내 생각을 말했을 뿐이야.&quot;

&quot;…자네가 모르는 사이에 세상은 시시각각 바뀌지. 가출한 노라 개인이 바꿔 나갈 수 없는 거대한 힘이, 의지로만 가득한 개인의 인생을 꺾어버릴 것이네.&quot;

&quot;그런 걸 알면서도 가출한 것이 노라 아닌가. 나는 그런 멋진 노라를 동경하네. 어디, 그런 친구가 있으면 좋겠어.&quot;

B의 말에 이탁이 미소를 짓는다.

&quot;…그런가. 알 수 없군….&quot;

&quot;모든 걸 다 아는 듯이 말하는 자네가 무엇을 모른다는 건가.&quot;






[[다음 페이지-&gt;Y22]]</tw-passagedata><tw-passagedata pid="111" name="Y22" tags="" position="245,2666" size="100,100">&quot;우정이라는 것 말이야.&quot;

&quot;우정?&quot;

B사감의 반문에 이탁은 다른 질문으로 대답한다.

&quot;우리가 언제 처음 만났는지 기억나는가? 그때가 아마…. &lt;돈 키호테&gt; 준비하던 때였지?&quot;

&quot;그럼, 기억나지.&quot;

&quot;나는 B, 자네가 당연히 둘시네아를 맡을 줄 알았어. 유일한 여성 단원이지 않나.&quot;

그렇다. B사감은 그때 둘시네아를 마다하고 돈 키호테의 뒤를 보조하는 산초 판사 역할을 맡았고, 이탁은 그것을 매우 인상깊게 본 것이다.

&quot;산초는 매우 중요한 인물이야. 주인공 돈 키호테의 유일한 친구지. 풍차로 돌진하는 미친 기사이지만, 나중에는 결국 마지막까지 돈 키호테 곁에서 그의 이상을 지켜주는 유일한 사람이야.&quot;

&quot;자네는 그런 산초 판사가 마음에 들었던 것이로군.&quot;





[[다음 페이지-&gt;Y24]]</tw-passagedata><tw-passagedata pid="112" name="Y23" tags="" position="0,2525" size="100,100">&quot;진작 그럴 줄 알았어. &lt;인형의 집&gt;이 장안의 화제인데 그렇게 날선 비판을 실어줄 줄 알았나? 글에 힘이 잔뜩 들어가 있더군.&quot;

B사감의 말에 이탁은 고개를 젓는다.

&quot;아무런 경제력도, 기술도 없는 노라가 집을 나서서 무얼 하겠나. 현실은 생각보다 매섭네. 특히 돈이 가장 무서운 것이지. 결국 돈이 노라의 숨통을 쥘 테야.&quot;

&quot;너무 비관적인 것 아닌가. 나는 자네라면 조금 희망적인 이야기를 할 줄 알았는데.&quot;

B사감이 의외라는 듯 말한다. 방금 전까지 합평 작품에 대해 비슷한 생각을 가지고 있던 것과는 완전히 다른 반응이었으니.

&quot;나는 사실 노라에게 기대하는 것이 많았네. 노라는 조선의 여성을 앞으로 이끌어갈 인물이라고 생각하지. 자신을 옭아매는 것에서 벗어나려는 결단력과 행동력. 그것은 귀감이 될만한 일 아닌가?&quot;

&quot;그렇게 생각할 수 있지. 그렇지만 결단력 이전에 가출한 노라의 인생이 불보듯 뻔한 일임은 자명하지.&quot;

&quot;오랜만에 나왔네, 비관적인 이 군.&quot;






[[다음 페이지-&gt;Y21]]</tw-passagedata><tw-passagedata pid="113" name="Y24" tags="" position="245,2816" size="100,100">이탁은 B사감을 자랑스럽다는 듯이 쳐다본다.

&quot;B, 자네 불란서 말을 조금 아는가?&quot;

&quot;불란서? 갑자기 왜?&quot;

&quot;내가 자네를 알파벳의 B라고 부르고 있지만, 이제는 불란서 말의 Vie라고 부를 작정이네.&quot;

&quot;불란서 말은 모르지만 그 단어의 뜻은 알고 있네. 왜 나를 그리 거창한 말로 부르려는 건가.&quot;

&quot;그만큼 내가 자네에게서 배우는 것이 참 많거든.&quot;

이탁의 말이 알쏭달쏭한 B사감이 눈살을 살짝 찌푸렸다. 이탁은 걸음을 멈추고 하늘을 올려다본다. 자연스럽게 B사감의 시선도 하늘로 향한다.



&lt;img src=&quot;./images/Y24.JPG&quot; width=800, height=600&gt;



&quot;이 높은 하늘만큼 더욱 많은 세상이 있겠지. 드넓은 우주에서 진정한 우정이란 무엇일까, 어떤 존재가 친구라 할 수 있는가… 생각이 참 많네.&quot;

&quot;어려운 문제일수록 더욱 쉽게 접근해야지.&quot;

B사감의 말은 생기가 넘친다.

&quot;뜻이 통하는 이라면 친구라 생각하네. 함께 있으면 즐겁고 편하고. 가까이에 있든 멀리에 있든 서로를 응원하고 마음으로 함께 있어주는 이가 바로 친구지.&quot;






[[다음 페이지-&gt;Y25]]</tw-passagedata><tw-passagedata pid="114" name="Y25" tags="" position="246,2966" size="100,100">&quot;하하! 맞는 말만 하는 군. 이러니 내가 자네를 Vie라 부르지.&quot;

&quot;장난치지 말고 제대로 말해 보게, 이 군. 내가 왜 그런 거창한 이름이 되어야 하냔 말이야.&quot;

B사감의 으름장에 이탁이 아득한 먼 과거를 떠올리듯 눈을 가늘게 뜬다.

&quot;머릿속으로만 상상하던 때가 있었지. 내가 이곳에 와서 누군가와 우정을 나눌 수 있을까. 1925년 조선땅에 살고 있는 사람들은 다 비슷하다 여겼으니. 그런데 막상 자네를 보니 그런 생각은 멀리 사라지더군. 눈앞에 있는 Vie! 생생하게 살아 숨쉬는 자네를 보고 내가 너무 딱딱한 생각을 했나 싶어서 말이야.&quot;

&quot;이봐, 이 군. 자네도 1925년 조선 땅에 살고 있는 사람일세. 그렇게 어디 멀리서 온 사람처럼 말한 건 무엔가?&quot;

&quot;내가 어디 멀리서 왔다면 어쩌려고 그런 말을 하나.&quot;

&quot;멀리서 오기는 어디 멀리서 와. 상판떼기가 완전히 조선 사람인데.&quot;

B사감의 말에 이탁이 허리를 완전히 굽히고 웃는다.

&quot;와하학!! 상판떼기가 조선 사람?? 아, 아주 고증을 잘 했네 이 얼굴. 해냈어, 해냈어!!&quot;

&quot;이 군, 조용히! 그렇게 큰 소리를 내면 학교 사람들이 나와본다고!&quot;

별안간 웃음을 터뜨리는 이탁의 등을 퍽퍽 내리치며 B사감이 서둘러 그의 입을 틀어막는다. 결국 정문 근처에 수위가 어슬렁대며 나타난 것을 발견하고 말았다.






[[별 수 없다. 이탁에게 이목을 끌어달라고 부탁한다.-&gt;Y26]]
[[웃느라 정신이 없는 이탁을 두고 혼자 정문을 돌파한다.-&gt;Y27]]</tw-passagedata><tw-passagedata pid="115" name="Y26" tags="" position="170,3116" size="100,100">&quot;그만 웃어, 이 군! 자네가 진짜 나를 친구로 생각한다면 나 좀 도와줘.&quot;

&quot;쿨럭쿨럭, 그만, 그만 때리게. 뭘, 뭘 도와달라는 건가?&quot;

&quot;저기 정문 앞에, 사람 보이나? 우리 학교 수위인데 걸리면 영 재미 없는 사람이라.&quot;

담벼락 옆에 바짝 달라붙어 있던 B사감이 무화여학교의 수위, 한진권을 가리킨다. B사감도 혀를 내두르는 깐깐한 사람이다. 특히 오늘은 아무에게도 알리지 않고 몰래 학교를 나온데다, 이탁과 함께 있는 것이 걸리면 왠지 좋지 않은 소문이 날 것 같아 B사감이 제안한 것이다.

&quot;이 군. 들어줘. 친구라면!&quot;

&quot;친구라면…? 아, 알았어. 내가 주의를 끌테니 몰래 잘 들어….&quot;

&quot;거 뉘슈?&quot;

멀리서 들려오는 한진권의 목소리에 이탁은 하던 말을 멈춘다. 그리고 눈빛이 변한다. 순식간에 그는 몸을 비틀거리며 학교 정문을 향해 휘청이며 걷는다. 술을 잔뜩 마셔 고주망태가 된 연기를 해보이는 것이다.

&quot;흐어… 어, 인생이… 쓰다, 써. 끄윽!&quot;

혼신의 연기에 한진권이 당황한다. B사감은 그 틈을 타 쏜살같이 학교 안으로 들어간다.

&#39;이 군, 고맙네!!&#39;

B사감은 속으로 외친다. 친구 좋은 게 뭔가. 서로 돕는 것이 친구지. 무사히 학교 안으로 들어온 B사감은 안도의 한숨을 내쉰다.






[[다음 페이지-&gt;Y28]]</tw-passagedata><tw-passagedata pid="116" name="Y27" tags="" position="320,3116" size="100,100">B사감은 수위, 한진권의 등장에 이탁의 등을 쿡쿡 찌른다.

&quot;먼저 가겠네. 저 치는 골치가 아프니 어서 돌아가는 것이 나을 게야.&quot;

갑자기 심각한 얼굴로 속삭이는 B사감을 보고 이탁은 멀뚱히 고개를 끄덕인다.
학교의 수위, 한진권은 B사감도 혀를 내두르는 깐깐한 사람이다. 특히 오늘은 아무에게도 알리지 않고 몰래 학교를 나온데다, 이탁과 함께 있는 것이 걸리면 왠지 좋지 않은 소문이 날 것 같아 B사감은 이탁과 최대한 떨어지기로 마음먹는다.
이탁이 어정쩡하게 돌아가는 것을 보고, B사감은 바닥에 떨어져 있던 돌멩이 하나를 주워들어 반대편으로 멀리 던진다.

&quot;응? 거 누구 있소? 무슨 소리지?&quot;

한진권이 혼잣말을 하며 반대편으로 걸음을 옮긴다. B사감은 재빠르게 정문쪽으로 뛰어간다. 무사히 학교 안으로 들어온 B사감은 한숨을 쉰다.

&#39;후…. 무사히 들어왔군. 이 군은 잘 돌아갔나.&#39;

설마 깐깐한 한 수위에게 괜히 붙들린 것은 아닐까, 잠시 걱정하던 B사감은 창밖을 바라본다. 희미한 불빛 사이로, 이탁이 별 무리없이 걸어가는 것이 보인다.
B사감은 안도의 숨을 내쉬며 가볍게 걸음을 옮긴다.






[[다음 페이지-&gt;Y28]]</tw-passagedata><tw-passagedata pid="117" name="Y28" tags="" position="269,3300" size="100,100">다음날 아침.

아침 일찍부터 정신없이 수업 준비를 한 B사감은 오후 수업을 위해 복도를 걷는다. 그런데 오늘따라 학생들의 반응이 수상하다.

&#39;왜 내 눈치를 보며 수군거리는 거지?&#39;

학생들뿐만 아니다. 동료 선생들 역시 B사감을 보고 적당히 인사한 뒤 모르는 척 한다. 반나절 만에 학교 안에 있는 사람들이 B사감을 보고 수군거리고 있는 것이다.



&lt;img src=&quot;./images/Y28.JPG&quot; width=800, height=600&gt;



&#39;뭔가 이상한데…?&#39;

심지어 수업을 위해 들어간 교실에 학생들은 아무도 없고, 칠판에는 큰 글자로 이렇게 적혀 있다.

-우리는 B사감의 수업을 거부합니다.

당황한 B사감에게 선생 하나가 급히 달려와 말을 건다.






[[다음 페이지-&gt;Y29]]</tw-passagedata><tw-passagedata pid="118" name="Y400" tags="" position="462,897" size="100,100">&#39;이런 좋은 기회를 놓칠 수가 없지.&#39;

B사감은 재빨리 단장에게 급한 일이 생겼다 말하고 요스마의 뒤를 밟는다. 요스마와 함께 서점을 나선 이들이 길가에 있는 한 남자와 인사를 나눈다. 아마 요스마를 이곳까지 태워다 준 운전 기사로 보인다.

B사감은 어두운 골목에서 몸을 숨긴 채 그들의 대화를 들으려 애쓴다.

&quot;…아버지는 청풍으로 바로 가셨다지?&quot;

&quot;예, 그렇습니다.&quot;

&quot;후…. 그럼 청풍으로 가자.&quot;

언짢은 표정을 지은 요스마가 차에 오른다. 그들이 떠나고, 골목에서 빠져나온 B사감은 주변을 살핀다. 남루한 행색의 남자에게 다가간 B사감이 속삭인다.

&quot;청풍으로 간다고 했소. 그리로 곧 출발하지.&quot;

남자와 B사감은 길가에 서 있던 한 차에 오른다.






[[다음 페이지-&gt;Y401]]</tw-passagedata><tw-passagedata pid="119" name="Y401" tags="" position="536,1017" size="100,100">차에 탄 B사감은 뒷좌석에 놓여 있는 가방을 연다. 가방 안에서 화장 도구를 꺼낸 B사감은 능숙하게 화장을 하기 시작한다.

&quot;그가 새 세상 모임에 나올 줄은 몰랐군.&quot;

&quot;운이 좋았다고 할 수 있지.&quot;

운전하는 이와 유유히 대화를 나눈 B사감은 화장을 마친다. B사감을 아주 오래 알고 지낸 이가 아니라면 거의 알아채지 못할 정도다.

&quot;청풍에 도착했네. 바로 준비할 수 있도록 사람들에게 바로 알리겠네.&quot;

그 말을 남기고 운전수가 차에서 내린다. 지름길로 온 덕분일까, 요스마가 탄 차는 아직 눈에 띄지 않는다. B사감은 청풍 안으로 들어간다.






[[다음 페이지-&gt; W302]]</tw-passagedata><tw-passagedata pid="120" name="Y800" tags="" position="197,1132" size="100,100">3막 2장.

화려하게 꾸며진 결혼식장.
정장 차림의 하객들로 붐빈다.

요스마는 아버지, 오무라와 함께 하객들에게 인사를 나누지만 즐거워보이지 않는다.

오무라 : 어서 오십시오! 제 차남의 결혼식에 와주시니 정말 감사드립니다. 얘, 요스마. 이 분이 전에 말했던 나카무라 국장님이다.

요스마 : (힘 없이) 안녕하십니까.

요스마의 태도에 화가 난 오무라가 그를 무대 반대편으로 끌고 간다.

오무라 : (하객들의 눈치를 보며) 요스마! 도대체 무슨 불만이라도 있는 것이냐? 오늘 네 결혼식에 참석한 이분들이 얼마나 대단한 사람인 줄은 알고 있느냐?

요스마 : 죄송합니다.

오무라 : 네 기무라 사장의 외동딸과 결혼하면서 우리 대일본제국의 대륙 진출이 현실이 되는 것이다. 그 점을 자랑스럽게 생각해!

요스마 : (억지로) 예.






[[다음 페이지-&gt;Y801]]</tw-passagedata><tw-passagedata pid="121" name="Y801" tags="" position="197,1282" size="100,100">3막 3장.

결혼식장 안.

요스마는 긴장된 얼굴로 신부를 기다린다. 오무라는 근엄한 얼굴로 가족석에 앉아 있다.
하객들은 무대 끝에서 결혼식이 시작되기만을 기다린다.

무대 끝에는 새하얀 웨딩드레스를 입은 범네가 서서 신부 입장을 준비한다. 그러나 면사포 때문에 얼굴은 보이지 않는다.

주례 : 신부, 입장!

행진곡에 맞추어 범네가 안으로 들어온다. 요스마 역시 걸어와 둘이 무대 중앙에서 만난다. 요스마가 면사포를 벗긴다. 그리고 밝혀지는 신부의 정체.

요스마 : 당, 당신은…!

범네가 웨딩드레스 치맛자락을 들춘 뒤 총을 꺼낸다. 망설임 없이 오무라를 쏜다.

하객 1 : 꺄아아아아악!!

하객들이 도망가려고 하지만, 범네의 동료들이 나타나 문을 막는다. 범네와 그의 동료들이 총을 쏘고, 오무라는 그 자리에 주저앉아 양손으로 머리를 감싼다. 범네의 드레스는 피범벅이 된다.






[[발표를 끝낸다.-&gt;Y802]]</tw-passagedata><tw-passagedata pid="122" name="Y802" tags="" position="132,1446" size="100,100">&quot;흠…. 주인공이 거사를 치르는 것은 좋지만 왜 하필 결혼식장에서….&quot;

&quot;주인공은 미인계를 썼나?&quot;

누군가의 농담에 토론은 제대로 흘러가지 않고 농담조로 진행된다. 아주 조금, 그들의 반응을 예상했던 터라 B사감은 버럭 화를 내지 않는다. 그러나 기분이 나쁜 건 사실이다.

&quot;독립을 위한 시도는 여러 가지가 있지…. 그렇지만 평범한 아녀자가 총을 들고….&quot;

&quot;B, 이것보다 조금 더 서정적이고 아름다운 작품을 써볼 순 없겠나? 여성스러운 섬세한 작품 말이야….&quot;

점점 B사감의 화를 돋우는 내용에 미간 사이가 구겨질 때쯤.

&quot;나는 좋네. 발상이 참 신선해. 총을 든 여성이라, 멋있지.&quot;

이탁이 어깨를 으쓱이며 말한다. 정말 B사감의 대본이 흥미롭다는 투다. 그의 말에 B사감의 작품을 비판하던 이들의 기가 죽었지만, 여전히 대다수 단원들은 B사감의 작품에 신랄한 평을 내린다.
터무니 없는 평에 B사감은 반박할 마음조차 생기지 않는다.

토론이라고 말하기 힘든, 비판과 조롱의 시간이 마무리 된다.






[[다음 페이지-&gt;Y803]]</tw-passagedata><tw-passagedata pid="123" name="Y803" tags="" position="129,1732" size="100,100">다른 단원들은 오늘 발표의 내용이 퍽 불편했는지 이탁과 B사감을 힐끔거리며 금방 자리를 뜬다. 

단원 대부분이 B사감의 극본을 놔두고 갔지만, B사감은 일부러 챙기지 않고 제 짐만 든다.
그런 B사감을, 이탁이 기다리고 있다.

&quot;다시 한 번 말하지만 나는 자네 작품이 퍽 마음에 들었어.&quot;

&quot;누가 뭐라고 했나?&quot;

이미 이탁이 자기 극본을 챙겼다는 것을 안 B사감이 미소 짓는다. 밝은 그의 목소리에 방금 전까지 속상했던 마음이 사르르 풀리는 기분이다.

&quot;시간이야 많이 남을 터이니 학교까지 배웅 부탁하오.&quot;

&quot;하하. B는 역시 당해낼 수 없구만. 알았네.&quot;

두 사람은 함께 서점을 나선다.






[[다음 페이지-&gt;Y16]]</tw-passagedata><tw-passagedata pid="124" name="Y29" tags="" position="454,3417" size="100,100">&quot;B선생. 최 교장께서 오늘은 수업하지 말고 수업이 모두 끝난 뒤 교장실로 부를 때까지 대기하고 있으라 하네.&quot;

&quot;최 교장께서?&quot;

말을 전한 이는 대답 없이 홀연히 사라진다. 당황한 B사감은 그 자리에 맥없이 서있는다.

&#39;왜 사람들이 나를 보고 수군거리지. 무슨 소문이라도 난 것인가?&#39;

그러나 학교 안에 있는 모든 사람이 B사감을 피하고 있기 때문에 진지하게 물어볼 수가 없다.

&#39;안 되겠다. 몰래 정보를 얻어야겠어.&#39;

이대로 손놓고 있을 수는 없다. B사감은 교과서를 교실 안에 내려놓고 정보를 얻기 위해 돌아다녀보기로 한다.

&#39;어디부터 갈까?&#39;






[[학생들이 잡담을 나눌 만한 곳으로 가본다.-&gt;Y30]]
[[교사 휴게실 근처로 가보자.-&gt;Y31]]
[[학교 바깥에서 정보를 얻어본다.-&gt;Y32]]</tw-passagedata><tw-passagedata pid="125" name="Y30" tags="" position="214,3562" size="100,100">B사감은 학생들이 많이 모이는 등나무 벤치 쪽으로 이동한다. 쉬는 시간까지 기다린 뒤, 근처 큰 나무 뒤에 숨는다. 이윽고 학생 몇몇이 벤치에 앉아 잡담을 하기 시작한다.

&quot;그런데 그 말이 많아? B사감 말이야….&quot;

&quot;틀림 없이 밤에 그 애들이….&quot;

&quot;에그머니나, 망측해.&quot;

워낙 작은 소리로 소근대는 바람에 많은 내용을 들을 순 없다. 쉬는 시간이 끝나는 종이 울리고, 학생들은 바삐 교실로 돌아간다.

나무 뒤에서 나온 B사감은 고민한다.

&#39;좀 더 정보를 얻어볼까?&#39;






[[교사 휴게실 근처로 가보자.-&gt;Y33]]
[[학교 바깥에서 정보를 얻어본다.-&gt;Y34]]</tw-passagedata><tw-passagedata pid="126" name="Y31" tags="" position="360,3563" size="100,100">B사감은 교사 휴게실에 들어가는 대신, 창가에서 몰래 그들의 이야기를 듣기로 결정한다.

&#39;대놓고 이야기를 해줄 만한 분위기가 아닌 것 같으니.&#39;

교사 휴게실 창가 앞에 있는 화단으로 B사감은 조심스럽게 들어간다. 창문 근처에 자리를 잡고 앉은 B사감은 숨을 죽인 채 다른 교사들의 목소리를 듣기 위해 귀를 기울인다.

&quot;…최 교장도 아마 더 이상은….&quot;

&quot;아마도 징계위원회가….&quot;

&quot;역시, 평소에도 좀 이상하다고 생각했네. 가까이 가는 것도 왠지 꺼름칙했고….&quot;

창가에서 멀리 떨어진 채 대화를 나눈 탓에 B사감이 들을 수 있는 정보는 여기까지다. 오랜 시간 말소리가 들리지 않는 것을 확인한 B사감이 화단을 나온다.

&#39;좀 더 정보를 얻어볼까?&#39;






[[학생들이 잡담을 나눌 만한 곳으로 가본다.-&gt;Y35]]
[[학교 바깥에서 정보를 얻어본다.-&gt;Y36]]</tw-passagedata><tw-passagedata pid="127" name="Y32" tags="" position="495,3567" size="100,100">B사감은 조용히 학교를 빠져나온다. 자신을 바라보는 한 수위의 표정이 심상치 않지만 무시한다.

그러나 막상 어디로 가야 할지 고민하던 B사감은, 학교 정문 바로 앞에 있는 찻집에 들어선다.
&#39;끽다점&#39;이라는 커다란 입간판 뒤에 몸을 숨긴 채 물을 마신다. 그러다 우연히 옆 테이블에 앉은 이들의 목소리를 듣게 된다.

&quot;들었소? 무화여학교에서 애들 가르치는 선생 하나가….&quot;

&quot;어이쿠, 형님. 따님이 거기 다니지 않소?&quot;

&quot;…맞네. 그래서 내가 지금 곤란한 것 아닌가. 아침 나절부터 딸애가 전보를 보내왔네. 그 선생 때문에 학교를 더 이상 다니기 싫다고 말이야.&quot;

&quot;이거, 큰일이구만. 내 사촌의 딸도 여기 다니는데….&quot;

&quot;이러지 말고 우리 내친김에 학교에….&quot;

찻집에서 흘러나오는 라디오 소리에 들을 수 있는 정보는 이게 전부다. B사감은 조용히 찻집을 나온다.

&#39;좀 더 정보를 얻어볼까?&#39;






[[학생들이 잡담을 나눌 만한 곳으로 가본다.-&gt;Y37]]
[[교사 휴게실 근처로 가보자.-&gt;Y38]]</tw-passagedata><tw-passagedata pid="128" name="Y33" tags="" position="89,3731" size="100,100">B사감은 교사 휴게실에 들어가는 대신, 창가에서 몰래 그들의 이야기를 듣기로 결정한다.

&#39;대놓고 이야기를 해줄 만한 분위기가 아닌 것 같으니.&#39;

교사 휴게실 창가 앞에 있는 화단으로 B사감은 조심스럽게 들어간다. 창문 근처에 자리를 잡고 앉은 B사감은 숨을 죽인 채 다른 교사들의 목소리를 듣기 위해 귀를 기울인다.

&quot;…최 교장도 아마 더 이상은….&quot;

&quot;아마도 징계위원회가….&quot;

&quot;역시, 평소에도 좀 이상하다고 생각했네. 가까이 가는 것도 왠지 꺼름칙했고….&quot;

창가에서 멀리 떨어진 채 대화를 나눈 탓에 B사감이 들을 수 있는 정보는 여기까지다. 오랜 시간 말소리가 들리지 않는 것을 확인한 B사감이 화단을 나온다.

&#39;좀 더 정보를 얻어볼까?&#39;






[[학교 바깥에서 정보를 얻어본다.-&gt;Y39]]</tw-passagedata><tw-passagedata pid="129" name="Y34" tags="" position="233,3730" size="100,100">B사감은 조용히 학교를 빠져나온다. 자신을 바라보는 한 수위의 표정이 심상치 않지만 무시한다.

그러나 막상 어디로 가야할지 고민하던 B사감은, 학교 정문 바로 앞에 있는 찻집에 들어선다.
&#39;끽다점&#39;이라는 커다란 입간판 뒤에 몸을 숨긴 채 물을 마신다. 그러다 우연히 옆 테이블에 앉은 이들의 목소리를 듣게 된다.

&quot;들었소? 무화여학교에서 애들 가르치는 선생 하나가….&quot;

&quot;어이쿠, 형님. 따님이 거기 다니지 않소?&quot;

&quot;…맞네. 그래서 내가 지금 곤란한 것 아닌가. 아침 나절부터 딸애가 전보를 보내왔네. 그 선생 때문에 학교를 더 이상 다니기 싫다고 말이야.&quot;

&quot;이거, 큰일이구만. 내 사촌의 딸도 여기 다니는데….&quot;

&quot;이러지 말고 우리 내친김에 학교에….&quot;

찻집에서 흘러나오는 라디오 소리에 들을 수 있는 정보는 이게 전부다. B사감은 조용히 찻집을 나온다.

&#39;좀 더 정보를 얻어볼까?&#39;






[[교사 휴게실 근처로 가보자.-&gt;Y40]]</tw-passagedata><tw-passagedata pid="130" name="Y35" tags="" position="370,3740" size="100,100">B사감은 학생들이 많이 모이는 등나무 벤치 쪽으로 이동한다. 쉬는 시간까지 기다린 뒤, 근처 큰 나무 뒤에 숨는다. 이윽고 학생 몇몇이 벤치에 앉아 잡담을 하기 시작한다.

&quot;그런데 그 말이 많아? B사감 말이야….&quot;

&quot;틀림 없이 밤에 그 애들이….&quot;

&quot;에그머니나, 망측해.&quot;

워낙 작은 소리로 소근대는 바람에 많은 내용을 들을 순 없다. 쉬는 시간이 끝나는 종이 울리고, 학생들은 바삐 교실로 돌아간다.

나무 뒤에서 나온 B사감은 고민한다.

&#39;좀 더 정보를 얻어볼까?&#39;






[[학교 바깥에서 정보를 얻어본다.-&gt;Y41]]</tw-passagedata><tw-passagedata pid="131" name="Y36" tags="" position="501,3741" size="100,100">B사감은 조용히 학교를 빠져나온다. 자신을 바라보는 한 수위의 표정이 심상치 않지만 무시한다.

그러나 막상 어디로 가야할지 고민하던 B사감은, 학교 정문 바로 앞에 있는 찻집에 들어선다.
&#39;끽다점&#39;이라는 커다란 입간판 뒤에 몸을 숨긴 채 물을 마신다. 그러다 우연히 옆 테이블에 앉은 이들의 목소리를 듣게 된다.

&quot;들었소? 무화여학교에서 애들 가르치는 선생 하나가….&quot;

&quot;어이쿠, 형님. 따님이 거기 다니지 않소?&quot;

&quot;…맞네. 그래서 내가 지금 곤란한 것 아닌가. 아침 나절부터 딸애가 전보를 보내왔네. 그 선생 때문에 학교를 더 이상 다니기 싫다고 말이야.&quot;

&quot;이거, 큰일이구만. 내 사촌의 딸도 여기 다니는데….&quot;

&quot;이러지 말고 우리 내친김에 학교에….&quot;

찻집에서 흘러나오는 라디오 소리에 들을 수 있는 정보는 이게 전부다. B사감은 조용히 찻집을 나온다.

&#39;좀 더 정보를 얻어볼까?&#39;






[[학생들이 잡담을 나눌 만한 곳으로 가본다.-&gt;Y42]]</tw-passagedata><tw-passagedata pid="132" name="Y37" tags="" position="617,3744" size="100,100">B사감은 학생들이 많이 모이는 등나무 벤치 쪽으로 이동한다. 쉬는 시간까지 기다린 뒤, 근처 큰 나무 뒤에 숨는다. 이윽고 학생 몇몇이 벤치에 앉아 잡담을 하기 시작한다.

&quot;그런데 그 말이 많아? B사감 말이야….&quot;

&quot;틀림 없이 밤에 그 애들이….&quot;

&quot;에그머니나, 망측해.&quot;

워낙 작은 소리로 소근대는 바람에 많은 내용을 들을 순 없다. 쉬는 시간이 끝나는 종이 울리고, 학생들은 바삐 교실로 돌아간다.

나무 뒤에서 나온 B사감은 고민한다.

&#39;좀 더 정보를 얻어볼까?&#39;






[[교사 휴게실 근처로 가보자.-&gt;Y43]]</tw-passagedata><tw-passagedata pid="133" name="Y38" tags="" position="764,3898" size="100,100">B사감은 교사 휴게실에 들어가는 대신, 창가에서 몰래 그들의 이야기를 듣기로 결정한다.

&#39;대놓고 이야기를 해줄 만한 분위기가 아닌 것 같으니.&#39;

교사 휴게실 창가 앞에 있는 화단으로 B사감은 조심스럽게 들어간다. 창문 근처에 자리를 잡고 앉은 B사감은 숨을 죽인 채 다른 교사들의 목소리를 듣기 위해 귀를 기울인다.

&quot;…최 교장도 아마 더 이상은….&quot;

&quot;아마도 징계위원회가….&quot;

&quot;역시, 평소에도 좀 이상하다고 생각했네. 가까이 가는 것도 왠지 꺼름칙했고….&quot;

창가에서 멀리 떨어진 채 대화를 나눈 탓에 B사감이 들을 수 있는 정보는 여기까지다. 오랜 시간 말소리가 들리지 않는 것을 확인한 B사감이 화단을 나온다.

&#39;좀 더 정보를 얻어볼까?&#39;






[[학생들이 잡담을 나눌 만한 곳으로 가본다.-&gt;Y44]]</tw-passagedata><tw-passagedata pid="134" name="Y39" tags="" position="112,3894" size="100,100">B사감은 조용히 학교를 빠져나온다. 자신을 바라보는 한 수위의 표정이 심상치 않지만 무시한다.

그러나 막상 어디로 가야할지 고민하던 B사감은, 학교 정문 바로 앞에 있는 찻집에 들어선다.
&#39;끽다점&#39;이라는 커다란 입간판 뒤에 몸을 숨긴 채 물을 마신다. 그러다 우연히 옆 테이블에 앉은 이들의 목소리를 듣게 된다.

&quot;들었소? 무화여학교에서 애들 가르치는 선생 하나가….&quot;

&quot;어이쿠, 형님. 따님이 거기 다니지 않소?&quot;

&quot;…맞네. 그래서 내가 지금 곤란한 것 아닌가. 아침 나절부터 딸애가 전보를 보내왔네. 그 선생 때문에 학교를 더 이상 다니기 싫다고 말이야.&quot;

&quot;이거, 큰일이구만. 내 사촌의 딸도 여기 다니는데….&quot;

&quot;이러지 말고 우리 내친김에 학교에….&quot;

찻집에서 흘러나오는 라디오 소리에 들을 수 있는 정보는 이게 전부다. B사감은 조용히 찻집을 나온다.

&#39;이제 돌아갈까.&#39;






[[다음 페이지-&gt;Y45]]</tw-passagedata><tw-passagedata pid="135" name="Y40" tags="" position="246,3893" size="100,100">B사감은 교사 휴게실에 들어가는 대신, 창가에서 몰래 그들의 이야기를 듣기로 결정한다.

&#39;대놓고 이야기를 해줄 만한 분위기가 아닌 것 같으니.&#39;

교사 휴게실 창가 앞에 있는 화단으로 B사감은 조심스럽게 들어간다. 창문 근처에 자리를 잡고 앉은 B사감은 숨을 죽인 채 다른 교사들의 목소리를 듣기 위해 귀를 기울인다.

&quot;…최 교장도 아마 더 이상은….&quot;

&quot;아마도 징계위원회가….&quot;

&quot;역시, 평소에도 좀 이상하다고 생각했네. 가까이 가는 것도 왠지 꺼림칙했고….&quot;

창가에서 멀리 떨어진 채 대화를 나눈 탓에 B사감이 들을 수 있는 정보는 여기까지다. 오랜 시간 말소리가 들리지 않는 것을 확인한 B사감이 화단을 나온다.

&#39;이제 돌아갈까.&#39;






[[다음 페이지-&gt;Y45]]</tw-passagedata><tw-passagedata pid="136" name="Y41" tags="" position="375,3896" size="100,100">B사감은 조용히 학교를 빠져나온다. 자신을 바라보는 한 수위의 표정이 심상치 않지만 무시한다.

그러나 막상 어디로 가야할지 고민하던 B사감은, 학교 정문 바로 앞에 있는 찻집에 들어선다.
&#39;끽다점&#39;이라는 커다란 입간판 뒤에 몸을 숨긴 채 물을 마신다. 그러다 우연히 옆 테이블에 앉은 이들의 목소리를 듣게 된다.

&quot;들었소? 무화여학교에서 애들 가르치는 선생 하나가….&quot;

&quot;어이쿠, 형님. 따님이 거기 다니지 않소?&quot;

&quot;…맞네. 그래서 내가 지금 곤란한 것 아닌가. 아침 나절부터 딸애가 전보를 보내왔네. 그 선생 때문에 학교를 더 이상 다니기 싫다고 말이야.&quot;

&quot;이거, 큰일이구만. 내 사촌의 딸도 여기 다니는데….&quot;

&quot;이러지 말고 우리 내친김에 학교에….&quot;

찻집에서 흘러나오는 라디오 소리에 들을 수 있는 정보는 이게 전부다. B사감은 조용히 찻집을 나온다.

&#39;이제 돌아갈까.&#39;






[[다음 페이지-&gt;Y45]]</tw-passagedata><tw-passagedata pid="137" name="Y42" tags="" position="497,3896" size="100,100">B사감은 학생들이 많이 모이는 등나무 벤치 쪽으로 이동한다. 쉬는 시간까지 기다린 뒤, 근처 큰 나무 뒤에 숨는다. 이윽고 학생 몇몇이 벤치에 앉아 잡담을 하기 시작한다.

&quot;그런데 그 말이 많아? B사감 말이야….&quot;

&quot;틀림 없이 밤에 그 애들이….&quot;

&quot;에그머니나, 망측해.&quot;

워낙 작은 소리로 소근대는 바람에 많은 내용을 들을 순 없다. 쉬는 시간이 끝나는 종이 울리고, 학생들은 바삐 교실로 돌아간다.

나무 뒤에서 나온 B사감은 피곤함을 느낀다.

&#39;이제 돌아갈까.&#39;






[[다음 페이지-&gt;Y45]]</tw-passagedata><tw-passagedata pid="138" name="Y43" tags="" position="617,3894" size="100,100">B사감은 교사 휴게실에 들어가는 대신, 창가에서 몰래 그들의 이야기를 듣기로 결정한다.

&#39;대놓고 이야기를 해줄 만한 분위기가 아닌 것 같으니.&#39;

교사 휴게실 창가 앞에 있는 화단으로 B사감은 조심스럽게 들어간다. 창문 근처에 자리를 잡고 앉은 B사감은 숨을 죽인 채 다른 교사들의 목소리를 듣기 위해 귀를 기울인다.

&quot;…최 교장도 아마 더 이상은….&quot;

&quot;아마도 징계위원회가….&quot;

&quot;역시, 평소에도 좀 이상하다고 생각했네. 가까이 가는 것도 왠지 꺼름칙했고….&quot;

창가에서 멀리 떨어진 채 대화를 나눈 탓에 B사감이 들을 수 있는 정보는 여기까지다. 오랜 시간 말소리가 들리지 않는 것을 확인한 B사감이 화단을 나온다.

&#39;이제 돌아갈까.&#39;






[[다음 페이지-&gt;Y45]]</tw-passagedata><tw-passagedata pid="139" name="Y44" tags="" position="432,4152" size="100,100">B사감은 학생들이 많이 모이는 등나무 벤치 쪽으로 이동한다. 쉬는 시간까지 기다린 뒤, 근처 큰 나무 뒤에 숨는다. 이윽고 학생 몇몇이 벤치에 앉아 잡담을 하기 시작한다.

&quot;그런데 그 말이 많아? B사감 말이야….&quot;

&quot;틀림 없이 밤에 그 애들이….&quot;

&quot;에그머니나, 망측해.&quot;

워낙 작은 소리로 소근대는 바람에 많은 내용을 들을 순 없다. 쉬는 시간이 끝나는 종이 울리고, 학생들은 바삐 교실로 돌아간다.

나무 뒤에서 나온 B사감은 피곤함을 느낀다.

&#39;이제 돌아갈까.&#39;






[[다음 페이지-&gt;Y45]]</tw-passagedata><tw-passagedata pid="140" name="Y45" tags="" position="234,4257" size="100,100">학교 안팎을 둘러본 결과. B사감은 한 가지 결론을 내릴 수 있었다.

&#39;분명 얼마 전 일에 대해 학생들로부터 평판이 떨어졌고, 이 일로 징계위원회가 소집된다는 거로군.&#39;

B사감은 방안을 계속 서성거린다. 도대체 무슨 일로 징계위원회까지 소집시키겠다는 말이 나오는 것인지 짐작이 가지 않는다. 불안한 마음을 안고 있는 동안, 어느새 모든 수업이 끝나는 것을 알리는 종이 울린다.

얼마 지나지 않아 선생 하나가 B사감의 방을 찾아온다.

&quot;최 교장이 잠깐 보자고 하시네.&quot;

B사감은 얼굴을 굳힌 해 최 교장의 방을 방문한다. 

무화여학교의 교장, 최마리아. 
언제나 온화한 미소를 지으며 B사감을 맞이하던 최마리아의 얼굴은 오늘따라 굳어있다.






[[다음 페이지-&gt;Y46]]</tw-passagedata><tw-passagedata pid="141" name="Y46" tags="" position="436,4314" size="100,100">&quot;B, 오늘은 안타까운 소식을 전하기 위해 찾아오라 했네. 갑작스럽겠지만….&quot;

&quot;저에 대한 좋지 않은 소문이 돌고 있는 것은 알고 있습니다. 무슨 일입니까?&quot;

B사감의 말에 결국 머뭇거리던 최마리아가 직설적으로 모든 사실을 알려준다.

&quot;학생들로부터 B, 자네가 미쳤다는 말이 퍼졌어. 밤늦게 방안에서 혼잣말을 하는 자네가 노처녀 히스테리가 심해 결국 정신이 나갔다고….&quot;

&quot;예!?&quot;

B사감은 반사적으로 밤늦은 시각에 자신의 방을 염탐하던 세 여학생들을 떠올린다.

&quot;그동안 엄한 교칙을 고수하던 자네에게 반감이 있는 학생들을 중심으로 소문이 퍼진 것 같네. 학생들의 요청으로 징계위원회가 며칠 뒤 소집 될 예정이지만 내가 최대한 막을 걸세. 나뿐만 아니라 다른 선생들도….&quot;

최마리아가 위로하는 투로 말을 건넨다. 그러나 B사감은 상황이 자신에게 불리할 것을 너무나 잘 알고 있다.

&#39;최 교장이 유독 내게 우호적이라는 이유로 대부분의 교사들은 나를 질투하고 있지.&#39;

그동안 B사감은 교사들과의 친분에 그다지 신경을 쓰지 않았던 것이 화근이 되어 돌아온 것이다.






[[다음 페이지-&gt;Y47]]</tw-passagedata><tw-passagedata pid="142" name="Y47" tags="" position="436,4464" size="100,100">다음날. 징계위원회가 소집된다.

B사감의 연극을 훔쳐 본 학생들의 학부모를 중심으로 B사감의 사직과 정신병 치료를 주장하기 시작한다.

&quot;이런 선생에게 내 딸 아이의 교육을 부탁할 수 없소이다!&quot;

무화여학교의 교사들은 B사감을 두둔하는 의견을 내지만, 그다지 논리적인 주장을 펼치지 못한다. 최 교장도 별 수 없다는 듯이 안타깝다는 표정으로 B사감만을 바라볼 뿐이다.

&quot;정신병 치료를 위해 무화여학교를 사직하길 요구하는 바요!&quot;

&quot;정신병이라니, 당치 않습니다!&quot;

B사감은 강력하게 스스로의 상태에 대해 변호하였지만, 학부모와 교사들의 반응은 냉담할 뿐이다. 일부 학부모는 B사감이 입원 치료할 친척의 병원까지 들먹이기 시작한다.

B사감 본인은 물론 최 교장까지 애를 쓰지만 여론을 이길 수 없다. 그 길로 학부모들과 교사들의 감시 아래, B사감은 자신의 짐을 싸기 시작한다.






[[다음 페이지-&gt;Y48]]</tw-passagedata><tw-passagedata pid="143" name="Y48" tags="" position="436,4614" size="100,100">다음날 아침이면 B사감은 무화여학교를 떠나야 한다.

징계위원회의 결과에 굴욕적으로 굴복할 수밖에 없는 B사감은 난생 처음 막막함과 답답함을 느낀다.

&#39;어떻게 이런 일이 일어날 수 있단 말인가, 그것도 하루 아침에!&#39;

두려움과 절망 속에서 애꿎은 제 짐만 만지작거리며 잠자리에 들지 못하던 중. 누군가 B사감의 방문을 노크한다.

&quot;…누구시오!?&quot;

이렇게 밤늦은 시간에 B사감을 찾아올만한 이는 아무도 없다. 더군다나 내일 학교를 떠나야 하는 마당에. B사감은 신경이 날카로워졌으나 이윽고 들려오는 목소리에 놀란다.

&quot;나요, B. 아니, 이제는 Vie라고 불러야 하나?&quot;

이탁의 목소리에 B사감은 당황한다.






[[다음 페이지-&gt;Y49]]</tw-passagedata><tw-passagedata pid="144" name="Y49" tags="" position="436,4764" size="100,100">안 그래도 교칙이 엄격한 여학교다. 남자가, 그것도 미쳤다고 소문이 난 자신의 방에 들어온다는 건 서로에게 해가 될 것이 뻔하다. 그래서 B사감은 얼른 이탁의 팔을 끌어 자신의 방으로 들여보낸다.

&quot;자네, 어떻게 학교에 들어왔나!?&quot;

&quot;다 방법이 있네.&quot;

평소와 다름없이 여유로운 태도, 그러나 표정은 꽤 진지해 보인다.

&quot;자네…. 소문을 다 들었군.&quot;

&quot;경성 바닥에 무화여학교의 미친 여선생이라고 하면 이제 모를 이가 없을 것이네. 꽤 시끌벅적한 사건으로 알려졌거든.&quot;

&quot;그래…. 그래서 나는 내일 학교를 떠나게 되었어. 정신병 치료를 강요받았지!&quot;

B사감은 분한 마음을 토로한다. 그런 B사감을 가만히 지켜보던 이탁이 입을 연다.

&quot;Vie, 내가 여기에 온 것은 그런 자네를 도와주기 위해서네.&quot;

&quot;…나를?&quot;






[[다음 페이지-&gt;Y50]]</tw-passagedata><tw-passagedata pid="145" name="Y50" tags="" position="435,4914" size="100,100">&lt;img src=&quot;./images/Y50.jpeg&quot; width=800, height=600&gt;



&quot;나는 자네를 도와줄 수 있네. 내일 학교를 떠나 병원에 감금되지 않고, 자유로이 살 수 있도록 배려를 해줄 수 있어.&quot;

&quot;자네가 도대체 무슨 힘으로….&quot;

&quot;자세한 내용은 알려줄 수 없네. 다만…. 내 도움을 받을 것인지 말 것인지 결정하게나.&quot;

그 말에 B사감은 잠시 망설인다. 도대체 무슨 배짱으로 자기를 돕는다는 것인지 B사감은 믿을 수 없다. 그동안 이탁을 잘 알고 있다고 생각했는데, 이쯤되니 그가 너무나 달라 보인다.

&#39;어떻게 이 군이 나를 돕는단 말이지? 도망이라도 치게 도와주려는 것인가? 아니면…?&#39;

당혹감과 두려움, 분노와 절망에 휩싸여 있던 B사감은 제대로 된 판단을 내릴 수 없다. 그런 B사감에게 이탁이 말한다.

&quot;얼마 전 우정에 대해 이야기했던 내용, 기억하고 있는가? 자네의 대답에 나는 큰 감명을 받았지. 어쩌면 우리는 진짜 우정을 나누고 있는 것이라 생각했네. 나는 자네를 응원하고 싶어. 그래서 자네에게 힘이 되어주고 싶네.&quot;

진지한 이탁의 말에 B사감은 한동안 망설인다.






[[이탁의 도움을 거절한다.-&gt;Y500]]
[[이탁에게 도움을 받는다.-&gt;Y51]]</tw-passagedata><tw-passagedata pid="146" name="Y500" tags="" position="360,5064" size="100,100">&#39;사실 아무리 이 군이 나를 돕는다 해도 결국 일을 회피하는 꼴이 되지 않겠는가.&#39;

B사감은 굴욕적이었던 징계위원회 때 있었던 일들을 떠올린다. 자신을 향해 손가락질하는 학부모들, 냉정한 눈빛의 교사들, 쩔쩔매면서도 결국 다른 이들의 눈치로 B사감을 외면하던 최 교장까지.

무엇보다 성심성의껏 가르쳤던 아이들이 자신을 믿지 않고 이런 상황에까지 몰았다는 사실에 B사감은 터져나오는 화를 참을 수 없다.

&quot;자네의 제안, 고맙네. 그렇지만 도움을 받기 전에 내가 해야만 하는 일들이 있는 것 같아. 혹시 그 일들이 끝난 이후에 도움을 받으면 모를까….&quot;

&quot;지금이 아니면 조금 힘들것 같네…. 그래도 괜찮겠나?&quot;

이탁의 물음에 B사감은 한 번 더 망설인다. 사실 자신의 힘으로 이 일을 매듭짓고 싶은 마음이 크다. 친구의 도움을 받는다면 어쩌면 편하게 이 위기를 견딜 수 있겠지만, 어쨌든 속시원하게 사건을 해결하지는 못할 것 같다.

&#39;어떻게 할까….&#39;






[[자신의 힘으로 사건을 해결하겠다.-&gt;Y501]]
[[이탁의 도움을 받는다.-&gt;Y51]]</tw-passagedata><tw-passagedata pid="147" name="Y51" tags="" position="512,5062" size="100,100">&#39;그래. 이번에는 이 군의 도움을 받자.&#39;

결정을 내린 B사감은 정중하게 이탁에게 부탁한다.

&quot;나를 도와줄 수 있겠나, 이 군.&quot;

&quot;물론이지. 힘들 때 도와주는 이가 바로 친구라 하지 않나. 나만 믿게.&quot;

본격적으로 B사감을 어떻게 도울 것인지 설명하기 위해 이탁은 옆에 있던 의자를 끌어당겨 앉는다. B사감은 반대편 침대에 앉아 긴장한다.

&quot;자네를 도울 방법은 여러 가지가 있어. 그렇지만 되도록이면 자네 뜻에 따르려고 하네.&quot;

&quot;나의 뜻?&quot;

&quot;그래. 세 가지 선택지가 있네. 하나는 물질적으로 풍요로운 곳에서 숨어 사는 것이야. 그러나 그렇게 되면 자네는 외롭게 살아갈 것이 분명하네. 두 번째는 경성을 영영 떠나는 길이네. 아마 고달프고 힘들겠지만 자유롭게 자네가 원하는 삶을 살 수 있겠지. 마지막은 싸우는 것이네. 자네를 이렇게 만든 징계위원회 사람들에게 복수할 수 있어. 그러나 복수 이후 안정된 삶을 살지는 못하겠지.&quot;






[[아무도 찾지 못하는 곳에 숨는다.-&gt;Y52]]
[[경성을 떠난다.-&gt;Y53]]
[[자신을 이렇게 만든 이들과 싸운다.-&gt;Y54]]</tw-passagedata><tw-passagedata pid="148" name="Y501" tags="" position="300,5205" size="100,100">역시 B사감은 자신이 직접 이 일을 해결해야 겠다고 생각한다.

&quot;도움을 주겠다고 직접 찾아와주어 고맙네, 이 군. 그렇지만 내 일은 내가 해결해야하지 않겠나. 아무리 친구라 해도 지금 이 상황은 자네에게도 매우 곤란한 일이 될 터이니 너무 걱정하지 말게.&quot;

&quot;그렇군…. 아쉽지만 상황을 잘 해결하길 바라네.&quot;

이탁은 약간 아쉬운 표정을 짓지만, 이내 B사감을 향해 평소대로의 미소를 보여준다. 그는 그대로 방을 나선다.

&quot;먼 곳에 있거나 가까운 곳에 있거나 친구라고 말하지 않았었나. 힘든 일이 있어도 이탁이라는 친구를 떠올리며 잘 지내도록 하게나.&quot;

&quot;자네, 무슨….&quot;

B사감이 무어라 말을 붙이기도 전에 이탁은 그대로 방문을 닫는다. B사감이 달려가 방문을 곧바로 열어본다. 그러나 놀랍게도 복도에는 아무도 없다. 심지어 이탁이 돌아가는 발걸음 소리마저 들리지 않는다.

&#39;어디 멀리 떠나려는 것이었나? 아니, 그보다 어떻게 이렇게 순식간에 사라질 수 있는 것이지?&#39;

괜히 오싹한 기분에 몸을 움츠린 B사감은 이내 방 안으로 다시 들어간다.

&#39;이 군의 도움을 거절했으니…. 방법은 하나뿐.&#39;

B사감은 아까부터 생각하던 방법을 떠올린다. 절박한 B사감에게 선택지는 이것 뿐이다.






[[다음 페이지-&gt;Y502]]</tw-passagedata><tw-passagedata pid="149" name="Y502" tags="" position="280,5363" size="100,100">&#39;나를 정신병자로 몰아?&#39;

B사감은 교칙에 따라 학생들을 엄격하게 훈육하고, 자신의 꿈을 위해 방안에서 연기를 했을 뿐이다. 전후 사정을 살펴보지 않고 오로지 자신을 미친 여자로 몰고 간 학생들과, 계속해서 자신을 시기한 교사들을 이대로 놔둘 수 없다.

무엇보다 자신의 방안을 훔쳐보던 학생들은 무화여학교 재단 이사장의 딸들이다. 최 교장과의 사이를 시기한 교사들 역시 재단 이사장의 줄을 탄 이들로, B사감을 쳐내기 위해 오래 전부터 준비했던 것이 분명하다.

&#39;이대로 물러날 것 같으냐.&#39;

B사감은 양손 가득 짐을 들고 방을 떠난다. 한 손에는 얼마 안 되는 자신의 짐이, 그리고 다른 한 손에는 기름통이 들려있다.

그렇게 B사감이 방을 떠난 지 십여 분.

&quot;불이야!!!&quot;

당직이라 밤늦게 교무실에 남아 있던 교사 하나가 외친다. 학교를 둘러싼 큰 나무 하나가 불타오르고 있다. 활활 타오르는 불길은 나뭇가지와 바람을 타고 금방 기숙사 건물로 옮겨 붙는다.

&quot;꺄아아아악!&quot;

&quot;모두 침착하게! 자고 있는 학생들을 깨워서 정문으로 나오세요!! 손수건으로 입을 막고…. 윽!!&quot;

교사들이 학생들을 열심히 대피시킨다. 사람들이 우왕좌왕, 정신없이 기숙사 건물을 빠져나온다.






[[다음 페이지-&gt;Y503]]</tw-passagedata><tw-passagedata pid="150" name="Y503" tags="" position="274,5522" size="100,100">다음날 아침.

&quot;학생들은 모두 무사합니까?&quot;

&quot;곧장 병원으로 간 세 명의 학생을 제외하고는…. 모두 무사합니다.&quot;

교사의 말에 최마리아가 한숨을 내쉰다. 입원한 세 학생은 학교 재단 이사장의 딸들이다. 불이 났다는 소식을 듣고 부랴부랴 달려온 이들은 당장 제 딸들부터 챙겼다. 그리고 지금은 완전히 다 타버린 기숙사 건물을 바라보며 이마를 짚으며 최마리아를 향해 손가락질 하고 있다.

&quot;이게 다 B, 그 정신나간 여자 때문이 아니오!? 이를 어떻게 할 셈이오!&quot;

&quot;애초에 최 교장, 당신이 B를 데리고 오지 않았다면…!!&quot;

그러나 최마리아는 단호하게 말한다.

&quot;결국 교사 임용은 이사장님들 모두 동의한 사안 아닙니까? 어째서 제 탓으로 돌리십니까?&quot;






[[다음 페이지-&gt;Y504]]</tw-passagedata><tw-passagedata pid="151" name="Y504" tags="" position="239,5674" size="100,100">&quot;최 교장. 이 상황에서 뻔뻔하게 무슨 말을…!&quot;

&quot;아뇨, 뻔뻔해져야겠습니다. 정신병에 걸리지 않은 사람을 징계위원회에서 만장일치로 권고사직에 정신병원까지 친히 추천하셨고요.&quot;

&quot;정신병에 걸리지 않았다는 걸 자네가 어떻게 아나?&quot;

이사장의 외침에 최마리아는 자신의 뒤에 있던 사람을 쳐다본다. 그는 극단 새 세상의 단장으로, 최마리아가 밤새 수소문해 학교로 데려왔다.

&quot;B, 그는 극단 새 세상의 멤버였습니다. 방 안에서 종종 연극 연습을 한다고 들었지요.&quot;

거기에 덧붙여 최마리아는 종이를 한 장 꺼낸다. 자신의 친척이 운영하는 병원에서 가져온 진단서다.

&quot;얼마 전, 교사들 모두 건강 검진을 위해 병원에 가 진찰을 받은 적이 있습니다. 아픈 곳은 전혀 없고 정신마저 멀쩡하다는 의사의 진단서까지! 이걸 보시고도 B선생, 그가 정신병에 걸렸다고 말할 수 있습니까? 그가 불을 질렀다고 말할 수 있습니까!?&quot;

최마리아의 말에 이사장들은 반박하지 못한다.






[[다음 페이지-&gt;Y505]]</tw-passagedata><tw-passagedata pid="152" name="Y505" tags="" position="219,5821" size="100,100">큰 화재가 난 무화여학교와 정신나간 B사감의 이야기는 곧 경성 바닥을 시끌벅적하게 만들었다.

최마리아 교장이 여러 사람들을 수소문하고 자료를 모아 B사감이 미치지 않았음을 증명했지만, 오히려 &#39;미친 여학교 교사와 방화 범죄&#39;라는 타이틀이 사람들의 뇌리에 강렬하게 남고 말았다. 학교 이사장들과 최마리아 사이의 의견 대립이 팽팽해졌고, 결국 이사장들이 사직하고 최마리아 교장만이 학교에 남아 사건을 수습했다.

방화사건 이후 B사감은 자취를 감추었다. 어느 누구도 B사감이 정신병자인지, 무화여학교의 방화범인지, 어떻게 경성을 떠났는지 알 수 없었다. 거의 한 달 동안 B사감의 가십으로 지면을 채웠던 신문은 다른 특종거리를 물고 늘어지기 시작했고, 자연스레 사람들의 머릿속에 B사감은 잊혀져 갔다.






[[다음 페이지-&gt;Y506]]</tw-passagedata><tw-passagedata pid="153" name="Y506" tags="" position="221,5998" size="100,100">&lt;img src=&quot;./images/Y506.JPG&quot; width=800, height=600&gt;



아시아인 최초 에미상 수상자 산드라 백, 영화 전문지 &lt;씨네 101&gt; 단독 인터뷰!!



Q. 힘들 때 가장 힘이 되어줬던 사람이 있었나?

산드라 백 : 돌아가신 할머니께서 해주던 이야기가 있었다. 할머니의 어머니, 즉 내게는 증조할머니인 그분이 처음 유럽으로 가셨을 땐 어려움이 많다고 하셨다더라. 여러 사정상 도와주는 이 없이 홀로 떠났는데 발 붙이고 사니까 내 집처럼 편안해졌다고.

Q. 증조할머니라, 굉장히 먼 이야기처럼 들린다.

산드라 백 : 맞다. 아마 그때는 한국이 아닌 조선이었을 것이다. 일본의 식민 지배를 받고 있었던. 그렇지만 할머니께 워낙 많이 들어서 동화보다 더 생생하게 증조할머니의 일대기를 다 기억할 정도다. 학교 선생님이셨고, 연극에 대한 열정이 남달랐다고 한다.

Q. 연기에 대한 열정이 핏줄로 전해진 느낌이다.

산드라 백 : (웃으며) 확실하다. 할머니도 내게 연극조로 동화책을 읽어주셨으니까. 자기 어머니도 그렇게 하셨다고. 대신 우리 엄마는 연극보다 운동에 관심이 많았다. 사실 이것도 증조할머니의 영향일지 모른다. 증조할머니께서는 키도 크고 힘도 무척 세셨다고 하니까.



산드라 백 인터뷰 아래에 가족사진이 몇 장 인쇄되어 있다. 그중에는 아주 오래된 사진도 여러 장 있었는데, 산드라 백이 계속 언급한 증조할머니의 사진도 있었다. 흑백의 흐릿한 사진이었지만 그 사진을 알아본 이가 있었다.

무화여학교의 교장이자 이사장이었던 최마리아의 후손은, 항일 독립운동가의 행적을 쫓는 관련 국가사업단의 요청으로 사진을 몇 장 보낸다. 사업단의 연구자는 최마리아 곁에 활짝 웃고 있는 여자의 정체를 궁금해하다가 우연히 &lt;씨네 101&gt;의 산드라 백 인터뷰 기사를 읽게 된다.

잃어버린 퍼즐을 맞춰낸 연구자의 발굴로 산드라 백의 증조할머니가, 한때 경성을 떠들썩하게 만들었던 바로 그 B사감이었음이 밝혀진다.



-THE END-


&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="154" name="Y52" tags="" position="450,5216" size="100,100">&quot;나를 아무도 찾지 못하는 곳에 숨어서 살고 싶어. 외로워도 풍족하게 살 수 있다니 마음은 편하지 않겠는가.&quot;

&quot;그렇군, 그런 선택을 했군. 알았네.&quot;

이탁은 앉아있던 자리에서 일어선다.

&quot;내가 나가고 10초를 센 뒤 학교를 빠져나오게. 딱 10초야. 9초도 아니고 11초도 아니야. 10초 뒤에 나오면 마법처럼 학교 안에 있는 모든 사람들은 자네의 발걸음 소리를 듣지 못할 거야. 천천히 걸어나와 정문 앞으로 나오게. 검은 차가 대기하고 있을테니 꼭 그 차를 타게나. 내 말 알아듣겠나?&quot;

&quot;그, 그게 무슨….&quot;

&quot;설명할 시간이 없네. 자, 시계 초침을 잘 바라보게. 지금부터야. 하나, 둘, 셋, 지금부터.&quot;

이탁은 손가락을 튕겨 딱, 소리를 내고는 시작을 알린다. B사감은 반사적으로 방에 걸려있는 벽시계의 초침을 보며 속으로 숫자를 센다.

&#39;하나, 둘, 셋….&#39;






[[다음 페이지-&gt;Y520]]</tw-passagedata><tw-passagedata pid="155" name="Y53" tags="" position="585,5216" size="100,100">&quot;경성을 떠나 아무리 고생한다고 해도 자유롭게, 내가 원하는 삶을 살고 싶네.&quot;

&quot;그렇군, 그런 선택을 했군. 알았네.&quot;

이탁은 앉아있던 자리에서 일어선다.

&quot;내가 나가고 10초를 센 뒤 학교를 빠져나오게. 딱 10초야. 9초도 아니고 11초도 아니야. 10초 뒤에 나오면 마법처럼 학교 안에 있는 모든 사람들은 자네의 발걸음 소리를 듣지 못할 거야. 천천히 걸어나와 정문 앞으로 나오게. 검은 차가 대기하고 있을테니 꼭 그 차를 타게나. 내 말 알아듣겠나?&quot;

&quot;그, 그게 무슨….&quot;

&quot;설명할 시간이 없네. 자, 시계 초침을 잘 바라보게. 지금부터야. 하나, 둘, 셋, 지금부터.&quot;

이탁은 손가락을 튕겨 딱, 소리를 내고는 시작을 알린다. B사감은 반사적으로 방에 걸려있는 벽시계의 초침을 보며 속으로 숫자를 센다.

&#39;하나, 둘, 셋….&#39;






[[다음 페이지-&gt;Y530]]</tw-passagedata><tw-passagedata pid="156" name="Y54" tags="" position="720,5214" size="100,100">&quot;나를 이런 지경으로 몰아넣은 이들을 어떻게 가만히 두겠는가. 무슨 수를 써서라도 그들에게 복수해야겠어.&quot;

&quot;그렇군, 그런 선택을 했군. 알았네.&quot;

이탁은 앉아있던 자리에서 일어선다.

&quot;내가 나가고 10초를 센 뒤 학교를 빠져나오게. 딱 10초야. 9초도 아니고 11초도 아니야. 10초 뒤에 나오면 마법처럼 학교 안에 있는 모든 사람들은 자네의 발걸음 소리를 듣지 못할 거야. 천천히 걸어나와 정문 앞으로 나오게. 검은 차가 대기하고 있을테니 꼭 그 차를 타게나. 내 말 알아듣겠나?&quot;

&quot;그, 그게 무슨….&quot;

&quot;설명할 시간이 없네. 자, 시계 초침을 잘 바라보게. 지금부터야. 하나, 둘, 셋, 지금부터.&quot;

이탁은 손가락을 튕겨 딱, 소리를 내고는 시작을 알린다. B사감은 반사적으로 방에 걸려있는 벽시계의 초침을 보며 속으로 숫자를 센다.

&#39;하나, 둘, 셋….&#39;






[[다음 페이지-&gt;Y540]]</tw-passagedata><tw-passagedata pid="157" name="Y520" tags="" position="453,5386" size="100,100">&#39;열.&#39;

B사감은 이탁의 조언대로 곧장 방문을 열고 나선다. 초라하게 생긴 가방 하나만 들고 복도를 걷는데 수상할 정도로 건물 안이 온통 조용하다. 당직을 서는 다른 선생이나 수위의 발소리도 들리지 않는다. 심지어 10초를 세는 동안에 이탁이 학교 안을 벌써 빠져나갔다는 것이 믿기지 않는다.

&#39;검은색의 차가… 있다!&#39;

이탁의 말대로 정문 앞에 차 한 대가 서있다. 열려있는 뒷좌석에 타 문을 닫자마자 차가 바로 움직인다. B사감은 운전석에 앉아있는 이를 바라본다. 그러나 모르는 얼굴의 남자다.

&quot;이보시오…. 이 군은 어디에 있소?&quot;

&quot;그분은 이곳에 안 계십니다. 학교는 위험하니 우선 자리를 옮기겠습니다. 가는 곳까지 편하게 모실 터이니 편히 계십시오.&quot;

딱딱하지만 정중한 말에 B사감은 안심한다.






[[다음 페이지-&gt;Y521]]</tw-passagedata><tw-passagedata pid="158" name="Y521" tags="" position="455,5544" size="100,100">차를 타고 경성을 벗어난 B사감은 갑자기 잠이 쏟아지는 것 같아 그만 깜빡 잠이 들고 만다.

그리고 한참 뒤.

&quot;B선생님, 일어나십시오. 도착하셨습니다.&quot;

운전수의 부름에 잠에서 깬 B사감은 아름다운 저택 앞에 도착한 것을 알아차린다.

&quot;…여긴 어디지요!?&quot;

&quot;B선생님께서는 이탁 선생님의 아내의 신분으로 이곳에서 평생 숨어 지내실 수 있습니다.&quot;

&quot;…내가 이 군의?!&quot;

&quot;말하자면 정략 결혼이지요. 그렇지만 B선생님께 부담스럽거나 귀찮을 일은 없을 거라고, 이탁 선생님께서 말씀하셨습니다. 그분은 이제 이곳, 조선 땅을 떠나셨으니까요.&quot;

&quot;이, 이 군이 말입니까?! 조선을 떠나 어디로 갔단 말이오!?&quot;

&quot;…그건 저도 알 수 없습니다.&quot;

운전수는 안타깝다는 듯이 대답한다.






[[다음 페이지-&gt;Y522]]</tw-passagedata><tw-passagedata pid="159" name="Y530" tags="" position="588,5392" size="100,100">&#39;열.&#39;

B사감은 이탁의 조언대로 곧장 방문을 열고 나선다. 초라하게 생긴 가방 하나만 들고 복도를 걷는데 수상할 정도로 건물 안이 온통 조용하다. 당직을 서는 다른 선생이나 수위의 발소리도 들리지 않는다. 심지어 10초를 세는 동안에 이탁이 학교 안을 벌써 빠져나갔다는 것이 믿기지 않는다.

&#39;검은색의 차가… 있다!&#39;

이탁의 말대로 정문 앞에 차 한 대가 서있다. 열려있는 뒷좌석에 타 문을 닫자마자 차가 바로 움직인다. B사감은 운전석에 앉아있는 이를 바라본다. 그러나 모르는 얼굴의 남자다.

&quot;이보시오…. 이 군은 어디에 있소?&quot;

&quot;그분은 이곳에 안 계십니다. 학교는 위험하니 우선 자리를 옮기겠습니다. 가는 곳까지 편하게 모실 터이니 편히 계십시오.&quot;

딱딱하지만 정중한 말에 B사감은 안심한다.






[[다음 페이지-&gt;Y531]]</tw-passagedata><tw-passagedata pid="160" name="Y540" tags="" position="728,5401" size="100,100">&#39;열.&#39;

B사감은 이탁의 조언대로 곧장 방문을 열고 나선다. 초라하게 생긴 가방 하나만 들고 복도를 걷는데 수상할 정도로 건물 안이 온통 조용하다. 당직을 서는 다른 선생이나 수위의 발소리도 들리지 않는다. 심지어 10초를 세는 동안에 이탁이 학교 안을 벌써 빠져나갔다는 것이 믿기지 않는다.

&#39;검은색의 차가… 있다!&#39;

이탁의 말대로 정문 앞에 차 한 대가 서있다. 열려있는 뒷좌석에 타 문을 닫자마자 차가 바로 움직인다. B사감은 운전석에 앉아있는 이를 바라본다. 그러나 모르는 얼굴의 남자다.

&quot;이보시오…. 이 군은 어디에 있소?&quot;

&quot;그분은 이곳에 안 계십니다. 학교는 위험하니 우선 자리를 옮기겠습니다. 가는 곳까지 편하게 모실 터이니 편히 계십시오.&quot;

딱딱하지만 정중한 말에 B사감은 안심한다.






[[다음 페이지-&gt;Y541]]</tw-passagedata><tw-passagedata pid="161" name="Y531" tags="" position="588,5542" size="100,100">차를 타고 경성을 벗어난 B사감은 갑자기 잠이 쏟아지는 것 같아 그만 깜빡 잠이 들고 만다.

그리고 한참 뒤.

&quot;B선생님, 일어나십시오. 도착하셨습니다.&quot;

운전수의 부름에 잠에서 깬 B사감은 자신이 인천에 와있음을 알게 된다.

&quot;여기는…!?&quot;

&quot;이탁 선생님께서 말씀하셨습니다. 평소에 불란서에 가고 싶다고 하셨다면서요. 여기, 배표가 있습니다.&quot;

B사감은 얼른 배표를 전달받는다. 그리고 고개를 들어 항구 끝에 보이는 큰 배를 살펴본다. 정말 배에 커다랗게 &#39;FRANCE&#39;라고 글씨가 적혀 있는 것을 발견한다. 두근거리는 가슴을 한 손으로 겨우 억누르고는 B사감이 묻는다.

&quot;이 군은요? 이 군에게 고맙다는 말이라도 해야 할 텐데…!&quot;

&quot;그분께서는 지금 현재 조선 땅을 떠나신 상태입니다. 아마 고마워하는 B선생님의 마음을 잘 알고 계시겠죠.&quot;

다시 차에 오르려던 운전수가 아, 하고 소리를 내며 다시 B사감의 곁으로 다가온다.

&quot;정문에서 발견한 건데…. B선생님께 온 편지가 한 장 있더군요. 악담을 하는 이들의 소행일 수도 있겠다고 생각해서 드리지 않으려고 했는데. 그래도 중요한 편지면 어떻게 하나 생각해서 챙겨두었습니다. 혹시 읽어보시겠습니까?&quot;






[[편지를 읽지 않는다.-&gt;Y532]]
[[편지를 읽는다.-&gt;Y533]]</tw-passagedata><tw-passagedata pid="162" name="Y541" tags="" position="770,5540" size="100,100">차는 익숙한 곳에 멈춰선다. 바로 B사감과 이탁이 함께 극단 새 세상의 모임을 하던 서점이다. 불이 켜져있지 않은 것을 보니, 안에는 아무도 없는 것 같다.

운전수가 B사감을 향해 말한다.

&quot;서점 안으로 들어가시면 이탁 선생님께서 준비한 물건들이 있다고 하셨습니다. 안으로 들어가시지요.&quot;

운전수는 그 말을 끝으로 떠난다. B사감은 서점의 문을 연다. 문이 잠겨져 있지 않았지만, 안은 매우 캄캄하다. 주로 모임을 갖던 안쪽 방으로 가 불을 켜니, 운전수의 말대로 가운데 책상 위에 큰 상자와 편지봉투가 한 장 들어 있다.
B사감은 가장 먼저 편지를 열어 본다.






[[다음 페이지-&gt;Y542]]</tw-passagedata><tw-passagedata pid="163" name="Y522" tags="" position="401,5695" size="100,100">얼마 동안은 당황스러웠지만 B사감은 금방 &#39;이탁의 아내&#39; 행세에 적응할 수 있게 되었다. 놀랍게도 아름다운 저택이 있는 산 하나가 전부 이탁의 것이었고, 일본에서도 쉽게 이탁의 재산을 넘보려고 하지 않았다. 근처 마을에 있는 사람들도 &#39;대단한 사람&#39;의 집과 땅이라며 B사감을 우러러볼 뿐. 경성에 있는 무화여학교의 미친 여교사로 B사감을 보지 않았다.

남부러울 것 없는 풍족한 삶을 지냈지만, B사감은 마음 한 구석에는 외로움이 남아 있었다. 저택에 있는 하인들은 B사감처럼 쉽게 다가오지도, 그렇다고 외면하지도 않았다. 자신과 비슷한 이들과 함께 모여사는 집안이 무척이나 삭막하게만 느껴졌다.

B사감은 아무와도 정을 통하지 않고 그렇게 외롭게 여생을 보냈다.



-THE END-



&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="164" name="Y532" tags="" position="532,5707" size="100,100">B사감은 항구로 발을 옮긴다.

걸음을 옮기는 와중에도 자꾸 뒤를 돌아보게 된다. 이렇게 떠나게 될 줄 알았다면 이 군에게 인사를 제대로 했을 게 분명하다.

&#39;타국에서 발을 붙이고 잘 살 수 있을런지.&#39;

다른 사람들과 다르게 자신을 배웅하거나 동행하는 이도 없다. 짐도 초라한 가방 하나.

바다 건너에 있을 자신의 새로운 인생에 기대와 불안을 가슴에 안은 채, B사감은 조선 땅을 떠난다.






[[다음 페이지-&gt;Y534]]</tw-passagedata><tw-passagedata pid="165" name="Y533" tags="" position="698,5711" size="100,100">B사감은 익숙한 필체에 미소를 짓는다. 그 편지는 이탁이 보낸 것이었다.

//Vie.

자네에게 할 말이 있어 편지를 남기네.

나는 자네가 더 멋지고 넓은 세상에서 자유롭게 살아가길 바라는 마음을 가지고 있었네. 큰 용기를 내주어 고맙네.

내 힘으로 자네를 도울 수 있어서 무척 기쁘네.

자네가 믿을지 모르겠지만 사실 나는 조선 사람이 아니네. 나는 경성에서 태어나지도 않았고, 1925년에 청년의 나이인 존재도 아니지. 남자인지, 여자인지도 말할 수 없네.
나는 사실 지구의 존재가 아니야. 저 먼 우주 끝에서 온 외계의 존재로, 여러 별을 여행하며 지성이 있는 존재들의 문명과 기술을 연구하는 과학자라고 할 수 있어. 그렇게 잠시 1925년 경성에 머무르게 된 것이지. 이곳에서 Vie, 자네와 같은 이를 만나게 될 줄이야!

수많은 별들 중에서, 나와 우정을 나눌 친구를 찾을 수 있을까 상상하던 적이 있었지. 경성에서 vie, 자네와의 만남은 잊지 못할 걸세. 기회가 닿는다면 언젠가 다시 만나면 좋겠지만 말이야. 경성의 길거리에 있을 때나, 멀리 떨어진 별에 있을 때나 우리의 우정을 생각하겠네.

추신.
아마 도착하면 자네를 마중나올 노부부가 있을 걸세. 내가 미리 이야기를 해놓은 이들이니 안심하게나.//

이탁의 편지를 고이 접어 제 가방 안에 고이 잘 접어 넣은 B사감은 한동안 먹먹한 눈으로 먼 하늘을 올려다본다.






[[다음 페이지-&gt;Y536]]</tw-passagedata><tw-passagedata pid="166" name="Y534" tags="" position="535,5865" size="100,100">빈 손으로 프랑스 땅에 도착해 막막하던 B사감 앞에 한 노부부가 나타났다. B사감은 이탁이 따로 이야기를 해놓은 이들인 줄 모르고 그들을 지나치고 말았다.

사흘 정도, 짧은 프랑스어와 귀중품으로 어찌어찌 지낸 B사감은 직업 소개소를 통해 부유한 청나라 상인의 딸을 가르치게 되었다. 그 집에 기거하면서 B사감은 자신이 좋아하는 연극 공부를 마음껏 하며 지내기 시작했다.

가정교사 일을 하며 혼자 연기 연습에 매진하던 B사감은 크리스마스 날 동양인들이 모이는 교회에서 첫 연극 무대에 오르게 되었다. B사감의 연기 실력을 눈여겨 본 교회 사람들의 입소문에 한 희곡 작가를 만나게 되었다. 그 작가가 쓴 연극 작품에 조연으로 출연하면서 B사감은 데뷔 무대를 가졌다.

희곡 작가와 사랑에 빠진 B사감은 곧 가정교사를 그만두고 본격적인 연극 활동을 시작한다. 가난한 살림이었지만 B사감의 삶은 매우 행복했다.

히스테릭하고 깐깐한, 누구에게나 사랑받지 못할 것 같다고 손가락질 받았던 B사감.
그는 당당하게 자신의 꿈을 이루며 자유롭고 행복한 삶을 살았다.






[[다음 페이지-&gt;Y535]]</tw-passagedata><tw-passagedata pid="167" name="Y535" tags="" position="534,6012" size="100,100">&lt;img src=&quot;./images/Y535.JPG&quot; width=800, height=600&gt;



아시아인 최초 에미상 수상자 산드라 백, 영화 전문지 &lt;씨네 101&gt; 단독 인터뷰!!



Q. 힘들 때 가장 힘이 되어줬던 사람이 있었나?

산드라 백 : 돌아가신 할머니께서 해주던 이야기가 있었다. 할머니의 어머니, 즉 내게는 증조할머니인 그분이 처음 유럽으로 가셨을 땐 어려움이 많다고 하셨다더라. 여러 사정상 도와주는 이 없이 홀로 떠났는데 발 붙이고 사니까 내 집처럼 편안해졌다고.

Q. 증조할머니라, 굉장히 먼 이야기처럼 들린다.

산드라 백 : 맞다. 아마 그때는 한국이 아닌 조선이었을 것이다. 일본의 식민 지배를 받고 있었던. 그렇지만 할머니께 워낙 많이 들어서 동화보다 더 생생하게 증조할머니의 일대기를 다 기억할 정도다. 학교 선생님이셨고, 연극에 대한 열정이 남달랐다고 한다.

Q. 연기에 대한 열정이 핏줄로 전해진 느낌이다.

산드라 백 : (웃으며) 확실하다. 할머니도 내게 연극조로 동화책을 읽어주셨으니까. 자기 어머니도 그렇게 하셨다고. 대신 우리 엄마는 연극보다 운동에 관심이 많았다. 사실 이것도 증조할머니의 영향일지 모른다. 증조할머니께서는 키도 크고 힘도 무척 세셨다고 하니까.



산드라 백 인터뷰 아래에 가족사진이 몇 장 인쇄되어 있다. 그중에는 아주 오래된 사진도 여러 장 있었는데, 산드라 백이 계속 언급한 증조할머니의 사진도 있었다. 흑백의 흐릿한 사진이었지만 그 사진을 알아본 이가 있었다.

최근 식민지기 여성 예술가의 행적을 쫓고 있던 많은 연구자들은 &#39;새 세상&#39;이라는 연극 동인 모임에 대해 새로운 정보를 얻게 되었다. 유일한 여성 단원 B가 신문지면을 한때 떠들썩하게 만들었던 무화여학교의 미친 여교사 B와 동일인물임이 밝혀졌던 것이다. 연구자들은 B가 정신병을 지닌 것으로 몰려 결국 연극 활동도 포기하고 그렇게 역사 속에서 이름이 지워졌다고 생각했다.

그러나 우연히 이번 산드라 백의 &lt;씨네 101&gt; 인터뷰를 읽은 한 연구자에 의해 산드라 백의 증조할머니가, 한때 경성을 떠들썩하게 만들었던 바로 그 B사감이었음이 밝혀진다.



-THE END-



&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="168" name="Y536" tags="" position="698,5861" size="100,100">B사감은 항구로 발을 옮긴다.

걸음을 옮기는 와중에도 자꾸 제 손을 꼬집어본다. B사감은 마치 꿈을 꾸고 있는 것 같다.

&#39;죽기 전에 한 번은 가볼 수 있을까 싶었건만…!&#39;

다른 사람들과 다르게 자신을 배웅하거나 동행하는 이도 없다. 짐도 초라한 가방 하나.
그러나 B사감은 두렵지 않다. 자신의 친구, 이탁이 도와줄 것을 알고 있을 테니까.

바다 건너에 있을 자신의 새로운 인생을 기대하며, B사감은 조선 땅을 떠난다.






[[다음 페이지-&gt;Y537]]</tw-passagedata><tw-passagedata pid="169" name="Y537" tags="" position="698,6011" size="100,100">빈 손으로 프랑스 땅에 도착해 막막하던 B사감 앞에 한 노부부가 나타난다. 노부부는 B사감을 따뜻하게 맞이해 주었다. 그들의 집에 얹혀 살게 된 B사감은 프랑스 생활을 안전하고 원만하게 시작하게 되었다.

아침이면 일터에 나가 돈을 벌고, 밤이면 노부부와 함께 대화를 나누며 프랑스어 실력을 쌓은 B사감은 다음해 작은 극장에서 단역으로 공연 무대에 서게 되었다. 그리고 그 무대에서 B사감의 연기를 인상깊게 지켜본 한 희곡 작가가 B사감을 주인공으로 한 단막극을 쓰게 되었다. 단막극의 주연을 맡은 B사감은 지역 신문과 연극 잡지에 사진이 실리며 점점 유명세를 타게 되었다. 한 번은 대형극장에서 주연급 연기를 펼친 적도 있었다.

몇 개의 무대에 서면서 연극 활동을 이어나간 B사감은 행복한 시절을 보냈다. 특히 자신을 주인공으로 한 희곡 작품을 썼던 남자와 사랑에 빠져 결혼하여 아이를 낳아 새 가족을 꾸리기도 했다.

히스테릭하고 깐깐한, 누구에게나 사랑받지 못할 것 같다고 손가락질 받았던 B사감.
그는 당당하게 자신의 꿈을 이루며 자유롭고 행복한 삶을 살았다.






[[다음 페이지-&gt;Y538]]</tw-passagedata><tw-passagedata pid="170" name="Y538" tags="" position="698,6161" size="100,100">&lt;img src=&quot;./images/Y538.JPG&quot; width=800, height=600&gt;
&lt;audio src=&quot;./sounds/Y538.mp3&quot; type=&quot;audio/mp3&quot; autoplay=&quot;true&quot; loop=&quot;true&quot; hidden=&quot;true&quot;&gt;&lt;/audio&gt;



아시아인 최초 에미상 수상자 산드라 백, 영화 전문지 &lt;씨네 101&gt; 단독 인터뷰!!



Q. 힘들 때 가장 힘이 되어줬던 사람이 있었나?

산드라 백 : 돌아가신 할머니께서 해주던 이야기가 있었다. 할머니의 어머니, 즉 내게는 증조할머니인 그분이 처음 유럽으로 가셨을 땐 어려움이 많다고 하셨다더라. 여러 사정상 도와주는 이 없이 홀로 떠났는데 발 붙이고 사니까 내 집처럼 편안해졌다고.

Q. 증조할머니라, 굉장히 먼 이야기처럼 들린다.

산드라 백 : 맞다. 아마 그때는 한국이 아닌 조선이었을 것이다. 일본의 식민 지배를 받고 있었던. 그렇지만 할머니께 워낙 많이 들어서 동화보다 더 생생하게 증조할머니의 일대기를 다 기억할 정도다. 학교 선생님이셨고, 연극에 대한 열정이 남달랐다고 한다.

Q. 연기에 대한 열정이 핏줄로 전해진 느낌이다.

산드라 백 : (웃으며) 확실하다. 할머니도 내게 연극조로 동화책을 읽어주셨으니까. 자기 어머니도 그렇게 하셨다고. 대신 우리 엄마는 연극보다 운동에 관심이 많았다. 사실 이것도 증조할머니의 영향일지 모른다. 증조할머니께서는 키도 크고 힘도 무척 세셨다고 하니까.



산드라 백 인터뷰 아래에 가족사진이 몇 장 인쇄되어 있다. 그중에는 아주 오래된 사진도 여러 장 있었는데, 산드라 백이 계속 언급한 증조할머니의 사진도 있었다. 흑백의 흐릿한 사진이었지만 그 사진을 알아본 이가 많았다.

최근 식민지기 여성 예술가의 행적을 쫓고 있던 많은 연구자들은 배우 B의 삶에 대해 연구를 진척시켰다. 무화여학교에서 학생들을 가르치다가 정신병자로 몰아세워지자 돌연 프랑스행을 선택, 이후 프랑스에서 아시안으로 유례없이 큰 주목을 받은 배우가 되었다는 이력까지 세상에 알려지게 되었다.
B의 활약 덕분에 &#39;새 세상&#39;이라는 연극 동인 모임 역시 후대에 알려질 수 있었다.

이번 산드라 백의 &lt;씨네 101&gt; 인터뷰와 사진은 연구자들에게 큰 화제가 되었다. 경성에서 B의 프랑스행을 도운 이에 대해서 그동안 연구자들 사이에서 의견이 분분했기 때문이다. 산드라 백이 자료로 가져온 사진 안에는 중년이 된 B와 남자 하나가 있었다. 사진 뒷면에는 B가 적어 놓은 것으로 추정되는 글자가 있었다.


//오랜만에 만난 나의 친구, ET과 함께.//


집요한 연구자들은 &#39;ET&#39;라는 이니셜을 지닌 남자가 새 세상의 극단 멤버 &#39;이탁&#39;임을 알게된다.

잃어버린 퍼즐을 맞춰낸 연구자의 발굴로 B와 이탁의 오랜 우정이 밝혀지게 되었다.



-THE END-



&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="171" name="Y542" tags="" position="818,5690" size="100,100">//B, 이탁이네. 

자네가 원하는 대로 징계위원회의 복수를 돕기 위해 한 가지 무기를 선물하려고 하네. 
무엇이든, 어떤 상황에서든 자네가 원하는 상대를 저격할 수 있는 총이지. 탄환도 필요 없고, 소리도 나지 않네. 아마 자네가 죽을 때까지 원하는 대로 쓸 수 있을 게 분명하네.
이 무기의 출처는 알려줄 수 없네.

아니, 실은 조선을 떠나게 되었네.
조선 땅 어디에서도 나를 볼 수 없을 터이니, 이 무기는 자네의 것이야.
자네의 뜻이 잘 이루어지길 바라네.

그럼, 건투를 비네.//

이탁의 편지를 읽은 B사감은 상자를 연다. 그곳에는 이탁이 말한 총이 있다. 그 총의 옆에는 영어로 울트라 건(Ultra Gun)이라 적힌 종이가 있다.
총의 색상은 어두운 초록에, 총신이 가늘고 길게 생기지 않고 둥글고 넓으며 가운데에는 짧은 안테나 같은 것이 달려 있다.

&#39;이것이 바로… 무엇이든, 어떤 상황에서든 원하는 상대를 저격할 수 있는 총?!&#39;






[[다음 페이지-&gt;Y543]]</tw-passagedata><tw-passagedata pid="172" name="Y543" tags="" position="848,5858" size="100,100">울트라 건을 쥔 B사감은 길을 떠난다.

징계위원회에서 내린 결정은 모두 학교의 재단 이사장직을 맡고 있는 이들의 손에서 이루어졌다. B사감의 방을 염탐하던 세 학생의 부모 역시 재단 이사장을 맡고 있었다. B사감은 그들이 결코 정의롭지 못하며, 오히려 최 교장의 학교 운영을 어렵게 만들고 있음을 알고 있다. 개교를 위해 그들의 도움이 필요했지만, 장기적으로는 해가 될 인물들.

&#39;이참에 뿌리를 뽑아야 한다.&#39;

B사감은 가장 가까이에 위치한 이사장의 집에 도착한다. 으리으리한 저택 안, 혼자 창밖을 바라보며 술을 마시고 있는 이사장을 발견하고는 울트라 건을 겨눈 다음 방아쇠를 당긴다.

정말 아무 소리도 나지 않았는데, 창과 함께 이사장이 들고 있던 술잔이 깨진다. 손을 다친 이사장은 고통스러워 울부짖으며 자리에 주저앉는다. 일부러 술잔을 노렸던 B사감은 울트라 건의 성능에 놀라워한다.

&#39;복수는 이제 시작이다!&#39;






[[다음 페이지-&gt;Y544]]</tw-passagedata><tw-passagedata pid="173" name="Y544" tags="" position="849,6009" size="100,100">한동안 경성을 떠들썩하게 만든 살인 사건이 있었다. 피해자는 모두 명망이 높고 경제적으로 부유한 이들이었다. 자신이 탐정이라고 주장을 한 &#39;유불란&#39;이라고 하는 이는 피해자들의 공통점을 알아냈는데, 모두 무화여학교의 재단이사장이었다는 것이다. 

이들의 죽음에 대해 학교의 교장인 최마리아는 이유를 모르겠다고 이미 인터뷰를 했지만, 신문 기자들은 모두 입을 모아 이런 말을 했다. 무화여학교의 미친 교사라고 알려졌던 B사감의 짓이라고 말이다. 징계위원회를 통해 무고하게 정신병자 취급을 받고 쫓겨난 여교사가 복수를 펼쳤다는 이야기에, 경성 시내의 모든 사람들이 흥미로워했다. 그러나 아무도, 한낱 평범한 여교사가 어떻게 이사장들의 집에 찾아가 총을 쏘았는지 설명하지 못했다.

이 사건을 수사하던 경찰과 총독부도 금방 관심을 끄며 사건을 종결해버렸다. 탐정 유불란만이 이 연쇄 살인 사건과 B사감의 행방불명을 연결시켜 끝까지 추적해보았지만, 만주에서 B사감의 흔적이 끊기며 수사를 포기하고 말았다. 그후 다른 일로 상해를 방문한 유불란은 B사감과 비슷한 용모의 여자를 발견하지만 끝내 그 사람이 B사감인지, 경성의 연쇄 살인사건과 관련이 있는지 확인하지 못했다.

그 뒤로 B사감의 행방을 아는 이는 아무도 없었다.



-THE END-



&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;
[[작가노트 보러 가기 -&gt; S2_작가 노트]]
&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]] </tw-passagedata><tw-passagedata pid="174" name="Y16-1" tags="" position="548,1821" size="100,100">
경성의 밤거리는 퍽 어둡다. 가로등은 간신히 어둠을 헤치며 빛을 내고 있었지만, 방금까지 머물고 있었던 서점의 환한 불빛에 비하면 호롱불이나 마찬가지.
그러나 B사감은 그 정취가 마음에 들어 개의치 않고 천천히 길을 걷는다.

&#39;이상하지. 이 군과 걸으면 별 불안도 걱정도 사라지니.&#39;

B사감은 이내 양손을 깍지 끼고 제 뒷머리를 받친 채 방만하게 걷는 이탁을 보며 고개를 젓는다. 어디 조선인이 그리 불량하게, 그것도 야밤에 그리 다니는지. 순사가 한소리 할 법한 모양새다. 이리 물정을 모르니 B사감은 노심초사하며 곁에서 훈수를 두곤 한다.

&quot;…뭐 그리 쳐다보나?&quot;

&quot;아무 생각이 없어 보여서.&quot;

&quot;잘 아는군.&quot;

띠링!

이질적인 소리가 허공을 가른다. B사감은 흠칫 놀랐다가 소리의 진원지를 쳐다본다. 이탁은 한 손으로 제 상의 앞섶을 벅벅 긁으며 무언가를 꺼낸다. 작고 네모난데 빛이 나는 물건이다. B사감은 고개를 갸웃한다. 언젠가 이탁이 저걸 사용하는 걸 본 적이 있기 때문이다.
앞은 빛나고 뒤는 어두운, 두께감 있는 철판인데 묘하게 가벼워 보인다. 빛이 나는 곳 안에는 알록달록한 공깃돌 같은 것이 뭉쳐있는데 이탁의 손에 따라 휙휙, 흩어졌다 뭉치며 다른 빛깔로 바뀐다.





[[&quot;그…것이 뭐요?&quot;-&gt;Y17-1]]</tw-passagedata><tw-passagedata pid="175" name="Y17-1" tags="" position="590,2032" size="100,100">&lt;img src=&quot;./images/Y17.JPG&quot; width=800, height=600&gt;



&quot;음? 이거? 아무것도 아니오.&quot;

무감하게 대꾸한 이탁이 순간 그 철판을 귀에 가져다댄다. 그리고 혼잣말을 미친듯이 하기 시작한다.

&quot;어! 난데. 그래! 25년 지부장. 그래, 그래!&quot;

이탁은 힐끔, B사감의 얼굴을 보며 고개를 반대편으로 돌린다. 이탁의 말소리 말고도 다른 소리가 들리는 것 같아 B사감은 한참을 고개를 빼든다.
이탁은 조선어로 말하던 것을, 영어 비슷한 말로 무어라 말한다. 일본어도 썼다가… 점점 알 수 없는 언어들을 쏟아내고는 빠르게 철판을 손가락으로 톡톡 두드리고는 바지 주머니에 얼른 집어 넣는다.

&quot;자네, 지금 내 앞에서 외국어 실력이라도 뽐내는 건가?&quot;

&quot;아? 아하하하! 어떻게 알았지?&quot;

능청스럽게 웃어보이는 이탁이 순간 미워져 B사감은 발로 그의 정강이를 후려치는 척 한다.

&quot;어허이, 어허이! 거긴 아프다고. 자네 힘 좀 생각하게!&quot;

&quot;이 군은 어디 혼나봐야 해. 그래야 순사에게 안 끌려가지.&quot;

그 말에 껄껄 웃던 이탁이 학교로 꺾어지는 길목 앞에서 말을 꺼낸다.

&quot;B. 괜찮다면 좀 더 걷겠나?&quot;






[[&quot;글쎄, 시간이 조금 늦어서…….&quot;-&gt;Y18-1]]
[[&quot;그래. 바라던 바였네.&quot;-&gt;Y19-1]]</tw-passagedata><tw-passagedata pid="176" name="Y18-1" tags="" position="578,2198" size="100,100">&quot;자네, 한 번 학교 나오면 다시 나오기 쉽지 않잖아. 아니면 늦게 들어가는 게 마음에 걸려서 그런가? 내가 들키지 않게 도와줄 터이니 아주 잠깐만 시간을 내 주게나.&quot;

이렇게까지 말하는데 거절할 이유야 없다. B사감은 고개를 끄덕이고는 이탁과 밤산책을 좀 더 즐기기로 한다.





[[다음 페이지-&gt;Y19-1]]</tw-passagedata><tw-passagedata pid="177" name="Y19-1" tags="" position="378,2252" size="100,100">학교로 빠지는 길을 지나쳐 두 사람은 좀 더 걷기로 한다.

&quot;까페에서는 누구를 만났나?&quot;

&quot;별 사람은 아니고. 그러는 자네는? 훤칠한 남자와 데이트하고 있던데. 어땠길래 나를 팔아 자리를 빠져나왔지?&quot;

익살스러운 이탁의 물음에 B사감은 헛웃음을 흘린다. 

&quot;그이처럼 가볍고 경박한 사내는 나와 어울리지 않다고 생각했을 뿐이야.&quot;

&quot;그렇지, B는 가벼운 사내는 별로지.&quot;

요스마에 대한 신랄한 B사감의 평에 제법 가볍게 대꾸하는 이탁이다. 언뜻보면 요스마와 똑같이 가벼워보이지만 새삼 가장 B사감을 잘 이해하고 있다는 점에서 제법 아이러니하다.
가벼운 그의 태도가 미워질만도 하건만, B사감은 신기하게도 편한 마음이 든다. 극단 새 세상에서 만난 사람이라 그런 것일까? 아니면 B사감의 오랜 꿈을 유일하게 지지하는 사람이라 그런 것일까?

&#39;생각해보면 내가 발표하는 글이나 토론에 대해서 항상 좋은 의견을 내주었으니.&#39;

연극에 대한 B사감의 열정을 지지해주는 그에게 항상 고마움을 가지고 있다. 자연스레 이탁과 함께 있으면 청풍에서 일하는 것도, 독립을 위해 요스마에게 접근한 것도 이제 먼일처럼 느껴진다.

그렇게 이탁에 대해 골똘히 생각하던 B사감은 마침 떠오른 질문을 바로 던진다.

&quot;참, 자네 글은 어떻게 되었나? &lt;인형의 집&gt;에 대한 연극 비평 말이야.&quot;

&quot;무명의 나부랭이가 쓴 글이 어디 잡지에 실렸겠나.&quot;






[[일단 이탁을 위로한다.-&gt;Y20]]
[[그럴 줄 알았다며 장난스럽게 타박한다.-&gt;Y23]]</tw-passagedata><tw-passagedata pid="178" name=" X100 이탁의 방문" tags="" position="1171,814" size="100,100">&#39;응? 이탁과 내가 무슨 사이라고 저렇게 뜸을 들이며 얘기하는 거지?&#39;

B사감이 한쪽 눈썹을 찡그리며 영희의 말에 어떻게 답할지 고민하던 차에, 마침 이야기 속 주인공이 등장한다. 이탁이 B사감의 방문 앞에 서서 우호적인 미소를 보내고 있다.

B사감이 활동하고 있는 극단 새 세상의 단원들은 남자가 대부분이며 모두 수려한 외모를 가지고 있다. 희곡을 읽고 비평을 하는 것뿐만 아니라, 직접 창작하거나 연기까지 하기 때문일까.

그중에서도 단연 눈에 띄는 이는 B사감과 이탁이었다.

B사감은 거의 유일하다시피 한 여성 단원. 그런데다가 경성 거리를 돌아다니면 누구나 고개를 돌려 다시 쳐다볼 만큼 자유분방하면서도 매력적인 차림새를 하고 다닌다.

그런 B사감과 반대로, 이탁은 평범하게 양복을 입고 다닌다. 아니, 경성의 다른 모던보이들과 다르게 양복은 입긴 했지만 옷맵시에 전혀 신경을 쓰지 않은 티가 났다. 외양 역시 극단의 다른 수려한 외모를 지닌 이들과 비교했을 때 퍽 수더분한 인상이다.

안 어울릴 것 같은 두 사람이지만, 그렇기 때문에 더더욱 서로를 눈여겨보고 있었다.

서둘러서 영희를 돌려보낸 후 B사감은 이탁에게 인사를 건넨다.

“오셨소.”

“B, 지난 일은 잊고 함께 합평회에 갑시다. 오늘은 창작 원고를 발표하는 날이니 기대가 크오. B도 작품을 물론 썼겠지요?”

잠시 고민을 하던 B사감은 대답 대신 싱긋 웃어보이며 먼저 방문을 나선다.

&quot;가시죠.&quot;

두 사람은 가벼운 인사를 나눈 뒤 극단 새 세상의 모임이 열리는 서점을 향해 걷는다. 전혀 공통점을 찾을 수 없는 두 사람이지만, 경쾌한 발걸음만큼은 똑 닮았다.






[[다음 페이지-&gt;Y6]]</tw-passagedata><tw-passagedata pid="179" name=" X1" tags="" position="1140,459" size="100,100">&lt;audio src=&quot;./sounds/X1.m4a&quot; type=&quot;audio/mp3&quot; autoplay=&quot;true&quot; hidden=&quot;true&quot;&gt;&lt;/audio&gt;
똑똑.
문을 두드리는 소리에 B사감은 무겁게 눈꺼풀을 들어 올린다.
오늘 아침 제가 찢은 러브레터의 수신자, 영희가 눈앞에 서 있다.
최근 여학생들 사이에도 단발 바람이 부는 듯하지만, 영희는 다소곳이 양갈래로 머리를 땋아 내렸다. 

“네 편지라면 이미 찢어버렸다. 애먼 데 관심 두지 말고 학교생활 착실히 하다 얌전히 졸업해라. 네 아비가 어련히 좋은 혼처를 안 구해줄까.”

수줍은 듯 바닥만 보던 영희가 이내 고개를 들고 그녀를 똑바로 쳐다본다.

“그런 연유로 찾아온 것이 아녜요.”

B사감의 얼굴에 의문이 떠오른다. 

&quot;그럼 무슨 일이지?&quot;

영희는 잠시 머뭇거리다 결심한 듯한 표정으로 말한다.

&quot;선생님과 그 사람의 관계를 압니다.&quot;






Q. 그 사람은 누구일까?
[[이정혜 -&gt; X2_영희의 위협]]
[[이탁 -&gt; X100 이탁의 방문]]

&lt;span class=&quot;save&quot;&gt;(link:&quot;저장하기&quot;)[(save-game:&quot;test&quot;)]&lt;/span&gt;
</tw-passagedata><tw-passagedata pid="180" name="Y1" tags="" position="653,500" size="100,100">B사감은 바쁘게 짐을 챙기기 시작한다. 극단 새 세상 모임에 참석하기 위해서다. 극단 모임을 갈 생각을 하니 절로 콧노래가 흘러나온다.

‘오늘은 창작 대본을 가져와 함께 읽기로 했지.’

B사감은 자기가 쓴 극 대본을 잠시 훑어본 뒤, 봉투에 담아 고이 품에 안고 방을 빠져나온다. B사감의 발걸음은 매우 조심스럽다. 학교의 다른 교직원들은 B사감이 학교 바깥에서 다른 일을 하는 것을 좋아하지 않는다. 새 세상 모임 역시 마찬가지다.

교정을 지나자마자 B사감의 발걸음은 매우 가볍다. 이윽고 B사감은 새 세상 모임이 열리는 작은 서점에 도착한다.

가지런하게 놓인 의자들 중, B사감은 어디에 앉을지 고민하기 시작한다.






[[B를 향해 미소 짓고 있는 남자 옆에 앉는다.-&gt;Y2]]
[[오늘 처음 온 사람인가? 낯선 남자 옆에 앉는다.-&gt;Y3]]
[[앗…… 저 사람은!? 사진에서 봤던 남자 옆에 앉는다.-&gt;Y4]]
[[양옆에 아무도 없는 자리에 앉는다.-&gt;Y5]]

&lt;span class=&quot;save&quot;&gt;(link:&quot;저장하기&quot;)[(save-game:&quot;test&quot;)]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="181" name=" X102 합평회에 가는 B사감(Y1 변형)" tags="" position="1150,1487" size="100,100">기숙사에 돌아온 B사감은 바쁘게 짐을 챙기기 시작한다. 극단 새 세상 모임에 참석하기 위해서다. 극단 모임을 갈 생각을 하니 절로 콧노래가 흘러나온다.

‘오늘은 창작 대본을 가져와 함께 읽기로 했지.’

B사감은 자기가 쓴 극 대본을 잠시 훑어본 뒤, 봉투에 담아 고이 품에 안고 방을 빠져나온다. B사감의 발걸음은 매우 조심스럽다. 학교의 다른 교직원들은 B사감이 학교 바깥에서 다른 일을 하는 것을 좋아하지 않는다. 새 세상 모임 역시 마찬가지다.

교정을 지나자마자 B사감의 발걸음은 매우 가볍다. 이윽고 B사감은 새 세상 모임이 열리는 작은 서점에 도착한다.

가지런하게 놓인 의자들 중, B사감은 어디에 앉을지 고민하기 시작한다.






[[B를 향해 미소 짓고 있는 남자 옆에 앉는다.-&gt;Y2]]
[[양옆에 아무도 없는 자리에 앉는다.-&gt;Y5]]</tw-passagedata><tw-passagedata pid="182" name=" S2_작가 노트" tags="" position="1405,4739" size="100,100">권보연 Story Designer


겉과 속이 다른 못생긴 여자로 박제된 B사감. Table Five는 그녀가 누군가 옴짝달싹 못하게 짜 놓은 오해의 틀에 갇혀있었다는 상상을 전제로 B사감을 SF, 로맨스, 액션 스토리가 얽히고 나뉘는 더 자유로운 세계로 이주시키자 다짐했습니다. 낯선 세계의 친구들을 만나고 새로운 사건을 겪으면서 또 다른 선택 기회를 그녀에게 주자는 구상은 인터랙티브 픽션 &quot;B사감: The New World&quot;로 결실을 맺었습니다. 이 즐거운 창작 실험을 Table Five 멤버들과 함께하면서 실험적 여성서사에 대한 연구가 형식에 얽매인 논문이 아닌, 창작품이 되게 하자는 최초의 약속을 이어가게 된 것이 정말 기쁩니다. 작품의 중심에 여성 인물을 세우고, 그들을 응원하는 것이 중요한 목표인데, 사실은 그녀들로 부터 내가 더 많은 격려와 지지를 받고 있습니다. New World의 B사감은 특히, 통쾌하고 뻔뻔한 탈주 경험을 선물해 주었습니다. 그러니 지구에 살면서 어쩐지 아무도 몰라주는 마음과 생각에 어려웠던 친구들, 여러 이유로 지구에 체류 중인 진짜 외계인 친구들이라면, 이토록 매력적인 캐릭터 B사감이 지루한 러브레터를 100년만에 끝내고 신나는 모험을 시작했다는 사실을 우리와 함께 기뻐해 줄 것입니다.



김은정 Story Designer


지금까지 단선형 서사만을 기획, 창작, 비평해왔던 저로서는 선택형 다중 서사를 쓴다는 것이 여간 어려운 일이 아니었습니다. 한 작품에서 SF, GL, 액션이라는 세 가지 장르를 넘나드는 게 가능할까,  여기서 저기로 서사가 진행되면 너무 뜬금없지 않나,  갑자기 이 인물이 이 장면에서 등장하면 독자가 이해할 수 있을까 등 쓰는 내내 고민이 많았습니다. 그러나 세 가지 경로가 합쳐지고 작품이 완성되고 난 이후 저의 걱정은 단순히 기우였음을 알게되었습니다. 실상 B사감에게 주려고 했던 ‘선택’의 자유가, 작품이 완성되고 난 후  도리어 저에게 ‘창작’의 자유가 되었습니다. 이는 여기저기 흩어진 정보를 모아 통합적으로 이야기를 ‘엔조이’할 수 있는 지금 독자의 백과사전식 스토리 흡수 역량을 간과한 저의 오만한(?) 태도에서 비롯된 것이었습니다.  이제 저는 기승전결의 완벽한 틀에 짜인 이야기의 완결성이라는 족쇄에서 풀려나 하나의 서사적 공간안에서 캐릭터와 즐겁게 대화할 수 있는 장으로서 창작의 기쁨을 알게 되었습니다. 여러분도 저희 Table Five와 함께 인터랙티브 픽션 &quot;B사감: The New World&quot;라는 놀이터에서 나만의 엔딩을 선택/상상해보며 한바탕 놀아볼 것을 권해봅니다. ‘나랑 같이 놀 사람, 여기 붙어라~’



손진원 Story Designer


2020년부터 기획하고 제작 과정을 담은 제작노트를 출판하면서 구체화 된 “B사감: The New World”가 디지털로 출판하게 되어 무척 기쁩니다. 못생긴 외모에 학구적인 ‘척’ 안경을 쓴, 젊고 예쁜 여자들의 연애를 부러워하면서도 티를 내지 않으려고 애쓰는 것처럼 여겨지는, 깐깐한 이미지의 나이 든 여자…. B사감은 노처녀 히스테리를 보여주는 전형적인 인물로 여겨지고 있습니다. Table Five는 이러한 B사감에 대한 편견을 물리치고 1925년 식민지 조선이라는 시공간적 제약에 맞서서 ‘자기 스스로 선택한 삶’을 사는 B사감을 그려보고자 했습니다.
오랜 시간 준비했음에도 막상 B사감의 이야기를 쓰는 일은 쉽지 않았습니다. 사소하게는 B사감은 어떤 말투를 썼을지 구체적인 대사로 표현해내는 것부터, 여러 장르를 넘나드는 전체 스토리라인의 구조까지…. 그러나 걱정한 것이 무색하게 B사감은 우리의 예상보다 더 입체적인 인물이 되었습니다. B사감이 다른 분들에게 어떤 인물로 비칠 것인지 무척 기대됩니다.
함께 해 준 여러분, B사감에게 메시지를 꼭 남겨주세요!



이은솔 Story Designer


2020년 출간한 제작 노트에 이어 2021년에 드디어 &quot;B사감 : The New World&quot; 인터랙티브 스토리를 선보일 수 있게 되었네요! 분명 처음에는 나름 연구자적인(?) 의도로 시작했는데 어느새 덕질이 되어버린 프로젝트였습니다. GL 창작에 앞서 사전 조사 한답시고 온갖 GL 만화/웹소설을 섭렵한 것이 화근이었을까요? 아무튼 저에게 영감을 주신 모든 커플에게 이 영광을 바치고 싶습니다. &lt;세일러문&gt;의 우라노스&amp;넵튠, &lt;정년이&gt;의 정년&amp;부용(제 최애컾은 영서&amp;주란입니다), &lt;타원을 그리는 법&gt;의 영애&amp;미연, 그리고 제 오랜 친구인 &lt;유리 가면&gt;의 마야&amp;아유미 항상 감사드립니다. 무엇보다 이 작품을 창작하는 동안 내내 영감의 원천이 되어준 1930년대 조선의 공식 커플 지하련과 최정희에게 무한한 감사를 드립니다. 친구들 내 말 믿어, 이건 찐이야!

이 작업에 가장 열렬한 관심과 지지를 보여주신 엄마, 아빠 그리고 작품에 저 이상으로 많은 기여를 해준 동생에게 감사드립니다.



이서진  Visual Designer


이렇게 제작 후기까지 작성하고 있으니 굉장히 어색하고 수정을 무사히 잘 마치고 싶어지는 밤입니다. 작년부터 봐왔던 Table Five의 작업에 이렇게 참여할 수 있어서 너무 영광이었고 앞서서 함께하게 해주신 세 선생님과 언니에게 감사를 전합니다.
어렵기도 신나기도 한 작업이었습니다! 새롭게 쓰인 B사감과 여러 인물들을 어떻게 생겼을까 어떤 옷을 입고 어떤 표정을 지을까 즐겁게 고민하며 일러스트를 진행했습니다. 
약간 덕질하듯이 B사감의 이미지를 구축했는데 말라서 도드라지는 광대와 우아한 턱, 고지식해보이는 낮은 이마, 짙은 눈썹과 날카로운 듯 섬세한 눈, 도톰하지만 건조한 입술 그리고 하얗고 가는 목을 상상하며 열심히 그렸습니다. 이탁도 묘하게 수더분한 것 같으면서도 잘생김이 묻은 느낌을 살려가며 그리고자 노력했고, 영희가 사실 제 최애…굉장한 미인으로 그리고자 했습니다. 요스마는 제대로 얼굴이 등장하는 씬이 없어서 아쉬웠지만 뭔가 미끈하게 잘생긴 남성을 상상했었어요.



이현학 TWINE Developer/Guest Member


Table Five의 &quot;B사감 : The New World&quot; 작업에 참여하게 되어 유익하고 즐거웠습니다.
Twine 프로그램을 통해 만들어진 이 작품은 작가분들께서 만들어 주신 스토리와 삽화, 사운드들이 어우러지고 플레이 하는 사용자의 선택에 따라 이야기의 전개 과정이 달라져 정말 재미있고 매력적입니다. 
앞으로 이런 작품의 제작이 더 많아져서 새로운 문화 컨텐츠로 자리 잡을 수 있기를 바랍니다. 


&lt;img src=&quot;./images/S2.png&quot; width=1200, height=600&gt;
&lt;style type=&quot;text/css&quot;&gt;
a:link {color:#4169E1; text-decoration:none;}
a:visited {color:#4169E1; text-decoration:none;}
a:hover {color:#00BFFF; text-decoration:none;}
&lt;/style&gt;






&lt;a href=&quot;https://padlet.com/kwonbohyoun/nvz332ajx7oiamfn&quot; target=_blank&gt;B사감에게 메시지 보내기&lt;/a&gt;
[[다시 플레이하기 -&gt;S1_사건의 시작]]
&lt;a href=&quot;https://book.naver.com/bookdb/book_detail.naver?bid=20580017&quot; target=_blank&gt;(PC) B사감: The New World 제작노트 책 정보&lt;/a&gt;
&lt;a href=&quot;http://naver.me/FU37Rgr7&quot; target=_blank&gt;(Mobile) B사감: The New World 제작노트 책 정보&lt;/a&gt;






&lt;h5&gt;
Free Music source from 공유마당
(PIANO MAN,김재영/SAD TIME,김재성
드럼통 부딪히는,김용배/Wind drop,김재성/너와 나,계한용·구재영)

Copyright © 2021. Table Five All right reserved. 
&lt;/h5&gt;</tw-passagedata><tw-passagedata pid="183" name="W2400" tags="" position="1219,3488" size="100,100">요스마와 달아난 B사감은 아무도 쫓아오지 않는 것을 보고 그제서야 한숨을 돌린다. 그리고 생각한다. 

&#39;그와 함께 움직일 수 없어. 너무 위험해&#39;

B사감은 요스마에게 오늘 밤 까페에서 만날 것을 약속하고 몸을 숨긴다.






[[다음 페이지-&gt;W25]] </tw-passagedata><tw-passagedata pid="184" name="W40000" tags="" position="1548,4402" size="100,100">B사감이 처음 총을 겨눈 사람은 총독부 철도국장 오무라다. 단 한치의 말성임도 없이 총알은 그의 가슴에 박혔다. 아수라장이 된 결혼식장에서 그녀는 자신을 밀고한 한진권을 애타게 찾는다. 

비겁하게 탁자에 몸을 숨긴 한진권. 한진권을 먼저 발견한 영희는 B사감을 부른다. 손살같이 달려가 그를 죽인 후 둘은 미리 봐둔 탈출구를 찾아 달려간다.  

뒤늦게 검문소에서 총을 되찾은 경찰들이 결혼식장에 들어섰다. 그러나 이미 늦었다. 혼비백산 도망가는 하객들의 틈에 둘의 모습은 보이지 않는다.  

피범벅이 된 웨딩드레스와 권총을 든 신부와 들러리.
이 둘은 사라졌다. 그리고 요스마는 유유히 결혼식장을 빠져나간다.






[[다음 페이지-&gt;W50]] </tw-passagedata></tw-storydata>
<script title="Twine engine code" data-main="harlowe">"use strict";var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var requirejs,require,define,root,factory;!function(e){var t,n,r,a,i={},o={},s={},c={},u=Object.prototype.hasOwnProperty,l=[].slice,p=/\.js$/;function f(e,t){return u.call(e,t)}function d(e,t){var n,r,a,i,o,c,u,l,f,d,h,y=t&&t.split("/"),m=s.map,g=m&&m["*"]||{};if(e){for(o=(e=e.split("/")).length-1,s.nodeIdCompat&&p.test(e[o])&&(e[o]=e[o].replace(p,"")),"."===e[0].charAt(0)&&y&&(e=y.slice(0,y.length-1).concat(e)),f=0;f<e.length;f++)if("."===(h=e[f]))e.splice(f,1),f-=1;else if(".."===h){if(0===f||1===f&&".."===e[2]||".."===e[f-1])continue;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}if((y||g)&&m){for(f=(n=e.split("/")).length;f>0;f-=1){if(r=n.slice(0,f).join("/"),y)for(d=y.length;d>0;d-=1)if((a=m[y.slice(0,d).join("/")])&&(a=a[r])){i=a,c=f;break}if(i)break;!u&&g&&g[r]&&(u=g[r],l=f)}!i&&u&&(i=u,c=l),i&&(n.splice(0,c,i),e=n.join("/"))}return e}function h(t,r){return function(){var a=l.call(arguments,0);return"string"!=typeof a[0]&&1===a.length&&a.push(null),n.apply(e,a.concat([t,r]))}}function y(e){return function(t){i[e]=t}}function m(n){if(f(o,n)){var r=o[n];delete o[n],c[n]=!0,t.apply(e,r)}if(!f(i,n)&&!f(c,n))throw new Error("No "+n);return i[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function v(e){return e?g(e):[]}r=function(e,t){var n,r,a=g(e),i=a[0],o=t[1];return e=a[1],i&&(n=m(i=d(i,o))),i?e=n&&n.normalize?n.normalize(e,(r=o,function(e){return d(e,r)})):d(e,o):(i=(a=g(e=d(e,o)))[0],e=a[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},a={require:function(e){return h(e)},exports:function(e){var t=i[e];return void 0!==t?t:i[e]={}},module:function(e){return{id:e,uri:"",exports:i[e],config:function(e){return function(){return s&&s.config&&s.config[e]||{}}}(e)}}},t=function(t,n,s,u){var l,p,d,g,b,w,T,S=[],x=void 0===s?"undefined":_typeof(s);if(w=v(u=u||t),"undefined"===x||"function"===x){for(n=!n.length&&s.length?["require","exports","module"]:n,b=0;b<n.length;b+=1)if("require"===(p=(g=r(n[b],w)).f))S[b]=a.require(t);else if("exports"===p)S[b]=a.exports(t),T=!0;else if("module"===p)l=S[b]=a.module(t);else if(f(i,p)||f(o,p)||f(c,p))S[b]=m(p);else{if(!g.p)throw new Error(t+" missing "+p);g.p.load(g.n,h(u,!0),y(p),{}),S[b]=i[p]}d=s?s.apply(i[t],S):void 0,t&&(l&&l.exports!==e&&l.exports!==i[t]?i[t]=l.exports:d===e&&T||(i[t]=d))}else t&&(i[t]=s)},requirejs=require=n=function(i,o,c,u,l){if("string"==typeof i)return a[i]?a[i](o):m(r(i,v(o)).f);if(!i.splice){if((s=i).deps&&n(s.deps,s.callback),!o)return;o.splice?(i=o,o=c,c=null):i=e}return o=o||function(){},"function"==typeof c&&(c=u,u=l),u?t(e,i,o,c):setTimeout(function(){t(e,i,o,c)},4),n},n.config=function(e){return n(e)},requirejs._defined=i,(define=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),f(i,e)||f(o,e)||(o[e]=[e,t,n])}).amd={jQuery:!0}}(),define("almond",function(){}),
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
root=this,factory=function(){var e,t,n=Function.call.bind(Function.apply),r=Function.call.bind(Function.call),a=Array.isArray,i=Object.keys,o=function(e){try{return e(),!1}catch(e){return!0}},s=function(e){try{return e()}catch(e){return!1}},c=(e=o,function(){return!n(e,this,arguments)}),u=!!Object.defineProperty&&!o(function(){return Object.defineProperty({},"x",{get:function(){}})}),l="foo"===function(){}.name,p=Function.call.bind(Array.prototype.forEach),f=Function.call.bind(Array.prototype.reduce),d=Function.call.bind(Array.prototype.filter),h=Function.call.bind(Array.prototype.some),y=function(e,t,n,r){!r&&t in e||(u?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},m=function(e,t,n){p(i(t),function(r){var a=t[r];y(e,r,a,!!n)})},g=Function.call.bind(Object.prototype.toString),v="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===g(e)}:function(e){return"function"==typeof e},b=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},w=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return e[t]},set:function(n){e[t]=n}})},T=function(e,t,n){if(u){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n},S=function(e,t,n){u?Object.defineProperty(e,t,n):"value"in n&&(e[t]=n.value)},x=function(e,t){t&&v(t.toString)&&y(e,"toString",t.toString.bind(t),!0)},k=Object.create||function(e,t){var n=function(){};n.prototype=e;var r=new n;return void 0!==t&&i(t).forEach(function(e){S(r,e,t[e])}),r},O=function(e,t){return!!Object.setPrototypeOf&&s(function(){var n=function t(n){var r=new e(n);return Object.setPrototypeOf(r,t.prototype),r};return Object.setPrototypeOf(n,e),n.prototype=k(e.prototype,{constructor:{value:n}}),t(n)})},j=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),A=j.isFinite,C=Function.call.bind(String.prototype.indexOf),E=Function.apply.bind(Array.prototype.indexOf),_=Function.call.bind(Array.prototype.concat),N=Function.call.bind(String.prototype.slice),P=Function.call.bind(Array.prototype.push),I=Function.apply.bind(Array.prototype.push),M=Function.call.bind(Array.prototype.shift),D=Math.max,R=Math.min,L=Math.floor,q=Math.abs,F=Math.exp,V=Math.log,H=Math.sqrt,z=Function.call.bind(Object.prototype.hasOwnProperty),$=function(){},B=j.Map,W=B&&B.prototype.delete,U=B&&B.prototype.get,G=B&&B.prototype.has,X=B&&B.prototype.set,Y=j.Symbol||{},J=Y.species||"@@species",K=Number.isNaN||function(e){return e!=e},Z=Number.isFinite||function(e){return"number"==typeof e&&A(e)},Q=v(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t?t:K(t)?t:t<0?-1:1},ee=function(e){var t=Number(e);return t<-1||K(t)?NaN:0===t||t===1/0?t:-1===t?-1/0:1+t-1==0?t:t*(V(1+t)/(1+t-1))},te=function(e){return"[object Arguments]"===g(e)},ne=te(arguments)?te:function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==g(e)&&"[object Function]"===g(e.callee)},re=function(e){return null===e||"function"!=typeof e&&"object"!==(void 0===e?"undefined":_typeof(e))},ae=function(e){return"[object String]"===g(e)},ie=function(e){return"[object RegExp]"===g(e)},oe=function(e){return"function"==typeof j.Symbol&&"symbol"===(void 0===e?"undefined":_typeof(e))},se=function(e,t,n){var r=e[t];y(e,t,n,!0),x(e[t],r)},ce="function"==typeof Y&&"function"==typeof Y.for&&oe(Y()),ue=oe(Y.iterator)?Y.iterator:"_es6-shim iterator_";j.Set&&"function"==typeof(new j.Set)["@@iterator"]&&(ue="@@iterator"),j.Reflect||y(j,"Reflect",{},!0);var le,pe=j.Reflect,fe=String,de="undefined"!=typeof document&&document?document.all:null,he=null==de?function(e){return null==e}:function(e){return null==e&&e!==de},ye={Call:function(e,t){var r=arguments.length>2?arguments[2]:[];if(!ye.IsCallable(e))throw new TypeError(e+" is not a function");return n(e,t,r)},RequireObjectCoercible:function(e,t){if(he(e))throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return null!=e&&!0!==e&&!1!==e&&("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))||e===de)},ToObject:function(e,t){return Object(ye.RequireObjectCoercible(e,t))},IsCallable:v,IsConstructor:function(e){return ye.IsCallable(e)},ToInt32:function(e){return ye.ToNumber(e)>>0},ToUint32:function(e){return ye.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===g(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=ye.ToNumber(e);return K(t)?0:0!==t&&Z(t)?(t>0?1:-1)*L(q(t)):t},ToLength:function(e){var t=ye.ToInteger(e);return t<=0?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0!==e||1/e==1/t:K(e)&&K(t)},SameValueZero:function(e,t){return e===t||K(e)&&K(t)},IsIterable:function(e){return ye.TypeIsObject(e)&&(void 0!==e[ue]||ne(e))},GetIterator:function(e){if(ne(e))return new t(e,"value");var n=ye.GetMethod(e,ue);if(!ye.IsCallable(n))throw new TypeError("value is not an iterable");var r=ye.Call(n,e);if(!ye.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(e,t){var n=ye.ToObject(e)[t];if(!he(n)){if(!ye.IsCallable(n))throw new TypeError("Method not callable: "+t);return n}},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var n=ye.GetMethod(e,"return");if(void 0!==n){var r,a;try{r=ye.Call(n,e)}catch(e){a=e}if(!t){if(a)throw a;if(!ye.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ye.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=ye.IteratorNext(e);return!ye.IteratorComplete(t)&&t},Construct:function(e,t,n,r){var a=void 0===n?e:n;if(!r&&pe.construct)return pe.construct(e,t,a);var i=a.prototype;ye.TypeIsObject(i)||(i=Object.prototype);var o=k(i),s=ye.Call(e,o,t);return ye.TypeIsObject(s)?s:o},SpeciesConstructor:function(e,t){var n=e.constructor;if(void 0===n)return t;if(!ye.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[J];if(he(r))return t;if(!ye.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(e,t,n,r){var a=ye.ToString(e),i="<"+t;""!==n&&(i+=" "+n+'="'+ye.ToString(r).replace(/"/g,"&quot;")+'"');return i+">"+a+"</"+t+">"},IsRegExp:function(e){if(!ye.TypeIsObject(e))return!1;var t=e[Y.match];return void 0!==t?!!t:ie(e)},ToString:function(e){return fe(e)}};if(u&&ce){var me=function(e){if(oe(Y[e]))return Y[e];var t=Y.for("Symbol."+e);return Object.defineProperty(Y,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!oe(Y.search)){var ge=me("search"),ve=String.prototype.search;y(RegExp.prototype,ge,function(e){return ye.Call(ve,e,[this])});se(String.prototype,"search",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,ge);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(ve,t,[ye.ToString(e)])})}if(!oe(Y.replace)){var be=me("replace"),we=String.prototype.replace;y(RegExp.prototype,be,function(e,t){return ye.Call(we,e,[this,t])});se(String.prototype,"replace",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,be);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(we,n,[ye.ToString(e),t])})}if(!oe(Y.split)){var Te=me("split"),Se=String.prototype.split;y(RegExp.prototype,Te,function(e,t){return ye.Call(Se,e,[this,t])});se(String.prototype,"split",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,Te);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(Se,n,[ye.ToString(e),t])})}var xe=oe(Y.match),ke=xe&&((le={})[Y.match]=function(){return 42},42!=="a".match(le));if(!xe||ke){var Oe=me("match"),je=String.prototype.match;y(RegExp.prototype,Oe,function(e){return ye.Call(je,e,[this])});se(String.prototype,"match",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,Oe);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(je,t,[ye.ToString(e)])})}}var Ae=function(e,t,n){x(t,e),Object.setPrototypeOf&&Object.setPrototypeOf(e,t),u?p(Object.getOwnPropertyNames(e),function(r){r in $||n[r]||w(e,r,t)}):p(Object.keys(e),function(r){r in $||n[r]||(t[r]=e[r])}),t.prototype=e.prototype,T(e.prototype,"constructor",t)},Ce=function(){return this},Ee=function(e){u&&!z(e,J)&&b(e,J,Ce)},_e=function(e,t){var n=t||function(){return this};y(e,ue,n),!e[ue]&&oe(ue)&&(e[ue]=n)},Ne=function(e,t,n){if(function(e,t,n){u?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}(e,t,n),!ye.SameValue(e[t],n))throw new TypeError("property is nonconfigurable")},Pe=function(e,t,n,r){if(!ye.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var a=t.prototype;ye.TypeIsObject(a)||(a=n);var i=k(a);for(var o in r)if(z(r,o)){var s=r[o];y(i,o,s,!0)}return i};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Ie=String.fromCodePoint;se(String,"fromCodePoint",function(e){return ye.Call(Ie,this,arguments)})}var Me={fromCodePoint:function(e){for(var t,n=[],r=0,a=arguments.length;r<a;r++){if(t=Number(arguments[r]),!ye.SameValue(t,ye.ToInteger(t))||t<0||t>1114111)throw new RangeError("Invalid code point "+t);t<65536?P(n,String.fromCharCode(t)):(t-=65536,P(n,String.fromCharCode(55296+(t>>10))),P(n,String.fromCharCode(t%1024+56320)))}return n.join("")},raw:function(e){var t=ye.ToObject(e,"bad callSite"),n=ye.ToObject(t.raw,"bad raw value"),r=n.length,a=ye.ToLength(r);if(a<=0)return"";for(var i,o,s,c,u=[],l=0;l<a&&(i=ye.ToString(l),s=ye.ToString(n[i]),P(u,s),!(l+1>=a));)o=l+1<arguments.length?arguments[l+1]:"",c=ye.ToString(o),P(u,c),l+=1;return u.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&se(String,"raw",Me.raw),m(String,Me);var De={repeat:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e);if(n<0||n>=1/0)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return function e(t,n){if(n<1)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r}(t,n)},startsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=ye.ToString(e);arguments.length>1&&(n=arguments[1]);var a=D(ye.ToInteger(n),0);return N(t,a,a+r.length)===r},endsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=ye.ToString(e),a=t.length;arguments.length>1&&(n=arguments[1]);var i=void 0===n?a:ye.ToInteger(n),o=R(D(i,0),a);return N(t,o-r.length,o)===r},includes:function(e){if(ye.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,n=ye.ToString(e);return arguments.length>1&&(t=arguments[1]),-1!==C(this,n,t)},codePointAt:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e),r=t.length;if(n>=0&&n<r){var a=t.charCodeAt(n);if(a<55296||a>56319||n+1===r)return a;var i=t.charCodeAt(n+1);return i<56320||i>57343?a:1024*(a-55296)+(i-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&se(String.prototype,"includes",De.includes),String.prototype.startsWith&&String.prototype.endsWith){var Re=o(function(){return"/a/".startsWith(/a/)}),Le=s(function(){return!1==="abc".startsWith("a",1/0)});Re&&Le||(se(String.prototype,"startsWith",De.startsWith),se(String.prototype,"endsWith",De.endsWith))}ce&&(s(function(){var e=/a/;return e[Y.match]=!1,"/a/".startsWith(e)})||se(String.prototype,"startsWith",De.startsWith),s(function(){var e=/a/;return e[Y.match]=!1,"/a/".endsWith(e)})||se(String.prototype,"endsWith",De.endsWith),s(function(){var e=/a/;return e[Y.match]=!1,"/a/".includes(e)})||se(String.prototype,"includes",De.includes));m(String.prototype,De);var qe=["\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join(""),Fe=new RegExp("(^["+qe+"]+)|(["+qe+"]+$)","g"),Ve=function(){return ye.ToString(ye.RequireObjectCoercible(this)).replace(Fe,"")},He=["\x85","\u200b","\ufffe"].join(""),ze=new RegExp("["+He+"]","g"),$e=/^[-+]0x[0-9a-f]+$/i,Be=He.trim().length!==He.length;y(String.prototype,"trim",Ve,Be);var We=function(e){return{value:e,done:0===arguments.length}},Ue=function(e){ye.RequireObjectCoercible(e),this._s=ye.ToString(e),this._i=0};Ue.prototype.next=function(){var e=this._s,t=this._i;if(void 0===e||t>=e.length)return this._s=void 0,We();var n,r,a=e.charCodeAt(t);return r=a<55296||a>56319||t+1===e.length?1:(n=e.charCodeAt(t+1))<56320||n>57343?1:2,this._i=t+r,We(e.substr(t,r))},_e(Ue.prototype),_e(String.prototype,function(){return new Ue(this)});var Ge={from:function(e){var t,n,a,i,o,s,c=this;if(arguments.length>1&&(t=arguments[1]),void 0===t)n=!1;else{if(!ye.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2]),n=!0}if(void 0!==(ne(e)||ye.GetMethod(e,ue))){o=ye.IsConstructor(c)?Object(new c):[];var u,l,p=ye.GetIterator(e);for(s=0;!1!==(u=ye.IteratorStep(p));){l=u.value;try{n&&(l=void 0===a?t(l,s):r(t,a,l,s)),o[s]=l}catch(e){throw ye.IteratorClose(p,!0),e}s+=1}i=s}else{var f,d=ye.ToObject(e);for(i=ye.ToLength(d.length),o=ye.IsConstructor(c)?Object(new c(i)):new Array(i),s=0;s<i;++s)f=d[s],n&&(f=void 0===a?t(f,s):r(t,a,f,s)),Ne(o,s,f)}return o.length=i,o},of:function(){for(var e=arguments.length,t=this,n=a(t)||!ye.IsCallable(t)?new Array(e):ye.Construct(t,[e]),r=0;r<e;++r)Ne(n,r,arguments[r]);return n.length=e,n}};m(Array,Ge),Ee(Array),m((t=function(e,t){this.i=0,this.array=e,this.kind=t}).prototype,{next:function(){var e=this.i,n=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if(void 0!==n)for(var r=ye.ToLength(n.length);e<r;e++){var a,i=this.kind;return"key"===i?a=e:"value"===i?a=n[e]:"entry"===i&&(a=[e,n[e]]),this.i=e+1,We(a)}return this.array=void 0,We()}}),_e(t.prototype),Array.of===Ge.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}()||se(Array,"of",Ge.of);var Xe={copyWithin:function(e,t){var n,r=ye.ToObject(this),a=ye.ToLength(r.length),i=ye.ToInteger(e),o=ye.ToInteger(t),s=i<0?D(a+i,0):R(i,a),c=o<0?D(a+o,0):R(o,a);arguments.length>2&&(n=arguments[2]);var u=void 0===n?a:ye.ToInteger(n),l=u<0?D(a+u,0):R(u,a),p=R(l-c,a-s),f=1;for(c<s&&s<c+p&&(f=-1,c+=p-1,s+=p-1);p>0;)c in r?r[s]=r[c]:delete r[s],c+=f,s+=f,p-=1;return r},fill:function(e){var t,n;arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]);var r=ye.ToObject(this),a=ye.ToLength(r.length);t=ye.ToInteger(void 0===t?0:t);for(var i=(n=ye.ToInteger(void 0===n?a:n))<0?a+n:n,o=t<0?D(a+t,0):R(t,a);o<a&&o<i;++o)r[o]=e;return r},find:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var a,i=arguments.length>1?arguments[1]:null,o=0;o<n;o++)if(a=t[o],i){if(r(e,i,a,o,t))return a}else if(e(a,o,t))return a},findIndex:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var a=arguments.length>1?arguments[1]:null,i=0;i<n;i++)if(a){if(r(e,a,t[i],i,t))return i}else if(e(t[i],i,t))return i;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!ye.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ye.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ue]&&(m(Array.prototype,{values:Array.prototype[ue]}),oe(Y.unscopables)&&(Array.prototype[Y.unscopables].values=!0)),l&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Ye=Array.prototype.values;se(Array.prototype,"values",function(){return ye.Call(Ye,this,arguments)}),y(Array.prototype,ue,Array.prototype.values,!0)}m(Array.prototype,Xe),1/[!0].indexOf(!0,-0)<0&&y(Array.prototype,"indexOf",function(e){var t=E(this,arguments);return 0===t&&1/t<0?0:t},!0),_e(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&_e(Object.getPrototypeOf([].values()));var Je,Ke=s(function(){return 0===Array.from({length:-1}).length}),Ze=1===(Je=Array.from([0].entries())).length&&a(Je[0])&&0===Je[0][0]&&0===Je[0][1];if(Ke&&Ze||se(Array,"from",Ge.from),!s(function(){return Array.from([0],void 0)})){var Qe=Array.from;se(Array,"from",function(e){return arguments.length>1&&void 0!==arguments[1]?ye.Call(Qe,this,arguments):r(Qe,this,e)})}var et=-(Math.pow(2,32)-1),tt=function(e,t){var n={length:et};return n[t?(n.length>>>0)-1:0]=!0,s(function(){return r(e,n,function(){throw new RangeError("should not reach here")},[]),!0})};if(!tt(Array.prototype.forEach)){var nt=Array.prototype.forEach;se(Array.prototype,"forEach",function(e){return ye.Call(nt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.map)){var rt=Array.prototype.map;se(Array.prototype,"map",function(e){return ye.Call(rt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.filter)){var at=Array.prototype.filter;se(Array.prototype,"filter",function(e){return ye.Call(at,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.some)){var it=Array.prototype.some;se(Array.prototype,"some",function(e){return ye.Call(it,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.every)){var ot=Array.prototype.every;se(Array.prototype,"every",function(e){return ye.Call(ot,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduce)){var st=Array.prototype.reduce;se(Array.prototype,"reduce",function(e){return ye.Call(st,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduceRight,!0)){var ct=Array.prototype.reduceRight;se(Array.prototype,"reduceRight",function(e){return ye.Call(ct,this.length>=0?this:[],arguments)})}var ut=8!==Number("0o10"),lt=2!==Number("0b10"),pt=h(He,function(e){return 0===Number(e+0+e)});if(ut||lt||pt){var ft=Number,dt=/^0b[01]+$/i,ht=/^0o[0-7]+$/i,yt=dt.test.bind(dt),mt=ht.test.bind(ht),gt=ze.test.bind(ze),vt=$e.test.bind($e),bt=function(){var e=function(t){var n;"string"==typeof(n=arguments.length>0?re(t)?t:function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),re(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),re(t)))return t;throw new TypeError("No default value")}(t):0)&&(n=ye.Call(Ve,n),yt(n)?n=parseInt(N(n,2),2):mt(n)?n=parseInt(N(n,2),8):(gt(n)||vt(n))&&(n=NaN));var r=this,a=s(function(){return ft.prototype.valueOf.call(r),!0});return r instanceof e&&!a?new ft(n):ft(n)};return e}();Ae(ft,bt,{}),m(bt,{NaN:ft.NaN,MAX_VALUE:ft.MAX_VALUE,MIN_VALUE:ft.MIN_VALUE,NEGATIVE_INFINITY:ft.NEGATIVE_INFINITY,POSITIVE_INFINITY:ft.POSITIVE_INFINITY}),Number=bt,T(j,"Number",bt)}var wt=Math.pow(2,53)-1;m(Number,{MAX_SAFE_INTEGER:wt,MIN_SAFE_INTEGER:-wt,EPSILON:2.220446049250313e-16,parseInt:j.parseInt,parseFloat:j.parseFloat,isFinite:Z,isInteger:function(e){return Z(e)&&ye.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&q(e)<=Number.MAX_SAFE_INTEGER},isNaN:K}),y(Number,"parseInt",j.parseInt,Number.parseInt!==j.parseInt),1===[,1].find(function(){return!0})&&se(Array.prototype,"find",Xe.find),0!==[,1].findIndex(function(){return!0})&&se(Array.prototype,"findIndex",Xe.findIndex);var Tt,St,xt,kt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),Ot=function(e,t){u&&kt(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},jt=function(){for(var e=Number(this),t=arguments.length,n=t-e,r=new Array(n<0?0:n),a=e;a<t;++a)r[a-e]=arguments[a];return r},At=function(e){return function(t,n){return t[n]=e[n],t}},Ct=function(e,t){var n,r=i(Object(t));return ye.IsCallable(Object.getOwnPropertySymbols)&&(n=d(Object.getOwnPropertySymbols(Object(t)),kt(t))),f(_(r,n||[]),At(t),e)},Et={assign:function(e,t){var n=ye.ToObject(e,"Cannot convert undefined or null to object");return f(ye.Call(jt,1,arguments),Ct,n)},is:function(e,t){return ye.SameValue(e,t)}};if(Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}()&&se(Object,"assign",Et.assign),m(Object,Et),u){var _t={setPrototypeOf:function(e,t){var n,a=function(e,t){return function(e,t){if(!ye.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!ye.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)}(e,t),r(n,e,t),e};try{n=e.getOwnPropertyDescriptor(e.prototype,"__proto__").set,r(n,{},null)}catch(t){if(e.prototype!=={}.__proto__)return;n=function(e){this.__proto__=e},a.polyfill=a(a({},null),e.prototype)instanceof e}return a}(Object)};m(Object,_t)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(Tt=Object.create(null),St=Object.getPrototypeOf,xt=Object.setPrototypeOf,Object.getPrototypeOf=function(e){var t=St(e);return t===Tt?null:t},Object.setPrototypeOf=function(e,t){return xt(e,null===t?Tt:t)},Object.setPrototypeOf.polyfill=!1),!!o(function(){return Object.keys("foo")})){var Nt=Object.keys;se(Object,"keys",function(e){return Nt(ye.ToObject(e))}),i=Object.keys}if(o(function(){return Object.keys(/a/g)})){var Pt=Object.keys;se(Object,"keys",function(e){if(ie(e)){var t=[];for(var n in e)z(e,n)&&P(t,n);return t}return Pt(e)}),i=Object.keys}if(Object.getOwnPropertyNames&&!!o(function(){return Object.getOwnPropertyNames("foo")})){var It="object"===("undefined"==typeof window?"undefined":_typeof(window))?Object.getOwnPropertyNames(window):[],Mt=Object.getOwnPropertyNames;se(Object,"getOwnPropertyNames",function(e){var t=ye.ToObject(e);if("[object Window]"===g(t))try{return Mt(t)}catch(e){return _([],It)}return Mt(t)})}if(Object.getOwnPropertyDescriptor&&!!o(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Dt=Object.getOwnPropertyDescriptor;se(Object,"getOwnPropertyDescriptor",function(e,t){return Dt(ye.ToObject(e),t)})}if(Object.seal&&!!o(function(){return Object.seal("foo")})){var Rt=Object.seal;se(Object,"seal",function(e){return ye.TypeIsObject(e)?Rt(e):e})}if(Object.isSealed&&!!o(function(){return Object.isSealed("foo")})){var Lt=Object.isSealed;se(Object,"isSealed",function(e){return!ye.TypeIsObject(e)||Lt(e)})}if(Object.freeze&&!!o(function(){return Object.freeze("foo")})){var qt=Object.freeze;se(Object,"freeze",function(e){return ye.TypeIsObject(e)?qt(e):e})}if(Object.isFrozen&&!!o(function(){return Object.isFrozen("foo")})){var Ft=Object.isFrozen;se(Object,"isFrozen",function(e){return!ye.TypeIsObject(e)||Ft(e)})}if(Object.preventExtensions&&!!o(function(){return Object.preventExtensions("foo")})){var Vt=Object.preventExtensions;se(Object,"preventExtensions",function(e){return ye.TypeIsObject(e)?Vt(e):e})}if(Object.isExtensible&&!!o(function(){return Object.isExtensible("foo")})){var Ht=Object.isExtensible;se(Object,"isExtensible",function(e){return!!ye.TypeIsObject(e)&&Ht(e)})}if(Object.getPrototypeOf&&!!o(function(){return Object.getPrototypeOf("foo")})){var zt=Object.getPrototypeOf;se(Object,"getPrototypeOf",function(e){return zt(ye.ToObject(e))})}var $t,Bt=u&&(($t=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ye.IsCallable($t.get));if(u&&!Bt){b(RegExp.prototype,"flags",function(){if(!ye.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e})}var Wt,Ut=u&&s(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Gt=ce&&u&&((Wt=/./)[Y.match]=!1,RegExp(Wt)===Wt),Xt=s(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),Yt=Xt&&s(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Xt||!Yt){var Jt=RegExp.prototype.toString;y(RegExp.prototype,"toString",function(){var e=ye.RequireObjectCoercible(this);return ie(e)?r(Jt,e):"/"+fe(e.source)+"/"+fe(e.flags)},!0),x(RegExp.prototype.toString,Jt)}if(u&&(!Ut||Gt)){var Kt=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Zt=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Qt=ye.IsCallable(Zt.get)?Zt.get:function(){return this.source},en=RegExp,tn=function e(t,n){var r=ye.IsRegExp(t);return this instanceof e||!r||void 0!==n||t.constructor!==e?ie(t)?new e(ye.Call(Qt,t),void 0===n?ye.Call(Kt,t):n):(r&&(t.source,void 0===n&&t.flags),new en(t,n)):t};Ae(en,tn,{$input:!0}),RegExp=tn,T(j,"RegExp",tn)}if(u){var nn={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};p(i(nn),function(e){e in RegExp&&!(nn[e]in RegExp)&&b(RegExp,nn[e],function(){return RegExp[e]})})}Ee(RegExp);var rn=1/Number.EPSILON,an=Math.pow(2,-23),on=Math.pow(2,127)*(2-an),sn=Math.pow(2,-126),cn=Math.E,un=Math.LOG2E,ln=Math.LOG10E,pn=Number.prototype.clz;delete Number.prototype.clz;var fn={acosh:function(e){var t=Number(e);if(K(t)||e<1)return NaN;if(1===t)return 0;if(t===1/0)return t;var n=1/(t*t);if(t<2)return ee(t-1+H(1-n)*t);var r=t/2;return ee(r+H(1-n)*r-1)+1/un},asinh:function(e){var t=Number(e);if(0===t||!A(t))return t;var n=q(t),r=n*n,a=Q(t);return n<1?a*ee(n+r/(H(r+1)+1)):a*(ee(n/2+H(1+1/r)*n/2-1)+1/un)},atanh:function(e){var t=Number(e);if(0===t)return t;if(-1===t)return-1/0;if(1===t)return 1/0;if(K(t)||t<-1||t>1)return NaN;var n=q(t);return Q(t)*ee(2*n/(1-n))/2},cbrt:function(e){var t=Number(e);if(0===t)return t;var n,r=t<0;return r&&(t=-t),n=t===1/0?1/0:(t/((n=F(V(t)/3))*n)+2*n)/3,r?-n:n},clz32:function(e){var t=Number(e),n=ye.ToUint32(t);return 0===n?32:pn?ye.Call(pn,n):31-L(V(n+.5)*un)},cosh:function(e){var t=Number(e);if(0===t)return 1;if(K(t))return NaN;if(!A(t))return 1/0;var n=F(q(t)-1);return(n+1/(n*cn*cn))*(cn/2)},expm1:function(e){var t=Number(e);if(t===-1/0)return-1;if(!A(t)||0===t)return t;if(q(t)>.5)return F(t)-1;for(var n=t,r=0,a=1;r+n!==r;)r+=n,n*=t/(a+=1);return r},hypot:function(e,t){for(var n=0,r=0,a=0;a<arguments.length;++a){var i=q(Number(arguments[a]));r<i?(n*=r/i*(r/i),n+=1,r=i):n+=i>0?i/r*(i/r):i}return r===1/0?1/0:r*H(n)},log2:function(e){return V(e)*un},log10:function(e){return V(e)*ln},log1p:ee,sign:Q,sinh:function(e){var t=Number(e);if(!A(t)||0===t)return t;var n=q(t);if(n<1){var r=Math.expm1(n);return Q(t)*r*(1+1/(r+1))/2}var a=F(n-1);return Q(t)*(a-1/(a*cn*cn))*(cn/2)},tanh:function(e){var t=Number(e);return K(t)||0===t?t:t>=20?1:t<=-20?-1:(Math.expm1(t)-Math.expm1(-t))/(F(t)+F(-t))},trunc:function(e){var t=Number(e);return t<0?-L(-t):L(t)},imul:function(e,t){var n=ye.ToUint32(e),r=ye.ToUint32(t),a=65535&n,i=65535&r;return a*i+((n>>>16&65535)*i+a*(r>>>16&65535)<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-1/0||K(t))return t;var n=Q(t),r=q(t);if(r<sn)return n*(r/sn/an+rn-rn)*sn*an;var a=(1+an/Number.EPSILON)*r,i=a-(a-r);return i>on||K(i)?n*(1/0):n*i}},dn=function(e,t,n){return q(1-e/t)/Number.EPSILON<(n||8)};m(Math,fn),y(Math,"sinh",fn.sinh,Math.sinh(710)===1/0),y(Math,"cosh",fn.cosh,Math.cosh(710)===1/0),y(Math,"log1p",fn.log1p,-1e-17!==Math.log1p(-1e-17)),y(Math,"asinh",fn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),y(Math,"asinh",fn.asinh,Math.asinh(1e300)===1/0),y(Math,"atanh",fn.atanh,0===Math.atanh(1e-300)),y(Math,"tanh",fn.tanh,-2e-17!==Math.tanh(-2e-17)),y(Math,"acosh",fn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),y(Math,"acosh",fn.acosh,!dn(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),y(Math,"cbrt",fn.cbrt,!dn(Math.cbrt(1e-300),1e-100)),y(Math,"sinh",fn.sinh,-2e-17!==Math.sinh(-2e-17));var hn=Math.expm1(10);y(Math,"expm1",fn.expm1,hn>22025.465794806718||hn<22025.465794806718);var yn=Math.round,mn=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),gn=[rn+1,2*rn-1].every(function(e){return Math.round(e)===e});y(Math,"round",function(e){var t=L(e);return e-t<.5?t:-1===t?-0:t+1},!mn||!gn),x(Math.round,yn);var vn=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=fn.imul,x(Math.imul,vn)),2!==Math.imul.length&&se(Math,"imul",function(e,t){return ye.Call(vn,Math,arguments)});var bn,wn,Tn=function(){var e=j.setTimeout;if("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))){ye.IsPromise=function(e){return!!ye.TypeIsObject(e)&&void 0!==e._promise};var t,n=function(e){if(!ye.IsConstructor(e))throw new TypeError("Bad promise constructor");var t=this;if(t.resolve=void 0,t.reject=void 0,t.promise=new e(function(e,n){if(void 0!==t.resolve||void 0!==t.reject)throw new TypeError("Bad Promise implementation!");t.resolve=e,t.reject=n}),!ye.IsCallable(t.resolve)||!ye.IsCallable(t.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ye.IsCallable(window.postMessage)&&(t=function(){var e=[];return window.addEventListener("message",function(t){if(t.source===window&&"zero-timeout-message"===t.data){if(t.stopPropagation(),0===e.length)return;M(e)()}},!0),function(t){P(e,t),window.postMessage("zero-timeout-message","*")}});var a,i,o,s,c,u=ye.IsCallable(j.setImmediate)?j.setImmediate:"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick?process.nextTick:(a=j.Promise,(i=a&&a.resolve&&a.resolve())&&function(e){return i.then(e)}||(ye.IsCallable(t)?t():function(t){e(t,0)})),l=function(e){return e},p=function(e){throw e},f={},d=function(e,t,n){u(function(){h(e,t,n)})},h=function(e,t,n){var r,a;if(t===f)return e(n);try{r=e(n),a=t.resolve}catch(e){r=e,a=t.reject}a(r)},y=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.fulfillReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var a=1,i=0;a<r;a++,i+=3)d(n[i+0],n[i+2],t),e[i+0]=void 0,e[i+1]=void 0,e[i+2]=void 0;n.result=t,n.state=1,n.reactionLength=0},g=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.rejectReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var a=1,i=0;a<r;a++,i+=3)d(n[i+1],n[i+2],t),e[i+0]=void 0,e[i+1]=void 0,e[i+2]=void 0;n.result=t,n.state=2,n.reactionLength=0},v=function(e){var t=!1;return{resolve:function(n){var r;if(!t){if(t=!0,n===e)return g(e,new TypeError("Self resolution"));if(!ye.TypeIsObject(n))return y(e,n);try{r=n.then}catch(t){return g(e,t)}if(!ye.IsCallable(r))return y(e,n);u(function(){w(e,n,r)})}},reject:function(n){if(!t)return t=!0,g(e,n)}}},b=function(e,t,n,a){e===s?r(e,t,n,a,f):r(e,t,n,a)},w=function(e,t,n){var r=v(e),a=r.resolve,i=r.reject;try{b(n,t,a,i)}catch(e){i(e)}},T=c=function(e){if(!(this instanceof c))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ye.IsCallable(e))throw new TypeError("not a valid resolver");var t=Pe(this,c,o,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),n=v(t),r=n.reject;try{e(n.resolve,r)}catch(e){r(e)}return t};o=T.prototype;var S=function(e,t,n,r){var a=!1;return function(i){a||(a=!0,t[e]=i,0==--r.count&&(0,n.resolve)(t))}};return m(T,{all:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,a,i=new n(t);try{return function(e,t,n){for(var r,a,i=e.iterator,o=[],s={count:1},c=0;;){try{if(!1===(r=ye.IteratorStep(i))){e.done=!0;break}a=r.value}catch(t){throw e.done=!0,t}o[c]=void 0;var u=t.resolve(a),l=S(c,o,n,s);s.count+=1,b(u.then,u,l,n.reject),c+=1}0==--s.count&&(0,n.resolve)(o);return n.promise}(a={iterator:r=ye.GetIterator(e),done:!1},t,i)}catch(e){var o=e;if(a&&!a.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,i.reject)(o),i.promise}},race:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,a,i=new n(t);try{return function(e,t,n){for(var r,a,i,o=e.iterator;;){try{if(!1===(r=ye.IteratorStep(o))){e.done=!0;break}a=r.value}catch(t){throw e.done=!0,t}i=t.resolve(a),b(i.then,i,n.resolve,n.reject)}return n.promise}(a={iterator:r=ye.GetIterator(e),done:!1},t,i)}catch(e){var o=e;if(a&&!a.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,i.reject)(o),i.promise}},reject:function(e){if(!ye.TypeIsObject(this))throw new TypeError("Bad promise constructor");var t=new n(this);return(0,t.reject)(e),t.promise},resolve:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Bad promise constructor");if(ye.IsPromise(e)&&e.constructor===t)return e;var r=new n(t);return(0,r.resolve)(e),r.promise}}),m(o,{catch:function(e){return this.then(null,e)},then:function(e,t){if(!ye.IsPromise(this))throw new TypeError("not a promise");var r,a=ye.SpeciesConstructor(this,T);r=arguments.length>2&&arguments[2]===f&&a===T?f:new n(a);var i,o=ye.IsCallable(e)?e:l,s=ye.IsCallable(t)?t:p,c=this._promise;if(0===c.state){if(0===c.reactionLength)c.fulfillReactionHandler0=o,c.rejectReactionHandler0=s,c.reactionCapability0=r;else{var u=3*(c.reactionLength-1);c[u+0]=o,c[u+1]=s,c[u+2]=r}c.reactionLength+=1}else if(1===c.state)i=c.result,d(o,r,i);else{if(2!==c.state)throw new TypeError("unexpected Promise state");i=c.result,d(s,r,i)}return r.promise}}),f=new n(T),s=o.then,T}}();if(j.Promise&&(delete j.Promise.accept,delete j.Promise.defer,delete j.Promise.prototype.chain),"function"==typeof Tn){m(j,{Promise:Tn});var Sn=O(j.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),xn=!o(function(){return j.Promise.reject(42).then(null,5).then(null,$)}),kn=o(function(){return j.Promise.call(3,$)}),On=function(e){var t=e.resolve(5);t.constructor={};var n=e.resolve(t);try{n.then(null,$).then(null,$)}catch(e){return!0}return t===n}(j.Promise),jn=u&&(bn=0,wn=Object.defineProperty({},"then",{get:function(){bn+=1}}),Promise.resolve(wn),1===bn),An=function e(t){var n=new Promise(t);t(3,function(){}),this.then=n.then,this.constructor=e};An.prototype=Promise.prototype,An.all=Promise.all;var Cn=s(function(){return!!An.all([1,2])});if(Sn&&xn&&kn&&!On&&jn&&!Cn||(Promise=Tn,se(j,"Promise",Tn)),1!==Promise.all.length){var En=Promise.all;se(Promise,"all",function(e){return ye.Call(En,this,arguments)})}if(1!==Promise.race.length){var _n=Promise.race;se(Promise,"race",function(e){return ye.Call(_n,this,arguments)})}if(1!==Promise.resolve.length){var Nn=Promise.resolve;se(Promise,"resolve",function(e){return ye.Call(Nn,this,arguments)})}if(1!==Promise.reject.length){var Pn=Promise.reject;se(Promise,"reject",function(e){return ye.Call(Pn,this,arguments)})}Ot(Promise,"all"),Ot(Promise,"race"),Ot(Promise,"resolve"),Ot(Promise,"reject"),Ee(Promise)}var In,Mn,Dn=function(e){var t=i(f(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},Rn=Dn(["z","a","bb"]),Ln=Dn(["z",1,"a","3",2]);if(u){var qn=function(e,t){return t||Rn?he(e)?"^"+ye.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?Ln?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},Fn=function(){return Object.create?Object.create(null):{}},Vn=function(e,t,n){if(a(n)||ae(n))p(n,function(e){if(!ye.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");t.set(e[0],e[1])});else if(n instanceof e)r(e.prototype.forEach,n,function(e,n){t.set(n,e)});else{var i,o;if(!he(n)){if(o=t.set,!ye.IsCallable(o))throw new TypeError("bad map");i=ye.GetIterator(n)}if(void 0!==i)for(;;){var s=ye.IteratorStep(i);if(!1===s)break;var c=s.value;try{if(!ye.TypeIsObject(c))throw new TypeError("Iterator value "+c+" is not an entry object");r(o,t,c[0],c[1])}catch(e){throw ye.IteratorClose(i,!0),e}}}},Hn=function(e,t,n){if(a(n)||ae(n))p(n,function(e){t.add(e)});else if(n instanceof e)r(e.prototype.forEach,n,function(e){t.add(e)});else{var i,o;if(!he(n)){if(o=t.add,!ye.IsCallable(o))throw new TypeError("bad set");i=ye.GetIterator(n)}if(void 0!==i)for(;;){var s=ye.IteratorStep(i);if(!1===s)break;var c=s.value;try{r(o,t,c)}catch(e){throw ye.IteratorClose(i,!0),e}}}},zn={Map:function(){var e={},t=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};t.prototype.isRemoved=function(){return this.key===e};var n,a=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return!!e._es6map}(e))throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},i=function(e,t){a(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};_e(i.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var e,t=this.i,n=this.kind,r=this.head;if(void 0===this.i)return We();for(;t.isRemoved()&&t!==r;)t=t.prev;for(;t.next!==r;)if(!(t=t.next).isRemoved())return e="key"===n?t.key:"value"===n?t.value:[t.key,t.value],this.i=t,We(e);return this.i=void 0,We()}});var o=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var r=Pe(this,e,n,{_es6map:!0,_head:null,_map:B?new B:null,_size:0,_storage:Fn()}),a=new t(null,null);return a.next=a.prev=a,r._head=a,arguments.length>0&&Vn(e,r,arguments[0]),r};return b(n=o.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),m(n,{get:function(e){var t;a(this,"get");var n=qn(e,!0);if(null!==n)return(t=this._storage[n])?t.value:void 0;if(this._map)return(t=U.call(this._map,e))?t.value:void 0;for(var r=this._head,i=r;(i=i.next)!==r;)if(ye.SameValueZero(i.key,e))return i.value},has:function(e){a(this,"has");var t=qn(e,!0);if(null!==t)return void 0!==this._storage[t];if(this._map)return G.call(this._map,e);for(var n=this._head,r=n;(r=r.next)!==n;)if(ye.SameValueZero(r.key,e))return!0;return!1},set:function(e,n){a(this,"set");var r,i=this._head,o=i,s=qn(e,!0);if(null!==s){if(void 0!==this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new t(e,n),o=i.prev}else this._map&&(G.call(this._map,e)?U.call(this._map,e).value=n:(r=new t(e,n),X.call(this._map,e,r),o=i.prev));for(;(o=o.next)!==i;)if(ye.SameValueZero(o.key,e))return o.value=n,this;return r=r||new t(e,n),ye.SameValue(-0,e)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(t){a(this,"delete");var n=this._head,r=n,i=qn(t,!0);if(null!==i){if(void 0===this._storage[i])return!1;r=this._storage[i].prev,delete this._storage[i]}else if(this._map){if(!G.call(this._map,t))return!1;r=U.call(this._map,t).prev,W.call(this._map,t)}for(;(r=r.next)!==n;)if(ye.SameValueZero(r.key,t))return r.key=e,r.value=e,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){a(this,"clear"),this._map=B?new B:null,this._size=0,this._storage=Fn();for(var t=this._head,n=t,r=n.next;(n=r)!==t;)n.key=e,n.value=e,r=n.next,n.next=n.prev=t;t.next=t.prev=t},keys:function(){return a(this,"keys"),new i(this,"key")},values:function(){return a(this,"values"),new i(this,"value")},entries:function(){return a(this,"entries"),new i(this,"key+value")},forEach:function(e){a(this,"forEach");for(var t=arguments.length>1?arguments[1]:null,n=this.entries(),i=n.next();!i.done;i=n.next())t?r(e,t,i.value[1],i.value[0],this):e(i.value[1],i.value[0],this)}}),_e(n,n.entries),o}(),Set:function(){var e,t=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return e._es6set&&void 0!==e._storage}(e))throw new TypeError("Set.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},n=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=Pe(this,t,e,{_es6set:!0,"[[SetData]]":null,_storage:Fn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Hn(t,n,arguments[0]),n};e=n.prototype;var a=function(e){if(!e["[[SetData]]"]){var t=new zn.Map;e["[[SetData]]"]=t,p(i(e._storage),function(e){var n=function(e){var t=e;if("^null"===t)return null;if("^undefined"!==t){var n=t.charAt(0);return"$"===n?N(t,1):"n"===n?+N(t,1):"b"===n?"btrue"===t:+t}}(e);t.set(n,n)}),e["[[SetData]]"]=t}e._storage=null};b(n.prototype,"size",function(){return t(this,"size"),this._storage?i(this._storage).length:(a(this),this["[[SetData]]"].size)}),m(n.prototype,{has:function(e){var n;return t(this,"has"),this._storage&&null!==(n=qn(e))?!!this._storage[n]:(a(this),this["[[SetData]]"].has(e))},add:function(e){var n;return t(this,"add"),this._storage&&null!==(n=qn(e))?(this._storage[n]=!0,this):(a(this),this["[[SetData]]"].set(e,e),this)},delete:function(e){var n;if(t(this,"delete"),this._storage&&null!==(n=qn(e))){var r=z(this._storage,n);return delete this._storage[n]&&r}return a(this),this["[[SetData]]"].delete(e)},clear:function(){t(this,"clear"),this._storage&&(this._storage=Fn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return t(this,"values"),a(this),new o(this["[[SetData]]"].values())},entries:function(){return t(this,"entries"),a(this),new o(this["[[SetData]]"].entries())},forEach:function(e){t(this,"forEach");var n=arguments.length>1?arguments[1]:null,i=this;a(i),this["[[SetData]]"].forEach(function(t,a){n?r(e,n,a,a,i):e(a,a,i)})}}),y(n.prototype,"keys",n.prototype.values,!0),_e(n.prototype,n.prototype.values);var o=function(e){this.it=e};return o.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},_e(o.prototype),n}()};if(j.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(j.Set=zn.Set),j.Map||j.Set){s(function(){return 2===new Map([[1,2]]).get(1)})||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new B;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,j.Map.prototype),t},j.Map.prototype=k(B.prototype),y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,B));var $n=new Map,Bn=((Mn=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,Mn),Mn.get(0)===Mn&&Mn.get(-0)===Mn&&Mn.has(0)&&Mn.has(-0)),Wn=$n.set(1,2)===$n;Bn&&Wn||se(Map.prototype,"set",function(e,t){return r(X,this,0===e?0:e,t),this}),Bn||(m(Map.prototype,{get:function(e){return r(U,this,0===e?0:e)},has:function(e){return r(G,this,0===e?0:e)}},!0),x(Map.prototype.get,U),x(Map.prototype.has,G));var Un=new Set,Gn=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((In=Un).delete(0),In.add(-0),!In.has(0)),Xn=Un.add(1)===Un;if(!Gn||!Xn){var Yn=Set.prototype.add;Set.prototype.add=function(e){return r(Yn,this,0===e?0:e),this},x(Set.prototype.add,Yn)}if(!Gn){var Jn=Set.prototype.has;Set.prototype.has=function(e){return r(Jn,this,0===e?0:e)},x(Set.prototype.has,Jn);var Kn=Set.prototype.delete;Set.prototype.delete=function(e){return r(Kn,this,0===e?0:e)},x(Set.prototype.delete,Kn)}var Zn=O(j.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),Qn=Object.setPrototypeOf&&!Zn,er=function(){try{return!(j.Map()instanceof j.Map)}catch(e){return e instanceof TypeError}}();0===j.Map.length&&!Qn&&er||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new B;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Map.prototype=B.prototype,y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,B));var tr=O(j.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),nr=Object.setPrototypeOf&&!tr,rr=function(){try{return!(j.Set()instanceof j.Set)}catch(e){return e instanceof TypeError}}();if(0!==j.Set.length||nr||!rr){var ar=j.Set;j.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new ar;return arguments.length>0&&Hn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Set.prototype=ar.prototype,y(j.Set.prototype,"constructor",j.Set,!0),x(j.Set,ar)}var ir=new j.Map,or=!s(function(){return ir.keys().next().done});if(("function"!=typeof j.Map.prototype.clear||0!==(new j.Set).size||0!==ir.size||"function"!=typeof j.Map.prototype.keys||"function"!=typeof j.Set.prototype.keys||"function"!=typeof j.Map.prototype.forEach||"function"!=typeof j.Set.prototype.forEach||c(j.Map)||c(j.Set)||"function"!=typeof ir.keys().next||or||!Zn)&&m(j,{Map:zn.Map,Set:zn.Set},!0),j.Set.prototype.keys!==j.Set.prototype.values&&y(j.Set.prototype,"keys",j.Set.prototype.values,!0),_e(Object.getPrototypeOf((new j.Map).keys())),_e(Object.getPrototypeOf((new j.Set).keys())),l&&"has"!==j.Set.prototype.has.name){var sr=j.Set.prototype.has;se(j.Set.prototype,"has",function(e){return r(sr,this,e)})}}m(j,zn),Ee(j.Map),Ee(j.Set)}var cr=function(e){if(!ye.TypeIsObject(e))throw new TypeError("target must be an object")},ur={apply:function(){return ye.Call(ye.Call,null,arguments)},construct:function(e,t){if(!ye.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:e;if(!ye.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return ye.Construct(e,t,n,"internal")},deleteProperty:function(e,t){if(cr(e),u){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&!n.configurable)return!1}return delete e[t]},has:function(e,t){return cr(e),t in e}};Object.getOwnPropertyNames&&Object.assign(ur,{ownKeys:function(e){cr(e);var t=Object.getOwnPropertyNames(e);return ye.IsCallable(Object.getOwnPropertySymbols)&&I(t,Object.getOwnPropertySymbols(e)),t}});var lr=function(e){return!o(e)};if(Object.preventExtensions&&Object.assign(ur,{isExtensible:function(e){return cr(e),Object.isExtensible(e)},preventExtensions:function(e){return cr(e),lr(function(){return Object.preventExtensions(e)})}}),u){var pr=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r){var a=Object.getPrototypeOf(e);if(null===a)return;return pr(a,t,n)}return"value"in r?r.value:r.get?ye.Call(r.get,n):void 0},fr=function(e,t,n,a){var i=Object.getOwnPropertyDescriptor(e,t);if(!i){var o=Object.getPrototypeOf(e);if(null!==o)return fr(o,t,n,a);i={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in i?!!i.writable&&(!!ye.TypeIsObject(a)&&(Object.getOwnPropertyDescriptor(a,t)?pe.defineProperty(a,t,{value:n}):pe.defineProperty(a,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))):!!i.set&&(r(i.set,a,n),!0)};Object.assign(ur,{defineProperty:function(e,t,n){return cr(e),lr(function(){return Object.defineProperty(e,t,n)})},getOwnPropertyDescriptor:function(e,t){return cr(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){cr(e);var n=arguments.length>2?arguments[2]:e;return pr(e,t,n)},set:function(e,t,n){cr(e);var r=arguments.length>3?arguments[3]:e;return fr(e,t,n,r)}})}if(Object.getPrototypeOf){var dr=Object.getPrototypeOf;ur.getPrototypeOf=function(e){return cr(e),dr(e)}}if(Object.setPrototypeOf&&ur.getPrototypeOf){Object.assign(ur,{setPrototypeOf:function(e,t){if(cr(e),null!==t&&!ye.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===pe.getPrototypeOf(e)||!(pe.isExtensible&&!pe.isExtensible(e))&&(!function(e,t){for(var n=t;n;){if(e===n)return!0;n=ur.getPrototypeOf(n)}return!1}(e,t)&&(Object.setPrototypeOf(e,t),!0))}})}Object.keys(ur).forEach(function(e){!function(e,t){ye.IsCallable(j.Reflect[e])?s(function(){return j.Reflect[e](1),j.Reflect[e](NaN),j.Reflect[e](!0),!0})&&se(j.Reflect,e,t):y(j.Reflect,e,t)}(e,ur[e])});var hr=j.Reflect.getPrototypeOf;if(l&&hr&&"getPrototypeOf"!==hr.name&&se(j.Reflect,"getPrototypeOf",function(e){return r(hr,j.Reflect,e)}),j.Reflect.setPrototypeOf&&s(function(){return j.Reflect.setPrototypeOf(1,{}),!0})&&se(j.Reflect,"setPrototypeOf",ur.setPrototypeOf),j.Reflect.defineProperty&&(s(function(){var e=!j.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!j.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||se(j.Reflect,"defineProperty",ur.defineProperty)),j.Reflect.construct&&(s(function(){var e=function(){};return j.Reflect.construct(function(){},[],e)instanceof e})||se(j.Reflect,"construct",ur.construct)),"Invalid Date"!==String(new Date(NaN))){var yr=Date.prototype.toString;se(Date.prototype,"toString",function(){var e=+this;return e!=e?"Invalid Date":ye.Call(yr,this)})}var mr={anchor:function(e){return ye.CreateHTML(this,"a","name",e)},big:function(){return ye.CreateHTML(this,"big","","")},blink:function(){return ye.CreateHTML(this,"blink","","")},bold:function(){return ye.CreateHTML(this,"b","","")},fixed:function(){return ye.CreateHTML(this,"tt","","")},fontcolor:function(e){return ye.CreateHTML(this,"font","color",e)},fontsize:function(e){return ye.CreateHTML(this,"font","size",e)},italics:function(){return ye.CreateHTML(this,"i","","")},link:function(e){return ye.CreateHTML(this,"a","href",e)},small:function(){return ye.CreateHTML(this,"small","","")},strike:function(){return ye.CreateHTML(this,"strike","","")},sub:function(){return ye.CreateHTML(this,"sub","","")},sup:function(){return ye.CreateHTML(this,"sup","","")}};p(Object.keys(mr),function(e){var t=String.prototype[e],n=!1;if(ye.IsCallable(t)){var a=r(t,"",' " '),i=_([],a.match(/"/g)).length;n=a!==a.toLowerCase()||i>2}else n=!0;n&&se(String.prototype,e,mr[e])});var gr=function(){if(!ce)return!1;var e="object"===("undefined"==typeof JSON?"undefined":_typeof(JSON))&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if(void 0!==e(Y()))return!0;if("[null]"!==e([Y()]))return!0;var t={a:Y()};return t[Y()]=!0,"{}"!==e(t)}(),vr=s(function(){return!ce||"{}"===JSON.stringify(Object(Y()))&&"[{}]"===JSON.stringify([Object(Y())])});if(gr||!vr){var br=JSON.stringify;se(JSON,"stringify",function(e){if("symbol"!==(void 0===e?"undefined":_typeof(e))){var t;arguments.length>1&&(t=arguments[1]);var n=[e];if(a(t))n.push(t);else{var i=ye.IsCallable(t)?t:null;n.push(function(e,t){var n=i?r(i,this,e,t):t;if("symbol"!==(void 0===n?"undefined":_typeof(n)))return oe(n)?At({})(n):n})}return arguments.length>2&&n.push(arguments[2]),br.apply(this,n)}})}return j},"function"==typeof define&&define.amd?define("es6-shim",factory):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=factory():root.returnExports=factory(),function(e,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],r=Object.getPrototypeOf,a=n.slice,i=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},o=n.push,s=n.indexOf,c={},u=c.toString,l=c.hasOwnProperty,p=l.toString,f=p.call(Object),d={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},m=e.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function v(e,t,n){var r,a,i=(n=n||m).createElement("script");if(i.text=e,t)for(r in g)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,a);n.head.appendChild(i).parentNode.removeChild(i)}function b(e){return null==e?e+"":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?c[u.call(e)]||"object":void 0===e?"undefined":_typeof(e)}var w=function e(t,n){return new e.fn.init(t,n)};function T(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!h(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.5.1",constructor:w,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"===(void 0===o?"undefined":_typeof(o))||h(o)||(o={}),s===c&&(o=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(u&&r&&(w.isPlainObject(r)||(a=Array.isArray(r)))?(n=o[t],i=a&&!Array.isArray(n)?[]:a||w.isPlainObject(n)?n:{},a=!1,o[t]=w.extend(u,i,r)):void 0!==r&&(o[t]=r));return o},w.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==u.call(e))&&(!(t=r(e))||"function"==typeof(n=l.call(t,"constructor")&&t.constructor)&&p.call(n)===f)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){v(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?w.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!==o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,o=0,s=[];if(T(e))for(r=e.length;o<r;o++)null!=(a=t(e[o],o,n))&&s.push(a);else for(o in e)null!=(a=t(e[o],o,n))&&s.push(a);return i(s)},guid:1,support:d}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var S=function(e){var t,n,r,a,i,o,s,c,u,l,p,f,d,h,y,m,g,v,b,w="sizzle"+1*new Date,T=e.document,S=0,x=0,k=ce(),O=ce(),j=ce(),A=ce(),C=function(e,t){return e===t&&(p=!0),0},E={}.hasOwnProperty,_=[],N=_.pop,P=_.push,I=_.push,M=_.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",q="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+L+"*("+q+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+L+"*\\]",V=":("+q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(L+"+","g"),z=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),$=new RegExp("^"+L+"*,"+L+"*"),B=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),W=new RegExp(L+"|>"),U=new RegExp(V),G=new RegExp("^"+q+"$"),X={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){f()},oe=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(_=M.call(T.childNodes),T.childNodes),_[T.childNodes.length].nodeType}catch(e){I={apply:_.length?function(e,t){P.apply(e,M.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,a){var i,s,u,l,p,h,g,v=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!a&&(f(t),t=t||d,y)){if(11!==T&&(p=Q.exec(e)))if(i=p[1]){if(9===T){if(!(u=t.getElementById(i)))return r;if(u.id===i)return r.push(u),r}else if(v&&(u=v.getElementById(i))&&b(t,u)&&u.id===i)return r.push(u),r}else{if(p[2])return I.apply(r,t.getElementsByTagName(e)),r;if((i=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!A[e+" "]&&(!m||!m.test(e))&&(1!==T||"object"!==t.nodeName.toLowerCase())){if(g=e,v=t,1===T&&(W.test(e)||B.test(e))){for((v=ee.test(e)&&ge(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ae):t.setAttribute("id",l=w)),s=(h=o(e)).length;s--;)h[s]=(l?"#"+l:":scope")+" "+be(h[s]);g=h.join(",")}try{return I.apply(r,v.querySelectorAll(g)),r}catch(t){A(e,!0)}finally{l===w&&t.removeAttribute("id")}}}return c(e.replace(z,"$1"),t,r,a)}function ce(){var e=[];return function t(n,a){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function ue(e){return e[w]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var n=e.split("|"),a=n.length;a--;)r.attrHandle[n[a]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ye(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ue(function(t){return t=+t,ue(function(n,r){for(var a,i=e([],n.length,t),o=i.length;o--;)n[a=i[o]]&&(n[a]=!(r[a]=n[a]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:T;return o!=d&&9===o.nodeType&&o.documentElement?(h=(d=o).documentElement,y=!i(d),T!=d&&(a=d.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",ie,!1):a.attachEvent&&a.attachEvent("onunload",ie)),n.scope=le(function(e){return h.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(d.getElementsByClassName),n.getById=le(function(e){return h.appendChild(e).id=w,!d.getElementsByName||!d.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&y)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=Z.test(d.querySelectorAll))&&(le(function(e){var t;h.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(v=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),g.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Z.test(h.compareDocumentPosition),b=t||Z.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==T&&b(T,e)?-1:t==d||t.ownerDocument==T&&b(T,t)?1:l?D(l,e)-D(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i)return e==d?-1:t==d?1:a?-1:i?1:l?D(l,e)-D(l,t):0;if(a===i)return fe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?fe(o[r],s[r]):o[r]==T?-1:s[r]==T?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&y&&!A[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){A(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=d&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=d&&f(e);var a=r.attrHandle[t.toLowerCase()],i=a&&E.call(r.attrHandle,t.toLowerCase())?a(e,t,!y):void 0;return void 0!==i?i:n.attributes||!y?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return(e+"").replace(re,ae)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],a=0,i=0;if(p=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(C),p){for(;t=e[i++];)t===e[i]&&(a=r.push(i));for(;a--;)e.splice(r[a],1)}return l=null,e},a=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ue,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&k(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var a=se.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,c){var u,l,p,f,d,h,y=i!==o?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!c&&!s,b=!1;if(m){if(i){for(;y;){for(f=t;f=f[y];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;h=y="only"===e&&!h&&"nextSibling"}return!0}if(h=[o?m.firstChild:m.lastChild],o&&v){for(b=(d=(u=(l=(p=(f=m)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1])&&u[2],f=d&&m.childNodes[d];f=++d&&f&&f[y]||(b=d=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[S,d,b];break}}else if(v&&(b=d=(u=(l=(p=(f=t)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1]),!1===b)for(;(f=++d&&f&&f[y]||(b=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(v&&((l=(p=f[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]=[S,b]),f!==t)););return(b-=a)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[w]?a(t):a.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,n){for(var r,i=a(e,t),o=i.length;o--;)e[r=D(e,i[o])]=!(n[r]=i[o])}):function(e){return a(e,0,n)}):a}},pseudos:{not:ue(function(e){var t=[],n=[],r=s(e.replace(z,"$1"));return r[w]?ue(function(e,t,n,a){for(var i,o=r(e,null,a,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,a,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:ue(function(e){return function(t){return se(e,t).length>0}}),contains:ue(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||a(t)).indexOf(e)>-1}}),lang:ue(function(e){return G.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ye(!1),disabled:ye(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ve(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(e,t,n){var r=t.dir,a=t.next,i=a||r,o=n&&"parentNode"===i,s=x++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a);return!1}:function(t,n,c){var u,l,p,f=[S,s];if(c){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=(p=t[w]||(t[w]={}))[t.uniqueID]||(p[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=l[i])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(l[i]=f,f[2]=e(t,n,c))return!0}return!1}}function Te(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function Se(e,t,n,r,a){for(var i,o=[],s=0,c=e.length,u=null!=t;s<c;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),u&&t.push(s)));return o}function xe(e,t,n,r,a,i){return r&&!r[w]&&(r=xe(r)),a&&!a[w]&&(a=xe(a,i)),ue(function(i,o,s,c){var u,l,p,f=[],d=[],h=o.length,y=i||function(e,t,n){for(var r=0,a=t.length;r<a;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!i&&t?y:Se(y,f,e,s,c),g=n?a||(i?e:h||r)?[]:o:m;if(n&&n(m,g,s,c),r)for(u=Se(g,d),r(u,[],s,c),l=u.length;l--;)(p=u[l])&&(g[d[l]]=!(m[d[l]]=p));if(i){if(a||e){if(a){for(u=[],l=g.length;l--;)(p=g[l])&&u.push(m[l]=p);a(null,g=[],u,c)}for(l=g.length;l--;)(p=g[l])&&(u=a?D(i,p):f[l])>-1&&(i[u]=!(o[u]=p))}}else g=Se(g===o?g.splice(h,g.length):g),a?a(null,o,g,c):I.apply(o,g)})}function ke(e){for(var t,n,a,i=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],c=o?1:0,l=we(function(e){return e===t},s,!0),p=we(function(e){return D(t,e)>-1},s,!0),f=[function(e,n,r){var a=!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):p(e,n,r));return t=null,a}];c<i;c++)if(n=r.relative[e[c].type])f=[we(Te(f),n)];else{if((n=r.filter[e[c].type].apply(null,e[c].matches))[w]){for(a=++c;a<i&&!r.relative[e[a].type];a++);return xe(c>1&&Te(f),c>1&&be(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(z,"$1"),n,c<a&&ke(e.slice(c,a)),a<i&&ke(e=e.slice(a)),a<i&&be(e))}f.push(n)}return Te(f)}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,o=se.tokenize=function(e,t){var n,a,i,o,s,c,u,l=O[e+" "];if(l)return t?0:l.slice(0);for(s=e,c=[],u=r.preFilter;s;){for(o in n&&!(a=$.exec(s))||(a&&(s=s.slice(a[0].length)||s),c.push(i=[])),n=!1,(a=B.exec(s))&&(n=a.shift(),i.push({value:n,type:a[0].replace(z," ")}),s=s.slice(n.length)),r.filter)!(a=X[o].exec(s))||u[o]&&!(a=u[o](a))||(n=a.shift(),i.push({value:n,type:o,matches:a}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):O(e,c).slice(0)},s=se.compile=function(e,t){var n,a=[],i=[],s=j[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=ke(t[n]))[w]?a.push(s):i.push(s);(s=j(e,function(e,t){var n=t.length>0,a=e.length>0,i=function(i,o,s,c,l){var p,h,m,g=0,v="0",b=i&&[],w=[],T=u,x=i||a&&r.find.TAG("*",l),k=S+=null==T?1:Math.random()||.1,O=x.length;for(l&&(u=o==d||o||l);v!==O&&null!=(p=x[v]);v++){if(a&&p){for(h=0,o||p.ownerDocument==d||(f(p),s=!y);m=e[h++];)if(m(p,o||d,s)){c.push(p);break}l&&(S=k)}n&&((p=!m&&p)&&g--,i&&b.push(p))}if(g+=v,n&&v!==g){for(h=0;m=t[h++];)m(b,w,o,s);if(i){if(g>0)for(;v--;)b[v]||w[v]||(w[v]=N.call(c));w=Se(w)}I.apply(c,w),l&&!i&&w.length>0&&g+t.length>1&&se.uniqueSort(c)}return l&&(S=k,u=T),b};return n?ue(i):i}(i,a))).selector=e}return s},c=se.select=function(e,t,n,a){var i,c,u,l,p,f="function"==typeof e&&e,d=!a&&o(e=f.selector||e);if(n=n||[],1===d.length){if((c=d[0]=d[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&y&&r.relative[c[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(i=X.needsContext.test(e)?0:c.length;i--&&(u=c[i],!r.relative[l=u.type]);)if((p=r.find[l])&&(a=p(u.matches[0].replace(te,ne),ee.test(c[0].type)&&ge(t.parentNode)||t))){if(c.splice(i,1),!(e=a.length&&be(c)))return I.apply(n,a),n;break}}return(f||s(e,d))(a,t,!y,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=w.split("").sort(C).join("")===w,n.detectDuplicates=!!p,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||pe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(e);w.find=S,w.expr=S.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=S.uniqueSort,w.text=S.getText,w.isXMLDoc=S.isXML,w.contains=S.contains,w.escapeSelector=S.escape;var x=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&w(e).is(n))break;r.push(e)}return r},k=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},O=w.expr.match.needsContext;function j(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(e,t,n){return h(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return s.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,a[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&O.test(e)?w(e):e||[],!1).length}});var E,_=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||E,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:_.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),A.test(r[1])&&w.isPlainObject(t))for(r in t)h(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=m.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,E=w(m);var N=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!=typeof e&&w(e);if(!O.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?w.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?s.call(w(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return k((e.parentNode||{}).firstChild,e)},children:function(e){return k(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(j(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var a=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=w.filter(r,a)),this.length>1&&(P[e]||w.uniqueSort(a),N.test(e)&&a.reverse()),this.pushStack(a)}});var M=/[^\x20\t\r\n\f]+/g;function D(e){return e}function R(e){throw e}function L(e,t,n,r){var a;try{e&&h(a=e.promise)?a.call(e).done(t).fail(n):e&&h(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,a,i=[],o=[],s=-1,c=function(){for(a=a||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,a&&(i=n?[]:"")},u={add:function(){return i&&(n&&!t&&(s=i.length-1,o.push(n)),function t(n){w.each(n,function(n,r){h(r)?e.unique&&u.has(r)||i.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return a=o=[],i=n="",this},disabled:function(){return!i},lock:function(){return a=o=[],n||t||(i=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var a=h(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=a&&a.apply(this,arguments);e&&h(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(t,r,a){var i=0;function o(t,n,r,a){return function(){var s=this,c=arguments,u=function(){var e,u;if(!(t<i)){if((e=r.apply(s,c))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)&&e.then,h(u)?a?u.call(e,o(i,n,D,a),o(i,n,R,a)):(i++,u.call(e,o(i,n,D,a),o(i,n,R,a),o(i,n,D,n.notifyWith))):(r!==D&&(s=void 0,c=[e]),(a||n.resolveWith)(s,c))}},l=a?u:function(){try{u()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,l.stackTrace),t+1>=i&&(r!==R&&(s=void 0,c=[e]),n.rejectWith(s,c))}};t?l():(w.Deferred.getStackHook&&(l.stackTrace=w.Deferred.getStackHook()),e.setTimeout(l))}}return w.Deferred(function(e){n[0][3].add(o(0,e,h(a)?a:D,e.notifyWith)),n[1][3].add(o(0,e,h(t)?t:D)),n[2][3].add(o(0,e,h(r)?r:R))}).promise()},promise:function(e){return null!=e?w.extend(e,a):a}},i={};return w.each(n,function(e,t){var o=t[2],s=t[5];a[t[1]]=o.add,s&&o.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=o.fireWith}),a.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),o=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(L(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||h(i[n]&&i[n].then)))return o.then();for(;n--;)L(i[n],s(n),o.reject);return o.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&q.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();function V(){m.removeEventListener("DOMContentLoaded",V),e.removeEventListener("load",V),w.ready()}w.fn.ready=function(e){return F.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(m,[w]))}}),w.ready.then=F.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(w.ready):(m.addEventListener("DOMContentLoaded",V),e.addEventListener("load",V));var H=function e(t,n,r,a,i,o,s){var c=0,u=t.length,l=null==r;if("object"===b(r))for(c in i=!0,r)e(t,n,c,r[c],!0,o,s);else if(void 0!==a&&(i=!0,h(a)||(s=!0),l&&(s?(n.call(t,a),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)})),n))for(;c<u;c++)n(t[c],r,s?a:a.call(t[c],c,n(t[c],r)));return i?t:l?n.call(t):u?n(t[0],r):o},z=/^-ms-/,$=/-([a-z])/g;function B(e,t){return t.toUpperCase()}function W(e){return e.replace(z,"ms-").replace($,B)}var U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=w.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[W(t)]=n;else for(r in t)a[W(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][W(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(W):(t=W(t))in r?[t]:t.match(M)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var X=new G,Y=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}(n)}catch(e){}Y.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return Y.hasData(e)||X.hasData(e)},data:function(e,t,n){return Y.access(e,t,n)},removeData:function(e,t){Y.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,a,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(a=Y.get(i),1===i.nodeType&&!X.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=W(r.slice(5)),Z(i,r,a[r]));X.set(i,"hasDataAttrs",!0)}return a}return"object"===(void 0===e?"undefined":_typeof(e))?this.each(function(){Y.set(this,e)}):H(this,function(t){var n;if(i&&void 0===t)return void 0!==(n=Y.get(i,e))?n:void 0!==(n=Z(i,e))?n:void 0;this.each(function(){Y.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Y.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=X.get(e,t),n&&(!r||Array.isArray(n)?r=X.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,a=n.shift(),i=w._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,function(){w.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:w.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=w.Deferred(),i=this,o=this.length,s=function(){--r||a.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=X.get(i[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=m.documentElement,re=function(e){return w.contains(e.ownerDocument,e)},ae={composed:!0};ne.getRootNode&&(re=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===w.css(e,"display")};function oe(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},c=s(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),l=e.nodeType&&(w.cssNumber[t]||"px"!==u&&+c)&&ee.exec(w.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;o--;)w.style(e,t,l+u),(1-i)*(1-(i=s()/c||.5))<=0&&(o=0),l/=i;l*=2,w.style(e,t,l+u),n=n||[]}return n&&(l=+l||+c||0,a=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=a)),a}var se={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,a=se[r];return a||(t=n.body.appendChild(n.createElement(r)),a=w.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),se[r]=a,a)}function ue(e,t){for(var n,r,a=[],i=0,o=e.length;i<o;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(a[i]=X.get(r,"display")||null,a[i]||(r.style.display="")),""===r.style.display&&ie(r)&&(a[i]=ce(r))):"none"!==n&&(a[i]="none",X.set(r,"display",n)));for(i=0;i<o;i++)null!=a[i]&&(e[i].style.display=a[i]);return e}w.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ie(this)?w(this).show():w(this).hide()})}});var le,pe,fe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;le=m.createDocumentFragment().appendChild(m.createElement("div")),(pe=m.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),le.appendChild(pe),d.checkClone=le.cloneNode(!0).cloneNode(!0).lastChild.checked,le.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!le.cloneNode(!0).lastChild.defaultValue,le.innerHTML="<option></option>",d.option=!!le.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&j(e,t)?w.merge([e],n):n}function ge(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,d.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var ve=/<|&#?\w+;/;function be(e,t,n,r,a){for(var i,o,s,c,u,l,p=t.createDocumentFragment(),f=[],d=0,h=e.length;d<h;d++)if((i=e[d])||0===i)if("object"===b(i))w.merge(f,i.nodeType?[i]:i);else if(ve.test(i)){for(o=o||p.appendChild(t.createElement("div")),s=(de.exec(i)||["",""])[1].toLowerCase(),c=ye[s]||ye._default,o.innerHTML=c[1]+w.htmlPrefilter(i)+c[2],l=c[0];l--;)o=o.lastChild;w.merge(f,o.childNodes),(o=p.firstChild).textContent=""}else f.push(t.createTextNode(i));for(p.textContent="",d=0;i=f[d++];)if(r&&w.inArray(i,r)>-1)a&&a.push(i);else if(u=re(i),o=me(p.appendChild(i),"script"),u&&ge(o),n)for(l=0;i=o[l++];)he.test(i.type||"")&&n.push(i);return p}var we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function ke(){return!1}function Oe(e,t){return e===function(){try{return m.activeElement}catch(e){}}()==("focus"===t)}function je(e,t,n,r,a,i){var o,s;if("object"===(void 0===t?"undefined":_typeof(t))){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)je(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=ke;else if(!a)return e;return 1===i&&(o=a,(a=function(e){return w().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),e.each(function(){w.event.add(this,t,a,r,n)})}function Ae(e,t,n){n?(X.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=X.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=a.call(arguments),X.set(this,t,o),r=n(this,t),this[t](),o!==(i=X.get(this,t))||r?X.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&(X.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&w.event.add(e,t,xe)}w.event={global:{},add:function(e,t,n,r,a){var i,o,s,c,u,l,p,f,d,h,y,m=X.get(e);if(U(e))for(n.handler&&(n=(i=n).handler,a=i.selector),a&&w.find.matchesSelector(ne,a),n.guid||(n.guid=w.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(M)||[""]).length;u--;)d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d&&(p=w.event.special[d]||{},d=(a?p.delegateType:p.bindType)||d,p=w.event.special[d]||{},l=w.extend({type:d,origType:y,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&w.expr.match.needsContext.test(a),namespace:h.join(".")},i),(f=c[d])||((f=c[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,h,o)||e.addEventListener&&e.addEventListener(d,o)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,l):f.push(l),w.event.global[d]=!0)},remove:function(e,t,n,r,a){var i,o,s,c,u,l,p,f,d,h,y,m=X.hasData(e)&&X.get(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(M)||[""]).length;u--;)if(d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d){for(p=w.event.special[d]||{},f=c[d=(r?p.delegateType:p.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=f.length;i--;)l=f[i],!a&&y!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(i,1),l.selector&&f.delegateCount--,p.remove&&p.remove.call(e,l));o&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,h,m.handle)||w.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)w.event.remove(e,d+t[u],n,r,!0);w.isEmptyObject(c)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o,s=new Array(arguments.length),c=w.event.fix(e),u=(X.get(this,"events")||Object.create(null))[c.type]||[],l=w.event.special[c.type]||{};for(s[0]=c,t=1;t<arguments.length;t++)s[t]=arguments[t];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){for(o=w.event.handlers.call(this,c,u),t=0;(a=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==i.namespace&&!c.rnamespace.test(i.namespace)||(c.handleObj=i,c.data=i.data,void 0!==(r=((w.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,a,i,o,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(i=[],o={},n=0;n<c;n++)void 0===o[a=(r=t[n]).selector+" "]&&(o[a]=r.needsContext?w(a,this).index(u)>-1:w.find(a,this,null,[u]).length),o[a]&&i.push(r);i.length&&s.push({elem:u,handlers:i})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click",xe),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&j(t,"input")&&X.get(t,"click")||j(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){w.event.special[e]={setup:function(){return Ae(this,e,Oe),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,a=e.handleObj;return r&&(r===this||w.contains(this,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return je(this,e,t,n,r)},one:function(e,t,n,r){return je(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===(void 0===e?"undefined":_typeof(e))){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ce=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return j(e,"table")&&j(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,a,i,o,s;if(1===t.nodeType){if(X.hasData(e)&&(s=X.get(e).events))for(a in X.remove(t,"handle events"),s)for(n=0,r=s[a].length;n<r;n++)w.event.add(t,a,s[a][n]);Y.hasData(e)&&(i=Y.access(e),o=w.extend({},i),Y.set(t,o))}}function De(e,t,n,r){t=i(t);var a,o,s,c,u,l,p=0,f=e.length,y=f-1,m=t[0],g=h(m);if(g||f>1&&"string"==typeof m&&!d.checkClone&&Ee.test(m))return e.each(function(a){var i=e.eq(a);g&&(t[0]=m.call(this,a,i.html())),De(i,t,n,r)});if(f&&(o=(a=be(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=o),o||r)){for(c=(s=w.map(me(a,"script"),Pe)).length;p<f;p++)u=a,p!==y&&(u=w.clone(u,!0,!0),c&&w.merge(s,me(u,"script"))),n.call(e[p],u,p);if(c)for(l=s[s.length-1].ownerDocument,w.map(s,Ie),p=0;p<c;p++)u=s[p],he.test(u.type||"")&&!X.access(u,"globalEval")&&w.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):v(u.textContent.replace(_e,""),u,l))}return e}function Re(e,t,n){for(var r,a=t?w.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||w.cleanData(me(r)),r.parentNode&&(n&&re(r)&&ge(me(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,a,i,o,s,c,u,l=e.cloneNode(!0),p=re(e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(o=me(l),r=0,a=(i=me(e)).length;r<a;r++)s=i[r],c=o[r],void 0,"input"===(u=c.nodeName.toLowerCase())&&fe.test(s.type)?c.checked=s.checked:"input"!==u&&"textarea"!==u||(c.defaultValue=s.defaultValue);if(t)if(n)for(i=i||me(e),o=o||me(l),r=0,a=i.length;r<a;r++)Me(i[r],o[r]);else Me(e,l);return(o=me(l,"script")).length>0&&ge(o,!p&&me(e,"script")),l},cleanData:function(e){for(var t,n,r,a=w.event.special,i=0;void 0!==(n=e[i]);i++)if(U(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)a[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[X.expando]=void 0}n[Y.expando]&&(n[Y.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return H(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return De(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return De(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!ye[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],a=w(e),i=a.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),w(a[s])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var Le=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),qe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Fe=function(e,t,n){var r,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in r=n.call(e),t)e.style[a]=i[a];return r},Ve=new RegExp(te.join("|"),"i");function He(e,t,n){var r,a,i,o,s=e.style;return(n=n||qe(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||re(e)||(o=w.style(e,t)),!d.pixelBoxStyles()&&Le.test(o)&&Ve.test(t)&&(r=s.width,a=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=a,s.maxWidth=i)),void 0!==o?o+"":o}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(u).appendChild(l);var t=e.getComputedStyle(l);r="1%"!==t.top,c=12===n(t.marginLeft),l.style.right="60%",o=36===n(t.right),a=36===n(t.width),l.style.position="absolute",i=12===n(l.offsetWidth/3),ne.removeChild(u),l=null}}function n(e){return Math.round(parseFloat(e))}var r,a,i,o,s,c,u=m.createElement("div"),l=m.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===l.style.backgroundClip,w.extend(d,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,n,r,a;return null==s&&(t=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",r.style.height="9px",ne.appendChild(t).appendChild(n).appendChild(r),a=e.getComputedStyle(n),s=parseInt(a.height)>3,ne.removeChild(t)),s}}))}();var $e=["Webkit","Moz","ms"],Be=m.createElement("div").style,We={};function Ue(e){var t=w.cssProps[e]||We[e];return t||(e in Be?e:We[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=$e.length;n--;)if((e=$e[n]+t)in Be)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,n){var r=ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,a,i){var o="width"===t?1:0,s=0,c=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=w.css(e,n+te[o],!0,a)),r?("content"===n&&(c-=w.css(e,"padding"+te[o],!0,a)),"margin"!==n&&(c-=w.css(e,"border"+te[o]+"Width",!0,a))):(c+=w.css(e,"padding"+te[o],!0,a),"padding"!==n?c+=w.css(e,"border"+te[o]+"Width",!0,a):s+=w.css(e,"border"+te[o]+"Width",!0,a));return!r&&i>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-c-s-.5))||0),c}function Qe(e,t,n){var r=qe(e),a=(!d.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),i=a,o=He(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Le.test(o)){if(!n)return o;o="auto"}return(!d.boxSizingReliable()&&a||!d.reliableTrDimensions()&&j(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===w.css(e,"boxSizing",!1,r),(i=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+Ze(e,t,n||(a?"border":"content"),i,r,o)+"px"}function et(e,t,n,r,a){return new et.prototype.init(e,t,n,r,a)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=He(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=W(t),c=Xe.test(t),u=e.style;if(c||(t=Ue(s)),o=w.cssHooks[t]||w.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:u[t];"string"===(i=void 0===n?"undefined":_typeof(n))&&(a=ee.exec(n))&&a[1]&&(n=oe(e,t,a),i="number"),null!=n&&n==n&&("number"!==i||c||(n+=a&&a[3]||(w.cssNumber[s]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(c?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var a,i,o,s=W(t);return Xe.test(t)||(t=Ue(s)),(o=w.cssHooks[t]||w.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=He(e,t,r)),"normal"===a&&t in Je&&(a=Je[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Ge.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Qe(e,t,r):Fe(e,Ye,function(){return Qe(e,t,r)})},set:function(e,n,r){var a,i=qe(e),o=!d.scrollboxSize()&&"absolute"===i.position,s=(o||r)&&"border-box"===w.css(e,"boxSizing",!1,i),c=r?Ze(e,t,r,s,i):0;return s&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Ze(e,t,"border",!1,i)-.5)),c&&(a=ee.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(0,n,c)}}}),w.cssHooks.marginLeft=ze(d.reliableMarginLeft,function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"==typeof n?n.split(" "):[n];r<4;r++)a[e+te[r]+t]=i[r]||i[r-2]||i[0];return a}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=qe(e),a=t.length;o<a;o++)i[t[o]]=w.css(e,t[o],!1,r);return i}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=et,et.prototype={constructor:et,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(w.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Ue(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=et.prototype.init,w.fx.step={};var tt,nt,rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function it(){nt&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(it):e.setTimeout(it,w.fx.interval),w.fx.tick())}function ot(){return e.setTimeout(function(){tt=void 0}),tt=Date.now()}function st(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=te[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function ct(e,t,n){for(var r,a=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function ut(e,t,n){var r,a,i=0,o=ut.prefilters.length,s=w.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var t=tt||ot(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),i=0,o=u.tweens.length;i<o;i++)u.tweens[i].run(r);return s.notifyWith(e,[u,r,n]),r<1&&o?n:(o||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:tt||ot(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for(!function(e,t){var n,r,a,i,o;for(n in e)if(a=t[r=W(n)],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=w.cssHooks[r])&&"expand"in o)for(n in i=o.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=a);else t[r]=a}(l,u.opts.specialEasing);i<o;i++)if(r=ut.prefilters[i].call(u,e,l,u.opts))return h(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(l,ct,u),h(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return oe(n.elem,e,ee.exec(t),n),n}]},tweener:function(e,t){h(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,a=e.length;r<a;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,i,o,s,c,u,l,p="width"in t||"height"in t,f=this,d={},h=e.style,y=e.nodeType&&ie(e),m=X.get(e,"fxshow");for(r in n.queue||(null==(o=w._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,w.queue(e,"fx").length||o.empty.fire()})})),t)if(a=t[r],rt.test(a)){if(delete t[r],i=i||"toggle"===a,a===(y?"hide":"show")){if("show"!==a||!m||void 0===m[r])continue;y=!0}d[r]=m&&m[r]||w.style(e,r)}if((c=!w.isEmptyObject(t))||!w.isEmptyObject(d))for(r in p&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=m&&m.display)&&(u=X.get(e,"display")),"none"===(l=w.css(e,"display"))&&(u?l=u:(ue([e],!0),u=e.style.display||u,l=w.css(e,"display"),ue([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===w.css(e,"float")&&(c||(f.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1,d)c||(m?"hidden"in m&&(y=m.hidden):m=X.access(e,"fxshow",{display:u}),i&&(m.hidden=!y),y&&ue([e],!0),f.done(function(){for(r in y||ue([e]),X.remove(e,"fxshow"),d)w.style(e,r,d[r])})),c=ct(y?m[r]:0,r,f),r in m||(m[r]=c.start,y&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"===(void 0===e?"undefined":_typeof(e))?w.extend({},e):{complete:n||!n&&t||h(e)&&e,duration:e,easing:n&&t||t&&!h(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){h(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ie).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=w.isEmptyObject(e),i=w.speed(t,n,r),o=function(){var t=ut(this,w.extend({},e),i);(a||X.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",i=w.timers,o=X.get(this);if(a)o[a]&&o[a].stop&&r(o[a]);else for(a in o)o[a]&&o[a].stop&&at.test(a)&&r(o[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=X.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,a)}}),w.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),tt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){nt||(nt=!0,it())},w.fx.stop=function(){nt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var a=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(a)}})},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",d.checkOn=""!==e.value,d.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",d.radioValue="t"===e.value}();var lt,pt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return H(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?w.prop(e,t,n):(1===i&&w.isXMLDoc(e)||(a=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&j(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(M);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),lt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||w.find.attr;pt[t]=function(e,t,r){var a,i,o=t.toLowerCase();return r||(i=pt[o],pt[o]=a,a=null!=n(e,t,r)?o:null,pt[o]=i),a}});var ft=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(M)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}w.fn.extend({prop:function(e,t){return H(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&w.isXMLDoc(e)||(t=w.propFix[t]||t,a=w.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,a,i,o,s,c=0;if(h(e))return this.each(function(t){w(this).addClass(e.call(this,t,yt(this)))});if((t=mt(e)).length)for(;n=this[c++];)if(a=yt(n),r=1===n.nodeType&&" "+ht(a)+" "){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,a,i,o,s,c=0;if(h(e))return this.each(function(t){w(this).removeClass(e.call(this,t,yt(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[c++];)if(a=yt(n),r=1===n.nodeType&&" "+ht(a)+" "){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");a!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=void 0===e?"undefined":_typeof(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):h(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,yt(this),t),t)}):this.each(function(){var t,a,i,o;if(r)for(a=0,i=w(this),o=mt(e);t=o[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ht(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var gt=/\r/g;w.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=h(e),this.each(function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,w(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=w.map(a,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=w.valHooks[a.type]||w.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(gt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:ht(w.text(e))}},select:{get:function(e){var t,n,r,a=e.options,i=e.selectedIndex,o="select-one"===e.type,s=o?null:[],c=o?i+1:a.length;for(r=i<0?c:o?i:0;r<c;r++)if(((n=a[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!j(n.parentNode,"optgroup"))){if(t=w(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,a=e.options,i=w.makeArray(t),o=a.length;o--;)((r=a[o]).selected=w.inArray(w.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},d.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),d.focusin="onfocusin"in e;var vt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,a){var i,o,s,c,u,p,f,d,g=[r||m],v=l.call(t,"type")?t.type:t,b=l.call(t,"namespace")?t.namespace.split("."):[];if(o=d=s=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!vt.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(v=(b=v.split(".")).shift(),b.sort()),u=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"===(void 0===t?"undefined":_typeof(t))&&t)).isTrigger=a?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),f=w.event.special[v]||{},a||!f.trigger||!1!==f.trigger.apply(r,n))){if(!a&&!f.noBubble&&!y(r)){for(c=f.delegateType||v,vt.test(c+v)||(o=o.parentNode);o;o=o.parentNode)g.push(o),s=o;s===(r.ownerDocument||m)&&g.push(s.defaultView||s.parentWindow||e)}for(i=0;(o=g[i++])&&!t.isPropagationStopped();)d=o,t.type=i>1?c:f.bindType||v,(p=(X.get(o,"events")||Object.create(null))[t.type]&&X.get(o,"handle"))&&p.apply(o,n),(p=u&&o[u])&&p.apply&&U(o)&&(t.result=p.apply(o,n),!1===t.result&&t.preventDefault());return t.type=v,a||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(g.pop(),n)||!U(r)||u&&h(r[v])&&!y(r)&&((s=r[u])&&(r[u]=null),w.event.triggered=v,t.isPropagationStopped()&&d.addEventListener(v,bt),r[v](),t.isPropagationStopped()&&d.removeEventListener(v,bt),w.event.triggered=void 0,s&&(r[u]=s)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),d.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,a=X.access(r,t);a||r.addEventListener(e,n,!0),X.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,a=X.access(r,t)-1;a?X.access(r,t,a):(r.removeEventListener(e,n,!0),X.remove(r,t))}}});var wt=e.location,Tt={guid:Date.now()},St=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var xt=/\[\]$/,kt=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function At(e,t,n,r){var a;if(Array.isArray(t))w.each(t,function(t,a){n||xt.test(e)?r(e,a):At(e+"["+("object"===(void 0===a?"undefined":_typeof(a))&&null!=a?t:"")+"]",a,n,r)});else if(n||"object"!==b(t))r(e,t);else for(a in t)At(e+"["+a+"]",t[a],n,r)}w.param=function(e,t){var n,r=[],a=function(e,t){var n=h(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){a(this.name,this.value)});else for(n in e)At(n,e[n],t,a);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&jt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var Ct=/%20/g,Et=/#.*$/,_t=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,It=/^\/\//,Mt={},Dt={},Rt="*/".concat("*"),Lt=m.createElement("a");function qt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match(M)||[];if(h(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ft(e,t,n,r){var a={},i=e===Dt;function o(s){var c;return a[s]=!0,w.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||i||a[u]?i?!(c=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),c}return o(t.dataTypes[0])||!a["*"]&&o("*")}function Vt(e,t){var n,r,a=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}Lt.href=wt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,w.ajaxSettings),t):Vt(w.ajaxSettings,e)},ajaxPrefilter:qt(Mt),ajaxTransport:qt(Dt),ajax:function(t,n){"object"===(void 0===t?"undefined":_typeof(t))&&(n=t,t=void 0),n=n||{};var r,a,i,o,s,c,u,l,p,f,d=w.ajaxSetup({},n),h=d.context||d,y=d.context&&(h.nodeType||h.jquery)?w(h):w.event,g=w.Deferred(),v=w.Callbacks("once memory"),b=d.statusCode||{},T={},S={},x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(u){if(!o)for(o={};t=Nt.exec(i);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?i:null},setRequestHeader:function(e,t){return null==u&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)k.always(e[k.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),O(0,t),this}};if(g.promise(k),d.url=((t||d.url||wt.href)+"").replace(It,wt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(M)||[""],null==d.crossDomain){c=m.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Lt.protocol+"//"+Lt.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=w.param(d.data,d.traditional)),Ft(Mt,d,n,k),u)return k;for(p in(l=w.event&&d.global)&&0==w.active++&&w.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pt.test(d.type),a=d.url.replace(Et,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ct,"+")):(f=d.url.slice(a.length),d.data&&(d.processData||"string"==typeof d.data)&&(a+=(St.test(a)?"&":"?")+d.data,delete d.data),!1===d.cache&&(a=a.replace(_t,"$1"),f=(St.test(a)?"&":"?")+"_="+Tt.guid+++f),d.url=a+f),d.ifModified&&(w.lastModified[a]&&k.setRequestHeader("If-Modified-Since",w.lastModified[a]),w.etag[a]&&k.setRequestHeader("If-None-Match",w.etag[a])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Rt+"; q=0.01":""):d.accepts["*"]),d.headers)k.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(h,k,d)||u))return k.abort();if(x="abort",v.add(d.complete),k.done(d.success),k.fail(d.error),r=Ft(Dt,d,n,k)){if(k.readyState=1,l&&y.trigger("ajaxSend",[k,d]),u)return k;d.async&&d.timeout>0&&(s=e.setTimeout(function(){k.abort("timeout")},d.timeout));try{u=!1,r.send(T,O)}catch(e){if(u)throw e;O(-1,e)}}else O(-1,"No Transport");function O(t,n,o,c){var p,f,m,T,S,x=n;u||(u=!0,s&&e.clearTimeout(s),r=void 0,i=c||"",k.readyState=t>0?4:0,p=t>=200&&t<300||304===t,o&&(T=function(e,t,n){for(var r,a,i,o,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){c.unshift(a);break}if(c[0]in n)i=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){i=a;break}o||(o=a)}i=i||o}if(i)return i!==c[0]&&c.unshift(i),n[i]}(d,k,o)),!p&&w.inArray("script",d.dataTypes)>-1&&(d.converters["text script"]=function(){}),T=function(e,t,n,r){var a,i,o,s,c,u={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(i=l.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=i,i=l.shift())if("*"===i)i=c;else if("*"!==c&&c!==i){if(!(o=u[c+" "+i]||u["* "+i]))for(a in u)if((s=a.split(" "))[1]===i&&(o=u[c+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[a]:!0!==u[a]&&(i=s[0],l.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+i}}}return{state:"success",data:t}}(d,T,k,p),p?(d.ifModified&&((S=k.getResponseHeader("Last-Modified"))&&(w.lastModified[a]=S),(S=k.getResponseHeader("etag"))&&(w.etag[a]=S)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=T.state,f=T.data,p=!(m=T.error))):(m=x,!t&&x||(x="error",t<0&&(t=0))),k.status=t,k.statusText=(n||x)+"",p?g.resolveWith(h,[f,x,k]):g.rejectWith(h,[k,x,m]),k.statusCode(b),b=void 0,l&&y.trigger(p?"ajaxSuccess":"ajaxError",[k,d,p?f:m]),v.fireWith(h,[k,x]),l&&(y.trigger("ajaxComplete",[k,d]),--w.active||w.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,a){return h(n)&&(a=a||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:a,data:n,success:r},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(h(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return h(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},zt=w.ajaxSettings.xhr();d.cors=!!zt&&"withCredentials"in zt,d.ajax=zt=!!zt,w.ajaxTransport(function(t){var n,r;if(d.cors||zt&&!t.crossDomain)return{send:function(a,i){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(o,a[o]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,a){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}});var $t,Bt=[],Wt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||w.expando+"_"+Tt.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var a,i,o,s=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=h(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+a):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||w.error(a+" was not called"),o[0]},t.dataTypes[0]="json",i=e[a],e[a]=function(){o=arguments},r.always(function(){void 0===i?w(e).removeProp(a):e[a]=i,t[a]&&(t.jsonpCallback=n.jsonpCallback,Bt.push(a)),o&&h(i)&&i(o[0]),o=i=void 0}),"script"}),d.createHTMLDocument=(($t=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$t.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(d.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),i=!n&&[],(a=A.exec(e))?[t.createElement(a[1])]:(a=be([e],t,i),i&&i.length&&w(i).remove(),w.merge([],a.childNodes)));var r,a,i},w.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return s>-1&&(r=ht(e.slice(s)),e=e.slice(0,s)),h(t)?(n=t,t=void 0):t&&"object"===(void 0===t?"undefined":_typeof(t))&&(a="POST"),o.length>0&&w.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,a,i,o,s,c,u=w.css(e,"position"),l=w(e),p={};"static"===u&&(e.style.position="relative"),s=l.offset(),i=w.css(e,"top"),c=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(i+c).indexOf("auto")>-1?(o=(r=l.position()).top,a=r.left):(o=parseFloat(i)||0,a=parseFloat(c)||0),h(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+o),null!=t.left&&(p.left=t.left-s.left+a),"using"in t?t.using.call(e,p):("number"==typeof p.top&&(p.top+="px"),"number"==typeof p.left&&(p.left+="px"),l.css(p))}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),a.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-w.css(r,"marginTop",!0),left:t.left-a.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||ne})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return H(this,function(e,r,a){var i;if(y(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=ze(d.pixelPosition,function(e,n){if(n)return n=He(e,t),Le.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(a,i){var o=arguments.length&&(n||"boolean"!=typeof a),s=n||(!0===a||!0===i?"margin":"border");return H(this,function(t,n,a){var i;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?w.css(t,n,s):w.style(t,n,a,s)},t,o?a:void 0,o)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Ut=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),h(e))return r=a.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=j,w.isFunction=h,w.isWindow=y,w.camelCase=W,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(Ut,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Gt=e.jQuery,Xt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Xt),t&&e.jQuery===w&&(e.jQuery=Gt),w},void 0===t&&(e.jQuery=e.$=w),w}),define("jqueryplugins",["jquery"],function(e){e.prototype.extend({popAttr:function(e){var t=this.attr(e);return this.removeAttr(e),t},popData:function(e){var t=this.data(e);return this.removeData(e),t},tag:function(){return this[0]&&this[0].tagName&&this[0].tagName.toLowerCase()},textNodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";return 1===this.length&&this[0]instanceof Text?[this[0]]:this.get().concat(this.contents().get(),this.find(e).contents().get()).filter(function(e,t,n){return e instanceof Text&&n.indexOf(e)===t}).sort(function(e,t){return 2&e.compareDocumentPosition(t)?1:-1})},findAndFilter:function(e){return this.filter(e).add(this.find(e))}})}),function(){var e=void 0,t={};function n(){for(var e=0;e<arguments.length;e++)for(var t in arguments[e])this[t]=arguments[e][t]}function r(e,t){e.childAt=e.childAt||{};for(var n=t.start;n<t.end;n+=1)e.childAt[n]=t}function a(e,t,n,r){return!(e.canFollow&&!(e.canFollow.indexOf(n&&n.type)>-1)||e.cannotFollow&&(-1!==e.cannotFollow.indexOf(n&&n.type)||e.cannotFollow.indexOf("text")>-1&&r)||e.peek&&e.peek.toLowerCase()!==t.slice(0,e.peek.length).toLowerCase())}function i(e){for(var n=e.innerText,r=[],i=0,s=i,c=n.length,u=null;i<c;){for(var l=n.slice(i),p=(r.length?r[0]:e).innerMode,f=0,d=p.length;f<d;f+=1){var h=t[p[f]];if(a(h,l,u,s<i)&&h.pattern.test(l)){var y=h.pattern.exec(l),m=h.fn(y),g=!1,v=0;if(m.matches){for(;v<r.length;v+=1){var b=r[v].type;if(b in m.matches){g=!0;break}0===b.indexOf("verbatim")&&(b="verbatimOpener"),m.cannotCross&&m.cannotCross.indexOf(b)>-1&&(v=r.length-1)}if(v>=r.length&&!m.isFront)continue}s<i&&e.addChild({type:"text",text:n.slice(s,i),innerMode:p}),s=i+=(u=e.addChild(m)).text.length,g&&(o(e,u,r[v]),r=r.slice(v+1)),u.isFrontToken()&&r.unshift(u);break}}f===d&&(i+=1,null===u&&(u={type:"text"}))}for(s<i&&e.addChild({type:"text",text:n.slice(s,i),innerMode:(r.length?r[0]:e).innerMode});r.length>0;)r.shift().demote();return e}function o(e,t,n){var a=e.children.indexOf(t),i=e.children.indexOf(n);t.children=e.children.splice(i+1,a-(i+1)),t.children.forEach(function(e){r(t,e)}),t.type=t.matches[n.type],t.innerText="";for(var o=0,s=t.children.length;o<s;o++)t.innerText+=t.children[o].text;t.start=n.start,t.text=n.text+t.innerText+t.text,Object.keys(n).forEach(function(e){Object.hasOwnProperty.call(t,e)||(t[e]=n[e])}),t.isFront&&(t.isFront=!1),e.children.splice(i,1),r(e,t)}n.prototype={constructor:n,addChild:function(e){var t=this.lastChildEnd(),a=new n({start:t,end:e.text&&t+e.text.length,children:[]},e);return a.innerText&&i(a),this.children.push(a),r(this,a),a},firstChild:function(){return this.children&&this.children[0]||null},lastChild:function(){return this.children&&this.children[this.children.length-1]||null},lastChildEnd:function(){var e=this.lastChild();return e?e.end:this.start+Math.max(0,this.text.indexOf(this.innerText))},tokenAt:function(e){if(e<this.start||e>=this.end)return null;if(this.childAt)return this.childAt[e]&&this.childAt[e].tokenAt(e)||this;if(this.children.length)for(var t=0;t<this.children.length;t+=1){var n=this.children[t].tokenAt(e);if(n)return n}return this},pathAt:function(e){if(e<this.start||e>=this.end)return[];if(this.childAt)return(this.childAt[e]&&this.childAt[e].pathAt(e)||[]).concat(this);var t=[];if(this.children.length)for(var n=0;n<this.children.length;n+=1){var r=this.children[n].pathAt(e);if(r.length){t.concat(r);break}}return t.concat(this)},nearestTokenAt:function(e){return e<this.start||e>=this.end?null:this.children?this.children.reduce(function(t,n){return t||(e>=n.start&&e<n.end?n:null)},null):this},everyLeaf:function(e){return this.children&&0!==this.children.length?this.children.reduce(function(t,n){return t&&n.everyLeaf(e)},!0):!!e(this)},isWhitespace:function(){return this.everyLeaf(function(e){return"whitespace"===e.type||!e.text.trim()})},isFrontToken:function(){return this.isFront},isBackToken:function(){return"matches"in this},demote:function(){this.type="text"},error:function(e){this.type="error",this.message=e},toString:function(){var e=this.type+"("+this.start+"\u2192"+this.end+")";return this.children&&this.children.length>0&&(e+="["+this.children+"]"),e}},e={lex:function(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";return i(new n({type:"root",start:r||0,end:t.length,text:t,innerText:t,children:[],childAt:{},innerMode:e.modes[a]}))},rules:t,modes:{}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("lexer",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Lexer=e):this.TwineLexer=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e;function t(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))?(Object.keys(e).forEach(function(n){e[n]=t(e[n])}),e):(e+"").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(e){return function(){return"("+e+Array.apply(0,arguments).join("|")+")"}}var r=n("?:"),a=n("?!"),i=n("?="),o="[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",s=o.replace("*","+"),c="\\b",u="[\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",l=u.replace("\\-",""),p=r("\\n","$"),f=o+"(\\*+)"+s,d=o+"((?:0\\.)+)"+s,h=o+"-{3,}"+o+p,y=o+"(==+>|<=+|=+><=+|<==+>)"+o+p,m=o+"(=+\\|+|\\|+=+|=+\\|+=+|\\|=+\\|)"+o+p,g={opener:"\\[\\[(?!\\[)",text:"("+function(){return"[^"+Array.apply(0,arguments).map(t).join("")+"]*"}("]")+")",rightSeparator:r("\\->","\\|"),leftSeparator:"<\\-",closer:"\\]\\]",legacySeparator:"\\|",legacyText:"("+r("[^\\|\\]]","\\]"+a("\\]"))+"+)"},v=l+"*"+l.replace("\\w","a-zA-Z")+l+"*",b="\\$("+v+")",w="_("+v+")",T="'s"+s+"("+v+")",S="("+v+")"+s+"of"+c+a("it\\b"),x="'s"+s,k=r("it","time","visits?","exits?","pos")+c,O="its"+s+"("+v+")",j="its"+s,A="("+v+")"+s+"of"+s+"it"+c,C="of\\b"+s+"it"+c,E={opener:"\\(",name:"("+r("\\$","_")+"?"+u+"+):"+a("\\/"),closer:"\\)"},_=r("=<","=>","[gl]te?\\b","n?eq\\b","isnot\\b","are\\b","x\\b","isa\\b","or"+s+"a"+c),N="[a-zA-Z][\\w\\-]*",P="(?:\"[^\"]*\"|'[^']*'|[^'\">])*?",I="\\|("+u+"+)(>|\\))",M="(<|\\()("+u+"+)\\|",D="\\b(\\d+(?:\\.\\d+)?(?:[eE][+\\-]?\\d+)?)"+a("m?s")+c;g.main=g.opener+r(g.text+g.rightSeparator,g.text.replace("*","*?")+g.leftSeparator)+g.text,e={upperLetter:"[A-Z\\u00c0-\\u00de\\u0150\\u0170]",lowerLetter:"[a-z0-9_\\-\\u00df-\\u00ff\\u0151\\u0171]",anyLetter:u,anyLetterStrict:l,whitespace:s.replace("[","[\\n\\r"),escapedLine:"\\\\\\n\\\\?|\\n\\\\",br:"\\n(?!\\\\)",commentFront:"\x3c!--",commentBack:"--\x3e",tag:"<\\/?"+N+P+">",tagPeek:"<",scriptStyleTag:"<("+r("script","style","textarea")+")"+P+">[^]*?<\\/\\1>",scriptStyleTagOpener:"<",url:"("+r("https?","mailto","javascript","ftp","data")+":\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])",bullet:"\\*",hr:h,heading:"[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*(#{1,6})[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",align:y,column:m,bulleted:f,numbered:d,strikeOpener:t("~~"),italicOpener:t("//"),boldOpener:t("''"),supOpener:t("^^"),strongFront:t("**"),strongBack:t("**"),emFront:t("*"),emBack:t("*"),verbatimOpener:"`+",collapsedFront:"{",collapsedBack:"}",hookAppendedFront:"\\["+a("=+"),hookPrependedFront:I+"\\["+a("=+"),hookFront:"\\["+a("=+"),hookBack:"\\]"+a(M),hookAppendedBack:"\\]"+M,unclosedHook:"\\[=+",unclosedHookPrepended:I+"\\[=+",unclosedCollapsed:"\\{=+",passageLink:g.main+g.closer,passageLinkPeek:"[[",legacyLink:g.opener+g.legacyText+g.legacySeparator+g.legacyText+g.closer,legacyLinkPeek:"[[",simpleLink:g.opener+g.legacyText+g.closer,simpleLinkPeek:"[[",macroFront:E.opener+i(E.name),macroFrontPeek:"(",macroName:E.name,groupingFront:"\\("+a(E.name),groupingFrontPeek:"(",groupingBack:"\\)",twine1Macro:"<<[^>\\s]+\\s*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"|[^'\"\\\\>]|>(?!>))*>>",twine1MacroPeek:"<<",validPropertyName:v,property:T,propertyPeek:"'s",belongingProperty:S,possessiveOperator:x,belongingOperator:"of\\b",belongingOperatorPeek:"of",itsOperator:j,itsOperatorPeek:"its",belongingItOperator:C,belongingItOperatorPeek:"of",variable:b,variablePeek:"$",tempVariable:w,tempVariablePeek:"_",hookName:"\\?("+u+"+)\\b",hookNamePeek:"?",cssTime:"(\\d+\\.?\\d*|\\d*\\.?\\d+)(m?s)\\b",colour:r(r("Red","Orange","Yellow","Lime","Green","Cyan","Aqua","Blue","Navy","Purple","Fuchsia","Magenta","White","Gray","Grey","Black","Transparent"),"#[\\dA-Fa-f]{3}(?:[\\dA-Fa-f]{3})?"),datatype:r("alnum","alphanumeric","any(?:case)?","array","bool(?:ean)?","changer","colou?r","const","command","dm","data"+r("map","type","set"),"ds","digit","gradient","empty","even","int"+a("o")+"(?:eger)?","lambda","lowercase","macro","linebreak","num(?:ber)?","odd","str(?:ing)?","uppercase","whitespace")+c,number:D,boolean:r("true","false")+c,identifier:k,itsProperty:O,itsPropertyPeek:"its",belongingItProperty:A,escapedStringChar:"\\\\[^\\n]",singleStringOpener:"'",doubleStringOpener:'"',singleStringCloser:"'",doubleStringCloser:'"',is:"is"+a(s+"not"+c,s+"an?"+c,s+"in"+c,s+"<",s+">")+c,isNot:"is"+s+"not"+a(s+r("an?","in")+c)+c,isA:"is"+s+"an?"+c,isNotA:"is"+s+"not"+s+"an?"+c,matches:"matches\\b",doesNotMatch:"does"+s+"not"+s+"match"+c,and:"and\\b",or:"or\\b",not:"not\\b",inequality:"((?:is(?:"+s+"not)?"+o+")*)("+r("<(?!=)","<=",">(?!=)",">=")+")",isIn:"is"+s+"in"+c,contains:"contains\\b",doesNotContain:"does"+s+"not"+s+"contain"+c,isNotIn:"is"+s+"not"+s+"in"+c,addition:t("+")+a("="),subtraction:t("-")+a("=","type"),multiplication:t("*")+a("="),division:r("/","%")+a("="),comma:",",spread:"\\.\\.\\."+a("\\."),to:r("to\\b","="),into:"into\\b",making:"making\\b",where:"where\\b",when:"when\\b",via:"via\\b",each:"each\\b",augmentedAssign:r("\\+","\\-","\\*","\\/","%")+"=",bind:"2?bind\\b",typeSignature:t("-type")+c,incorrectOperator:_},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("patterns",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Patterns=e):this.Patterns=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e=void 0;Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var t=Object.keys,n=Object.assign;function r(r){return Object.freeze({lex:function(r){function a(e){return e=e||"innerText",function(t){var n=t.reduceRight(function(e,t,n){return e||(n?t:"")},""),r={};return r[e]=n,r}}function i(e,t){var n={};return n[e]=t,function(){return{isFront:!0,matches:n,cannotCross:["verbatimOpener"]}}}var o=Object.bind(0,null);function s(e,t){return Object.keys(t).forEach(function(n){var r=t[n].fn;t[n].fn=function(t){var a=r(t);return a.text||(a.text=t[0]),a.type||(a.type=n),a.innerMode||(a.innerMode=e),a}}),t}var c=[],u=[],l=[],p=s(c,{hr:{fn:o},bulleted:{fn:function(e){return{depth:e[1].length}}},numbered:{fn:function(e){return{depth:e[1].length/2}}},heading:{fn:function(e){return{depth:e[1].length}}},align:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("><");return~r?25===(t=Math.round(r/(n.length-2)*50))&&(t="center"):"<"===n[0]&&">"===n.slice(-1)?t="justify":n.indexOf(">")>-1?t="right":n.indexOf("<")>-1&&(t="left"),{align:t}}},column:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("|");return r&&r<n.length-1?t="center":"|"===n[0]&&"|"===n.slice(-1)?t="none":r===n.length-1?t="right":r||(t="left"),{column:t,width:/\|+/.exec(n)[0].length,marginLeft:/^=*/.exec(n)[0].length,marginRight:/=*$/.exec(n)[0].length}}}});t(p).forEach(function(e){p[e].canFollow=[null,"br","hr","bulleted","numbered","heading","align","column","escapedLine"],p[e].cannotFollow=["text"]});var f=s(c,{twine1Macro:{fn:function(){return{type:"error",message:"Harlowe macros use a different syntax to Twine 1, SugarCube, and Yarn macros."}}},emBack:{fn:function(){return{matches:{emFront:"em"},cannotCross:["verbatimOpener"]}}},strongBack:{fn:function(){return{matches:{strongFront:"strong"},cannotCross:["verbatimOpener"]}}},strongFront:{fn:function(){return{isFront:!0}}},emFront:{fn:function(){return{isFront:!0}}},boldOpener:{fn:i("boldOpener","bold")},italicOpener:{fn:i("italicOpener","italic")},strikeOpener:{fn:i("strikeOpener","strike")},supOpener:{fn:i("supOpener","sup")},commentFront:{fn:function(){return{isFront:!0}}},commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},scriptStyleTag:{fn:o},tag:{fn:o},url:{fn:o},hookPrependedFront:{fn:function(e){return{name:e[1],hidden:")"===e[2],isFront:!0,tagPosition:"prepended"}}},hookFront:{fn:function(){return{isFront:!0}}},hookBack:{fn:function(){return{matches:{hookPrependedFront:"hook",hookFront:"hook"},cannotCross:["verbatimOpener"]}}},hookAppendedBack:{fn:function(e){return{name:e[2],hidden:"("===e[1],tagPosition:"appended",matches:{hookFront:"hook"},cannotCross:["verbatimOpener"]}}},unclosedHook:{fn:o},unclosedHookPrepended:{fn:function(e){return{type:"unclosedHook",name:e[1],hidden:")"===e[2]}}},verbatimOpener:{fn:function(e){var t=e[0].length,n={};return n["verbatim"+t]="verbatim",{type:"verbatim"+t,isFront:!0,matches:n}}},unclosedCollapsed:{fn:o},collapsedFront:{fn:function(){return{isFront:!0}}},collapsedBack:{fn:function(){return{matches:{collapsedFront:"collapsed"},cannotCross:["verbatimOpener"]}}},escapedLine:{fn:o},legacyLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[2],innerMode:c}}},br:{fn:o}}),d=n(s(u,{macroFront:{fn:function(e){return{isFront:!0,name:e[1]}}},groupingBack:{fn:function(){return{matches:{groupingFront:"grouping",macroFront:"macro"},cannotCross:["singleStringOpener","doubleStringOpener"]}}},passageLink:{fn:function(e){var t=e[1]||"",n=e[2]||"",r=e[3]||"";return{type:"twineLink",innerText:n?r:t,passage:t?r:n,innerMode:c}}},simpleLink:{fn:function(e){return{type:"twineLink",innerText:e[1]||"",passage:e[1]||"",innerMode:c}}},variable:{cannotFollow:["macroFront"],fn:a("name")},tempVariable:{cannotFollow:["macroFront"],fn:a("name")}}),{hookFront:f.hookFront,hookBack:f.hookBack}),h=s(u,n({macroName:{canFollow:["macroFront"],fn:a("name")},groupingFront:{fn:function(){return{isFront:!0}}},property:{fn:a("name"),canFollow:["variable","hookName","property","tempVariable","colour","itsProperty","belongingItProperty","macro","grouping","string","datatype","hook","boolean","number"]},possessiveOperator:{fn:o},itsProperty:{cannotFollow:["text"],fn:a("name")},itsOperator:{cannotFollow:["text"],fn:o},belongingItProperty:{cannotFollow:["text"],fn:a("name")},belongingItOperator:{cannotFollow:["text"],fn:o},belongingProperty:{cannotFollow:["text"],fn:a("name")},belongingOperator:{cannotFollow:["text"],fn:o},escapedStringChar:{fn:function(){return{type:"text"}}},singleStringOpener:{fn:function(){return{isFront:!0,matches:{singleStringOpener:"string"},innerMode:l}}},doubleStringOpener:{fn:function(){return{isFront:!0,matches:{doubleStringOpener:"string"},innerMode:l}}},hookName:{fn:a("name")},cssTime:{fn:function(e){return{value:+e[1]*("s"===e[2].toLowerCase()?1e3:1)}}},datatype:{cannotFollow:["text"],fn:function(e){return{name:e[0].toLowerCase()}}},colour:{cannotFollow:["text"],fn:function(e){var t=e[0].toLowerCase(),n={red:"e61919",orange:"e68019",yellow:"e5e619",lime:"80e619",green:"19e619",cyan:"19e5e6",aqua:"19e5e6",blue:"197fe6",navy:"1919e6",purple:"7f19e6",fuchsia:"e619e5",magenta:"e619e5",white:"fff",black:"000",gray:"888",grey:"888"};return{colour:Object.hasOwnProperty.call(n,t)?"#"+n[t]:t}}},number:{fn:function(e){return{value:parseFloat(e[0])}}},inequality:{fn:function(e){return{operator:e[2],negate:e[1].indexOf("not")>-1}}},augmentedAssign:{fn:function(e){return{operator:e[0][0]}}},identifier:{fn:a("name"),cannotFollow:["text"]},whitespace:{fn:o,cannotFollow:"text"},incorrectOperator:{fn:function(e){var t={"=>":">=","=<":"<=",gte:">=",lte:"<=",gt:">",lt:"<",eq:"is",isnot:"is not",neq:"is not",isa:"is a",are:"is",x:"*","or a":"or"}[e[0].toLowerCase().replace(/\s+/g," ")];return{type:"error",message:"Please say "+(t?"'"+t+"'":"something else")+" instead of '"+e[0]+"'.",explanation:"In the interests of readability, I want certain operators to be in a specific form."}},cannotFollow:"text"}},["boolean","is","to","into","where","when","via","making","each","and","or","not","isNot","contains","doesNotContain","isIn","isA","isNotA","isNotIn","matches","doesNotMatch","bind"].reduce(function(e,t){return e[t]={fn:o,cannotFollow:["text"]},e},{}),["comma","spread","typeSignature","addition","subtraction","multiplication","division"].reduce(function(e,t){return e[t]={fn:o},e},{}))),y=s(l,{singleStringCloser:h.singleStringOpener,doubleStringCloser:h.doubleStringOpener,escapedStringChar:h.escapedStringChar});c.push.apply(c,_toConsumableArray(t(p)).concat(_toConsumableArray(t(d)),_toConsumableArray(t(f)))),u.push.apply(u,_toConsumableArray(t(d)).concat(_toConsumableArray(t(h)))),l.push.apply(l,_toConsumableArray(t(y)));var m=n({},p,f,d,h,y);t(m).forEach(function(t){var n=e[t];m[t].pattern="string"!=typeof n?n:RegExp("^(?:"+n+")","i"),e[t+"Peek"]&&(m[t].peek=e[t+"Peek"])}),n(r.rules,m);var g=r.modes;return g.start=g.markup=c,g.macro=u,g.string=l,r}(r).lex,Patterns:e})}"object"===("undefined"==typeof module?"undefined":_typeof(module))?(e=require("./patterns"),module.exports=r(require("./lexer"))):"function"==typeof define&&define.amd?define("markup",["lexer","patterns"],function(t,n){return e=n,r(t)}):this&&this.loaded&&this.modules?(e=this.modules.Patterns,this.modules.Markup=r(this.modules.Lexer)):(e=this.Patterns,this.TwineMarkup=r(this.TwineLexer))}.call(eval("this")||("undefined"!=typeof global?global:window)),define("utils/polyfills",[],function(){var e=Array.prototype;"function"!=typeof e.includes&&(e.includes=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Number.isNaN(t)&&Number.isFinite(n)&&void 0!==t)return e.indexOf.call(this,t,n)>-1;var r=Object(this),a=parseInt(r.length);if(a<=0)return!1;for(var i=n>=0?n:Math.max(0,a+n);i<a;){if(Object.is(t,r[i]))return!0;i+=1}return!1}),!window.Symbol&&(window.Symbol={iterator:"_es6-shim iterator_"})}),define("utils",["jquery","markup","utils/polyfills"],function(e){var t=String.fromCharCode,n="audio,blockquote,canvas,div,h1,h2,h3,h4,h5,hr,ol,p,pre,table,ul,video,tw-align,tw-story,tw-passage,tw-sidebar,tw-columns,tw-column,tw-meter".split(","),r="a,b,i,em,strong,sup,sub,abbr,acronym,s,strike,del,big,small,script,img,button,input,tw-link,tw-broken-link,tw-verbatim,tw-collapsed,tw-error,tw-colour,tw-icon".split(","),a=["audio"],i=[function(e){return t(e)!==t(e).toLowerCase()},function(e){return t(e)!==t(e).toUpperCase()},function(e){return t(e).toLowerCase()!==t(e).toUpperCase()}].map(function(e){return"["+Array.from(Array(57343)).map(function(e,t){return t}).filter(e).map(function(e,n,r){return e===r[n-1]+1&&e===r[n+1]-1?"-":t(e)}).join("").replace(/\-+/g,"-")+"]"}),o=_slicedToArray(i,3),s=o[0],c=o[1],u=o[2];function l(e){return"instant"===e?0:800}var p=void 0,f=[],d={},h=0,y={},m=0,g={},v=void 0;function b(e,t,n,r,a){var i=null,o=0,s=t+n;function c(n){1&e[0].compareDocumentPosition(document)&&(s=0),i&&(s-=n-i,o+=n-i),i=n,r>0&&h+m>0&&(s-=r,e.css("animation-delay",(v.cssTimeUnit(e.css("animation-delay"))||0)-r+"ms")),s<=0?a(o):requestAnimationFrame(c),s<=t&&e.css("visibility","")}s?requestAnimationFrame(c):c()}return e(document.documentElement).on("keydown keyup mousedown mouseup",function(e){var t=e.key,n=e.button,r=e.type.includes("down"),a=t?d:y,i=t&&v.insensitiveName(t)||n;a[i]&&!r?t?h=Math.max(h-1,0):m=Math.max(m-1,0):!a[i]&&r&&(t?h+=1:m+=1),a[i]=r}).on("mousemove",function(e){var t=e.pageX,n=e.pageY;g.x=t,g.y=n}),v={lockProperty:function(e,t,n){var r=Object.create({configurable:0,writable:0});return n&&(r.value=n),Object.defineProperty(e,t,r),e},permutations:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.length,a=[[].concat(t)],i=Array(r).fill(0),o=1,s=void 0,c=void 0;o<r;)i[o]<o?(s=o%2&&i[o],c=t[o],t[o]=t[s],t[s]=c,++i[o],o=1,a.push([].concat(t))):(i[o]=0,++o);return a},shuffled:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t,n){var r=Math.random()*(n+1)|0;return r===n?e.push(t):(e.push(e[r]),e[r]=t),e},[])},matMul:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i;if(r.length>0)return(i=v).matMul.apply(i,[v.matMul(e,t)].concat(r));if(!t)return e;for(var o=[],s=0;s<e.length;s++){o[s]=[];for(var c=0;c<t[0].length;c++){for(var u=0,l=0;l<e[0].length;l++)u+=e[s][l]*t[l][c];o[s][c]=u}}return o},cssTimeUnit:function(e){return"ms"===(e=e.toLowerCase()).slice(-2)?+e.slice(0,-2)||0:"s"===e.slice(-1)&&1e3*+e.slice(0,-1)||0},nth:function(e){var t=(+e+"").slice(-1);return e+("1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th")},plural:function(e,t){return e+" "+t+(e>1?"s":"")},andList:function(e){return 1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},realWhitespace:"[ \\n\\r\\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]",anyRealLetter:"[\\dA-Za-z\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",anyUppercase:s,anyLowercase:c,anyCasedLetter:u,anyNewline:"(?:\\n|\\r|\\r\\n)",unescape:function(e){return e.replace(/&(?:amp|lt|gt|quot|nbsp|zwnj|#39|#96);/g,function(e){return{"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'","&nbsp;":String.fromCharCode(160),"&zwnj;":String.fromCharCode(8204)}[e]})},escape:function(e){return e.replace(/[&><"']/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})},insensitiveName:function(e){return(e+"").toLowerCase().replace(/-|_/g,"")},allKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return d[e]})},someKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return d[e]})},buttonsDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return y[e]})},anyInputDown:function(){return h+m>0},mouseCoords:g,parentColours:function(e){for(var t={colour:null,backgroundColour:null},n=/^\w+a\(.+?,\s*0\s*\)$|^transparent$/;e.length&&e[0]!==document;e=e.parent()){if(!t.backgroundColour){var r=e.css("background-color");r.match(n)||(t.backgroundColour=r)}if(!t.colour){var a=e.css("color");a.match(n)||(t.colour=a)}if(t.colour&&t.backgroundColour)return t}return{colour:"#fff",backgroundColour:"#000"}},childrenProbablyInline:function(e){var t=[];return[].every.call(e.findAndFilter("*"),function(e){return!!(e.hidden||/none|inline/.test(e.style.display)||/display: (none|inline)/.test(e.getAttribute("style")))||!n.includes(e.tagName.toLowerCase())&&!/display: (?!none|inline|inherit|unset)/.test(e.getAttribute("style"))&&(!!r.includes(e.tagName.toLowerCase())||(t.push(e),!0))})&&t.every(function(e){return window.getComputedStyle(e).display.includes("inline")})},transitionReplace:function(t,n,r){var a=t.closest("tw-hook");a.length>0&&(t=a);var i=e("<tw-transition-container>").css("position","relative");i.insertBefore(t.first());var o=void 0;n&&(o=e("<tw-transition-container>").appendTo(i),n.appendTo(o));var s=e("<tw-transition-container>").css("position","absolute").prependTo(i);t.detach().appendTo(s),v.transitionOut(s,r),n&&v.transitionIn(o,r,function(){o.unwrap().children().first().unwrap()})},transitionOut:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;0!==e.length&&(n=n||l(t),(e.length>1||!v.childrenProbablyInline(e)||!["tw-hook","tw-passage","tw-expression"].includes(e.tag()))&&(e=e.wrapAll("<tw-transition-container>").parent()),o&&e.css("transform-origin",o),e.attr("data-t8n",t).addClass("transition-out").css({"animation-duration":n+"ms","animation-delay":r-i+"ms"}),requestAnimationFrame(function(){v.childrenProbablyInline(e)?e.css("display","inline"):e.parent().is("tw-backdrop,tw-story")||e[0].setAttribute("style",e[0].getAttribute("style")+"display:block !important;width:100%")}),b(e,n,r-i,a,function(){e.remove()}))},transitionIn:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(0!==t.length){r=r||l(n);var u=t.length>1||!v.childrenProbablyInline(t)||!["tw-hook","tw-passage","tw-expression"].includes(t.tag());u&&(t=t.wrapAll("<tw-transition-container>").parent()),c&&t.css("transform-origin",c),t.attr("data-t8n",n).addClass("transition-in").css(Object.assign({"animation-duration":r+"ms","animation-delay":i-s+"ms"},i-s?{visibility:"hidden"}:{})),requestAnimationFrame(function(){v.childrenProbablyInline(t)?t.css("display","inline"):t.parent().is("tw-backdrop,tw-story")||t[0].setAttribute("style",t[0].getAttribute("style")+"display:block !important;width:100%")}),b(t,r,i-s,o,function(n){var r=0===t.filter(a.join(",")).length;u&&r?(t.find("tw-transition-container").each(function(t,r){(r=e(r)).css("animation-delay",v.cssTimeUnit(r.css("animation-delay")||0)-n+"ms")}),t.contents().unwrap()):t.removeClass("transition-in").removeAttr("data-t8n")})}},debounce:function(e){var t=void 0,n=void 0,r=0,a=function a(){Date.now()-r>300?(t=0,e.apply(void 0,_toConsumableArray(n))):t=requestAnimationFrame(a)};return function(){r=Date.now(),n=arguments,t&&cancelAnimationFrame(t),t=requestAnimationFrame(a)}},impossible:function(e,t){window.console&&console.error(e+"(): "+t)},assertMustHave:function(e,t){if(window.console)for(var n=0;n<t.length;n+=1)t[n]in e||console.error("Assertion failed: object lacks property "+t[n])},assertOnlyHas:function(e,t){if(window.console)for(var n in e)t.includes(n)||console.error("Assertion failed: object had unexpected property '"+n+"'!")},onStartup:function(e){f?f.push(e):e()},get storyElement(){return p}},e(function(){p=e("tw-story"),f.forEach(function(e){return e()}),f=null}),Object.freeze(v)}),define("utils/naturalsort",[],function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String;return function(n,r){var a,i,o,s,c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,p=/^0/,f=t(n).trim(),d=t(r).trim(),h=f.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=d.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(f.match(l))||1!==h.length&&f.match(u)&&Date.parse(f),g=parseInt(d.match(l))||m&&d.match(u)&&Date.parse(d)||null;if(e&&window.Intl&&window.Intl.Collator&&(o=window.Intl.Collator(e)),g){if(m<g)return-1;if(m>g)return 1}for(var v=0,b=Math.max(h.length,y.length);v<b;v++){if(a=!(h[v]||"").match(p)&&parseFloat(h[v])||h[v]||0,i=!(y[v]||"").match(p)&&parseFloat(y[v])||y[v]||0,isNaN(a)!==isNaN(i))return isNaN(a)?1:-1;if((void 0===a?"undefined":_typeof(a))!==(void 0===i?"undefined":_typeof(i)))a+="",i+="";else if("string"==typeof a&&o&&0!==(s=o.compare(a,i)))return s;if(a<i)return-1;if(a>i)return 1}return 0}}}),define("twinescript/compiler",["utils"],function(e){var t=e.impossible,n=JSON.stringify;function r(e,t){for(var n=0;n<e.length;n+=1)if(t.includes(e[n].type))return n;return NaN}function a(e,t){var n=[];return e.length?([["error"],["comma"],["to","into"],["where","when","via"],["making","each"],["typeSignature"],["augmentedAssign"],["and","or"],["is","isNot"],["contains","doesNotContain","isIn","isNotIn"],["isA","isNotA","matches","doesNotMatch"],["inequality"],["addition","subtraction"],["multiplication","division"],{rightAssociative:["spread","bind"]},{rightAssociative:["not","positive","negative"]},{rightAssociative:["belongingProperty","belongingItProperty","belongingOperator","belongingItOperator"]},["property","itsProperty","possessiveOperator","itsOperator"],["twineLink"],["macro"],["grouping"]]["most"===t?"reverse":"valueOf"]().some(function(t){var a=void 0;if(a=t.rightAssociative?r(e,t.rightAssociative):function(e,t){return e.length-1-r.apply(void 0,[[].concat(_toConsumableArray(e)).reverse(),t])}(e,t),!Number.isNaN(a)&&a>-1)return n=[e[a],a],!0}),n):n}function i(e){if("inequality"===e.type){var t=e.operator;return e.negate?{">":"<=","<":">=",">=":"<","<=":">"}[t]:t}return e.type}function o(e){var t=i(e);return{">":"<","<":">",">=":"<=","<=":">=",contains:"isIn",doesNotContain:"isNotIn",isIn:"contains",isA:"typifies",typifies:"isA",isNotA:"untypifies",untypifies:"isNotA"}[t]||t}var s=["inequality","is","isNot","isIn","contains","doesNotContain","isNotIn","isA","typifies","isNotA","untypifies","matches","doesNotMatch"];return function e(r){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=c.isVarRef,l=c.isTypedVar,p=c.whitespaceError,f=c.elidedComparison,d=c.testNeedsRight,h="Operations.Identifiers.it";if(!(r=[].concat(r)).length)return u&&p?"TwineError.create('operation',"+n(p)+")":"";var y=void 0;if(1===r.length){var m=(y=r[0]).type;if("identifier"===m)return u?"VarRef.create(Operations.Identifiers,"+n(y.text)+")":"Operations.Identifiers."+y.text.toLowerCase()+" ";if("variable"===m||"tempVariable"===m){var g="VarRef.create("+("tempVariable"===m?"section.stackTop.tempV":"State.v")+"ariables,"+n(y.name)+")"+(u||l?"":".get()");return l?"TypedVar.create(Datatype.create('any'),"+g+")":g}if("hookName"===m)return"HookSet.create({type:'name', data:'"+y.name+"'}) ";if("string"===m)return y.text.replace(/\n/g,"\\n");if("hook"===m)return"CodeHook.create("+n(y.text.slice(1,-1))+","+n(y.html||"")+")";if("colour"===m)return"Colour.create("+n(y.colour)+")";if("datatype"===m)return"Datatype.create("+n(y.name)+")";if("blockedValue"===m)return"section.blockedValue()";if("root"===m)return e(y.children);if("whitespace"===m&&u&&p)return"TwineError.create('operation',"+n(p)+")"}var v,b=a(r,"least"),w=_slicedToArray(b,2);y=w[0],v=w[1];var T=(y||{}).type,S=r.slice(0,v),x=r.slice(v+1),k=function(e,t){return{isVarRef:!0,isTypedVar:t,whitespaceError:"I need usable data to be on the "+e+' of "'+y.text+'".'}},O="must",j="mustn't",A="may",C=void 0,E=void 0,_="",N="",P="",I=O,M=O,D=!1;if(T)if("comma"===T)N=",",M=A;else if("spread"===T)_="Operations.makeSpreader(",P=")",I=A;else if("bind"===T)_="VarBind.create(",E=e(x,k("right")),P=(y.text.startsWith("2")?",'two way'":"")+")",I=j;else if("to"===T)_="Operations.makeAssignmentRequest(Operations.setIt(",E=e(x,k("right")),N="),",C=e(S,k("left",!0)),P=",'to')";else if("into"===T)_="Operations.makeAssignmentRequest(",E=e(S,k("left")),N=",Operations.setIt(",C=e(x,k("right",!0)),P="),'into')";else if("typeSignature"===T)_="TypedVar.create(",N=",",E=e(x,k("right")),P=")",l=!1;else if("where"===T||"when"===T||"via"===T)_="Lambda.create(",C=e(S,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",N=","+n(y.type)+",",E=n(e(x)),P=","+n(r.map(function(e){return e.text}).join(""))+")";else if("making"===T||"each"===T)"each"===T?(_="Lambda.create(",E=e(x,k("right")).trim(),P=",'where','true',"+n(r.map(function(e){return e.text}).join(""))+")",I=A):(_="Lambda.create(",C=e(S,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",N=","+n(y.type)+",",E=e(x,k("right")).trim(),P=","+n(r.map(function(e){return e.text}).join(""))+")");else if("augmentedAssign"===T)_="Operations.makeAssignmentRequest(",C=e(S,k("left")),N=",",E="Operations["+n(y.operator)+"]("+e(S)+","+e(x)+")",P=","+n(y.operator)+")";else if("and"===T||"or"===T){var R=function e(t){var n=a(t,"least"),r=_slicedToArray(n,2),i=r[0],o=r[1];if(i)return s.includes(i.type)?i:["and","or"].includes(i.type)?e(t.slice(0,o))||e(t.slice(o+1)):void 0},L=R(S),q=R(x),F="TwineError.create('operation', 'This use of \"is not\" and \""+T+"\" is grammatically ambiguous','Maybe try rewriting this as \"__ is not __ "+T+" __ is not __\"') ";if(_="Operations."+T+"(",N=",",P=")",f===y.type)_=P="",C=e(S,{isVarRef:u,elidedComparison:f}).trim(),E=e(x,{elidedComparison:f}).trim();else if(L&&!q){var V=L,H=n(i(V));if("isNot"===V.type||"isNotA"===V.type||"untypifies"===V.type)return F;E="Operations.elidedComparisonOperator("+n(y.type)+","+H+","+e(x,{elidedComparison:T})+")"}else if(!L&&q){var z=q,$=r.indexOf(z),B=n(o(z));if("isNot"===z.type||"isNotA"===z.type||"untypifies"===z.type)return F;E="Operations.elidedComparisonOperator("+n(y.type)+","+B+","+e(S,{elidedComparison:T})+")",C=e([].concat(_toConsumableArray(r.slice($+1)),[Object.assign(Object.create(z),_defineProperty({},"inequality"===z.type?"operator":"type",o(z)))],_toConsumableArray(r.slice(v+1,$))))}u=!1}else if(s.includes(T))D=!0,u=!1,_="Operations["+n(i(y))+"](",N=",",P=")";else if("addition"===T||"subtraction"===T){if(!e(S,{testNeedsRight:!0}).trim())return y.type={addition:"positive",subtraction:"negative"}[T],e(r,{isVarRef:u,whitespaceError:p,elidedComparison:f,testNeedsRight:d});u=!1,_="Operations["+n(y.text)+"](",N=",",P=")"}else if("multiplication"===T||"division"===T)u=!1,_="Operations["+n(y.text)+"](",N=",",P=")";else if("positive"===T||"negative"===T)u=!1,C="negative"===T?"-1":"1",_="Operations['*'](",N=",",P=")";else if("not"===T)_="Operations.not(",E=e(x),P=")",I=A;else if("belongingProperty"===T)_="VarRef.create(",E=e(x,k("right")),P=","+n(y.name)+")"+(u?"":".get()"),I=A;else if("belongingOperator"===T||"belongingItOperator"===T)C=y.type.includes("It")?h:e(x,k("right")),E=e(S),_="VarRef.create(",N=",{computed:true,value:",P="})"+(u?"":".get()");else if("property"===T)_="VarRef.create(",C=e(S,k("left")),P=","+n(y.name)+")"+(u?"":".get()"),M=A;else if("itsProperty"===T||"belongingItProperty"===T)_="VarRef.create(",C=h,P=","+n(y.name)+")"+(u?"":".get()"),I=M=A;else if("possessiveOperator"===T||"itsOperator"===T)y.type.includes("it")&&(C=h,I=A),_="VarRef.create(",N=",{computed:true,value:",P="})"+(u?"":".get()"),l=!1;else if("twineLink"===T)N='Macros.run("link-goto", [section,'+n(y.innerText)+","+n(y.passage)+"])",I=M=j;else if("macro"===T){var W=y.children[0],U="$"===W.text[0]||"_"===W.text[0];"macroName"===W.type||U||t("Compiler.compile","macro token had no macroName child token"),N="Macros.run"+(U?"Custom":"")+"("+(U?"VarRef.create("+("_"===W.text[0]?"section.stackTop.tempV":"State.v")+"ariables,"+n(W.text.trim().slice(1,-1))+").get()":'"'+y.name+'"')+", [section,"+e(y.children.slice(1),{isTypedVar:l})+"])",I=M=j}else if("grouping"===T)N="("+e(y.children,{isVarRef:u})+")",I=M=j;else if("error"===T)return"TwineError.create('syntax',"+n(y.message)+(y.explanation?", "+n(y.explanation):"")+")";return v>-1?(C=(C||e(S,{isVarRef:u,isTypedVar:l})).trim(),E=(E||e(x)).trim(),D&&!C&&(C=h),I===O&&!C||M===O&&!E?d&&M&&!E?"":"TwineError.create('operation','I need usable code to be "+(I===O?"left ":"")+(I===O&&M===O?"and ":"")+(M===O?"right ":"")+'of "'+y.text+"\"')":I===j&&C||M===j&&E?"TwineError.create('operation','There can't be code to the "+(I===j?"left ":"")+(I===j&&M===j?"or ":"")+(M===j?"right ":"")+'of "'+y.text+"\"')":_+C+N+E+P):1===r.length?(("value"in r[0]?r[0].value:r[0].text)+"").trim()||" ":r.reduce(function(t,n){return t+e(n,{isVarRef:u,isTypedVar:l})},"")}}),define("internaltypes/twineerror",["jquery","utils"],function(e,t){var n=t.impossible,r=t.escape;e(document.documentElement).on("click","tw-folddown",function(t){var n=t.target;for((n=e(n)).toggleClass("open");n&&!n.next().length;)n=n.parent();n&&n.next().toggle()});var a={syntax:"The markup seems to contain a mistake.",saving:"I tried to save or load the game, but I couldn't do it.",operation:"I tried to perform an operation on some data, but the data's type was incorrect.",macrocall:"I tried to use a macro, but its call wasn't written correctly.",datatype:"I tried to use a macro, but was given the wrong type of data to it.",custommacro:"I tried to use a custom macro, but its code hook had a mistake in it.",infinite:"I almost ended up doing the same thing over and over, forever.",property:"I tried to access a value in a string/array/datamap, but I couldn't find it.",unimplemented:"I currently don't have this particular feature. I'm sorry.",javascript:"This error message was reported by your browser's Javascript engine. I don't understand it either, but it usually means that an expression was badly written.",propagated:"Click the 'Open' button to see the code hook as it was executed.",user:"This is a custom error created by (error:). It usually means you used a custom macro incorrectly.",assertion:"This command exists to provide a helpful error if a certain important condition wasn't true."},i={error:[],warning:[]},o={create:function(e,t,r,i){return t&&"string"==typeof t||n("TwineError.create","has a bad message string"),r||e in a||n("TwineError.create","no error explanation given"),"user"!==e&&(t=t[0].toUpperCase()+t.slice(1)),Object.assign(Object.create(this),{type:e,message:t,explanation:r,source:void 0,innerDOM:i,appendTitleText:!1})},fromError:function(e){return o.create("javascript","\u2615 "+e.message)},containsError:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e||(t instanceof Error?t:o.isPrototypeOf(t)?t:!!Array.isArray(t)&&o.containsError.apply(o,_toConsumableArray(t)))},!1)},createWarning:function(e,t){return Object.assign(this.create(e,t),{warning:!0})},render:function(n){var o=this;n=n||this.source||"";var s=e("<tw-error class='"+("javascript"===this.type?"javascript ":"")+(this.warning?"warning":"error")+"' title='"+r(n)+"'>"+r(this.message+(this.appendTitleText?" "+n:""))+"</tw-error>"),c=e("<tw-error-explanation>").text(this.explanation||a[this.type]).hide(),u=e("<tw-folddown tabindex=0>");return this.innerDOM&&e("<tw-open-button>").on("click",function(){var n=e("<tw-backdrop><tw-dialog></tw-backdrop>");n.find("tw-dialog").prepend(o.innerDOM,e("<tw-link tabindex=0>OK</tw-link>").on("click",function(){o.innerDOM.detach(),n.remove()}).wrap("<tw-dialog-links>").parent()),t.storyElement.prepend(n)}).appendTo(s),s.append(u).append(c),s.data("TwineError",this),i.error.forEach(function(e){return e(o,n)}),s},on:function(e,t){if(e in i)return"function"!=typeof t||i[e].includes(t)||i[e].push(t),o;n("TwineError.on","invalid event name")}};return o}),define("renderer",["utils","markup","twinescript/compiler","internaltypes/twineerror"],function(e,t,n,r){var a=e.escape,i=e.impossible,o=e.insensitiveName,s=void 0;function c(e,t){return"<"+t+">"+e+"</"+t+">"}function u(e,t){var n=s.render(e.children);return n&&c(n,t)}var l,p,f="text-align: center; max-width:50%; ",d=RegExp(t.Patterns.macroFront+t.Patterns.macroName,"ig");return s={options:{debug:!1,blockerMacros:[],metadataMacros:[]},preprocess:function(e){var a=s.options.metadataMacros;if(!(e.match(d)||[]).some(function(e){return a.some(function(t){return o(e.slice(1,-1))===t})}))return{};var i=!1,c={};return t.lex(e).children.forEach(function e(t){if("macro"===t.type){if(a.some(function(e){return t.name===e})){if(r.isPrototypeOf(c[t.name]))return;if(i)return void(c[t.name]=r.create("syntax","The ("+t.name+":) macro can't appear after non-metadata macros."));if(c[t.name])return void(c[t.name]=r.create("syntax","There is more than one ("+t.name+":) macro."));c[t.name]={code:n(t),source:t.text}}else i=!0;t.children.forEach(function e(t){"macro"===t.type&&a.some(function(e){return t.name===e})?c[t.name]=r.create("syntax","The ("+t.name+":) macro can't be inside another macro."):t.children.forEach(e)})}else t.children.forEach(e)}),c},exec:(l=void 0,p=void 0,function(e){return"string"!=typeof e?(i("Renderer.exec","source was not a string, but "+(void 0===e?"undefined":_typeof(e))),""):e===l?p:(l=e,p=s.render(t.lex(e).children))}),render:function e(i){var l="",p=[];if(!i)return l;for(var d=i.length,h=0;h<d;h+=1){var y=i[h];switch(y.type){case"error":l+=r.create("syntax",y.message,y.explanation).render(a(y.text))[0].outerHTML;break;case"numbered":case"bulleted":var m="numbered"===y.type?"ol":"ul";l+="<"+m+">";for(var g=1;h<d&&i[h];){if("br"===i[h].type){if(l+="</li>",!i[h+1]||i[h+1].type!==y.type)break}else i[h].type===y.type?(l+=("<"+m+">").repeat(Math.max(0,i[h].depth-g)),l+=("</"+m+">").repeat(Math.max(0,g-i[h].depth)),l+="<li>",g=i[h].depth):l+=e([i[h]]);h+=1}l+=("</"+m+">").repeat(g+1);break;case"align":for(;y&&"align"===y.type;){var v=y.align,b=h+=1;if("left"===v){h-=1;break}for(;h<d&&i[h]&&"align"!==i[h].type;)h+=1;var w=e(i.slice(b,h)),T="";switch(v){case"center":T+=f+"margin-left: auto; margin-right: auto;";break;case"justify":case"right":T+="text-align: "+v+";";break;default:+v&&(T+=f+"margin-left: "+v+"%;")}l+="<tw-align "+(T?'style="'+T+'"':"")+">"+w+"</tw-align>\n",y=i[h]}break;case"column":for(var S=[];y&&"column"===y.type;){var x=y.column,k=h+=1;if("none"===x){h-=1;break}for(;h<d&&i[h]&&"column"!==i[h].type;)h+=1;S.push({text:y.text,type:x,body:e(i.slice(k,h)),width:y.width,marginLeft:y.marginLeft,marginRight:y.marginRight}),y=i[h]}S.length&&function(){var e=S.reduce(function(e,t){return e+t.width},0);l+="<tw-columns>"+S.map(function(t){return"<tw-column type="+t.type+'  style="width:'+t.width/e*100+"%; margin-left: "+t.marginLeft+"em; margin-right: "+t.marginRight+'em;">'+t.body+"</tw-column>\n"}).join("")+"</tw-columns>"}();break;case"heading":for(l+="<h"+y.depth+">";++h<d&&i[h];){if("br"===i[h].type){l+="</h"+y.depth+">";break}l+=e([i[h]])}break;case"br":if(!p.length||/td|th/.test(p[0])){l+="<br>";for(var O=i[h+1];O&&("br"===O.type||"tag"===O.type&&/^<br\b/i.test(O.text));)l+="<tw-consecutive-br"+("tag"===O.type?" data-raw":"")+"></tw-consecutive-br>",O=i[(h+=1)+1]}break;case"hr":l+="<hr>";break;case"escapedLine":case"comment":break;case"inlineUrl":l+='<a class="link" href="'+a(y.text)+'">'+y.text+"</a>";break;case"scriptStyleTag":case"tag":var j=y.text.toLowerCase();/^<\/?(?:table|thead|tbody|tr|tfoot|td|th)\b/.test(j)&&p[y.text.startsWith("</")?"shift":"unshift"](j),l+=y.text.startsWith("</")?y.text:y.text.replace(/>$/," data-raw>");break;case"sub":case"sup":case"strong":case"em":l+=u(y,y.type);break;case"strike":l+=u(y,"s");break;case"bold":l+=u(y,"b");break;case"italic":l+=u(y,"i");break;case"twineLink":var A=_slicedToArray(t.lex("(link-goto:"+JSON.stringify(y.innerText)+","+JSON.stringify(y.passage)+")").children,1)[0];l+='<tw-expression type="macro" name="link-goto"'+(s.options.debug?' title="'+a(y.text)+'"':"")+' js="'+a(n(A))+'"></tw-expression>';break;case"hook":l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+(s.options.debug&&y.name?' title="Hook: ?'+y.name+'"':"")+' source="'+a(y.innerText)+'"></tw-hook>';break;case"unclosedHook":return l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+'source="'+a(i.slice(h+1,d).map(function(e){return e.text}).join(""))+'"></tw-hook>';case"verbatim":l+=c(a(y.innerText).replace(/\n/g,"<br>"),"tw-verbatim");break;case"collapsed":l+=u(y,"tw-collapsed");break;case"unclosedCollapsed":return l+="<tw-collapsed>"+e(i.slice(h+1,d))+"</tw-collapsed>";case"variable":case"tempVariable":case"macro":var C=function(){var t=[],i=[];if("macro"===y.type&&function n(r){"string"!==r.type&&"hook"!==r.type&&r.children.every(n);var a=r.firstChild();if("macro"===r.type&&a&&"macroName"===a.type&&s.options.blockerMacros.includes(o(a.text.slice(0,-1))))t.push(r);else if("hook"===r.type){if(!r.everyLeaf(function(e){return"error"!==e.type||(i.push(e),!1)}))return!1;r.html=e(r.children)}return!0}(y),i.length)return{v:r.create("syntax","This code hook's markup contained "+i.length+" error"+(i.length?"s":"")+":<br>\u2014"+i.map(function(e){return e.message}).join("<br>\u2014")).render(a(y.text))[0].outerHTML};var c=t.length&&t.map(function(e){var t=n(e);return e.type="blockedValue",t});l+='<tw-expression type="'+y.type+'" name="'+a(y.name||y.text)+'"'+(s.options.debug?' title="'+a(y.text)+'"':"")+(t.length?' blockers="'+a(JSON.stringify(c))+'"':"")+' js="'+a(n(y))+'"></tw-expression>',t.forEach(function(e){return e.type="macro"})}();if("object"===(void 0===C?"undefined":_typeof(C)))return C.v;break;default:l+=y.children&&y.children.length?e(y.children):y.text}}return l}},Object.freeze(s)}),define("passages",["jquery","utils/naturalsort","utils","markup","renderer","internaltypes/twineerror"],function(e,t,n,r,a,i){var o=n.unescape,s=n.onStartup,c=Object.assign;function u(e){var t=o(e.html()),n=a.preprocess(t);return c(new Map([["source",t],["tags",(e.attr("tags")||"").split(/\s/)||[]],["name",e.attr("name")]]),{TwineScript_TypeName:"a passage datamap",TwineScript_ObjectName:"a passage datamap",metadata:n})}var l=c(new Map,{TwineScript_ObjectName:"the Passages datamap",getTagged:function(e){var n=t("en",function(e){return e.get("name")}),r=[];return this.forEach(function(t){var n=t instanceof Map&&t.get("tags");Array.isArray(n)&&n.includes(e)&&r.push(t)}),r.sort(n)},getStorylets:function(e,n){var r=n?n.filter(e,[].concat(_toConsumableArray(l.values()))):[].concat(_toConsumableArray(l.values()));if(i.containsError(r))return r;var a=[],o=-1/0,s=r.reduce(function(t,n){if(t)return t;var r=n.get("storylet");if(r){var s=e.speculate(r,n.get("name"),"a (storylet:) macro");if(i.containsError(s))return s.message="There's an error in the storylet passage \""+n.get("name")+'":\n'+s.message,s.source=r.TwineScript_ToSource(),s;if(s){var c=n.get("exclusivity");o=Math.max(o,"number"==typeof c?c:0),a.push(n)}}},void 0);if(s)return s;var c=t("en");return a.filter(function(e){var t=e.get("exclusivity");return(t="number"==typeof t?t:0)===o}).sort(function(e,t){var n=e.get("urgency"),r=t.get("urgency");return(n="number"==typeof n?n:0)!==(r="number"==typeof r?r:0)?r-n:c(e.get("name"),t.get("name"))})},allStorylets:function(){return[].concat(_toConsumableArray(l.values())).filter(function(e){return e.get("storylet")})},loadMetadata:function(e){var t=[];return l.forEach(function(n){n.metadata&&Object.keys(n.metadata).forEach(function(r){if(i.containsError(n.metadata[r]))t.push(n.metadata[r]);else{var a=n.metadata[r],o=a.code,s=a.source,c=e.speculate(o,n.get("name"),"a ("+r+":) macro"),u='In "'+n.get("name")+'":\n';if(i.containsError(c))return c.message=u+c.message,c.source=s,void t.push(c);c instanceof Map?c.forEach(function(e,t){return l(t,e)}):l(r,c)}function l(e,r){n.has(e)?t.push(i.create("syntax","This passage's datamap already has a '"+JSON.stringify(e)+"' data name.")):n.set(e,r)}}),n.metadata=void 0}),t},hasValid:function(e){var t=this.get(e);return t&&t instanceof Map&&t.has("source")},create:u});return s(function(){Array.from(e("tw-storydata > tw-passagedata")).forEach(function(t){t=e(t),l.set(t.attr("name"),new u(t))})}),l}),define("utils/operationutils",["utils/naturalsort","utils","internaltypes/twineerror","patterns"],function(e,t,n,r){var a=t.impossible,i=t.nth,o=t.insensitiveName,s=t.permutations,c=r.validPropertyName,u="object",l="boolean",p="string",f="number",d="function";function h(e){return!!e&&((void 0===e?"undefined":_typeof(e))===u||(void 0===e?"undefined":_typeof(e))===d)}function y(e){return e&&Object.getPrototypeOf(e)===Object.prototype}function m(e){return Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":(void 0===e?"undefined":_typeof(e))===p?p:e&&(void 0===e?"undefined":_typeof(e))===u?u:""}function g(e){if(!h(e))return e;if(_typeof(e.TwineScript_Clone)===d)return e.TwineScript_Clone();if(Array.isArray(e))return[].concat(_toConsumableArray(e));if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if((void 0===e?"undefined":_typeof(e))===d)return Object.assign(e.bind(),e);switch(Object.getPrototypeOf(e)){case Object.prototype:return Object.assign({},e);case null:return Object.assign(Object.create(null),e)}return a("OperationUtils.clone","The value "+e+" cannot be cloned!"),e}function v(e){return h(e)&&"TwineScript_ObjectName"in e?e.TwineScript_ObjectName:Array.isArray(e)?"an array":e instanceof Map?"a datamap":e instanceof Set?"a dataset":(void 0===e?"undefined":_typeof(e))===l?"the boolean value '"+e+"'":(void 0===e?"undefined":_typeof(e))===p||(void 0===e?"undefined":_typeof(e))===f?"the "+(void 0===e?"undefined":_typeof(e))+" "+JSON.stringify(e):void 0===e?"an empty variable":"...whatever this is"}function b(e,t){return(void 0===e?"undefined":_typeof(e))!==u&&(void 0===t?"undefined":_typeof(t))!==u?e===t:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(e,n){return b(t[n],e)}):e instanceof Map&&t instanceof Map?b(Array.from(e.entries()).sort(),Array.from(t.entries()).sort()):e instanceof Set&&t instanceof Set?b([].concat(_toConsumableArray(e)),[].concat(_toConsumableArray(t))):e&&_typeof(e.TwineScript_is)===d?e.TwineScript_is(t):e&&(void 0===e?"undefined":_typeof(e))===u&&t&&(void 0===t?"undefined":_typeof(t))===u&&y(e)&&y(t)?b(Object.getOwnPropertyNames(e).map(function(t){return[t,e[t]]}),Object.getOwnPropertyNames(t).map(function(e){return[e,t[e]]})):Object.is(e,t)}return Object.freeze({isObject:h,isPureObject:y,singleTypeCheck:function e(t,n){if(null===n)return void 0===t;var r=void 0===t?"undefined":_typeof(t);if((void 0===n?"undefined":_typeof(n))!==d&&n.pattern){if("optional"===n.pattern||"zero or more"===n.pattern)return void 0===t||e(t,n.innerType);if("either"===n.pattern)return n.innerType.some(function(n){return e(t,n)});if("lambda"===n.pattern&&e(t,n.innerType))return n.clauses.includes("where")==="where"in t&&n.clauses.includes("making")==="making"in t&&n.clauses.includes("via")==="via"in t&&n.clauses.includes("with")==="with"in t;if("insensitive set"===n.pattern)return n.innerType.includes(o(t));if("range"===n.pattern)return n.range(t);if("wrapped"===n.pattern)return e(t,n.innerType)}return(void 0===n||void 0!==t)&&("anything"===n.TwineScript_TypeName&&void 0!==t&&!t.TwineScript_Unstorable||"everything"===n.TwineScript_TypeName&&void 0!==t||(n===String?r===p:n===Boolean?r===l:n===parseInt?r===f&&!Number.isNaN(t)&&!(t+"").includes("."):n===Number?r===f&&!Number.isNaN(t):n===Array?Array.isArray(t):n===Map||n===Set?t instanceof n:Object.isPrototypeOf.call(n,t)))},isValidDatamapName:function(e,t){if(e instanceof Map||a("isValidDatamapName","called with non-Map"),n.containsError(t))return t;if((void 0===t?"undefined":_typeof(t))!==p&&(void 0===t?"undefined":_typeof(t))!==f)return n.create("property","Only strings and numbers can be used as data names for "+v(e)+", not "+v(t)+".");var r=(void 0===t?"undefined":_typeof(t))===p?+t:""+t;return!(!Number.isNaN(r)&&e.has(r))||n.create("property","You mustn't use both "+v(t)+" and "+v(r)+" as data names in the same datamap.")},collectionType:m,isSequential:function(e){return(void 0===e?"undefined":_typeof(e))===p||Array.isArray(e)||_typeof(e.hooks)===d},unstorableValue:function e(t){return t&&t.TwineScript_Unstorable&&t||Array.isArray(t)&&t.find(e)||t instanceof Map&&[].concat(_toConsumableArray(t.values())).find(e)||t instanceof Set&&[].concat(_toConsumableArray(t)).find(e)},clone:g,objectName:v,typeName:function e(t){var n=y(t);if(n&&t.innerType)return t.typeName?t.typeName:"insensitive set"===t.pattern?"a case-insensitive string name":"either"===t.pattern?(Array.isArray(t.innerType)||a("typeName",'"either" pattern had non-array inner type'),t.innerType.map(e).join(" or ")):"optional"===t.pattern?"(optional) "+e(t.innerType):e(t.innerType);if(n&&t.pattern&&"range"===t.pattern){if(t.name)return t.name;var r=t.min,i=t.max;return"a"+(r>0?" positive":"")+(t.integer?" whole":"")+" number"+(0===r?" between 0 and "+i:i<1/0?" up to "+i:"")}return t===String||t===Number||t===Boolean?"a "+_typeof(t()):t===parseInt?"a whole number":t===Map?"a datamap":t===Set?"a dataset":t===Array?"an array":h(t)&&"TwineScript_TypeName"in t?t.TwineScript_TypeName:v(t)},typeID:function(e){var t=void 0===e?"undefined":_typeof(e);return[l,p,f].includes(t)?t:Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":e.TwineScript_TypeID||""},toSource:function t(r,o){var s=n.containsError(r);return s&&a("toSource","received a TwineError: "+s.message),_typeof(r.TwineScript_ToSource)===d?r.TwineScript_ToSource():y(r)&&"first"in r&&"last"in r?(r.first<0?(-1!==r.first?i(-r.first):"")+"last":i(r.first+1))+"to"+(r.last<0?(-1!==r.last?i(-r.last):"")+"last":i(r.last+1)):Array.isArray(r)?"(a:"+("property"===o?r.map(function(e){return e+(e>0)}):r).map(t)+")":r instanceof Map?"(dm:"+Array.from(r.entries()).sort(function(t,n){return[t[0],n[0]].sort(e("en"))[0]===t[0]?-1:1}).map(function(e){return e.map(t)})+")":r instanceof Set?"(ds:"+Array.from(r).sort(e("en")).map(t)+")":(void 0===r?"undefined":_typeof(r))===f&&"property"===o?r<0?-1===r?"last":i(-r)+"last":i(r+1):(void 0===r?"undefined":_typeof(r))===p&&"property"===o?RegExp(c).test(r)?r:"("+JSON.stringify(r)+")":JSON.stringify(r)},is:b,contains:function(e,t){if(e||""===e){if((void 0===e?"undefined":_typeof(e))===p)return(void 0===t?"undefined":_typeof(t))!==p?n.create("operation",v(e)+" can only contain strings, not "+v(t)+"."):e.includes(t);if(Array.isArray(e))return e.some(function(e){return b(e,t)});if(e instanceof Set||e instanceof Map)return Array.from(e.keys()).some(function(e){return b(e,t)})}return n.create("operation",v(e)+" cannot contain any values, let alone "+v(t))},isA:function(e,t){return _typeof(t.TwineScript_IsTypeOf)===d?t.TwineScript_IsTypeOf(e):n.create("operation",'"is a" should only be used to compare type names, not '+v(t)+".")},matches:function e(t,r){var a=!1;if(t&&_typeof(t.TwineScript_IsTypeOf)===d){var i=t.TwineScript_IsTypeOf(r);if(n.containsError(i))return i;a|=i}if(r&&_typeof(r.TwineScript_IsTypeOf)===d){var o=r.TwineScript_IsTypeOf(t);if(n.containsError(o))return o;a|=o}if(a)return!0;if(Array.isArray(t)&&Array.isArray(r)){for(var c=0,u=0,l=!0;l&&c<t.length&&u<r.length;){var p=t[c],f=r[u];if(p.rest){for(;u<r.length&&e(p,f);)f=r[u+=1];c+=1}else if(f.rest){for(;c<t.length&&e(p,f);)p=t[c+=1];u+=1}else e(p,f)?(c+=1,u+=1):l=!1}return l&&c>=t.length&&u>=r.length}return t instanceof Map&&r instanceof Map?e(Array.from(t.entries()).sort(),Array.from(r.entries()).sort()):t instanceof Set&&r instanceof Set?(t=[].concat(_toConsumableArray(t)),s.apply(void 0,_toConsumableArray(r)).some(function(n){return e(t,n)})):b(t,r)},subset:function e(t,r,a){if(!r||!a)return n.create("macrocall","The sub"+m(t)+" index value must not be "+(r&&a)+".");var i=(void 0===t?"undefined":_typeof(t))===p;if(i&&(t=Array.from(t)),r<0&&(r=Math.max(0,t.length+r+1)),a<0&&(a=Math.max(0,t.length+a+1)),r>a)return e(arguments[0],a,r);var o=t.slice(r>0?r-1:r,a).map(g);return i?o.join(""):o},range:function e(t,n){if(t>n)return e(n,t);var r=[t];for(n-=t;n-- >0;)r.push(++t);return r},printBuiltinValue:function e(t){return n.containsError(t)?t:t&&_typeof(t.TwineScript_Print)===d?t.TwineScript_Print():t instanceof Map?(t=Array.from(t.entries()),n.containsError(t)?t:t.reduce(function(t,n){var r=_slicedToArray(n,2),a=r[0],i=r[1];return t+"<tr><td>`"+e(a)+"`</td><td>`"+e(i)+"`</td></tr>"},"<table class=datamap>")+"</table>"):t instanceof Set?Array.from(t.values()).map(e)+"":Array.isArray(t)?t.map(e)+"":t&&_typeof(t.jquery)===p?t:h(t)?n.create("unimplemented","I don't know how to print this value yet."):t+""},unique:function(e,t,n){return!n.slice(t+1).some(function(t){return b(e,t)})}})}),define("utils/renderutils",["jquery","utils","renderer"],function(e,t,n){var r=RegExp(t.realWhitespace+"+"),a=RegExp(t.realWhitespace+"+","g");function i(e,t,n){var r=e.textContent.length;if(!(t>=r)){var a=void 0,i=[a=0===t?e:e.splitText(t)];return n&&(n<=0&&(n=r-n),n<r&&i.push(a.splitText(n-t))),i}}var o,s=(o=void 0,function(){if(void 0!==o)return o;var t=e("<p>");return t[0].normalize?(t.append(document.createTextNode("0-"),document.createTextNode("2"),document.createTextNode(""))[0].normalize(),o=1===t.contents().length):o=!1});var c="tw-collapsed,[collapsing=true]";var u=/^(=*)([^=]+)=*$/;return Object.freeze({dialog:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.section,i=r.parent,o=void 0===i?t.storyElement:i,s=r.cd,c=r.message,u=void 0===c?"":c,l=r.defaultValue,p=r.buttons,f=void 0===p?[{name:"OK",confirm:!0,callback:Object}]:p,d=e("<tw-backdrop><tw-dialog>"+(l||""===l?"<input type=text style='display:block;margin:0 auto'></input>\n":"")+"<tw-dialog-links>"+(f.length?f.reduce(function(e,t,n){var r=t.name;return e+"<tw-link style='margin:0 "+(n===f.length-1?"0 0 0.5em":0===n?"0.5em 0 0":"0.5em")+"' tabindex=0>"+r+"</tw-link>"},""):"<tw-link tabindex=0>"+f[0].name+"</tw-link>")+"</tw-dialog-links></tw-dialog></tw-backdrop>"),h=d.find("tw-dialog");if(o.append(d),a){a.renderInto(u,h,Object.assign({},s,{append:"prepend"}));var y=s&&s.transition&&d.find("tw-dialog > tw-transition-container");y&&y.length&&y.appendTo(d).append(h.prepend(y.contents().detach()))}else h.prepend(n.exec(u));if(l){var m=d.find("input").last();m.val(l).on("keypress",function(e){13===e.which&&(d.remove(),f.filter(function(e){return e.confirm}).forEach(function(e){return e.callback()}))}),setTimeout(function(){return m.focus()},100)}return f.reverse().forEach(function(t,n){e(d.find("tw-link").get(-n-1)).on("click",function(){d.remove(),t.callback()})}),d},realWhitespace:r,textNodeToChars:function(e){var t=[].concat(_toConsumableArray(e.textContent));return 1===t.length?[e]:t.reduce(function(e,t){return t.match(r)&&e.length&&e[e.length-1].match(r)?e[e.length-1]+=t:e.push(t),e},[]).reduce(function(t,n){var r=e;return n.length<e.textContent.length&&(e=e.splitText(n.length)),t.concat(r)},[])},findTextInNodes:function e(t,n){var r=[],a="",o=[];if(!t.length||!n)return o;for(;t.length>0;){r.push(t[0]),a+=t[0].textContent,t.shift();var s=a.indexOf(n);if(s>-1){for(var c,u=a.length-(s+n.length);s>=r[0].textContent.length;)s-=r[0].textContent.length,r.shift();if(1===r.length){var l=i(r[0],s,s+n.length);o.push(l[0]),l[1]&&t.unshift(l[1]);break}o.push(i(r[0],s,r[0].length)[0]),(c=o).push.apply(c,_toConsumableArray(r.slice(1,-1)));var p=i(r[r.length-1],0,r[r.length-1].textContent.length-u);o.push(p[0]),p[1]&&t.unshift(p[1]),o=o.filter(Boolean);break}}return[o].concat(_toConsumableArray(e(t,n)))},collapse:function(t){function n(t){return 0===e(this||t).parentsUntil(c).filter("tw-verbatim, tw-expression, [collapsing=false]").length}var r=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var a=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 4&t&&!(8&t)});return(a=a[a.length-1])||e(r)}(t);e(r).parents(c).length||(r=null);var i=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var a=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 2&t&&!(8&t)})[0];return a||e(r)}(t);e(i).parents(c).length||(i=null);var o="br:not([data-raw]),tw-consecutive-br:not([data-raw])";t.find(o).filter(n).replaceWith(document.createTextNode(" "));var u=(t=e(t.get().map(function(t){return e(t).filter(n).is(o)?e(document.createTextNode(" ")).replaceAll(t)[0]:t}))).textNodes(),l=0;u.reduce(function(e,t){return n(t)?(t.textContent=t.textContent.replace(a," ")," "!==t.textContent[0]||e&&e.textContent&&!(e.textContent.search(/\s$/)>-1)||(t.textContent=t.textContent.slice(1)),t):document.createTextNode("A")},r),[].concat(_toConsumableArray(u)).reverse().every(function(e){return!!n(e)&&(e.textContent.match(/^\s*$/)?(l+=e.textContent.length,e.textContent="",!0):(e.textContent=e.textContent.replace(/\s+$/,function(e){return l+=e.length,""}),!1))}),l>0&&i&&(u[u.length-1].textContent+=" "),t[0]&&s()&&t[0].normalize()},geomStringRegExp:u,geomParse:function(e){var t=e.length,n=u.exec(e)||[],r=_slicedToArray(n,3),a=r[0],i=r[1],o=r[2];return a?{marginLeft:i.length/t*100,size:o.length/t*100}:{marginLeft:0,size:0}}})}),define("datatypes/hookset",["jquery","utils","utils/renderutils","utils/operationutils"],function(e,t,n,r){var a=n.textNodeToChars,i=n.realWhitespace,o=n.findTextInNodes,s=r.toSource;function c(n){var r=n.dom,s=e();this.next&&(s=s.add(c.call(this.next,n)));var u=function(t,n){if(Array.isArray(n))return n.reduce(function(e,n){return e.add(t.get(n))},e());if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&"first"in n&&"last"in n){var r=n.first,o=n.last,s=t.length;r<0&&(r+=s),o<0&&(o+=s);for(var c=[t.get(r)];r!==o;)r+=Math.sign(o-r),c.push(t.get(r));return e(c)}if("string"==typeof n){if("chars"===n){var u=[],l=!0,p=!1,f=void 0;try{for(var d,h=t.textNodes(":not(tw-error, tw-error *)")[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=!0,g=!1,v=void 0;try{for(var b,w=a(y)[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var T=b.value;T.textContent.match(i)||u.push(T)}}catch(e){g=!0,v=e}finally{try{!m&&w.return&&w.return()}finally{if(g)throw v}}}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return e(u)}if("links"===n)return t.findAndFilter("tw-link, .enchantment-link");if("visited"===n)return t.findAndFilter("tw-link.visited");if("lines"===n){var S=t.findAndFilter("br:not(tw-sidebar *),tw-consecutive-br:not(tw-sidebar *)").get(),x=[[]];return t.textNodes(":not(tw-error, tw-error *):not(tw-sidebar, tw-sidebar *)").forEach(function(e){S.length&&2&e.compareDocumentPosition(S[0])&&(S.shift(),x.push([])),x[x.length-1]=x[x.length-1].concat(e)}),x=x.map(function(t){return t.map(function(n){for(var r=n.parentNode;e(r).textNodes().every(function(e){return t.includes(e)})&&!t.every(function(t){return e(r).has(t).length});){r=(n=r).parentNode}return n})}),e(x.map(function(t){return e(t).wrapAll("<tw-pseudo-hook>").parent()[0]}))}}return e(t.get(n))};if(this.selector){var l=void 0;if("string"===this.selector.type)l=function(t,n){var r=o(n.textNodes(),t),a=e();return r.forEach(function(t){a=a.add(e(t).wrapAll("<tw-pseudo-hook>").parent())}),a}(this.selector.data,r);else{if("base"===this.selector.type)return s.add(u(c.call(this.selector.data,n),this.property));var p=function(e){var n='tw-hook[name="'+(e=t.insensitiveName(e).replace(/"/g,"&quot;"))+'"],tw-enchantment[name="'+e+'"]';return n+={page:", tw-story",passage:", tw-passage",sidebar:", tw-sidebar",link:", tw-link, .enchantment-link"}[e]||""}(this.selector.data);l=r.findAndFilter(p).add(r.parentsUntil(t.storyElement.parent())).filter(p)}s=this.property?s.add(u(l,this.property)):s.add(l)}return s}function u(e){if(!e)return[];var n=e.selector,r=e.property,a=e.next;return[JSON.stringify(["base"===n.type?u(n.data):t.insensitiveName(n.data),r])].concat(_toConsumableArray(u(a))).sort()}var l=Object.freeze({forEach:function(t,n){var r=c.call(this,t).each(function(t){n(e(this),t)});return t.dom.findAndFilter("tw-pseudo-hook").contents().unwrap(),r},hooks:function(e){return c.call(this,e)},get TwineScript_ObjectName(){return this.property||this.next?"a complex hook name":"?"+this.selector.data+" (a hook name)"},TwineScript_TypeID:"hookName",TwineScript_TypeName:"a hook name (like ?this)",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){var e="",n=this.selector,r=n.type,a=n.data;return"name"===r?a.match(RegExp("^"+t.anyRealLetter+"+$"))?e+="?"+a:e+="(hooks-named:"+JSON.stringify(a)+")":"string"===r?e+=JSON.stringify(a):"base"===r&&(e+=a.TwineScript_ToSource()+"'s "+s(this.property,"property")),this.next&&(e+=" + "+this.next.TwineScript_ToSource()),e},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){return u(this)+""==u(e)+""},TwineScript_GetProperty:function(e){return l.create({type:"base",data:this},e,void 0)},TwineScript_Properties:["chars","links","lines","visited"],TwineScript_Clone:function(){return l.create(this.selector,this.property,this.next)},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object.assign(Object.create(this||l),{selector:Object.freeze(e),property:t,next:n})},from:function(e){return l.isPrototypeOf(e)||"string"==typeof e||t.impossible("HookSet.from() was given a non-HookSet non-string."),l.isPrototypeOf(e)?e:l.create({type:"string",data:e})}});return l}),define("internaltypes/changedescriptor",["jquery","utils","renderer","datatypes/hookset"],function(e,t,n,r){var a=t.assertOnlyHas,i=t.impossible,o=t.transitionIn,s=n.exec,c=Object.assign,u=Object.keys,l=Object.create,p=Object.seal,f=function(e){return e.split(/\n/g).reduce(function(e,t,n,r){var a=r.length;return e.concat(document.createTextNode(t),n!==a-1&&document.createElement(t.length?"br":"tw-consecutive-br"))},[])},d=void 0,h={source:"",appendSource:null,enabled:!0,enablers:null,verbatim:!1,target:null,append:"",newTargets:null,transition:"",transitionTime:null,transitionDeferred:!1,transitionDelay:0,transitionSkip:0,transitionOrigin:null,loopVars:null,styles:null,attr:null,data:null,innerEnchantments:null,section:null,timestamp:0,summary:function(){var e=this;return["source","appendSource","enabled","verbatim","target","append","newTargets","transition","transitionTime","transitionDeferred","transitionDelay","transitionSkip","transitionOrigin","innerEnchantments","enablers"].filter(function(t){return e.hasOwnProperty(t)}).concat([this.attr.length&&"attr",this.styles.length&&"styles",u(this.loopVars).length&&"loopVars",u(this.data).length&&"data"].filter(Boolean))},create:function(e,t){var n=c(l(this),{attr:[].concat(this.attr||[]),styles:[].concat(this.styles||[]),loopVars:this.loopVars||{},data:this.data||{}},e);return t&&t.run(n),n},update:function(){var e=this,t=this.section,n=this.newTargets,a=this.transition,i=this.transitionDeferred,s=this.append,c=this.target;"function"==typeof c&&(c=c());var l=function(t){if(Array.isArray(e.styles)&&e.styles.length>0){var n=e.styles.reduce(function(e,t){return u(t).forEach(function(n){var r=t[n];e[+("function"==typeof r)].push(_defineProperty({},n,r))}),e},[[],[]]),r=_slicedToArray(n,2),a=r[0],i=r[1];a.forEach(function(e){return t.css(e)}),setTimeout(function(){i.forEach(function(e){return t.css(e)})})}e.attr&&e.attr.forEach(function(e){return t.attr(e)}),e.data&&t.data(e.data)};if(Array.isArray(n)&&n.length&&(c=n.map(function(e){return e.target})),[].concat(c).forEach(function(e){r.isPrototypeOf(e)?e.forEach(t,l):l(e)}),a&&!i&&!s){var p=c,f=void 0;do{!(f=p.data("timestamp"))&&(p=p.parent())}while(!f&&p.length);o(c,a,this.transitionTime,this.transitionDelay,this.transitionSkip,f?Date.now()-f:0,this.transitionOrigin)}},render:function(){var t=this,n=this.source,u=this.transition,l=this.transitionTime,p=this.transitionDeferred,y=this.enabled,m=this.enablers,g=this.data,v=this.section,b=this.newTargets,w=this.innerEnchantments,T=this.appendSource,S=this.target,x=this.target,k=this.append;if("function"==typeof S&&(S=S()),a(this,d),!k)return i("ChangeDescriptor.render","This doesn't have an 'append' method chosen."),e();if(m&&m.length){var O=m[0],j=O.descriptor,A=O.changer,C=j.render();if(A){var E=h.create({section:v,target:C});A.run(E),E.update()}return C}if(!y||void 0!==S.attr("hidden"))return h.create({target:S,attr:this.attr.filter(function(e){return!("style"in e)}),data:c({},g,{originalSource:n,hidden:!0})}).update(),e();if(Array.isArray(b)&&b.length&&(S=b),!S)return i("ChangeDescriptor.render","ChangeDescriptor has source but not a target!"),e();var _=e();if([].concat(S).filter(function(e){return!e.jquery}).map(function(e){var t=k,n=void 0;if(e.target&&e.append){var r=e;t=r.append,n=r.before,e=e.target}return{elements:e.hooks(v,x).filter(function(){return!(n&&1&this.compareDocumentPosition(document)&&2&this.compareDocumentPosition(x[0]))}),append:t}},[]).forEach(function(n){var r=n.elements,a=n.append;r.each(function(n,r){r=e(r),_=_.add(t.create({target:r,append:a,newTargets:null}).render()),r.filter("tw-pseudo-hook").contents().unwrap()})}),_.length||Array.isArray(S)||r.isPrototypeOf(S))return _;if(!(k in S)){if("replace"!==k)return i("ChangeDescriptor.render","The target doesn't have a '"+k+"' method."),e();S[0]instanceof Text?k="replaceWith":(S.empty(),k="append")}return S[0]instanceof Text&&("append"===k&&(k="after"),"prepend"===k&&(k="before")),_=e(n&&(this.verbatim?f(n):e.parseHTML(s(n),document,!0))),Array.isArray(T)&&T.forEach(function(n){var r=n.source,a=n.append,i=e(t.verbatim?f(r):e.parseHTML(s(r),document,!0));_="append"===a?_.add(i):"prepend"===a?i.add(_):i}),S[k](_.length?_:void 0),S.data("timestamp",Date.now()),this.update(),u&&!p&&o("replace"===k?S:_,u,l,this.transitionDelay,this.transitionSkip,this.expedite,this.transitionOrigin),w&&w.map(function(e){return e(S)}).forEach(function(e){return v.addEnchantment(e)}),_}};return d=u(h),p(h)}),define("datatypes/changercommand",["utils","utils/operationutils","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r){var a=e.impossible,i=t.is,o=t.toSource,s={},c={TwineScript_TypeID:"changer",TwineScript_TypeName:"a changer",TwineScript_Print:function(){return"`[A ("+this.macroName+":) changer]`"},TwineScript_ToSource:function(){return"("+this.macroName+":"+("else"===this.name?"":this.params.map(o))+")"+(this.next?"+"+this.next.TwineScript_ToSource():"")},summary:function(){var e=n.create();return this.run(e),e.summary()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(t)||a("ChangerCommand.create","params was not an array but "+t),Object.assign(Object.create(this),{macroName:e,params:t,next:n,TwineScript_ObjectName:"a ("+e+":) changer"})},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){if(c.isPrototypeOf(e))return this.macroName===e.macroName&&i(this.params,e.params)&&i(this.next,e.next)},TwineScript_Clone:function(){for(var e=this.create(this.macroName,this.params,this.next),t=e;t.next;)t=t.next=t.next.TwineScript_Clone();return e},run:function(e){var t=s[this.macroName].apply(s,[e].concat(_toConsumableArray(this.params)));if(r.containsError(t))return t;this.next&&this.next.run(e)},register:function(e,t){s[e]=t}};return Object.freeze(c)}),define("state",["utils","passages","datatypes/changercommand","internaltypes/twineerror","utils/operationutils","markup","twinescript/compiler"],function(e,t,n,r,a,i,o){var s=e.impossible,c=a.objectName,u=a.toSource,l=i.lex,p=Object.assign,f=Object.create,d=["localStorage","sessionStorage"].map(function(e){try{return!!window[e]&&(window[e].setItem("test","1"),window[e].removeItem("test"),!0)}catch(e){return!1}}),h=p(f(null),{TwineScript_ObjectName:"this story's variables",TwineScript_TypeDefs:f(null),TwineScript_VariableStore:!0,TwineScript_MockVisits:null}),y={passage:"",variables:h,create:function(e,t){var n=f(y);return n.passage=e||"",n.variables=p(f(this.variables),t),n}},m=[],g=-1,v=y.create(),b=void 0,w={forward:[],back:[],load:[]},T=void 0;function S(e){v=(m[g]||y).create(e),function(){if(T.hasSessionStorage){var e=T.serialise();if("string"==typeof e)try{sessionStorage.setItem("Saved Session",e)}catch(e){return}}}()}return T=p({get passage(){return v.passage},get variables(){return v.variables},get pastLength(){return g},get futureLength(){return m.length-1-g},get mockVisits(){return v.variables.TwineScript_MockVisits||[]},set mockVisits(e){v.variables.TwineScript_MockVisits=e},passageNameVisited:function(e){var n=0;if(!t.get(e))return 0;for(var r=0;r<=g;r++)n+=+(e===m[r].passage);return n},passageNameLastVisited:function(e){if(!t.get(e))return 1/0;if(e===v.passage)return 0;for(var n=g;n>0;n--)if(m[n].passage===e)return g-n+1;return 1/0},pastPassageNames:function(){for(var e=[],t=g-1;t>=0;t--)e.unshift(m[t].passage);return e},timelinePassageNames:function(){return m.map(function(e){return e.passage})},play:function(e){v||s("State.play","present is undefined!"),v.passage=e,m=m.slice(0,g+1).concat(v),g+=1,S(e),w.forward.forEach(function(t){return t(e)})},rewind:function(e){var t=1,n=!1;if(e)if("string"==typeof e){if((t=this.passageNameLastVisited(e))===1/0)return}else"number"==typeof e&&(t=e);for(;t>0&&g>0;t--)n=!0,g-=1;return n&&(S(m[g].passage),w.back.forEach(function(e){return e()})),n},fastForward:function(e){var t=1,n=!1;for("number"==typeof e&&(t=e);t>0&&m.length>0;t--)n=!0,g+=1;return n&&(S(m[g].passage),w.forward.forEach(function(e){return e(m[g].passage,"fastForward")})),n},on:function(e,t){if(e in w)return"function"!=typeof t||w[e].includes(t)||w[e].push(t),T;s("State.on","invalid event name")},reset:function(){m=[],g=-1,v=y.create(),b=void 0,w.load.forEach(function(e){return e(m)})},hasStorage:d[0],hasSessionStorage:d[1]},function(){function e(e,t){Object.keys(t).forEach(function(n){return!n.startsWith("TwineScript_")&&(t[n]=e.eval(o(l(t[n],0,"macro"))))})}return{serialise:function(){var e=m.slice(0,g+1),t=e.map(function(e){return Object.keys(e.variables).filter(function(t){return e.variables[t]&&(n=e.variables[t],a=void 0===n?"undefined":_typeof(n),!(!r.containsError(n)&&("function"==typeof n.TwineScript_ToSource||Array.isArray(n)||n instanceof Map||n instanceof Set||"string"===a||"number"===a||"boolean"===a||Object.isPrototypeOf.call(h.TwineScript_TypeDefs,n))));var n,a}).map(function(t){return[t,e.variables[t]]})});if(b||(b=t.reduce(function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1];return e||a&&[a,i,n+1]},void 0)),b){var n=_slicedToArray(b,3),a=n[0],i=n[1],o=n[2];return r.create("saving","The variable $"+a+" holds "+c(i)+" (which is, or contains, a complex data value) on turn "+o+"; the game can no longer be saved.")}try{return JSON.stringify(e,function(e,t){return this.TwineScript_VariableStore?"TwineScript_TypeDefs"===e?Object.keys(t).reduce(function(e,n){return e[n]=u(t[n]),e},{}):u(t):t})}catch(e){return!1}},deserialise:function(n,r){var a,i=void 0,o=h,s="The save data is unintelligible.";try{i=JSON.parse(r)}catch(e){return Error(s)}return Array.isArray(i)?(a=(i=i.map(function(r){if("object"!==(void 0===r?"undefined":_typeof(r))||!r.hasOwnProperty("passage")||!r.hasOwnProperty("variables"))return Error(s);if(!t.hasValid(r.passage))return Error("The data refers to a passage named '"+r.passage+"', but it isn't in this story.");if(r.variables=p(f(o),r.variables),Object.hasOwnProperty.call(r.variables,"TwineScript_TypeDefs")){var a=r.variables.TwineScript_TypeDefs=p(f(o.TwineScript_TypeDefs),r.variables.TwineScript_TypeDefs);try{e(n,a)}catch(e){return Error(s)}}try{e(n,r.variables)}catch(e){return Error(s)}return o=r.variables,p(f(y),r)})).find(function(e){return e instanceof Error}))?a:(m=i,w.load.forEach(function(e){return e(m)}),g=m.length-1,S(m[g].passage),!0):Error(s)}}}()),Object.seal(y),Object.freeze(T)}),define("internaltypes/varref",["state","internaltypes/twineerror","utils","utils/operationutils","datatypes/hookset"],function(e,t,n,r,a){var i=n.impossible,o=n.andList,s=n.nth,c=r.is,u=r.isObject,l=r.toSource,p=r.isSequential,f=r.objectName,d=r.typeName,h=r.clone,y=r.isValidDatamapName,m=r.subset,g=r.collectionType,v=r.unstorableValue,b=r.matches,w=void 0,T=0,S={set:[],delete:[]};function x(e,n){var r=void 0;if(e instanceof Map&&(r=t.containsError(y(e,n))))return r;if(p(e)){var i=void 0,s="You can only access position strings/numbers ('4th', 'last', '2ndlast', (2), etc.) or slices ('1stTo2ndlast', '3rdTo5th'), ",c="You can't access the '0th' or '0thlast' position of "+f(e)+".";if("number"==typeof n){if(0===n)return t.create("property","You can't access elements at position 0 of "+f(e)+".","Only positive and negative position values exist.");n>0&&(n-=1)}else if("string"==typeof n&&(i=/^(\d+)(?:st|[nr]d|th)last$/i.exec(n))){if("0"===i[1])return t.create("property",c);n=-i[1]}else if("string"==typeof n&&(i=/^(\d+)(?:st|[nr]d|th)$/i.exec(n))){if("0"===i[1])return t.create("property",c);n=i[1]-1}else if("string"==typeof n&&(i=/^(?:(\d+)(?:st|[nr]d|th)(last)?|last)to(?:(\d+)(?:st|[nr]d|th)(last)?|last)$/i.exec(n))){var u=_slicedToArray(i,5),l=u[1],d=void 0===l?0:l,h=u[2],m=u[3],g=void 0===m?0:m;n={last:g=u[4]?-g:g-1,first:d=h?-d:d-1}}else if("last"===n)n=-1;else if("random"===n){if(!e.length)return t.create("property","I can't get a random value from "+f(e)+", because it's empty");n=Math.random()*Array.from(e).length|0}else{if(a.isPrototypeOf(e)&&!a.TwineScript_Properties.includes(n))return t.create("property",s+o(a.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if(!["length","any","all","start","end","random"].includes(n)&&!a.isPrototypeOf(e))return t.create("property",s+"'length', 'any', 'all', 'start', 'end', and 'random' of "+f(e)+", not "+f(n)+".")}}else if(e instanceof Set){if(!["length","any","all"].includes(n))return t.create("property","You can only get the 'length', 'any' and 'all' of "+f(e)+".","To check contained values, use the 'contains' operator.");"length"===n&&(n="size")}else{if(Array.isArray(e.TwineScript_Properties)&&!e.TwineScript_Properties.includes(n))return t.create("property","You can only get the "+o(e.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if("number"==typeof e||"boolean"==typeof e)return t.create("property","You can't get data values from "+f(e)+".")}return n}function k(e,t){return t-0<0&&Math.abs(t)<=e.length?e.length+(t-0):t}function O(e,t){if(void 0===e)return e;if(e instanceof Map||w.isPrototypeOf(e))return e.get(t);if(("any"===t||"all"===t||"start"===t||"end"===t)&&!e.TwineScript_VariableStoreName)return function(e,t){var n="'"+t+"' value"+("any"===t?"":"s")+" of ";return{determiner:t,array:[].concat(_toConsumableArray(e)),string:"string"==typeof e&&e,TwineScript_ObjectName:n+f(e),TwineScript_TypeName:n+"a data structure",TwineScript_Unstorable:!0,TwineScript_Print:function(){return"`["+this.TwineScript_TypeName+"]`"}}}(e,t);if("string"==typeof e&&(e=[].concat(_toConsumableArray(e))),p(e)&&Number.isFinite(t)&&(t=k(e,t)),e.TwineScript_GetProperty)return e.TwineScript_GetProperty(t);var n=e[t];return"function"!=typeof n?n:void 0}function j(e){if(e.computed){var t=e.value;return w.isPrototypeOf(t)&&(t=t.get()),"string"==typeof t?"('"+t+"')":"("+t+")"}return"number"==typeof e?s(e):"'"+e+"'"}function A(n,r,i){if(n.TwineScript_VariableStore){if(n.TwineScript_TypeDefs&&r in n.TwineScript_TypeDefs){var o=n.TwineScript_TypeDefs[r];if("const"===o.name){if(void 0!==n[r])return t.create("operation","I can't alter "+(n===e.variables?"$":"_")+r+" because it's been restricted to a constant value.","This variable can't be changed for the rest of the story.")}else if(!b(o,i))return t.create("operation","I can't set "+(n===e.variables?"$":"_")+r+" to "+d(i)+" because it's been restricted to "+l(o)+"-type data.","You can restrict a variable or data name by giving a typed variable to (set:) or (put:).")}return!0}return Array.isArray(r)?r.map(function(e){return A(n,e)}):n instanceof Map?"string"==typeof r||t.create("operation",f(n)+" can only have string data names, not "+f(r)+"."):p(n)?["length","random","any","all","start","end"].includes(r)?t.create("operation","I can't forcibly alter the '"+r+"' of "+f(n)+".","start"===r||"end"===r?"Alter the values at actual positions, like 1st or 2ndlast, rather than just the '"+r+"'.":void 0):+r==(0|r)||t.create("property",f(n)+" can only have position keys ('3rd', '1st', (5), etc.), not "+j(r)+"."):n.TwineScript_Identifiers&&r in n?t.create("keyword","I can't alter the value of the '"+r+"' identifier.","You can only alter data in variables and hooks, not fixed identifiers."):t.create("operation","I can't modify "+f(n),n instanceof Set?"You should use an (array:) if you need to modify the data inside this dataset.":a.isPrototypeOf(n)?"You should alter hooks indirectly using macros like (replace:) or (enchant:).":void 0)}function C(e,t,n){var r=t;e instanceof Map?e.set(t,n):(p(e)&&(t=k(e,t)),e.TwineScript_Set?e.TwineScript_Set(t):e[t]=n),S.set.forEach(function(t){return t(e,r,n)})}function E(e,t){var n=t;p(e)&&(t=k(e,t)),Array.isArray(e)&&/^(?:[1-9]\d*|0)$/.exec(t)?e.splice(t,1):e instanceof Map||e instanceof Set?e.delete(t):delete e[t],S.delete.forEach(function(t){return t(e,n)})}function _(e){return Object.assign(Object.create(w),{error:e})}function N(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(r&&"object"===(void 0===r?"undefined":_typeof(r))&&"last"in r&&"first"in r){if(a.isPrototypeOf(n))return n.TwineScript_GetProperty(r);var s=r.first,c=r.last;return m(n,s+(s>=0),c+(c>=0))}if(Array.isArray(r))return a.isPrototypeOf(n)?n.TwineScript_GetProperty(r):r.map(function(e){return N(n,e,e)})["string"==typeof n?"join":"valueOf"]("");var u=O(n,r);if(void 0===u){if(n===e.variables)return T;if(n.TwineScript_VariableStore)return t.create("property","There isn't a temp variable named _"+i+" in this place.","Temp variables only exist inside the same passage and hook in which they're (set:).");if(Array.isArray(n)&&"number"==typeof r)return t.create("property","This array of "+n.length+" elements doesn't have a "+j(i)+" element.",n.length?"It contains: "+o(n.map(f))+".":"The array is empty.");var l=Array.from("function"==typeof n.keys&&n.keys());return t.create("property","I can't find a "+j(i)+" data name in "+f(n),n instanceof Map&&l.length?"Its names include: "+o(l)+".":void 0)}return u}function P(e,n){var r=this,a=this.compiledPropertyChain.reduce(function(e,t){var n=void 0;return n=0===e.length?r.object:N.apply(void 0,_toConsumableArray(e[e.length-1])),e.push([n,t])&&e},[]).reduceRight(e,n);return t.containsError(a)?a:void 0}return w=Object.freeze({get:function(){return this.error?this.error:N(this.compiledPropertyChain.slice(0,-1).reduce(function(e,t){return N(e,t)},this.object),this.compiledPropertyChain.slice(-1)[0],this.propertyChain.slice(-1)[0])},set:function(n){var r=this;return this.error?this.error:!this.object||this.object.TwineScript_VariableStore||this.object.TwineScript_Identifiers?P.call(this,function(n,a,i){var o,s=_slicedToArray(a,2),c=s[0],l=s[1];if(o=t.containsError(n,c,l)||t.containsError(A(c,l,n)))return o;var d;if(d=v(n))return t.create("operation",f(n)+" can't be stored"+(g(n)?" because it holds "+f(d)+".":""));if(i>0)c=h(c);else if(c.TwineScript_VariableStore&&c!==e.variables){for(var y=c;y.TwineScript_VariableStore&&!y.hasOwnProperty(l);)y=Object.getPrototypeOf(y);y.TwineScript_VariableStore&&(c=y)}if("string"==typeof c){if("string"!=typeof n)return t.create("datatype","I can't put this non-string value, "+f(n)+", in a string.");if(n.length!==(Array.isArray(l)?l.length:1))return t.create("datatype",f(n)+"is not the right length to fit into this string location.");c=[].concat(_toConsumableArray(c));var m=[].concat(_toConsumableArray(n));[].concat(l).forEach(function(e){0+e<0&&(e=c.length+(0+e)),c=[].concat(_toConsumableArray(c.slice(0,e)),[m.shift()],_toConsumableArray(c.slice(e+1)))}),c=c.join("")}else u(c)&&(void 0!==n.TwineScript_KnownName&&(n.TwineScript_KnownName=r.TwineScript_ObjectName),Array.isArray(l)&&p(n)?("string"==typeof n&&(n=[].concat(_toConsumableArray(n))),l.map(function(e,t){return[e,n[t]]}).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return C(c,n,r)})):C(c,l,n));return c},n):t.create("macrocall","I can't (set:) "+f(this)+", if the "+(f(this.object).match(/ (.+$)/)||["","value"])[1]+" isn't stored in a variable.","Modifying data structures that aren't in variables won't change the game state at all.")},delete:function(){return this.error?this.error:P.call(this,function(e,n,r){var a,i=_slicedToArray(n,2),o=i[0],s=i[1];if(a=t.containsError(e,o,s)||t.containsError(A(o,s)))return a;if(r>0&&(o=h(o)),null===e){var c="string"==typeof o;c&&(o=[].concat(_toConsumableArray(o))),Array.isArray(s)?(p(o)&&(s=[].concat(_toConsumableArray(new Set(s)))).sort(function(e,t){return k(o,t)-k(o,e)}),s.forEach(function(e){return E(o,e)})):E(o,s),c&&(o=o.join(""))}else C(o,s,e);return o},null)},defineType:function(e){var n=this.object,r=this.compiledPropertyChain;if(!n||!n.TwineScript_VariableStore||1!==r.length||!n.TwineScript_TypeDefs)return t.create("unimplemented","I can only restrict the datatypes of variables, not data names or anything else.");var a=r[0];Object.hasOwnProperty.call(n,"TwineScript_TypeDefs")||(n.TwineScript_TypeDefs=Object.create(n.TwineScript_TypeDefs));var i=n.TwineScript_TypeDefs,o=i[a];if(o&&!c(o,e))return t.create("operation","I can't redefine the type of "+f(this)+" to "+(e.TwineScript_ObjectName||d(e))+", as it is already "+(o.TwineScript_ObjectName||d(o))+".");i[a]=e,"const"===e.name&&(n[a]=void 0)},matches:function(e,t){return this.object===e&&this.compiledPropertyChain[0]===t},getName:function(){return this.compiledPropertyChain[0]},create:function(e,n){var r=void 0;if(r=t.containsError(e))return _(r);n=[].concat(n),w.isPrototypeOf(e)&&(n=e.propertyChain.concat(n),e=e.object);var a=function(e,n){return n.reduce(function(r,a,i){var o;return a.computed&&(a=a.value),w.isPrototypeOf(a)&&(a=a.get()),a=Array.isArray(a)?a.map(function(t){return x(e,t)}):x(e,a),(o=t.containsError(r,a))?o:(i<n.length-1&&(e=N(e,a)),r.push(a),r)},[])}(e,n);return(r=t.containsError(a))?_(r):Object.assign(Object.create(w),{object:e,propertyChain:n,compiledPropertyChain:a})},TwineScript_ToSource:function(){var t=this,n=function(e,n){return!n&&t.object.TwineScript_VariableStore?e:j(e)};return(this.object===e.variables?"$":this.object.TwineScript_VariableStore?"_":f(this.object)+"'s ")+(1===this.propertyChain.length?n(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,r){return e+"'s "+n(t,r)}))},get TwineScript_ObjectName(){return this.TwineScript_ToSource()+(this.object.TwineScript_VariableStoreName?" in "+this.object.TwineScript_VariableStoreName:"")},on:function(e,t){if(e in S)return"function"!=typeof t||S[e].includes(t)||S[e].push(t),w;i("VarRef.on","invalid event name")}})}),define("internaltypes/varscope",[],function(){return Object.seal({TwineScript_ObjectName:"the temporary variables",TwineScript_VariableStore:!0,TwineScript_TypeDefs:Object.create(null)})}),define("internaltypes/twinenotifier",["jquery","utils"],function(e,t){var n=t.impossible,r={create:function(e){return e||n("TwineNotifier.create","called with only 1 string."),Object.assign(Object.create(r),{message:e})},render:function(){return e("<tw-notifier>").attr("message",this.message)}};return r}),define("datatypes/custommacro",["jquery","utils/operationutils","internaltypes/changedescriptor","internaltypes/varref","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,a,i,o){var s=t.objectName,c=t.typeName,u=t.matches,l=Object.assign,p=Object.create,f=function(t){return function(c){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];t.called+=1;var h=t.varNames,y=t.params,m=t.body,g=l(p(a),{TwineScript_VariableStoreName:t.TwineScript_ObjectName+" call #"+t.called,TwineScript_TypeDefs:p(null)}),v=[],b=0;f.forEach(function(e,t){var n=h[b];g.TwineScript_TypeDefs[n]=y[b].datatype.rest?y[b].datatype.create("array"):y[b].datatype;var a=r.create(g,n);if(y[b].datatype.rest){var i=(g[n]||[]).concat([e]);if(t<f.length-1)return void(g[n]=i);a.set(i)}else a.set(e),b+=1;v.push(o.create(s(a)+" is now "+s(g[n])))}),f.length&&(b+=1),y[b]&&y[b].datatype.rest&&(r.create(g,h[b]).set([]),g.TwineScript_TypeDefs[name]=y[b].datatype.create("array"));var w=void 0,T=e("<p>").append(m.html),S=c.stack.length;for(c.stack.unshift({tempVariables:g,dom:T,output:function(e){w=e}}),c.execute();c.stack.length>S;)c.stack.shift();var x,k,O=T.find("tw-error");return O.length?(T.prepend(v.map(function(e){return e.render()}),"<br>"),i.create("propagated",O.length+" error"+(O.length>1?"s":"")+" occurred when running "+t.TwineScript_ObjectName+".",void 0,T)):void 0===w?i.create("custommacro",t.TwineScript_ObjectName+" didn't output any data or hooks using (output:) or (output-data:)."):n.isPrototypeOf(w)?(x=w,k=l({TwineScript_TypeID:"command",TwineScript_ObjectName:"a custom command",TwineScript_TypeName:"a custom command",TwineScript_Print:function(){return"`[a custom command]`"},TwineScript_Attach:function(e){return e.run(x),k},TwineScript_Run:function(){return x}})):w}},d=Object.freeze({TwineScript_TypeID:"macro",TwineScript_TypeName:"a custom macro",get TwineScript_ObjectName(){return this.TwineScript_KnownName?"the "+this.TwineScript_KnownName+" macro":"a custom macro"},TwineScript_GetProperty:function(e){if("params"===e)return[].concat(_toConsumableArray(this.params))},TwineScript_Properties:["params"],TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},TwineScript_Clone:function(){return l(p(d),this)},TwineScript_ToSource:function(){return"(macro:"+this.params.map(function(e){return e.TwineScript_ToSource()}).concat("")+this.body.TwineScript_ToSource()+")"},create:function(e,t){var n=l(p(this),{params:e,called:0,varNames:e.map(function(e){return e.varRef.propertyChain[0]}),typeSignature:e.map(function(e){var t=void 0;return t=e.datatype.toTypeSignatureObject?e.datatype.toTypeSignatureObject({rest:e.rest}):{pattern:"range",range:function(t){return u(e.datatype,t)},name:c(e.datatype)},e.rest?{pattern:"zero or more",innerType:t}:t}),body:t,TwineScript_KnownName:""});return n.fn=f(n),n}});return d}),define("datatypes/lambda",["utils/operationutils","internaltypes/varscope","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var a=e.objectName,i=Object.freeze({TwineScript_TypeID:"lambda",TwineScript_TypeName:"a lambda",get TwineScript_ObjectName(){return'a "'+("making"in this?"making ... ":"")+("where"in this?"where ... ":"")+("when"in this?"when ... ":"")+("via"in this?"via ... ":"")+'" lambda'},TwineScript_Print:function(){return"`[A lambda]`"},TwineScript_is:function(e){return e===this},TwineScript_ToSource:function(){return this.source},TypeSignature:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"lambda",innerType:i,clauses:t,typeName:'a "'+t.concat("").join(" ...")+'" lambda'}},TwineScript_Clone:function(){return Object.assign(Object.create(i),this)},create:function(e,o,s,c){var u=void 0;function l(e){var r=e&&e.varRef?e.varRef:e;return void 0===r||r&&n.isPrototypeOf(r)&&t.isPrototypeOf(r.object)&&1===r.propertyChain.length}if("making"===o&&!l(s))return r.create("syntax","I need a temp variable, or typed temp variable, to the right of '"+o+"', not "+a(s)+".");if(r.containsError(e))return e;if(i.isPrototypeOf(e)){if("when"===o||"when"in e)return r.create("syntax","A 'when' lambda cannot have any other clauses, such as '"+o+"'.");if(o in e&&("where"!==o||"true"!==e[o]))return r.create("syntax","This lambda has two '"+o+"' clauses.");u=e}else{if("when"===o&&void 0!==e)return r.create("syntax","A 'when' lambda shouldn't begin with a temp variable (just use 'when' followed by the condition).");if(!l(e))return r.create("syntax","This lambda needs to start with a single temp variable, or typed temp variable, not "+a(e)+".");(u=Object.create(this)).loop=e||""}return u.source=c.trim(),u[o]=s,u.making&&u.making.getName()===(u.loop&&u.loop.getName())?r.create("syntax","This lambda has two variables named '"+u.loop.getName()+"'.","Lambdas should have all-unique parameter names."):u},apply:function(e,n){var a=n.loop,i=n.pos,o=n.making,s=n.ignoreVia,c=n.tempVariables;function u(e,t){if(e)if("datatype"in e&&"varRef"in e){var n=e.varRef.create(c,e.varRef.propertyChain);n.defineType(e.datatype);var a=n.set(t);if(r.containsError(a))return a}else c[e.getName()]=t}c=c||Object.create(e.stack.length?e.stackTop.tempVariables:t);var l=u(this.loop,a)||u(this.making,o);if(r.containsError(l))return l;e.stack.unshift(Object.assign(Object.create(e.stackTop||null),{tempVariables:c,lambdaPos:this.when?void 0:i}));var p=e.eval("Operations");!a||this.making||this.when?p.initialiseIt(r.create("operation","I can't use 'it', or an implied 'it', in "+this.TwineScript_ObjectName)):p.initialiseIt(a);var f=!s&&this.via,d=e.eval("where"in this||"when"in this?"Operations.where("+(this.where||this.when)+","+(f||"true")+",null)":f||"true");return e.stack.shift(),d},filter:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=void 0,o=t.reduce(function(t,o,s){if(i=r.containsError(t))return i;var c=n.apply(e,{loop:o,pos:s+1,ignoreVia:!0,tempVariables:a});return(i=r.containsError(c))?i:t.concat(c?[o]:[])},[]);return(i=r.containsError(o))?i:o}});return i}),define("datatypes/codehook",["internaltypes/twineerror","renderer"],function(e,t){var n=t.exec;return Object.freeze({TwineScript_TypeName:"a code hook",TwineScript_ObjectName:"a code hook",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return"["+this.source+"]"},create:function(t,r){r||(r=n(t));var a=e.containsError(r);return a||Object.assign(Object.create(this),{source:t,html:r})}})}),define("datatypes/colour",["jquery","utils"],function(e,t){var n=t.matMul,r=Math.max,a=Math.min,i=Math.sin,o=Math.cos,s=Math.pow,c=Math.round,u=Math.floor,l=Math.atan2,p=Math.cbrt,f=Math.sqrt,d=Math.PI,h=Object.assign,y=Object.create,m=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,g=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,v=y(null);function b(e){var t=e.r,n=e.g,i=e.b,o=e.a,s=r(t/=255,n/=255,i/=255),u=a(t,n,i),l=(s+u)/2,p=s-u;if(s===u)return{h:0,s:0,l:l};var f=void 0;switch(s){case t:f=(n-i)/p+(n<i?6:0);break;case n:f=(i-t)/p+2;break;case i:f=(t-n)/p+4}return{h:f=c(60*f),s:l>.5?p/(2-s-u):p/(s+u),l:l,a:o}}var w=[.96422,1,.82521],T=24389/27,S=216/24389,x=function(e){return e.map(function(e){return[e]})},k=function(e){return e.map(function(e){return e[0]})};function O(e){var t=e.l,r=e.c,a=e.h,c=e.a;t*=100;var u=[];u[1]=(t+16)/116,u[0]=r*o(a*d/180)/500+u[1],u[2]=u[1]-r*i(a*d/180)/200;var l=[s(u[0],3)>S?s(u[0],3):(116*u[0]-16)/T,t>T*S?s((t+16)/116,3):t/T,s(u[2],3)>S?s(u[2],3):(116*u[2]-16)/T].map(function(e,t){return e*w[t]}),p=k(n([[.9555766,-.0230393,.0631636],[-.0282895,1.0099416,.0210077],[.0122982,-.020483,1.3299098]],n([[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],x(l)))).map(function(e){return 255*e}),f=_slicedToArray(p,3);return{r:f[0],g:f[1],b:f[2],a:c}}function j(e){var t=O(e);return[t.r,t.g,t.b].every(function(e){return e>=0&&e<=255})}var A=Object.freeze({TwineScript_TypeID:"colour",TwineScript_TypeName:"a colour",TwineScript_ObjectName:"a colour",TwineScript_DebugName:function(){return"a colour "+this.TwineScript_Print()},"TwineScript_+":function(e){var t=this.toRGBA(),n=e.toRGBA();return A.create({r:Math.min(Math.round(.6*(t.r+n.r)),255),g:Math.min(Math.round(.6*(t.g+n.g)),255),b:Math.min(Math.round(.6*(t.b+n.b)),255),a:(t.a+n.a)/2})},TwineScript_Print:function(){var e=this.toRGBA();return"<tw-colour style='background-color:rgba("+[e.r,e.g,e.b,e.a]+");'></tw-colour>"},TwineScript_is:function(e){if(!A.isPrototypeOf(e))return!1;if(e.lcha&&this.lcha)return e.lcha.l===this.lcha.l&&e.lcha.c===this.lcha.c&&e.lcha.h===this.lcha.h&&e.a===this.a;var t=this.toRGBA();return(e=e.toRGBA()).r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a},TwineScript_Clone:function(){return A.create(this)},toRGBAString:function(){var e=this.toRGBA();return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},toHSLA:function(){return b(this.toRGBA())},toRGBA:function(){return this.lch?O(function(e){if(j(e))return e;var t=(e=h({},e)).c,n=0;for(e.c/=2;t-n>1e-5;)j(e)?n=e.c:t=e.c,e.c=(t+n)/2;return e}(h({},this.lch,{a:this.a}))):this},toLCHA:function(){return this.lch?h({},this.lch):(t=(e=this).r,r=e.g,a=e.b,i=e.a,o=k(n([[1.0478112,.0228866,-.050127],[.0295424,.9904844,-.0170491],[-.0092345,.0150436,.7521316]],n([[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]],x([t/255,r/255,a/255])))).map(function(e,t){return e/w[t]}).map(function(e){return e>S?p(e):(T*e+16)/116}),c=[116*o[1]-16,500*(o[0]-o[1]),200*(o[1]-o[2])],u=180*l(c[2],c[1])/d,{l:c[0]/100,c:f(s(c[1],2)+s(c[2],2)),h:u>=0?u:u+360,a:i});var e,t,r,a,i,o,c,u},LCHRotate:function(e){e<0&&(e=360+e);var t=this.toLCHA();return t.h=(t.h+e)%360,t.a=this.a,A.create(t)},TwineScript_GetProperty:function(e){if("lch"===e){var t=this.toLCHA();return new Map([["l",t.l],["c",t.c],["h",t.h]])}var n=this.toRGBA();return"h"===e||"s"===e||"l"===e?b(n)[e]:"r"===e||"g"===e||"b"===e||"a"===e?n[e]:void 0},TwineScript_Properties:["h","s","l","r","g","b","a","lch"],TwineScript_ToSource:function(){var e=!this.lch&&b(this);if(e&&!e.h&&!e.s){if(1===e.l)return"white";if(0===e.l)return"black"}return"("+(this.lch?"lch":"hsl")+":"+(this.lch?[this.lch.l,this.lch.c,this.lch.h]:[e.h,e.s,e.l])+(1!==this.a?","+this.a:"")+")"},create:function(t){return"string"==typeof t?this.create((A.isHexString(t)?function(e){return"string"!=typeof e?e:(e=(e=e.replace("#","")).replace(m,"$1$1$2$2$3$3"),{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)})}:function(t){if(t in v)return v[t];var n=e("<p>").css("background-color",t).css("background-color");return n="transparent"===n?{r:0,g:0,b:0,a:0}:n.startsWith("rgb")?n.match(/\d+/g).reduce(function(e,t,n){return e["rgb"[n]]=+t,e},{}):{r:192,g:192,b:192},v[t]=n,n})(t)):!("h"in t&&"s"in t&&"l"in t)||"r"in t||"g"in t||"b"in t?("a"in t&&"number"==typeof t.a||(t.a=1),h(y(this),"h"in t&&"c"in t&&!("s"in t)&&"l"in t?{a:t.a,lch:{l:t.l,c:t.c,h:t.h}}:t)):this.create(function(e){var t=e.h,n=e.s,r=e.l,a=e.a;if(0===n){var i=u(255*r);return{r:i,g:i,b:i}}var o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;function c(e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+6*(o-s)*e:e<.5?o:e<2/3?s+(o-s)*(2/3-e)*6:s}return{r:u(255*c((t/=360)+1/3)),g:u(255*c(t)),b:u(255*c(t-1/3)),a:a}}(t))},isHexString:function(e){return"string"==typeof e&&"#"===e[0]&&(e.slice(1).match(m)||e.slice(1).match(g))},isCSS3Function:function(e){return"string"==typeof e&&/^(?:rgb|hsl)a?\(\s*\d+\s*,\s*\d+%?\s*,\s*\d+%?(?:,\s*\d+(?:\.\d+)?\s*)?\)$/.test(e)}});return A}),define("datatypes/gradient",["utils/operationutils"],function(e){var t=e.toSource,n=Object.freeze({TwineScript_TypeID:"gradient",TwineScript_TypeName:"a gradient",TwineScript_ObjectName:"a gradient",TwineScript_DebugName:function(){return"a gradient "+this.TwineScript_Print()},TwineScript_GetProperty:function(e){var t=this;return"angle"===e?this.angle:"stops"===e?this.stops.map(function(e){return new Map([[t.repeating?"pixels":"percent",e.stop],["colour",e.colour.TwineScript_Clone()]])}):void 0},TwineScript_Properties:["angle","stops"],TwineScript_ToSource:function(){return"(gradient:"+this.angle+","+this.stops.map(function(e){return t(e.stop)+","+t(e.colour)})+")"},TwineScript_is:function(e){var t=this;return e.angle===this.angle&&e.stops.length===this.stops.length&&e.stops.every(function(e,n){var r=e.colour,a=e.stop;return t.stops[n].stop===a&&t.stops[n].colour.TwineScript_is(r)})},TwineScript_Clone:function(){return n.create(this.angle,[].concat(_toConsumableArray(this.stops)))},TwineScript_Print:function(){return"<tw-colour style='background:"+this.toLinearGradientString()+"'></tw-colour>"},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object.assign(Object.create(this),{angle:e,stops:t.sort(function(e,t){return e.stop-t.stop}),repeating:n})},multiply:function(e){return n.create(this.angle,this.stops.map(function(t){return{colour:t.colour,stop:t.stop*e}}))},toLinearGradientString:function(){var e=this;return(this.repeating?"repeating-":"")+"linear-gradient("+this.angle+"deg, "+this.stops.reduce(function(t,n){var r=n.colour,a=n.stop;return t+r.toRGBAString()+" "+a*(e.repeating?1:100)+(e.repeating?"px,":"%,")},"").slice(0,-1)+")"}});return n}),define("datatypes/datatype",["utils","utils/operationutils","datatypes/changercommand","datatypes/colour","datatypes/gradient","datatypes/lambda","datatypes/custommacro","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s){var c=e.realWhitespace,u=e.anyRealLetter,l=e.anyCasedLetter,p=e.anyNewline,f=t.objectName,d=Object.assign,h=Object.seal,y=Object.keys,m=Math.floor,g=Math.abs,v=void 0,b=void 0,w={TwineScript_TypeID:"datatype",TwineScript_TypeName:"a datatype",TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},get TwineScript_ObjectName(){return"the "+(this.rest?"...":"")+this.name+" datatype"},TwineScript_is:function(e){return w.isPrototypeOf(e)&&e.name===this.name},TwineScript_Clone:function(){return this.rest?this:Object.create(this)},TwineScript_ToSource:function(){return(this.rest?"...":"")+this.name},TwineScript_IsTypeOf:function(e){var t=this.name,n=this.rest;return!!v[t]&&v[t](e,n)},toTypeSignatureObject:function(){var e=this.name,t={pattern:"range",range:v[e],name:"a "+("dm"===e?"datamap":"ds"===e?"dataset":"num"===e?e+"ber":"str"===e?e+"ing":"color"===e?"colour":"bool"===e?e+"ean":"alnum"===e?"alphanumeric character":"int"===e?e+"eger":"even"===e||"odd"===e?e+" number":e.endsWith("case")||"whitespace"===e?e+" character":"empty"===e?e+" value":e)};return this.rest?{pattern:"zero or more",innerType:t}:t},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e="datamap"===e?"dm":"dataset"===e?"ds":"number"===e?"num":"string"===e?"str":"color"===e?"colour":"boolean"===e?"bool":"alphanumeric"===e?"alnum":"integer"===e?"int":e;var n=Object.create(this);return n.name=e,n.rest=t,n},from:function(e){var t=y(b).find(function(t){return b[t](e)});return t?w.create(t):s.create("datatype",f(e)+" doesn't correspond to a datatype value.")}};return b={array:Array.isArray,dm:function(e){return e instanceof Map},ds:function(e){return e instanceof Set},datatype:function(e){return w.isPrototypeOf(e)},changer:function(e){return n.isPrototypeOf(e)},colour:function(e){return r.isPrototypeOf(e)},gradient:function(e){return a.isPrototypeOf(e)},lambda:function(e){return i.isPrototypeOf(e)},macro:function(e){return o.isPrototypeOf(e)},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e}},v=d({},b,{even:function(e){return!isNaN(e)&&m(g(e))%2==0},odd:function(e){return!isNaN(e)&&m(g(e))%2==1},empty:function(e){return e instanceof Map||e instanceof Set?!e.size:!(!Array.isArray(e)&&"string"!=typeof e)&&!e.length},int:function(e){return"number"==typeof e&&e===(0|e)},uppercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toLowerCase()})},lowercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toUpperCase()})},whitespace:function(e){return"string"==typeof e&&!!e.match("^"+c+"$")},digit:function(e){return"string"==typeof e&&!!e.match("^\\d$")},alnum:function(e){return"string"==typeof e&&!!e.match("^"+u+"$")},anycase:function(e){return"string"==typeof e&&!!e.match("^"+l+"$")},linebreak:function(e){return"string"==typeof e&&!!e.match("^"+p+"$")},any:function(){return!0},const:function(){return!0}}),h(w)}),define("datatypes/typedvar",["utils/operationutils","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var a=e.typeName,i=e.matches,o=e.toSource,s=e.unstorableValue,c=Object.freeze,u=Object.assign,l=Object.create,p=c({TwineScript_TypeName:"a typed variable name",get TwineScript_ObjectName(){return this.TwineScript_ToSource()},TwineScript_Print:function(){return"`[A typed variable name]`"},TwineScript_Unstorable:!0,TwineScript_Clone:function(){return u(l(p),{datatype:this.datatype.TwineScript_Clone(),varRef:this.varRef})},TwineScript_ToSource:function(){return o(this.datatype)+"-type "+this.varRef.TwineScript_ToSource()},TwineScript_GetProperty:function(e){return"name"===e?this.getName():this[e]},TwineScript_Properties:["datatype","name"],TwineScript_IsTypeOf:function(e){return i(this.datatype,e)},get:function(){var e;return(e=this.varRef).get.apply(e,arguments)},getName:function(){return this.varRef.getName()},defineType:function(){if("any"!==this.datatype.name)return this.varRef.defineType(this.datatype)},create:function(e,t){var n;if(n=r.containsError(t)||r.containsError(e)||t.error)return n;var i=s(e);return i&&!p.isPrototypeOf(i)?r.create("syntax","The -type syntax can't have "+a(i)+" to its left."):u(l(this),{datatype:e,varRef:t})}});return p}),define("macros",["jquery","utils/naturalsort","utils","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/lambda","datatypes/hookset","datatypes/codehook","datatypes/typedvar","datatypes/datatype","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l,p,f){var d=n.insensitiveName,h=n.nth,y=n.plural,m=n.andList,g=n.lockProperty,v=(r.clone,r.objectName),b=r.typeName,w=r.singleTypeCheck,T=r.toSource,S=void 0,x={};function k(e,n,r){var a=n.fn,i=n.typeSignature,s=n.isChanger,u=void 0!==s&&s,l=r[0];r=function(e){return e.reduce(function(e,n){if(n&&!0===n.spreader){var r=n.value,a=f.containsError(r);if(a)e.push(a);else if(Array.isArray(r)||"string"==typeof r)for(var i=0;i<r.length;i++)e.push(r[i]);else r instanceof Set?e.push.apply(e,_toConsumableArray(Array.from(r).sort(t("en")))):e.push(f.create("operation","I can't spread out "+v(r)+", because it is not a string, dataset, or array."))}else e.push(n);return e},[])}(r.slice(1)),i=[].concat(i||[]);var p=!e,d=p?"":"("+(Array.isArray(e)&&e.length>1?e[0]:e)+":)";e=p?"this custom macro":"the "+d+" macro";var g=void 0;g=i.length>0?e+" must only be given "+m(i.map(b))+(i.length>1?", in that order":"."):e+" must not be given any data."+(p?"":" Just write "+d);for(var T=void 0,x=function(t,n){var a=i[t],s=r[t];if(f.containsError(s))return{v:s};if(c.isPrototypeOf(s)&&u)return{v:f.create("syntax","Please put this hook outside the parentheses of the changer macro, not inside it.","Hooks should appear after a macro"+(p?".":": "+d+"[Some text]"))};if(t>=i.length&&!T)return{v:f.create("datatype",r.length-i.length+" too many values were given to "+e+".",g)};if(a||(a=T),!a.innerType||"rest"!==a.pattern&&"zero or more"!==a.pattern||(T=a.innerType,"rest"===a.pattern&&(a=a.innerType)),!w(s,a)){if(void 0===s){var l=i.filter(function(e){return!("optional"===e.pattern||"zero or more"===e.pattern)}).length;return{v:f.create("datatype",e+" needs "+y(l-t,"more value")+".",g)}}return s&&s.TwineScript_Unstorable&&(a===S.TypeSignature.Any||a.innerType&&a.innerType===S.TypeSignature.Any)?{v:f.create("datatype",e+"'s "+h(t+1)+" value, "+v(s)+", is not valid data for this macro.",g)}:s&&o.isPrototypeOf(s)&&"lambda"===a.pattern?{v:f.create("datatype",e+"'s "+h(t+1)+" value (a lambda) should have "+m(["where","when","making","via","with"].filter(function(e){return a.clauses.includes(e)}).map(function(e){return"a '"+e+"' clause"}))+", not "+m(["where","when","making","via","with"].filter(function(e){return e in s}).map(function(e){return"a '"+e+"' clause"}))+".")}:"insensitive set"===a.pattern?{v:f.create("datatype",v(s)+" is not a valid name string for "+e+".","Only the following names are recognised (capitalisation and hyphens ignored): "+m(a.innerType)+".")}:{v:f.create("datatype",e+"'s "+h(t+1)+" value is "+v(s)+", but should be "+b(a)+".",a.message||g)}}},k=0,O=Math.max(r.length,i.length);k<O;k+=1){var j=x(k);if("object"===(void 0===j?"undefined":_typeof(j)))return j.v}return a.apply(void 0,[l].concat(_toConsumableArray(r)))}function O(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={fn:t,typeSignature:n};r&&(a.isChanger=!0),Object.freeze(a),Array.isArray(e)?e.forEach(function(e){return g(x,d(e),a)}):g(x,d(e),a)}return S={has:function(e){return e=d(e),x.hasOwnProperty(e)},get:function(e){return e=d(e),x.hasOwnProperty(e)&&x[e]},add:function e(t,n,r){return O(t,n,r),e},addChanger:function e(t,n,r,i){return O(t,n,i,!0),a.register(Array.isArray(t)?t[0]:t,r),e},addCommand:function e(t,n,r,a){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return O(t,function(e,t,n,r){return function(a){for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var c=t.apply(void 0,o);if(c)return c;var u=p.create(),l=Object.assign({TwineScript_TypeID:"command",TwineScript_ObjectName:"a ("+e+":) command",TwineScript_TypeName:"a ("+e+":) command",TwineScript_Print:function(){return"`[A ("+e+":) command]`"},TwineScript_ToSource:function(){return"("+e+":"+o.map(T)+")"},TwineScript_is:function(e){return T(this)===T(e)}},r?{TwineScript_Attach:function(e,t){return u.section=e,t.run(u),l},TwineScript_Run:function(e){return n.apply(void 0,[u,e].concat(o))}}:{TwineScript_Run:function(e){return n.apply(void 0,[e].concat(o))}});return l}}([].concat(t)[0],n,r,i),a),e},TypeSignature:{optional:function(e){return{pattern:"optional",innerType:e}},zeroOrMore:function(e){return{pattern:"zero or more",innerType:e}},either:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"either",innerType:t}},rest:function(e){return{pattern:"rest",innerType:e}},insensitiveSet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"insensitive set",innerType:t}},numberRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return{pattern:"range",min:e,max:t,range:function(n){return"number"==typeof n&&!Number.isNaN(n)&&n>=e&&n<=t}}},nonNegativeInteger:{pattern:"range",integer:!0,min:0,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=0&&!(e+"").includes(".")}},positiveInteger:{pattern:"range",integer:!0,min:1,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=1&&!(e+"").includes(".")}},wrapped:function(e,t){return{pattern:"wrapped",innerType:e,message:t}},Any:{TwineScript_TypeName:"anything"},Everything:{TwineScript_TypeName:"everything"}},run:function(e,t){return S.has(e)?k(e,S.get(e),t):f.create("macrocall","I can't run the macro '"+e+"' because it doesn't exist.","Did you mean to run a macro? If you have a word written like (this:), it is regarded as a macro name.")},runCustom:function(e,t){return i.isPrototypeOf(e)?k("",e,t):f.create("macrocall","I can't call "+v(e)+" because it isn't a custom macro.")}},Object.assign(S.TypeSignature,{positiveNumber:S.TypeSignature.numberRange(Math.pow(2,-52),1/0),nonNegativeNumber:S.TypeSignature.numberRange(0,1/0),percent:S.TypeSignature.numberRange(0,1)}),Object.freeze(S)}),define("datatypes/varbind",["jquery","utils","utils/operationutils","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,a){var i=n.objectName;return r.on("set",function(n,r){n.TwineScript_VariableStore&&e(t.storyElement).find("[data-2bind]").each(function(t,a){var i=(a=e(a)).data("twoWayBindEvent");"function"==typeof i&&i(a,n,r)})}),Object.freeze({TwineScript_TypeName:"a bound variable",TwineScript_ObjectName:"a bound variable",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return("two way"===this.bind?"2":"")+"bind "+this.varRef.TwineScript_ToSource()},set:function(e){var t,n=this.varRef.set(e);if(t=a.containsError(n))return t},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"one way";return r.isPrototypeOf(e)?e.error?e.error:Object.assign(Object.create(this),{varRef:e,bind:t}):a.create("operation","I can only 'bind' a variable, not "+i(e)+".")}})}),define("datatypes/assignmentrequest",["utils/operationutils","datatypes/typedvar","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,a){var i=e.objectName,o=e.matches;return Object.freeze({assignmentRequest:!0,TwineScript_TypeName:"a 'to' or 'into' expression",TwineScript_ObjectName:"a 'to' or 'into' expression",TwineScript_Unstorable:!0,set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=void 0,c=[],u=function e(s,c){var u,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],p=[],f=void 0;if(f=c&&r.isPrototypeOf(c)?c.get():c,u=a.containsError(f))return u;if(Array.isArray(f)&&Array.isArray(s)){for(var d=0,h=0;d<s.length&&h<f.length;){var y=s[d],m=f[h];if(t.isPrototypeOf(y)&&y.datatype.rest||n.isPrototypeOf(y)&&y.rest){for(var g=h;h<f.length&&o(y,m);)m=f[h+=1];t.isPrototypeOf(y)?y.datatype=[y.datatype]:n.isPrototypeOf(y)&&(y=n.create("array")),p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,{first:g+1,last:h+1}):f.slice(g,h)))}else p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,h+1):m)),h+=1;d+=1}return d<s.length?l&&a.create("operation","I can't unpack this array because it needs "+(s.length-d)+" more value"+(s.length-d>0?"s":"")+"."):p}if(s instanceof Map&&f instanceof Map){var v=!0,b=!1,w=void 0;try{for(var T,S=s.entries()[Symbol.iterator]();!(v=(T=S.next()).done);v=!0){var x=_slicedToArray(T.value,2),k=x[0],O=x[1];if(!f.has(k))return l&&a.create("operation","I can't unpack this datamap because it needs a '"+k+"' data name.");p=p.concat(e(O,r.isPrototypeOf(c)?r.create(c,k):f.get(k)))}}catch(e){b=!0,w=e}finally{try{!v&&S.return&&S.return()}finally{if(b)throw w}}return p}if(t.isPrototypeOf(s)){if("function"==typeof s.datatype.destructure)return[{dest:s,value:f,src:c}].concat(s.datatype.destructure(f));if(!o(f,s.datatype))return[l&&a.create("operation","I can't unpack "+i(f)+" into "+s.varRef.TwineScript_ToSource()+" because it doesn't match "+i(s.datatype)+".")];p=p.concat(e(s.datatype,f))}return r.isPrototypeOf(s)||t.isPrototypeOf(s)?p.concat({dest:s,value:f,src:c}):"function"==typeof s.destructure?p.concat(s.destructure(f)):o(f,s)?p:l&&a.create("operation","I tried to unpack, but "+i(s)+" in the pattern didn't match "+i(f)+".")}(this.dest,this.src);if(s=a.containsError(u))return s;if(!u.length)return a.create("operation","I can't store a new value inside "+i(this.dest)+" that isn't in a variable.","You need a variable, or a data structure containing variables at certain positions, to store the value.");var l=!0,p=!1,f=void 0;try{for(var d,h=u.reverse()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=y.dest,g=y.value,v=y.src;if(t.isPrototypeOf(m)){if(s=a.containsError(m.defineType()))return s;m=m.varRef}if(s=m.set(g),a.isPrototypeOf(s))return s;e&&v&&v.delete(),c.shift(i(m)+" is now "+i(g))}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return c.join("; ")},create:function(e,t,n){return Object.assign(Object.create(this),{dest:e,src:t,operator:n})}})}),define("twinescript/operations",["jquery","state","datatypes/assignmentrequest","utils/operationutils","internaltypes/varref","datatypes/typedvar","datatypes/datatype","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s){var c=r.isObject,u=r.collectionType,l=r.is,p=r.isA,f=r.clone,d=r.unique,h=r.contains,y=r.matches,m=r.objectName,g=void 0,v=0;function b(e,t,n,r){return n=n||"do this to",function(a,i){1===t.length&&(i=a);var o;return(o=s.containsError(a,i))?o:(void 0===a?"undefined":_typeof(a))!==e||(void 0===i?"undefined":_typeof(i))!==e?s.create("operation","I can only "+n+" "+e+"s, not "+m((void 0===a?"undefined":_typeof(a))!==e?a:i)+".",r):t(a,i)}}function w(e){return function(t,n){var r;if(r=s.containsError(t,n))return r;if((void 0===t?"undefined":_typeof(t))!==(void 0===n?"undefined":_typeof(n))||c(t)&&"TwineScript_TypeName"in t&&c(n)&&"TwineScript_TypeName"in n&&t.TwineScript_TypeName!==n.TwineScript_TypeName||u(t)!==u(n)){var a=m(t)+" isn't the same type of data as "+m(n);return s.create("operation",a[0].toUpperCase()+a.slice(1))}return e(t,n)}}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function r(a,i){var o=void 0;if(o=s.containsError(a,i))return o;v=a;var c=a.determiner?[a,i]:i.determiner?[i,a]:[],u=_slicedToArray(c,2),l=u[0],p=u[1];if(l){var f=l.determiner;if("start"===f||"end"===f){if(t)return s.create("operation","I can't use '"+t+"' with the 'start' or 'end' of "+m(l)+".");if(p.determiner){if("start"===p.determiner||"end"===p.determiner)return s.create("operation","I can't compare one value's 'start' or 'end' with another value's 'start' or 'end'.","Please change one of them to use an exact range, such as '1stto4th' or '2ndlasttolast'.");var d=[p,l];l=d[0],p=d[1]}for(var h=l.string||l.array,y=0;y<h.length+1;y+=1){var g=y?"end"===f?h.slice(-y):h.slice(0,y):h.constructor(),b=l===a?r(g,i):r(a,g);if(o=s.containsError(b))return o;if(b!==n)return b}return n}var w="all"===f;return l.array.reduce(function(e,t){var n,o=l===a?r(t,i):r(a,t);return(n=s.containsError(e,o))?n:w?e&&o:e||o},w)}return e(a,i)}}function S(e,t){return T(function(t,n){var r=e(t,n);return s.containsError(r)?r:!r},t,!0)}var x="If one of these values is a number, you may want to write a check that it 'is not 0'. Also, if one is a string, you may want to write a check that it 'is not \"\" '.";return g={create:function(n){var r=Object.create(this);return r.Identifiers={TwineScript_Identifiers:!0,get it(){return v},get time(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'time' can't be used in "+n.stackTop.evaluateOnly+"."):Date.now()-n.timestamp},get visits(){var e=n.stackTop.speculativePassage,r=function(n){return n===(e||t.passage)};return t.pastPassageNames().filter(r).length+t.mockVisits.filter(r).length+(!e||e===t.passage)},get visit(){return r.Identifiers.visits},get exits(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'exit' and 'exits' can't be used in "+n.stackTop.evaluateOnly+"."):n.dom.find("tw-enchantment, tw-link").filter(function(t,n){return e(n).data("enchantmentEvent")||e(n).parent().data("linkPassageName")||e(n).parent().data("clickEvent")}).length},get exit(){return r.Identifiers.exits},get pos(){return n.stackTop&&!n.stackTop.evaluateOnly&&n.stackTop.lambdaPos?+n.stackTop.lambdaPos||1:s.create("operation","'pos' can only be used in lambdas that aren't 'when' lambdas.")}},r},elidedComparisonOperator:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.reduce(function(n,r){return"boolean"==typeof r?r:g[e](n,g[t](v,r))},"and"===e)},and:b("boolean",w(function(e,t){return e&&t}),"use 'and' to join",x),or:b("boolean",w(function(e,t){return e||t}),"use 'or' to join",x),not:b("boolean",function(e){return!e},"use 'not' to invert",x),"+":w(function(e,t){if(Array.isArray(e))return[].concat(_toConsumableArray(e),_toConsumableArray(t));var n=void 0;return e instanceof Map?(n=new Map(e),t.forEach(function(e,t){return n.set(t,e)}),n):e instanceof Set?new Set([].concat(_toConsumableArray(e),_toConsumableArray(t)).filter(d).map(f)):"function"==typeof e["TwineScript_+"]?e["TwineScript_+"](t):"string|number|boolean".includes(void 0===e?"undefined":_typeof(e))?e+t:s.create("operation","I can't use + on "+m(e)+".")}),"-":w(function(e,t){if(Array.isArray(e))return e.filter(function(e){return!t.some(function(t){return l(e,t)})});if(e instanceof Set){var n=[].concat(_toConsumableArray(t));return new Set([].concat(_toConsumableArray(e)).filter(function(e){return!n.some(function(t){return l(e,t)})}))}return"string"==typeof e?e.split(t).join(""):"number"==typeof e?e-t:s.create("operation","I can't use - on "+m(e)+".")}),"*":b("number",w(function(e,t){return e*t}),"multiply"),"/":b("number",w(function(e,t){return 0===t?s.create("operation","I can't divide "+m(e)+" by zero."):e/t}),"divide"),"%":b("number",w(function(e,t){return 0===t?s.create("operation","I can't modulo "+m(e)+" by zero."):e%t}),"modulus"),"<":T(b("number",w(function(e,t){return e<t}),"do < to"),"<"),">":T(b("number",w(function(e,t){return e>t}),"do > to"),">"),"<=":T(b("number",w(function(e,t){return e<=t}),"do <= to"),"<="),">=":T(b("number",w(function(e,t){return e>=t}),"do >= to"),">="),is:T(l),isNot:S(l),contains:T(h,"contains"),doesNotContain:S(h,"does not contain"),isIn:T(function(e,t){return h(t,e)},"is in"),isNotIn:S(function(e,t){return h(t,e)},"is not in"),isA:T(p,"is a"),isNotA:S(p,"is not a"),typifies:T(function(e,t){return p(t,e)}),untypifies:S(function(e,t){return p(t,e)}),matches:T(y),doesNotMatch:S(y),where:function(e,t,n){var r;return(r=s.containsError(e))?r:"boolean"!=typeof e?s.create("operation","This lambda's 'where' clause must evaluate to true or false, not "+m(e)+"."):e?t:n},makeSpreader:function(e){if(i.isPrototypeOf(e)||o.isPrototypeOf(e)){var t=f(e);return(i.isPrototypeOf(e)?t.datatype:t).rest=!0,t}return{value:e,spreader:!0,TwineScript_TypeName:"a spreaded '...' value",TwineScript_ObjectName:"a spreaded '...' value",TwineScript_Unstorable:!0}},makeAssignmentRequest:function(e,t,r){var a=s.containsError(e,t);return a||n.create(e,t,r)},setIt:function(e){return a.isPrototypeOf(e)||i.isPrototypeOf(e)?(v=e.get(),e):e},initialiseIt:function(e){v=e}},Object.freeze(g)}),define("twinescript/environ",["macros","state","utils","datatypes/colour","datatypes/hookset","datatypes/lambda","datatypes/datatype","datatypes/varbind","datatypes/codehook","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror","twinescript/operations"],function(Macros,State,Utils,Colour,HookSet,Lambda,Datatype,VarBind,CodeHook,TypedVar,VarRef,TwineError,OperationsProto){return function(section){"object"===(void 0===section?"undefined":_typeof(section))&&section||Utils.impossible("TwineScript.environ","no Section argument was given!");var Operations=OperationsProto.create(section);return section.eval=function(){try{return eval(arguments[0])}catch(e){return e}},section}}),define("section",["jquery","utils","renderer","twinescript/environ","twinescript/operations","state","utils/operationutils","utils/renderutils","datatypes/changercommand","datatypes/hookset","datatypes/colour","datatypes/lambda","internaltypes/changedescriptor","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,a,i,o,s,c,u,l,p,f,d,h,y){var m,g=o.printBuiltinValue,v=o.objectName,b=o.typeID,w=s.collapse;function T(e,n,r){if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&c.isPrototypeOf(n)){if(r.data("originalSource",r.popAttr("source")),!this.renderInto(r.data("originalSource"),r,n)){var a=t.insensitiveName(e.attr("name"));if(["if","elseif","unless","else","testfalse"].includes(a)&&(e.addClass("false"),"elseif"!==a&&(this.stackTop.lastHookShown=!1)),r.data("live")){var i=r.data("live"),o=i.delay,s=i.event;(function(e,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;i&&t.assertMustHave(i,["when"]);var o=n.data("originalSource")||"",s=_slicedToArray(this.stack,1)[0].tempVariables,c=this.whenUnblocked.bind(this,function(){if(r.inDOM()){var t=i&&i.filter(r,[!0],s);h.containsError(t)?t.render(e.attr("title")).replaceAll(e):!i||t[0]?(r.renderInto(o,n,{append:"replace"}),t||n.find("tw-expression[name='stop']").length||r.inDOM()&&setTimeout(c,a)):setTimeout(c,a)}});setTimeout(c,a)}).call(this,e,r,o,s)}return}}else{if(!1===n)return r.attr("source")&&(r.data("originalSource",r.popAttr("source")),r.data("hidden",!0)),e.addClass("false"),void(this.stackTop.lastHookShown=!1);!0!==n&&e.replaceWith(h.create("datatype",v(n)+" cannot be attached to this hook.","Only Booleans and changers can be attached to hooks.").render(e.attr("title")))}this.stackTop.lastHookShown=!0}function S(t){var n=(t instanceof e?t[0]:t).nextSibling;if(n&&(n instanceof Text&&!n.textContent.trim()||["br","tw-consecutive-br"].includes((n.tagName||"").toLowerCase()))){var r=S(n),a=r.whitespace,i=r.nextElem;return{whitespace:e(n).add(a),nextElem:i}}return{whitespace:e(),nextElem:e(n)}}var x={add:[],remove:[]};return m={create:function(e){var n=Object.assign(Object.create(this),{timestamp:Date.now(),dom:e||t.storyElement,stack:[],enchantments:[],unblockCallbacks:[]});return n=r(n)},get stackTop(){return this.stack[0]},inDOM:function(){return e(t.storyElement).find(this.dom).length>0},evaluateTwineMarkup:function(t,n){var r=e("<p>");this.stack.unshift({desc:f.create({target:r,source:t,section:this,append:"append"}),tempVariables:this.stackTop.tempVariables,evaluateOnly:n,finalIter:!0}),this.execute();var a;return(a=r.find("tw-error")).length>0?a:r},speculate:function(e,t,n){this.stack.unshift({evaluateOnly:n,finalIter:!0,tempVariables:Object.assign(Object.create(d),{TwineScript_VariableStoreName:n}),speculativePassage:t});var r=void 0;return r=p.isPrototypeOf(e)?e.apply(this,{fail:!1,pass:!0}):this.eval(e),this.stack.shift(),r},renderInto:function(t,n,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=f.create({target:n,source:t,section:this,append:"append"});if(r)if(c.isPrototypeOf(r)){var s=r.run(o);if(h.containsError(s))return s.render(n.attr("title")).replaceAll(n),!1}else Object.assign(o,r);if((n=o.target,this.stack.length>=50)&&this.stack.reduce(function(e,t){return e+!!t.finalIter},0)>=50)return h.create("infinite","Printing this expression may have trapped me in an infinite loop.").render(n.attr("title")).replaceAll(n),!1;var u=function(t,r,i){var o=n instanceof e&&n.is("tw-hook")&&n.parents("tw-collapsed,[collapsing=true]").length>0;a.stack.unshift({desc:t,finalIter:i,tempVariables:r,collapses:o,evaluateOnly:a.stackTop&&a.stackTop.evaluateOnly})};if(i||(i=Object.create(this.stack.length?this.stackTop.tempVariables:d)),!i.hasOwnProperty("TwineScript_VariableStoreName")){var l=n&&n.tag();i.TwineScript_VariableStoreName="tw-hook"===l?n.attr("name")?"?"+n.attr("name"):"an unnamed hook":"tw-expression"===l?"a "+n.attr("type")+" expression":"tw-passage"===l?"this passage":"an unknown scope"}return Object.keys(o.loopVars).length?function(){var e=Object.assign({},o.loopVars),t=Math.min.apply(Math,_toConsumableArray(Object.keys(e).map(function(t){return e[t].length})));if(y.create(t+" loop"+(1!==t?"s":"")).render().prependTo(n),t){for(var r=function(n){u(o,Object.keys(e).reduce(function(t,r){return t[r]=e[r][n],t},Object.create(i),n===t-1))},s=t-1;s>=0;s-=1)r(s);for(s=t-1;s>=0&&!a.stackTop.blocked;s-=1)a.execute()}}():(u(o,i,!0),this.execute()),0===this.stack.length&&this.updateEnchantments(),o.enabled},execute:function(){var n=this,r=this.stackTop,i=r.desc,o=r.dom,s=r.collapses,u=r.evaluateOnly;i&&!o&&(o=i.render(),this.stackTop.dom=o,this.stackTop.desc=void 0),o.findAndFilter("tw-hook,tw-expression").each(function(r,i){if(n.stackTop.blocked)return!1;switch((i=e(i)).tag()){case"tw-hook":var o=i.popAttr("source")||"";if(o&&i.data("originalSource",o),i.data("tempVariables",n.stackTop.tempVariables),i.popAttr("hidden")){i.data("hidden",!0);break}o&&n.renderInto(o,i);break;case"tw-expression":if(i.attr("blockers")){if(u)return void i.removeAttr("blockers").removeAttr("js").replaceWith(h.create("syntax","I can't use a macro like (prompt:) or (confirm:) in "+u+".","Please rewrite this without putting such macros here.").render(i.attr("title"),i));var s=[];try{s=JSON.parse(i.popAttr("blockers")),i.data("blockers",s)}catch(e){t.impossible("Section.execute","JSON.parse blockers failed.")}}if(i.data("blockers")){var p=i.data("blockers");if(p.length){n.stackTop.blocked=!0;var d=n.eval(p.shift());return h.containsError(d)&&(n.stackTop.blocked=!1,i.removeData("blockers").replaceWith(d.render(i.attr("title"),i))),!1}i.removeData("blockers")}i.attr("js")&&function(n){var r=this.eval(n.popAttr("js")||"");this.stackTop.evaluateOnly&&r&&(c.isPrototypeOf(r)||"function"==typeof r.TwineScript_Run)&&(r=h.create("syntax","I can't work out what "+this.stackTop.evaluateOnly+" should evaluate to, because it contains a "+(c.isPrototypeOf(r)?"changer.":"command."),"Please rewrite this without putting changers or commands here."));var i=void 0,o=void 0,s=e();for(o=n;c.isPrototypeOf(r);){var u=S(o);if(i=u.whitespace,(o=u.nextElem)[0]instanceof Text&&"+"===o[0].textContent.trim()){var p,d=o,m=S(d);if(p=m.whitespace,(o=m.nextElem).is("tw-expression")){var w=this.eval(o.popAttr("js"));if(h.containsError(w)){r=w;break}var x=a["+"](r,w);e(i).add(d).add(p).remove(),r=h.containsError(x)?h.create("operation","I can't combine "+v(r)+" with "+v(w)+".","function"==typeof w.TwineScript_Run?"If you want to attach this changer to "+v(w)+", remove the + between them.":"Changers can only be added to other changers."):x;continue}}if(o.is("tw-expression")){var k=this.eval(o.popAttr("js"));if(h.containsError(k)){r=k;break}if(k&&"object"===(void 0===k?"undefined":_typeof(k))&&"function"==typeof k.TwineScript_Attach){r=k.TwineScript_Attach(this,r);break}return c.isPrototypeOf(k)?void n.replaceWith(h.create("operation","Changers like ("+r.macroName+":) need to be combined using + between them.","Place the + between the changer macros, or the variables holding them. The + is absent only between a changer and its attached hook or command.").render(n.attr("title"))):void n.replaceWith(h.create("operation",v(k)+" can't have changers like ("+r.macroName+":) attached.","Changers placed just before hooks, links and commands will attempt to attach, but in this case it didn't work.").render(n.attr("title")))}if(o.is("tw-hook")){i.remove(),s=o;break}r.macroName||t.impossible("Section.runExpression","changer has no macroName");var O=n.attr("title")||"("+r.macroName+": ...)";return void n.replaceWith(h.create("syntax","The ("+r.macroName+":) changer should be stored in a variable or attached to a hook.","Macros like this should appear before a hook: "+O+"[Some text]").render(n.attr("title")))}n.attr("return",b(r)),s=s.length?s:S(n).nextElem.filter("tw-hook");var j=void 0;if(j=h.containsError(r))j instanceof Error&&(j=h.fromError(j)),n.replaceWith(j.render(n.attr("title"),n));else if(y.isPrototypeOf(r))n.append(r.render());else if(r&&"function"==typeof r.TwineScript_Run)if(r=r.TwineScript_Run(this),h.containsError(r))n.replaceWith(r.render(n.attr("title")));else if(f.isPrototypeOf(r)){if(r.data&&r.data.live)return void n.replaceWith(h.create("unimplemented","I currently can't attach (live:) or (event:) macros to commands - only hooks.").render(n.attr("title")));r.section=this,r.target=o,this.renderInto("",o,r)}else{if("blocked"===r)return this.stackTop.blocked=!0,void n.attr("js","section.blockedValue()");r&&t.impossible("Section.runExpression","TwineScript_Run() returned a non-ChangeDescriptor "+(void 0===r?"undefined":_typeof(r))+': "'+r+'"')}else!s.length&&("string"==typeof r||"number"==typeof r||r instanceof Map||r instanceof Set||Array.isArray(r)||l.isPrototypeOf(r))||r&&"function"==typeof r.TwineScript_Print&&!c.isPrototypeOf(r)?(r=g(r),h.containsError(r)?(r instanceof Error&&(r=h.fromError(r)),n.replaceWith(r.render(n.attr("title")))):"string"!=typeof r?t.impossible("printBuiltinValue() produced a non-string "+(void 0===r?"undefined":_typeof(r))):this.renderInto(r,n)):s.length?T.call(this,n,r,s):c.isPrototypeOf(r)||"boolean"==typeof r||t.impossible("Section.runExpression","The expression evaluated to an unknown value: "+r)}.call(n,i)}}),this.stackTop.blocked||(o.length&&s&&w(o),o.findAndFilter("tw-collapsed,[collapsing=true]").each(function(){w(e(this))}),this.stack.shift())},updateEnchantments:function(){this.enchantments.forEach(function(e){e.disenchant(),e.enchantScope()})},on:function(e,t){return x[e].push(t),this},addEnchantment:function(e){var t=this;this.enchantments.push(e),x.add.forEach(function(n){return n(t,e)})},removeEnchantment:function(e){var t=this,n=this.enchantments.indexOf(e);this.enchantments.splice(n,1),e.disenchant(),x.remove.forEach(function(n){return n(t,e)})},unblock:function(e){for(this.stack.length||t.impossible("Section.unblock","stack is empty"),this.stackTop.blocked=!1,void 0!==e&&(this.stackTop.blockedValues=(this.stackTop.blockedValues||[]).concat(e));this.stack.length&&!this.stackTop.blocked;)this.execute();if(!this.stack.length)for(;this.unblockCallbacks.length>0;){if(this.unblockCallbacks.shift()(),this.stackTop&&this.stackTop.blocked)return}},whenUnblocked:function(e){this.stack.length&&this.stackTop.blocked?this.unblockCallbacks=this.unblockCallbacks.concat(e):e()},blockedValue:function(){var e=this.stackTop;return e||t.impossible("Section.blockedValue","stack is empty"),e.blockedValues&&e.blockedValues.length||t.impossible("Section.blockedValue","blockedValues is missing or empty"),e.blockedValues.shift()}},Object.preventExtensions(m)}),define("engine",["jquery","utils","state","section","passages"],function(e,t,n,r,a){var i,o=t.escape,s=t.impossible,c=t.passageSelector,u=t.transitionOut,l=Object.create(null);function p(e,t){return"<tw-include type="+e+" title='"+o(t.get("name"))+"'>"+t.get("source")+"</tw-include>"}function f(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.assertOnlyHas(o,["stretch","transition"]);var f=a.get(i),d=t.storyElement,h=d.parent(),y=o.stretch,m=o.transition,g=(m=void 0===m?{}:m).depart,v=void 0===g?"instant":g,b=m.arrive,w=void 0===b?"dissolve":b,T=m.departOrigin,S=m.arriveOrigin,x=m.time;h.findAndFilter("tw-enchantment").each(function(t,n){var r=(n=e(n)).data("enchantedProperties");r&&d.css(r.reduce(function(e,t){return e[t]="",e},{})),n[0]===h[0]&&(h=d.unwrap().parent())}),a.hasValid(i)||s("Engine.showPassage","There's no passage with the name \""+i+'"!');var k,O,j,A,C=d.children(c).not(".transition-out, .transition-out *"),E=(f.get("tags")||[]).join(" "),_=(k=e("<tw-passage><tw-sidebar>"),O=k.children("tw-sidebar"),j=e('<tw-icon tabindex=0 alt="Undo" title="Undo">&#8630;</tw-icon>'),A=e('<tw-icon tabindex=0 alt="Redo" title="Redo">&#8631;</tw-icon>'),n.pastLength<=0&&j.css("visibility","hidden"),n.futureLength<=0&&A.css("visibility","hidden"),O.append(j,A),k);"function"==typeof T&&(T=T.call(C)),"function"==typeof S&&(S=S.call(_)),d.detach(),_.appendTo(d).attr({tags:E}),!y&&v&&(u(C,v,x,0,0,0,T),C.css("position","absolute")),d.attr({tags:E});var N=r.create(_),P=f.get("source");P=a.getTagged("header").map(p.bind(0,"header")).join("")+(l.debug?a.getTagged("debug-header").map(p.bind(0,"debug-header")).join(""):"")+P+a.getTagged("footer").map(p.bind(0,"footer")).join("")+(l.debug?a.getTagged("debug-footer").map(p.bind(0,"debug-footer")).join(""):""),n.pastLength<=0&&(l.debug&&(P=a.getTagged("debug-startup").map(p.bind(0,"debug-startup")).join("")+P),P=a.getTagged("startup").map(p.bind(0,"startup")).join("")+P),N.renderInto(P,_,{transition:w,transitionTime:x,transitionOrigin:S}),h.append(d.parents().length?d.parents().last():d),scroll(0,y?_.offset().top-.05*e(window).height():d.offset().top)}return i={goBack:function(e){n.rewind()&&f(n.passage,e)},goForward:function(e){n.fastForward()&&f(n.passage,e)},goToPassage:function(e,t){n.play(e),f(e,t)},toggleFullscreen:function(){var e=document.documentElement;document.fullscreenElement?document.exitFullscreen():document.msFullscreenElement?document.msExitFullscreen():(e.msRequestFullscreen||e.requestFullscreen).call(e)},showPassage:f,options:l},Object.freeze(i)}),define("debugmode/panel",["jquery"],function(e){return Object.freeze({create:function(t){var n=t.className,r=t.rowAdd,a=t.rowCheck,i=t.columnHead,o=t.tabName,s=t.tabUpdate,c=e("<div class='panel panel-"+n+"' hidden><table class='panel-rows'></table></div>"),u=e("<button class='tab tab-"+n+"'>0 "+o+"s</button>");return u.click(function(){u.toggleClass("enabled"),u.parent().siblings(".panel").attr("hidden",""),u.is(".enabled")&&(u.siblings(".tab:not(.tab-"+n+")").removeClass("enabled"),c.removeAttr("hidden"))}),s||(s=function(e){return u.text(e+" "+o+(1!==e?"s":""))}),Object.assign(Object.create(this),{tabName:o,tab:u,panel:c,panelRows:c.find(".panel-rows"),rowAdd:r,rowCheck:a,columnHead:i,tabUpdate:s})},update:function(t,n){var r=this.rowCheck,a=this.rowAdd,i=this.panelRows,o=this.columnHead,s=[],c=i.children();t.forEach(function(t){var n=c.filter(function(n,a){return r(t,e(a))}),o=a(t);n.length?n.replaceWith(o):i.append(o),s.push(o[0])}),c.filter(function(e,t){return!s.includes(t)}).remove(),this.tabUpdate(n),n>0&&!i.find(".panel-head").length?i.prepend(o()):0===n&&i.find(".panel-head").remove()}})}),define("debugmode/mode",["jquery","utils","state","internaltypes/varref","internaltypes/twineerror","utils/operationutils","engine","passages","section","debugmode/panel"],function(e,t,n,r,a,i,o,s,c,u){var l=t.escape,p=t.nth,f=t.storyElement,d=t.debounce,h=i.objectName,y=i.isObject,m=i.toSource;return function(t,i){var g=e(document.documentElement),v=e("<tw-debugger>\n\t\t<div class='panel panel-errors' hidden><table></table></div>\n\t\t<div class='tabs'></div>\n\t\t<label style='user-select:none'>Turns: </label><select class='turns' disabled></select><button class='show-invisibles'>Debug View</button><button class='show-dom'>DOM View</button>\n\t\t<div class='resizer'>\n\t\t</tw-debugger>"),b=v.find(".tabs"),w=v.find(".show-dom"),T=v.find(".show-invisibles"),S=v.find(".turns");v.find(".resizer").mousedown(function(e){if(1!==e.which)return!0;e.stopPropagation();var t=e.pageX,n=v.width();g.on("mousemove.debugger-resizer",function(e){var r=e.pageX;v.width((n+t-r|0)+"px")}).on("mouseup.debugger-resizer",function(){g.off(".debugger-resizer")})}),T.click(function(){g.toggleClass("debug-mode").removeClass("dom-debug-mode"),T.toggleClass("enabled"),w.removeClass("enabled")}),w.click(function(){g.toggleClass("dom-debug-mode").removeClass("debug-mode"),w.toggleClass("enabled"),T.removeClass("enabled")}),n.timelinePassageNames().forEach(function(e,t){S.append("<option value="+t+">"+(t+1)+": "+e+"</option>")}),S.val(n.pastLength),n.pastLength>0&&S.removeAttr("disabled"),S.change(function(e){var t=e.target.value-n.pastLength;0!==t&&(n[t<0?"rewind":"fastForward"](Math.abs(t)),o.showPassage(n.passage))}),n.on("forward",function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=n.pastLength;a>=1&&S.removeAttr("disabled"),r?(S.find("[selected]").removeAttr("selected"),S.val(a)):(S.children().each(function(t,n){t>=a&&e(n).remove()}),S.append("<option value="+a+">"+(a+1)+": "+t+"</option>").val(a))}).on("back",function(){n.pastLength<=1&&S.attr("disabled"),S.find("[selected]").removeAttr("selected"),S.val(n.pastLength)}).on("load",function(e){S.empty(),S[e.length<=1?"attr":"removeAttr"]("disabled"),e.forEach(function(e,t){return S.append("<option value="+t+">"+(t+1)+": "+e.passage+"</option>")})});var x=new Set,k=u.create({className:"variables",tabName:"Variable",rowAdd:function(t){var n=t.name,r=t.dataset,a=t.path,i=t.value,o=t.tempScope,s=t.type,c=y(i)&&i.TwineScript_DebugName?i.TwineScript_DebugName():l(h(i)),u="";a.length&&(u=a.reduce(function(e,t){return e+t+"'s "},"")),r&&(n="???");var p=s?m(s):"",f=c.length>48&&!i.TwineScript_DebugName,d="object"===(void 0===i?"undefined":_typeof(i))||f,g=f?c.slice(0,48)+"\u2026":c;return e('<div class="variable-row">').attr("data-name",n).attr("data-path",a+"").attr("data-scope",o||"").css("padding-left",Math.min(5,a.length)+"em").append("<td class='variable-type'>"+(p?p+"-type ":"")+"</td>","<td class='variable-name'>"+(u?"<span class='variable-path'>"+(o?"_":"$")+l(u)+"</span> ":"")+(u?"":o?"_":"$")+l(n+"")+"</td>","<td class='temporary-variable-scope'>"+(o||"")+"</td>","<td class='variable-value'>"+g+"</td><td class='panel-row-buttons'>"+(d?"<tw-folddown tabindex=0>(source:) </tw-folddown>":"")+"</td>").add(d?"<tr class='variable-row panel-row-source' style='display:none'><td colspan='5'>"+l(m(i))+"</td></tr>":"")},rowCheck:function(e,t){var n=e.name,r=e.path;e.tempScope;return t.attr("data-name")===n&&t.attr("data-path")===r+""},columnHead:function(){return'<tr class="panel-head"><th>Type</th><th>Name</th><th>Scope</th><th>Value</th></tr>'}}),O=d(function(){var e=[],t=n.variables,r=e.length;function a(t){if(!(e.length>500)){e.push(t);var n=t.path.concat(t.name),r=t.value,i=t.tempScope;Array.isArray(r)?r.forEach(function(e,t){return a({name:p(t+1),path:n,value:e,tempScope:i})}):r instanceof Map?[].concat(_toConsumableArray(r)).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],o=t[1];return a({name:r,path:n,value:o,tempScope:i})}):r instanceof Set&&[].concat(_toConsumableArray(r)).forEach(function(e,t){return a({name:t,dataset:!0,path:n,value:e,tempScope:i})})}}for(var i in t)i.startsWith("TwineScript")||(r+=1,a({name:i,path:[],value:t[i],tempScope:"",type:t.TwineScript_TypeDefs&&t.TwineScript_TypeDefs[i]}));e.push.apply(e,_toConsumableArray(x)),r+=x.size,k.update(e,r),k.panel[(r?"remove":"add")+"Class"]("panel-variables-empty")}),j=void 0;r.on("set",function(e,t,r){if(e!==n.variables&&e.TwineScript_VariableStoreName&&!e.TwineScript_VariableStoreName.match(/#\d+$/)){var a=e.TwineScript_VariableStoreName,i=e.TwineScript_TypeDefs&&e.TwineScript_TypeDefs[t],o=[].concat(_toConsumableArray(x)).find(function(e){return e.name===t&&e.tempScope===a});o?o.value=r:x.add({name:t,path:[],value:r,tempScope:a,type:i})}O(),j()}).on("delete",function(){O(),j()}),k.panel.append("<div class='panel-variables-bottom'>\n\t\t\t<button class='panel-variables-copy'>Copy $ variables as (set:) call</button>\n\t\t\t<input class='clipboard' type=\"text\" style='opacity:0;pointer-events:none;position:absolute;'></input>\n\t\t</div>").removeAttr("hidden"),k.tab.addClass("enabled");var A=k.panel.find(".clipboard");g.on("click",".panel-variables-copy",function(){var e=[];for(var t in n.variables)t.startsWith("TwineScript")||e.push("$"+t+" to "+m(n.variables[t]));A.val("(set:"+e+")")[0].select(),document.execCommand("copy")});var C=u.create({className:"enchantments",tabName:"Enchantment",rowAdd:function(t){var n=t.scope,r=t.changer,a=t.name,i=t.localHook,o=void 0;return o=r?l(h(r)):"<em>enchanted via ("+a+":)</em>",e('<div class="enchantment-row">').data("enchantment",t).append("<td><span class='enchantment-name'>"+m(n)+(i?"</span><span class=enchantment-local>"+("function"==typeof i.TwineScript_ToSource?i.TwineScript_ToSource():i.attr("name")?"?"+i.attr("name"):"an unnamed hook"):"")+"</span></td><td class='enchantment-value'>"+o+"</td>"+(r?"<td class='panel-row-buttons'><tw-folddown tabindex=0>(source:)</tw-folddown></td>":"")).add(r?"<tr class='panel-row-source' style='display:none'><td colspan='3'>"+l(m(r))+"</td></tr>":"")},rowCheck:function(e,t){return t.data("enchantment")===e},columnHead:function(){return'<tr class="panel-head"><th>Scope</th><th>Value</th></div>'}}),E=d(function(e){C.update(e.enchantments,e.enchantments.length)});c.on("add",E).on("remove",E);var _=c.create(f),N=u.create({className:"storylets",tabName:"Storylet",rowAdd:function(t){var n=t.name,r=t.active,a=t.storyletSource,i=t.exclusive,o=t.urgent;return e('<tr class="storylet-row '+(r?"":"storylet-closed")+'">').attr("data-name",n).append("<td class='storylet-name'>"+n+"</td><td class='storylet-lambda'>"+a+"</td><td class='storylet-exclusive'>"+i+"</td><td class='storylet-urgent'>"+o+"</td>")},rowCheck:function(e,t){var n=e.name;return t.attr("data-name")===l(n+"")},columnHead:function(){return"<tr class=\"panel-head\"><th>Name</th><th>Condition</th><th class='storylet-exclusive'>Exclusivity</th><th class='storylet-urgent'>Urgency</th></tr>"}});N.tab.hide(),j=d(function(){var e=s.getStorylets(_),t=a.containsError(e),n=s.allStorylets();N.update(n.map(function(n){return{name:n.get("name"),storyletSource:n.get("storylet").TwineScript_ToSource(),active:!t&&e.some(function(e){return e.get("name")===n.get("name")}),exclusive:"number"==typeof n.get("exclusivity")?n.get("exclusivity"):0,urgent:"number"==typeof n.get("urgency")?n.get("urgency"):0}}),t?0:e.length),N.panel[(t?"add":"remove")+"Class"]("storylet-error");var r=n.some(function(e){return e.get("exclusivity")&&"number"==typeof e.get("exclusivity")}),i=n.some(function(e){return e.get("urgency")&&"number"==typeof e.get("urgency")});N.panel[(r?"add":"remove")+"Class"]("panel-exclusive"),N.panel[(i?"add":"remove")+"Class"]("panel-urgent"),n.length&&N.tab.show()});var P=u.create({className:"source",tabName:"Source",rowAdd:e.noop,rowCheck:e.noop,tabUpdate:e.noop,columnHead:e.noop});P.tab.text("Source");var I=u.create({className:"errors",tabName:"Error",rowAdd:e.noop,rowCheck:e.noop,columnHead:e.noop}),M=function(t,r){if("propagated"!==t.type){I.panelRows.children().length>500&&I.panelRows.children(":first-child").remove();var a=e('<tr class="error-row"><td class="error-passage">'+n.passage+'</td><td class="error-message">'+t.message+"</td></tr>");a.find(".error-message").attr("title",r),I.panelRows.append(a),I.tabUpdate(I.panelRows.children().length)}};function D(){if(x=new Set,O(),j(),C.panelRows.empty(),C.tabUpdate(0),n.passage){var e=s.get(n.passage);e&&P.panelRows.text(e.get("source"))}}a.on("error",M),v.prepend(k.panel,C.panel,I.panel,N.panel,P.panel),b.prepend(k.tab,C.tab,I.tab,N.tab,P.tab),n.on("forward",D).on("back",D).on("load",D),t&&(M(t,i),D()),e(document.body).append(v)}}),define("macrolib/values",["macros","utils","utils/operationutils","datatypes/colour","datatypes/gradient","datatypes/datatype","datatypes/hookset","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s){var c=t.realWhitespace,u=t.nth,l=t.anyRealLetter,p=n.subset,f=n.objectName,d=n.clone,h=n.toSource,y=e.TypeSignature,m=y.rest,g=y.zeroOrMore,v=y.either,b=y.optional,w=y.insensitiveSet,T=y.numberRange,S=y.percent,x=y.nonNegativeInteger,k=y.positiveInteger,O=y.Any,j=Math.max,A=Math.min,C=Math.round,E=Math.floor,_=Math.ceil;function N(e){return function(){var t=e.apply(void 0,arguments);return"number"!=typeof t||isNaN(t)?s.create("macrocall","This mathematical expression doesn't compute!"):t}}e.add(["str","string","text"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.join("")},[g(e.TypeSignature.either(String,Number,Boolean,Array))])("source",function(e,t){return t&&"command"===t.TwineScript_TypeID&&!t.TwineScript_ToSource?s.create("datatype","I can't construct the source code of a command created by a custom macro."):h(t)},[O])("substring",function(e,t,n,r){return p(t,n,r)},[String,parseInt,parseInt])("lowercase",function(e,t){return t.toLowerCase()},[String])("uppercase",function(e,t){return t.toUpperCase()},[String])("lowerfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toLowerCase()+e.slice(1).join("").toLowerCase()})},[String])("upperfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toUpperCase()+e.slice(1).join("").toLowerCase()})},[String])("words",function(e,t){return t.split(RegExp(c+"+")).filter(Boolean)},[String])(["str-repeated","string-repeated"],function(e,t,n){return 0===n.length?s.create("macrocall","I can't repeat an empty string."):n.repeat(t)},[x,String])(["str-reversed","string-reversed"],function(e,t){return[].concat(_toConsumableArray(t)).reverse().join("")},[String])("joined",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.join(t)},[m(String)])("plural",function(e,t,n,r){return n&&""!==r?t+" "+(1!==Math.abs(t)?r||n+"s":n):s.create("macrocall","The (plural:) macro can't be given empty strings.")},[parseInt,String,b(String)])(["str-nth","string-nth"],function(e,t){return u(t)},[parseInt])(["num","number"],function(e,t){return Number.isNaN(+t)?s.create("macrocall","I couldn't convert "+f(t)+" to a number."):+t},[String])("datatype",function(e,t){return i.from(t)},[O])("datapattern",function(e,t){return function e(t){var n,r=void 0;return Array.isArray(t)?r=t.map(e):t instanceof Map?(r=new Map,[].concat(_toConsumableArray(t)).forEach(function(t){var n=_slicedToArray(t,2),a=n[0],i=n[1];return r.set(a,e(i))})):r=i.from(t),(n=s.containsError(r))?n:r}(t)},[O])(["rgb","rgba"],function(e){return r.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3],a:arguments.length<=4?void 0:arguments[4]})},[T(0,255),T(0,255),T(0,255),b(S)])(["hsl","hsla"],function(e,t,n,a,i){return(t=C(t)%360)<0&&(t+=360),r.create({h:t,s:n,l:a,a:i})},[Number,S,S,b(S)])(["lch","lcha"],function(e,t,n,a,i){return(a=C(a)%360)<0&&(a+=360),r.create({l:t,c:n,h:a,a:i})},[S,T(0,132),Number,b(S)])("complement",function(e,t){return t.LCHRotate(180)},[r])("palette",function(e,t,n){var a=n.toLCHA(),i=a.l,o={l:i<=.75?.75+i/3:.75-3*(1-i),c:80,h:a.h,a:1},s=void 0,c=void 0,u=void 0;return s=r.create(o),o.l+=i<=.75?-.1:.1,o.l<.5&&(o.l*=.5/o.l),c=r.create(o),o.l+=i<=.85?.15:-.15,u=r.create(o),"adjacent"===t?(c=(s=s.LCHRotate(-30)).LCHRotate(30),u=s.LCHRotate(60)):"triad"===t&&(u=s.LCHRotate(180),c=s.LCHRotate(140),s=s.LCHRotate(-140)),[n,s,c,u]},[w("mono","adjacent","triad"),r])("gradient",function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if((t=C(t)%360)<0&&(t+=360),i.length<4)return s.create("datatype","(gradient:) must be given at least 2 colour-stop pairs of numbers and colours.");var c=void 0,u=[],l=i.reduce(function(e,t){if(s.containsError(e))return e;if(void 0===c)c=t;else{if("number"!=typeof c||!r.isPrototypeOf(t))return s.create("datatype","(gradient:) colour-stops should be pairs of numbers and colours, not colours and numbers.");u.push({stop:c,colour:d(t)}),c=void 0}return e},!0);return s.containsError(l)?l:void 0!==c?s.create("macrocall","This gradient has a colour-stop percent without a colour."):a.create(t,u)},[Number,m(v(S,r))])("stripes",function(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];(t=C(t)%360)<0&&(t+=360);var s=0,c=[];return i.forEach(function(e){c.push({stop:s,colour:d(e)}),s+=n,c.push({stop:s,colour:d(e)})}),a.create(t,c,!0)},[Number,k,r,m(r)])("hooks-named",function(e,t){return t?o.create({type:"name",data:t}):s.create("datatype","(hooks-named:) can't be given an empty string.")},[String])("cond",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=2){var n=arguments.length<=t+1?void 0:arguments[t+1];if(t===(arguments.length<=1?0:arguments.length-1)-1||s.containsError(n))return n;if("boolean"!=typeof n)return s.create("datatype","(cond:)'s "+u(t+1)+" value is "+f(n)+", but should be a boolean.");if(n)return arguments.length<=t+1+1?void 0:arguments[t+1+1]}return s.create("macrocall","An odd number of values must be given to (cond:), not "+(arguments.length<=1?0:arguments.length-1),"(cond:) must be given one or more pairs of booleans and values, as well as one final value.")},[Boolean,O,m(O)]),{weekday:[function(){return["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][(new Date).getDay()]+"day"},null],monthday:[function(){return(new Date).getDate()},null],currenttime:[function(){var e=new Date,t=e.getHours()<12;return(e.getHours()%12||12)+":"+((e.getMinutes()<10?"0":"")+e.getMinutes())+" "+(t?"A":"P")+"M"},null],currentdate:[function(){return(new Date).toDateString()},null],min:[A,m(Number)],max:[j,m(Number)],abs:[Math.abs,Number],sign:[Math.sign,Number],sin:[Math.sin,Number],cos:[Math.cos,Number],tan:[Math.tan,Number],floor:[E,Number],round:[C,Number],trunc:[function(e){return e>0?E(e):_(e)},Number],ceil:[_,Number],pow:[N(Math.pow),[Number,Number]],exp:[Math.exp,Number],sqrt:[N(Math.sqrt),Number],log:[N(Math.log),Number],log10:[N(Math.log10),Number],log2:[N(Math.log2),Number],random:[function(e,t){var n=void 0,r=void 0;return t?(n=A(e,t),r=j(e,t)):(n=0,r=e),r+=1,~~(Math.random()*(r-n))+n},[parseInt,e.TypeSignature.optional(parseInt)]],either:[function(){var e;return e=~~(Math.random()*arguments.length),arguments.length<=e?void 0:arguments[e]},m(O)],nth:[function(e){var t;return e<=0?s.create("datatype","(nth:)'s first value should be a positive whole number, not "+e):(t=(e-1)%(arguments.length<=1?0:arguments.length-1)+1,arguments.length<=t?void 0:arguments[t])},[parseInt,m(O)]],"":function(){var t=this;Object.keys(this).forEach(function(n){if(n){var r=t[n][0],a=t[n][1];e.add(n,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return r.apply(void 0,n)},a)}})}}[""]()}),define("macrolib/commands",["jquery","macros","utils","state","passages","renderer","engine","internaltypes/twineerror","internaltypes/twinenotifier","datatypes/assignmentrequest","datatypes/hookset","datatypes/codehook","datatypes/lambda","datatypes/colour","datatypes/gradient","internaltypes/varref","datatypes/typedvar","datatypes/varbind","utils/operationutils","utils/renderutils"],function(e,t,n,r,a,i,o,s,c,u,l,p,f,d,h,y,m,g,v,b){var w=v.printBuiltinValue,T=v.objectName,S=v.clone,x=v.toSource,k=b.dialog,O=b.geomParse,j=b.geomStringRegExp,A=t.TypeSignature,C=A.Any,E=A.Everything,_=A.rest,N=A.either,P=A.optional,I=A.zeroOrMore,M=A.positiveInteger,D=A.positiveNumber,R=Object.assign,L=Math.floor,q=Math.ceil,F=Math.abs,V=Math.max,H=Math.min,z=e.noop;function $(e){return"("+e+" "+o.options.ifid+") "}["set","put","unpack"].forEach(function(e){return t.add(e,function(t){for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n+=1){var r=arguments.length<=n+1?void 0:arguments[n+1];if("into"===r.operator&&"set"===e)return s.create("macrocall","Please say 'to' when using the (set:) macro.");if("to"===r.operator&&"set"!==e)return s.create("macrocall","Please say 'into' when using the (put:) or (unpack:) macro.");if((y.isPrototypeOf(r.dest)||m.isPrototypeOf(r.dest))===("unpack"===e))return s.create("macrocall","unpack"===e?"Please use the (unpack:) macro with arrays, datamaps or (p:) patterns containing variables to the right of 'into'.":"Please use the ("+e+":) macro with just single variables and typed variables to the "+("set"===e?"left of 'to'.":"right of 'into'."));var a=r.set();if(s.containsError(a))return a}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a ("+e+":) operation",TwineScript_ObjectName:"a ("+e+":) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)])}),t.add("move",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return s.create("macrocall","Please say 'into' when using the (move:) macro.");var r=n.set(!0);if(s.containsError(r))return r}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a (move:) operation",TwineScript_ObjectName:"a (move:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)]),t.addCommand("display",function(e){if(!a.hasValid(e))return s.create("macrocall","I can't (display:) the passage '"+e+"' because it doesn't exist.")},function(e,t,r){return R(e,{source:n.unescape(a.get(r).get("source"))})},[String])("print",z,function(e,t,n){return R(e,{source:w(n)})},[C])(["verbatim-print","v6m-print"],z,function(e,t,n){return R(e,{verbatim:!0,source:w(n)})},[C])(["verbatim-source","v6m-source"],function(e){if(e&&"command"===e.TwineScript_TypeID&&!e.TwineScript_ToSource)return s.create("datatype","I can't construct the source code of a command created by a custom macro.")},function(e,t,n){return R(e,{verbatim:!0,source:w(x(n))})},[C])("go-to",function(e){if(!a.hasValid(e))return s.create("macrocall","I can't (go-to:) the passage '"+e+"' because it doesn't exist.")},function(e,t,n){return requestAnimationFrame(function(){return o.goToPassage(n,{transition:e.data.passageT8n})}),"blocked"},[String])("undo",z,function(e){return r.pastLength<1?s.create("macrocall","I can't (undo:) on the first turn."):(requestAnimationFrame(function(){return o.goBack({transition:e.data.passageT8n})}),"blocked")},[]),n.onStartup(function(){return e(n.storyElement).on("click.icon","tw-icon",function(t){var n=e(this),a=n.data("clickEvent"),i=n.attr("alt");a&&a(n),"Undo"===i&&(t.stopPropagation(),o.goBack()),"Redo"===i&&(t.stopPropagation(),o.goForward()),"Fullscreen"===i&&(t.stopPropagation(),o.toggleFullscreen()),"Restart"===i&&(r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload())})}),[["Undo","&#8630;",function(){return r.pastLength>0}],["Redo","&#8631;",function(){return r.futureLength>0}],["Fullscreen","&#9974;",function(){return document.fullscreenEnabled||document.msFullscreenEnabled}],["Restart","&#10226;",Object]].forEach(function(e){var n=_slicedToArray(e,3),r=n[0],a=n[1],i=n[2];t.addCommand("icon-"+r.toLowerCase(),function(e,t){if("string"==typeof e&&"string"==typeof t){var n=[].concat(_toConsumableArray(e)).length,a=[].concat(_toConsumableArray(t)).length;if(n>1&&a>1)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 1 character long, for its icon.");if(1===n&&1===a)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 2 or more characters long, for its label.")}},function(e,t,n,o){if("string"==typeof o&&1===[].concat(_toConsumableArray(o)).length||"string"==typeof n&&[].concat(_toConsumableArray(n)).length>1){var s=[o,n];n=s[0],o=s[1]}return R(e,{source:'<tw-icon tabindex=0 alt="'+r+'" '+(o?'data-label="'+o.replace('"',"&quot;")+'"':"")+' title="'+r+'" '+(i()?"":'style="visibility:hidden"')+">"+(n||a)+"</tw-icon>"})},[P(String),P(String)])}),t.addCommand("icon-counter",function(e,t,n){var r=" label string given to (icon-counter:) can't be empty or only whitespace.";return t&&t.trim()?"string"!=typeof n||n.trim()?void 0:s.create("datatype","The 2nd "+r):s.create("datatype","The 1st "+r)},function(e,t,r,a,i){e.attr.push({"data-2bind":!0}),e.data.twoWayBindEvent=function(t,n,o){if(r.varRef.matches(n,o)){var s=r.varRef.get();if("number"==typeof s)e.target.children("tw-icon").text(s>0?L(s):q(s)).attr("data-label",1!==F(s)&&void 0!==i?i:a)}};var o=r.varRef.get();return"number"!=typeof o?s.create("datatype","(icon-counter:) can only be bound to a variable holding a number, not "+T(o)+"."):R(e,{source:'<tw-icon data-label="'+n.escape(1!==F(o)&&void 0!==i?i:a)+'">'+(o>0?L(o):q(o))+"</tw-icon>"})},[g,String,P(String)]),t.addCommand("meter",function(e,t,n,r){return"string"!=typeof r||r.trim()?-1===n.search(j)||!n.includes("=")&&n.length>1?s.create("datatype",'The (meter:) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(n)+"."):void 0:s.create("datatype","The label string given to (meter:) can't be empty or only whitespace.")},function(e,t,n,r,a,i,o){i&&"string"!=typeof i&&(o=i,i=void 0),o||(o=d.create({h:0,s:0,l:.5,a:.5})),d.isPrototypeOf(o)&&(o=h.create(90,[{colour:o,stop:0},{colour:o,stop:1}]));var c=O(a),u=c.marginLeft,l=c.size,p=u>0&&Math.ceil(u+l)<100,f=function(e){var t=V(0,H(1,e/r)),n=o.repeating?o:o.multiply(r/e);return"height:100%;background-repeat:no-repeat;background-image:"+(p?R(n,n.repeating?{}:{angle:270}).toLinearGradientString()+", ":"")+R(n,n.repeating?{}:{angle:p||0===u?90:270}).toLinearGradientString()+";background-size:"+(p?Array(2).fill(50*t+"%"):100*t+"%")+";background-position-x:"+(p?-100/(2-t)+100+"%,"+100/(2-t)+"%":0===u?"left":"right")+";text-align:"+(p?"center":0===u?"left":"right")};e.styles.push({"margin-left":u+"%",width:l+"%",height:"1.5em",display:"block"}),e.attr.push({"data-2bind":!0});var y=i&&t.stackTop.tempVariables;e.data.twoWayBindEvent=function(t,r,a){if(n.varRef.matches(r,a)){var o=n.varRef.get();if("number"==typeof o){var s=e.target.children("tw-meter");s.attr("style",f(o)),i&&e.section.renderInto("",null,{source:i,target:s,append:"replace",transitionDeferred:!1},y)}}};var m=n.varRef.get();return"number"!=typeof m?s.create("datatype","(meter:) can only be bound to a variable holding a number, not "+T(m)+"."):R(e,{source:'<tw-meter style="'+f(m)+'">'+(i||"")+"</tw-meter>"})},[g,D,String,P(N(String,d,h)),P(N(d,h))]),[["cycling-link"],["seq-link","sequence-link"]].forEach(function(e,n){return t.addCommand(e,function(){return""===(arguments.length<=0?void 0:arguments[0])?s.create("datatype","The first string in a ("+e[0]+":) can't be empty."):arguments.length<=(g.isPrototypeOf(arguments.length<=0?void 0:arguments[0])?2:1)?s.create("datatype","I need two or more strings to "+(n?"sequence":"cycle")+" through, not just '"+(t=arguments.length-1,arguments.length<=t?void 0:arguments[t])+"'."):void 0;var t},function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];var o=void 0;g.isPrototypeOf(a[0])&&(o=a.shift());var c=0;if(o&&"two way"===o.bind){e.attr.push({"data-2bind":!0});var u=a.indexOf(o.varRef.get());u>-1&&(c=u)}var l=t.stackTop.tempVariables;function p(t,r){var i=c>=a.length-1&&n,u=""===a[c]?"":i?a[c]:"<tw-link>"+a[c]+"</tw-link>";if(i&&(e.data.clickEvent=void 0),o&&!r){var p=o.set(a[c]);if(s.containsError(p))return void t.replaceWith(p.render(a[c]))}var f=R({},e,{source:u,transitionDeferred:!1});e.section.renderInto("",null,f,l)}a[c]&&(e.data.clickEvent=function(e){c=(c+1)%a.length,p(e,!1)})&&(e.data.twoWayBindEvent=function(e,t,n){if(o.varRef.matches(t,n)){var r=o.varRef.get(),i=a.indexOf(r);i>-1&&i!==c&&(c=i,p(e,!0))}});var f="<tw-link>"+a[c]+"</tw-link>";if(o){var d=o.set(a[c]);if(s.containsError(d))return d}return R(e,{source:f,append:"replace",transitionDeferred:!0})},[N(g,String),_(String)])}),n.onStartup(function(){return e(n.storyElement).on("change.dropdown-macro","select",function(){var t=e(this),n=t.closest("tw-expression, tw-hook").data("dropdownEvent");n&&n(t)})}),t.addCommand("dropdown",function(e){var t;return""===(arguments.length<=1?void 0:arguments[1])||""===(t=(arguments.length<=1?0:arguments.length-1)-1+1,arguments.length<=t?void 0:arguments[t])?s.create("datatype","The first or last strings in a (dropdown:) can't be empty.","Because empty strings create separators within (dropdown:)s, having them at the start or end doesn't make sense."):(arguments.length<=1?0:arguments.length-1)<=1?s.create("datatype","I need two or more strings to create a (dropdown:) menu, not just "+(arguments.length<=1?0:arguments.length-1)+"."):void 0},function(t,r,a){for(var i=arguments.length,o=Array(i>3?i-3:0),c=3;c<i;c++)o[c-3]=arguments[c];var u=0;if("two way"===a.bind){t.attr.push({"data-2bind":!0});var l=o.indexOf(a.varRef.get());l>-1&&(u=l)}var p=Math.max.apply(Math,_toConsumableArray(o.map(function(e){return[].concat(_toConsumableArray(e)).length}))),f="<select>"+o.map(function(e,t){return"<option"+(t===u?" selected":"")+(""===e?" disabled":"")+">"+n.escape(e||"\u2500".repeat(p))+"</option>"}).join("\n")+"</select>";t.data.dropdownEvent=function(e){var t=e.val(),n=a.set(t);s.containsError(n)&&e.replaceWith(n.render(t))},t.data.twoWayBindEvent=function(e,t,n){if(a.varRef.matches(t,n)){var r=a.varRef.get(),i=o.indexOf(r);i>-1&&i!==u&&(e.find("select").val(r),u=i)}},t.styles.push({"background-color":function(){return n.parentColours(e(this)).backgroundColour}});var d=a.set(o[u]);return s.containsError(d)?d:R(t,{source:f,append:"replace"})},[g,String,_(String)]),n.onStartup(function(){return e(n.storyElement).on("input.checkbox-macro","input[type=checkbox]",function(){var t=e(this),n=t.closest("tw-expression").data("checkboxEvent");n&&n(t)})});var B=1;t.addCommand("checkbox",function(){},function(e,t,n,r){var a=!1,i="checkbox-"+ ++B;if("two way"===n.bind){e.attr.push({"data-2bind":!0});var o=n.varRef.get();"boolean"==typeof o&&(a=o),e.data.twoWayBindEvent=function(e,t,r){if(n.varRef.matches(t,r)){var a=n.varRef.get();"boolean"==typeof a&&e.children("input[type=checkbox]").prop("checked",a)}}}return e.data.checkboxEvent=function(e){var t=e.is(":checked"),r=n.set(t);s.containsError(r)&&e.replaceWith(r.render(""))},R(e,{source:'<input id="'+i+'" type="checkbox" '+(a?"checked":"")+'><label for="'+i+'">'+r+"</label>",append:"replace"})},[g,String]),n.onStartup(function(){return e(document).on("fullscreenchange",function(){e("input[type=checkbox][id^=fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression").data("fullscreenEvent")||Object)(n)})})}),t.addCommand("checkbox-fullscreen",function(){},function(t,n,r){var a="fullscreenCheckbox-"+ ++B;return t.data.fullscreenEvent=function(t){return e(t).prop("checked",!(!document.fullscreenElement&&!document.msFullscreenElement))},t.data.checkboxEvent=function(){return o.toggleFullscreen()},R(t,{source:'<input id="'+a+'" type="checkbox" '+(document.fullscreenEnabled||document.msFullscreenEnabled?" ":"disabled ")+(document.fullscreenElement||document.msFullscreenElement?"checked":"")+'><label for="'+a+'">'+r+"</label>",append:"replace"})},[String]),n.onStartup(function(){return e(n.storyElement).on("input.input-box-macro","textarea",function(){var t=e(this),n=t.closest("tw-expression").data("inputBoxEvent");n&&n(t)})}),["input-box","force-input-box"].forEach(function(e){return t.addCommand(e,function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=g.isPrototypeOf(n[0]),i="number"==typeof n[1+a],o="string"==typeof n[1+a+i],c=n[+a];if("string"!=typeof c||-1===c.search(j)||!c.includes("=")&&c.length>1)return s.create("datatype","The ("+e+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(c)+".");if("force-input-box"===e&&!o)return s.create("datatype","The ("+e+":) macro requires a string of text to forcibly input.");var u=1+a+i+o;return n.length>u?s.create("datatype","An incorrect combination of values was given to this ("+e+":) macro."):void 0},function(t,r){for(var a=arguments.length,i=Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];var c="force-input-box"===e,u=g.isPrototypeOf(i[0]),l="number"==typeof i[1+u],p=u&&i[0],f=l?i[1+u]:3,d=O(i[+u]),h=d.marginLeft,y=d.size,m="string"==typeof i[1+u+l]?i[1+u+l]:"",v=c?"":m;if("two way"===p.bind){t.attr.push({"data-2bind":!0});var b=p.varRef.get();if("string"==typeof b){v=c?m.slice(0,b.length):b;var w=p.set(v);if(s.containsError(w))return w}t.data.twoWayBindEvent=function(e,t,n){if(p.varRef.matches(t,n)){var r=p.varRef.get();"string"==typeof r&&e.find("textarea").val(c?m.slice(0,r.length):r)}}}else if(p){var T=p.set(c?"":m);if(s.containsError(T))return T}!c&&p&&(t.data.inputBoxEvent=function(e){var t=e.val(),n=p.set(t);s.containsError(n)&&e.replaceWith(n.render(""))});var S='<textarea style="width:100%" rows='+f+">"+n.escape(v)+"</textarea>";if(c){var x=Array.from(m);t.data.inputBoxEvent=function(e){var t=e.val().length,n=x.slice(0,t).join("");if(e.val(n),p){var r=p.set(n);s.containsError(r)&&e.replaceWith(r.render(""))}return!0}}return t.styles.push({display:"block","margin-left":h+"%",width:y+"%","border-style":function(){return this.style.borderStyle||"solid"}}),R(t,{source:S,append:"replace"})},[N(g,String),P(N(M,String)),P(N(M,String)),P(String)])}),["show","rerun"].forEach(function(n){return t.addCommand(n,z,function(t,r){for(var a=arguments.length,i=Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return i.forEach(function(a){return a.forEach(r,function(a){var i=a.data("hidden");if(void 0!==i!=("rerun"===n))if(a.removeData("hidden"),i instanceof e)a.empty().append(i);else{var o=a.data("tempVariables");r.renderInto("",null,R({},t,{append:"replace",source:a.data("originalSource")||"",target:a}),o&&Object.create(o))}})}),t},[_(l)])});var W=function(e){return["I can't use a dialog macro in "+e+".","Please rewrite this without putting such macros here."]};t.addCommand("hide",z,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){return t.forEach(e,function(e){Boolean(e.data("hidden"))||e.data("hidden",e.contents().detach())})})},[_(l)],!1)("stop",z,z,[],!1)("load-game",z,function(e,t){var n=localStorage.getItem($("Saved Game")+t);if(!n)return s.create("saving","I can't find a save slot named '"+t+"'!");var a=r.deserialise(e,n);if(a instanceof Error){var i=k({message:"Sorry to interrupt... The story tried to load saved data, but there was a problem.\n"+a.message+"\n\nThat data might have been saved from a different version of this story. Should I delete it?\n(Type 'delete' and choose Yes to delete it.)\n\nEither way, the story will now continue without loading the data.",defaultValue:"",buttons:[{name:"Yes",confirm:!0,callback:function(){"delete"===i.find("input").last().val()&&localStorage.removeItem($("Saved Game")+t),e.unblock("")}},{name:"No",cancel:!0,callback:function(){return e.unblock()}}]});return"blocked"}requestAnimationFrame(o.showPassage.bind(o,r.passage,!1))},[String],!1)("mock-visits",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!o.options.debug)return s.create("operation","(mock-visits:) cannot be used outside of debug mode.","This macro is not meant to be used outside of debugging your story.");var r=t.find(function(e){return!a.hasValid(e)});return r?s.create("datatype","I can't mock-visit '"+r+"' because no passage with that name exists."):void 0},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];r.mockVisits=S(n)},[_(String)],!1)(["dialog","alert"],function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(g.isPrototypeOf(e)){if("two way"===e.bind)return s.create("datatype","(dialog:) shouldn't be given two-way bound variables.");if(void 0===t)return s.create("datatype","(dialog:) needs a message string to display.")}else void 0!==t&&a.unshift(t);var o=a.findIndex(function(e){return""===e});if(o>-1)return s.create("datatype","(dialog:)'s "+n.nth(o+1)+" link text shouldn't be an empty string.")},function(e,t,n,r){for(var a=arguments.length,i=Array(a>4?a-4:0),o=4;o<a;o++)i[o-4]=arguments[o];return g.isPrototypeOf(n)||(void 0!==r&&i.unshift(r),r=n,n=void 0),i.length||(i=["OK"]),k({section:t,message:r,cd:e,buttons:i.map(function(e){return{name:e,callback:function(){t.unblock(n&&n.set(e)||"")}}})}),"blocked"},[N(g,String),I(String)])("open-url",z,function(e,t){window.open(t,"")},[String],!1)(["restart","reload"],z,function(){if(r.pastLength<1)return s.create("infinite","I mustn't (restart:) the story in the starting passage.");r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload()},[],!1)("goto-url",z,function(e,t){window.location.assign(t)},[String],!1)("ignore",z,z,[I(E)])("assert-exists",function(e){if(""===e)return s.create("datatype","(assert-exists:) mustn't be given an empty string.")},function(e,t,n){var r=0;return("string"==typeof n?l.create({type:"string",data:n}):n).forEach(t,function(){++r}),r?e:s.create("assertion","I didn't see any "+("string"==typeof n?"text occurrences of":"hooks matching")+" "+x(n)+" in this passage.")},[N(l,String)]),t.add("assert",function(e,t){return t?{TwineScript_TypeID:"instant",TwineScript_TypeName:"an (assert:) operation",TwineScript_ObjectName:"an (assert:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}:R(s.create("assertion","An assertion failed: "),{appendTitleText:!0})},[Boolean])("save-game",function(e,t,n){if(n=n||"",!r.hasStorage)return!1;var a=r.serialise();if(s.containsError(a))return a;if(!1===a)return!1;try{return localStorage.setItem($("Saved Game")+t,a),localStorage.setItem($("Saved Game Filename")+t,n),!0}catch(e){return!1}},[String,P(String)])("prompt",function(e,t,n,r,a){if(e.stackTop&&e.stackTop.evaluateOnly)return s.create.apply(s,["macrocall"].concat(_toConsumableArray(W(e.stackTop.evaluateOnly))));if(""===a)return s.create("datatype","The text for (prompt:)'s confirm link can't be blank.");var i=k({section:e,message:t,defaultValue:n,buttons:[{name:a||"OK",confirm:!0,callback:function(){return e.unblock(i.find("input").last().val())}}].concat(""===r?[]:{name:r||"Cancel",cancel:!0,callback:function(){return e.unblock(n)}})});setTimeout(function(){return i.find("input").last().focus()},100)},[String,String,P(String),P(String)])("confirm",function(e,t,n,r){return e.stackTop&&e.stackTop.evaluateOnly?s.create.apply(s,["macrocall"].concat(_toConsumableArray(W(e.stackTop.evaluateOnly)))):""===r?s.create("datatype","The text for (confirm:)'s confirm link can't be blank."):void k({section:e,message:t,defaultValue:!1,buttons:[{name:r||"OK",confirm:!0,callback:function(){return e.unblock(!0)}}].concat(""===n?[]:{name:n||"Cancel",cancel:!0,callback:function(){return e.unblock(!1)}})})},[String,P(String),P(String)])("page-url",function(){return window.location.href},[]),i.options.blockerMacros.push("prompt","confirm")}),define("macrolib/datastructures",["jquery","utils","utils/naturalsort","macros","utils/operationutils","state","engine","passages","datatypes/lambda","datatypes/datatype","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l,p,f){var d=t.shuffled,h=t.permutations,y=a.objectName,m=a.subset,g=a.collectionType,v=a.isValidDatamapName,b=a.is,w=a.unique,T=a.clone,S=a.range,x=r.TypeSignature,k=x.optional,O=x.rest,j=x.either,A=x.zeroOrMore,C=x.Any,E=x.nonNegativeInteger;r.add(["a","array"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n},A(j(l,C)))("range",function(e,t,n){return S(t,n)},[parseInt,parseInt])("subarray",function(e,t,n,r){return m(t,n,r)},[Array,parseInt,parseInt])("reversed",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reverse().map(T)},A(C))("shuffled",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return d.apply(void 0,n).map(T)},[C,O(C)])("sorted",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.sort(n("en"))},[j(Number,String),O(j(Number,String))])("rotated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return 0===(t*=-1)?f.create("macrocall","I can't rotate these values by 0 positions."):Math.abs(t)>=r.length?f.create("macrocall","I can't rotate these "+r.length+" values by "+t+" positions."):r.slice(t).concat(r.slice(0,t)).map(T)},[parseInt,C,O(C)])("rotated-to",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);if(f.containsError(i))return i;if(!i.length)return f.create("macrocall","None of these "+r.length+" values matched the lambda, so I can't rotate them.");var o=r.indexOf(i[0]);return r.slice(o).concat(r.slice(0,o)).map(T)},[c.TypeSignature("where"),C,O(C)])("repeated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];for(var i=[];t-- >0;)i.push.apply(i,r);return i.map(T)},[E,O(C)])("interlaced",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=Math.min.apply(Math,_toConsumableArray(n.map(function(e){return e.length}))),i=[],o=0;o<a;o+=1)for(var s=0;s<n.length;s+=1)i.push(T(n[s][o]));return i},[Array,O(Array)])("permutations",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?h.apply(void 0,n):[]},[A(C)]),r.add("altered",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r.map(function(n,r){return t.apply(e,{loop:n,pos:r+1})})},[c.TypeSignature("via"),A(C)])("find",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return t.filter(e,r)},[c.TypeSignature("where"),A(C)])(["all-pass","pass"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);return f.containsError(i)||i.length===r.length},[c.TypeSignature("where"),A(C)])("some-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);return f.containsError(i)||i.length>0},[c.TypeSignature("where"),A(C)])("none-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=t.filter(e,r);return f.containsError(i)||0===i.length},[c.TypeSignature("where"),A(C)])("folded",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return"where"in t&&(r=t.filter(e,r)),f.containsError(r)||r.reduce(function(n,r,a){return t.apply(e,{making:n,loop:r,pos:a+1})})},[j(c.TypeSignature("where","via","making"),c.TypeSignature("via","making")),O(C)]),r.add("datanames",function(e,t){return Array.from(t.keys()).sort(n("en"))},[Map])("datavalues",function(e,t){return Array.from(t.entries()).sort(n("en",function(e){return String(e[0])})).map(function(e){return T(e[1])})},[Map])("dataentries",function(e,t){return Array.from(t.entries()).sort(function(e,t){return[e[0],t[0]].sort(n("en"))[0]===e[0]?-1:1}).map(function(e){return new Map([["name",e[0]],["value",T(e[1])]])})},[Map])("history",function(e,t){var n=i.mockVisits.concat(i.pastPassageNames());if(!t)return n;var r=t.filter(e,n.map(function(e){return s.get(e)}));return f.containsError(r)?r:r.map(function(e){return e.get("name")})},[k(c.TypeSignature("where"))])("passage",function(e,t){return T(s.get(t||i.passage))||f.create("macrocall","There's no passage named '"+t+"' in this story.")},[k(String)])("passages",function(e,t){var r=n("en"),a=[].concat(_toConsumableArray(s.values())).map(function(e){return T(e)}),i=t?t.filter(e,a):a,o=f.containsError(i);return o||i.sort(function(e,t){return r(e.get("name"),t.get("name"))})},[k(c.TypeSignature("where"))])("open-storylets",function(e,t){if(e.stackTop.evaluateOnly)return f.create("macrocall","(open-storylets:) can't be used in "+e.stackTop.evaluateOnly+".");var n=s.getStorylets(e,t),r=f.containsError(n);return r||n.map(T)},[k(c.TypeSignature("where"))])("savedgames",function(){function e(e){return"("+e+" "+o.options.ifid+") "}var t=0,n=void 0,r=new Map;do{if(!i.hasStorage)break;n=localStorage.key(t),t+=1;var a=e("Saved Game");n&&n.startsWith(a)&&(n=n.slice(a.length),r.set(n,localStorage.getItem(e("Saved Game Filename")+n)))}while(n);return r},[])(["datamap","dm"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=void 0,i=new Map,o=n.reduce(function(e,t){var n=void 0;if(f.containsError(e))return e;if(void 0===a)a=t;else{if(n=f.containsError(v(i,a)))return n;if(i.has(a))return f.create("macrocall","You used the same data name ("+y(a)+") twice in the same (datamap:) call.");i.set(a,T(t)),a=void 0}return e},!0);return f.containsError(o)?o:void 0!==a?f.create("macrocall","This datamap has a data name without a value."):i},A(j(l,C)))(["dataset","ds"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Set(n.filter(w).map(T))},A(C))("count",function e(t,n){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(a.length>1){var o,s=a.map(function(r){return e(t,n,r)});return(o=f.containsError(s))?o:s.reduce(function(e,t){return e+t},0)}var c=a[0];switch(g(n)){case"dataset":case"datamap":return f.create("macrocall","(count:) shouldn't be given a datamap or dataset.","You should use the 'contains' operator instead. For instance, write: $variable contains 'value'.");case"string":return"string"!=typeof c?f.create("macrocall",y(n)+" can't contain  "+y(c)+" because it isn't also a string."):c?n.split(c).length-1:0;case"array":return n.reduce(function(e,t){return e+b(t,c)},0);default:return f.create("macrocall",y(n)+" can't contain values, let alone "+y(c)+".")}},[C,O(C)])}),define("macrolib/stylechangers",["jquery","macros","utils","utils/renderutils","datatypes/colour","datatypes/hookset","datatypes/gradient","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l){var p=r.geomParse,f=r.geomStringRegExp,d=Object.assign,h=t.TypeSignature,y=h.either,m=h.wrapped,g=h.optional,v=h.Any,b=h.Everything,w=h.zeroOrMore,T=h.rest,S=h.insensitiveSet,x=h.positiveNumber,k=h.positiveInteger,O=h.nonNegativeNumber,j=h.percent,A=[m(Boolean,'If you gave a number, you may instead want to check that the number is not 0. If you gave a string, you may instead want to check that the string is not "".')];n.onStartup(function(){return e(n.storyElement).on("mouseenter.hover-macro","[hover=false]",function(){var t=e(this),n=t.data("hoverChanger");t.data({mouseoutStyle:t.attr("style")||""}),u.create({target:t},n).update(),t.attr("hover",!0)}).on("mouseleave.hover-macro","[hover=true]",function(){var t=e(this),n=t.data("mouseoutStyle");t.attr("style",n).removeData("mouseoutStyle").attr("hover",!1)})});var C,E,_=S("instant","dissolve","fade","rumble","shudder","pulse","zoom","flicker","slideleft","slideright","slideup","slidedown","fadeleft","faderight","fadeup","fadedown","blur"),N=S("dotted","dashed","solid","double","groove","ridge","inset","outset","none");t.addChanger("if",function(e,t){return s.create("if",[t])},function(e,t){return e.enabled=e.enabled&&t},A)("unless",function(e,t){return s.create("unless",[t])},function(e,t){return e.enabled=e.enabled&&!t},A)("elseif",function(e,t){return"lastHookShown"in e.stack[0]?s.create("elseif",[!1===e.stack[0].lastHookShown&&!!t]):l.create("macrocall","There's no (if:) or something else before this to do (else-if:) with.")},function(e,t){return e.enabled=e.enabled&&t},A)("else",function(e){return"lastHookShown"in e.stack[0]?s.create("else",[!1===e.stack[0].lastHookShown]):l.create("macrocall","There's nothing before this to do (else:) with.")},function(e,t){return e.enabled=e.enabled&&t},null)("hidden",function(){return s.create("hidden")},function(e){return e.enabled=!1},null)(["verbatim","v6m"],function(){return s.create("verbatim")},function(e){return e.verbatim=!0},null)("live",function(e,t){return s.create("live",[t])},function(e,t){e.enabled=!1,e.data.live={delay:t}},g(Number))("event",function(e,t){return s.create("event",[t])},function(e,t){e.enabled=!1,e.data.live={event:t}},c.TypeSignature("when"))("more",function(){return s.create("more")},function(e){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return 0!==e.eval("Operations").Identifiers.exits?[]:[!0]}}}},null)("after",function(e,t,n){return s.create("after",[t].concat(void 0!==n?[n]:[]))},function(e,t,r){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return n.anyInputDown()&&(t-=r),e.eval("Operations").Identifiers.time>t?[!0]:[]}}}},[x,g(O)])("hook",function(e,t){return t?s.create("hook",[t]):l.create("datatype","(hook:) names can't be empty strings.")},function(e,t){return e.attr.push({name:t})},[String])(["for","loop"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return t.loop?s.create("for",[t].concat(r)):l.create("datatype","The lambda provided to (for:) must refer to a temp variable, not just 'it'.")},function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i,o=t.filter(e.section,r);if(i=l.containsError(o))return i;e.loopVars[t.loop.getName()]=o||[]},[c.TypeSignature("where"),w(v)])(["transition","t8n"],function(e,t){return s.create("transition",[n.insensitiveName(t)])},function(t,r){return t.transition=r,"zoom"===r&&(t.transitionOrigin=function(){var t=e(this).offset(),r=t.left,a=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-a)+"px"}),t},[_])(["transition-time","t8n-time"],function(e,t){return s.create("transition-time",[t])},function(e,t){return e.transitionTime=t,e.data.passageT8n=d(e.data.passageT8n||{},{time:t}),e},[x])(["transition-delay","t8n-delay"],function(e,t){return s.create("transition-delay",[t])},function(e,t){return e.transitionDelay=t,e},[O])(["transition-skip","t8n-skip"],function(e,t){return s.create("transition-skip",[t])},function(e,t){return e.transitionSkip=t,e},[x])(["transition-depart","t8n-depart"],function(e,t){return s.create("transition-depart",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{depart:r}),"zoom"===r&&(t.data.passageT8n.departOrigin=function(){var t=e(this).offset(),r=t.left,a=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-a)+"px"}),t},[_])(["transition-arrive","t8n-arrive"],function(e,t){return s.create("transition-arrive",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{arrive:r}),"zoom"===r&&(t.data.passageT8n.arriveOrigin=function(){var t=e(this),r=t.offset(),a=r.left,i=r.top,o=t.height();return{"transform-origin":100*(n.mouseCoords.x-a)/t.width()+"% "+100*(n.mouseCoords.y-i)/o+"%",height:o+"px"}}),t},[_])("button",function(){return s.create("button",[])},function(e){return e.attr.push({class:function(){return this.className+(this.classList.contains("enchantment-button")?"":" ".repeat(this.className.length>0)+"enchantment-button")}}),e},[])(["border","b4r"],function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return s.create("border",r.map(n.insensitiveName))},function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.styles.push({display:function(){var t=e(this).css("display");return r.every(function(e){return"none"===e})||!t.includes("inline")?t:"inline-block"},"border-style":r.join(" "),"border-width":function(){return this.style.borderWidth||"2px"}}),t},[N].concat(_toConsumableArray(Array(3).fill(g(N)))))(["border-size","b4r-size"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-size",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-width":n.map(function(e){return e+"px"}).join(" ")}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))("corner-radius",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("corner-radius",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-radius":n.map(function(e){return e+"px"}).join(" "),padding:function(){return this.style.padding||n.map(function(e){return e+"px"}).join(" ")}}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))(["border-colour","b4r-colour","border-color","b4r-color"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-colour",n.map(function(e){return a.isPrototypeOf(e)?e.toRGBAString(e):e}))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-color":n.join(" ")}),e},[y(String,a)].concat(_toConsumableArray(Array(3).fill(g(y(String,a))))))("opacity",function(e,t){return s.create("opacity",[t])},function(e,t){return e.styles.push({opacity:t})},[j])("font",function(e,t){return s.create("font",[t])},function(e,t){return e.styles.push({"font-family":t}),e},[String])("align",function(e,t){var n=void 0,r=t.indexOf("><");if(!/^(==+>|<=+|=+><=+|<==+>)$/.test(t))return l.create("datatype",'The (align:) macro requires an alignment arrow ("==>", "<==", "==><=" etc.) be provided, not "'+t+'"');if(~r){var a=Math.round(r/(t.length-2)*50);n=d({"text-align":"center","max-width":"50%"},25===a?{"margin-left":"auto","margin-right":"auto"}:{"margin-left":a+"%"})}else n="<"===t[0]&&">"===t.slice(-1)?{"text-align":"justify","max-width":"50%"}:t.includes(">")?{"text-align":"right"}:{"text-align":"left"};return n.display="inline-block",s.create("align",[n])},function(e,t){e.styles.push(t)},[String])(["text-colour","text-color","color","colour"],function(e,t){return s.create("text-colour",[t])},function(e,t){return a.isPrototypeOf(t)&&(t=t.toRGBAString(t)),e.styles.push({color:t}),e},[y(String,a)])(["text-size","size"],function(e,t){return s.create("text-size",[t])},function(e,t){return e.styles.push({"font-size":24*t+"px","line-height":36*t+"px"}),e},[O])("text-indent",function(e,t){return s.create("text-indent",[t])},function(e,t){return e.styles.push({"text-indent":t+"px",display:"inline-block"}),e},[O])(["text-rotate-z","text-rotate"],function(e,t){return s.create("text-rotate-z",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" rotate("+n+"deg)"}}),t},[Number])("text-rotate-y",function(e,t){return s.create("text-rotate-y",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateY("+n+"deg)"}}),t},[Number])("text-rotate-x",function(e,t){return s.create("text-rotate-x",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateX("+n+"deg)"}}),t},[Number])(["background","bg"],function(e,t){return s.create("background",[t])},function(t,r){var i=void 0;return a.isPrototypeOf(r)?r=r.toRGBAString(r):o.isPrototypeOf(r)&&(r=r.toLinearGradientString(r)),i=a.isHexString(r)||a.isCSS3Function(r)?{"background-color":r}:r.startsWith("linear-gradient(")||r.startsWith("repeating-linear-gradient(")?{"background-image":r}:{"background-size":"cover","background-image":"url("+r+")"},t.styles.push(i,{display:function(){var t=e(this);return!t.children().length||n.childrenProbablyInline(t)?e(this).css("display"):"block"}}),t},[y(String,a,o)]).apply(void 0,_toConsumableArray((C={color:function(){return"transparent"}},E=d(Object.create(null),{none:{},bold:{"font-weight":"bold"},italic:{"font-style":"italic"},underline:{"text-decoration":"underline"},doubleunderline:{"text-decoration":"underline","text-decoration-style":"double"},wavyunderline:{"text-decoration":"underline","text-decoration-style":"wavy"},strike:{"text-decoration":"line-through"},doublestrike:{"text-decoration":"line-through","text-decoration-style":"double"},wavystrike:{"text-decoration":"line-through","text-decoration-style":"wavy"},superscript:{"vertical-align":"super","font-size":".83em"},subscript:{"vertical-align":"sub","font-size":".83em"},blink:{animation:"fade-in-out 1s steps(1,end) infinite alternate"},shudder:{animation:"shudder linear 0.1s 0s infinite"},mark:{"background-color":"hsla(60, 100%, 50%, 0.6)"},condense:{"letter-spacing":"-0.08em"},expand:{"letter-spacing":"0.1em"},outline:[{"text-shadow":function(){var t=e(this).css("color");return"-1px -1px 0 "+t+", 1px -1px 0 "+t+",-1px  1px 0 "+t+", 1px  1px 0 "+t}},{color:function(){return n.parentColours(e(this)).backgroundColour}}],shadow:{"text-shadow":function(){return"0.08em 0.08em 0.08em "+e(this).css("color")}},emboss:{"text-shadow":function(){return"0.04em 0.04em 0em "+e(this).css("color")}},smear:[{"text-shadow":function(){var t=e(this).css("color");return"0em   0em 0.02em "+t+",-0.2em 0em  0.5em "+t+", 0.2em 0em  0.5em "+t}},C],blur:[{"text-shadow":function(){return"0em 0em 0.08em "+e(this).css("color")}},C],blurrier:[{"text-shadow":function(){return"0em 0em 0.2em "+e(this).css("color")},"user-select":"none"},C],mirror:{display:"inline-block",transform:"scaleX(-1)"},upsidedown:{display:"inline-block",transform:"scaleY(-1)"},fadeinout:{animation:"fade-in-out 2s ease-in-out infinite alternate"},rumble:{animation:"rumble linear 0.1s 0s infinite"},sway:{animation:"sway linear 2.5s 0s infinite"},buoy:{animation:"buoy linear 2.5s 0s infinite"},fidget:{animation:function(){return"fidget step-end 60s "+60*-Math.random()+"s infinite"+(Math.random()<.5?" reverse":"")}}}),["text-style",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return s.create("text-style",r.map(n.insensitiveName))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a+=1)"none"===n[a]?e.styles=[]:e.styles=e.styles.concat(E[n[a]]);return e},[T(S.apply(void 0,_toConsumableArray(Object.keys(E))))]])))("collapse",function(){return s.create("collapse")},function(e){return e.attr.push({collapsing:!0}),e},[])("hover-style",function(e,t){var n=u.create(),r=(t.run(n),n.summary());return r+""=="styles"||r.every(function(e){return"styles"===e||"attr"===e})&&n.attr.every(function(e){return Object.keys(e)+""=="style"})?s.create("hover-style",[t]):l.create("datatype","The changer given to (hover-style:) must only change the hook's style.")},function(e,t){return e.data.hoverChanger=t,e.attr.push({hover:function(e,t){return void 0!==t&&t}}),e},[s])("css",function(e,t){return t.trim().endsWith(";")||(t+=";"),s.create("css",[t])},function(t,n){return t.attr.push({style:function(){return(e(this).attr("style")||"")+n}}),t},[String])("test-true",function(){return s.create("test-true",[])},function(e){return e.enabled=!0},w(b))("test-false",function(){return s.create("test-false",[])},function(e){return e.enabled=!1},w(b)),t.addCommand("animate",e.noop,function(e,t,r,a,i){r.forEach(t,function(t){var r=void 0;if("zoom"===name){var o=t.offset(),s=o.left,c=o.top;r=n.mouseCoords.x-s+"px "+(n.mouseCoords.y-c)+"px"}n.transitionIn(t,a,e.transitionTime||i,e.transitionDelay,e.transitionSkip,0,r)})},[T(i),S.apply(void 0,_toConsumableArray(_.innerType.filter(function(e){return"instant"!==e}))),g(x)]),["box","float-box"].forEach(function(r){return t.addChanger(r,function(e,t,n){var a=-1===t.search(f)||t.length>1&&!t.includes("="),i="float-box"===r&&(-1===n.search(f)||n.length>1&&!n.includes("="));return a||i?l.create("datatype","The ("+r+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not "'+(a?t:n)+'".'):s.create(r,[t,n].filter(function(e){return void 0!==e}))},function(t,a,i){var o,s=p(a),c=s.marginLeft,u=s.size,l=void 0;if("float-box"===r){var f=p(i);l=f.marginLeft,i=f.size}var h="box"===r?"%":"vw",y=(_defineProperty(o={display:"block",width:u+h,"max-width":u+h},"box"===r?"margin-left":"left",c+h),_defineProperty(o,"box-sizing","content-box"),_defineProperty(o,"overflow-y","auto"),_defineProperty(o,"padding",function(){return e(this).css("padding")||"1em"}),o);return void 0!==i&&(y.height=i+("box"===r?"em":"vh")),"float-box"===r&&d(y,{position:"fixed",top:l+"vh","background-color":function(){return n.parentColours(e(this)).backgroundColour}}),t.styles.push(y),t},[String,"box"===r?g(k):String])})}),define("internaltypes/enchantment",["jquery","utils","internaltypes/changedescriptor","datatypes/changercommand","utils/operationutils","internaltypes/twineerror","utils/renderutils"],function(e,t,n,r,a,i,o){var s=a.objectName,c=o.collapse,u={create:function(n){return t.assertOnlyHas(n,["scope","localHook","section","attr","data","changer","functions","lambda","name"]),Object.assign(Object.create(this),{enchantments:e()},n)},enchantScope:function(){var a=this,o=this.attr,u=this.data,l=this.functions,p=this.section,f=this.scope,d=this.localHook,h=this.lambda,y=[];f.forEach(p,function(m,g){if(!d||(d.jquery?d:d.hooks(p)).has(m[0]).length){var v=void 0;if(h)if(v=h.apply(p,{loop:f.TwineScript_GetProperty(g),pos:g+1}),i.containsError(v))m.replaceWith(v.render("")),h=v=null;else if(r.isPrototypeOf(v)){var b=v.summary();(b.includes("newTargets")||b.includes("target"))&&(m.replaceWith(i.create("macrocall","The changer produced by the 'via' lambda given to enchantment macros can't include a revision or enchantment changer like (replace:) or (click:).").render("")),h=v=null)}else m.replaceWith(i.create("macrocall","The 'via' lambda given to enchantment macros must return a changer, not "+s(v)+".").render("")),h=v=null;else v=a.changer;var w=!o&&!u&&(!v||v.summary().every(function(e){return e.startsWith("transition")})),T=w?m:m.wrap("<tw-enchantment>").parent();if(o&&T.attr(o),u&&T.data(u),l&&l.forEach(function(e){return e(T)}),v){var S=n.create({section:p,target:T});if(v.run(S),S.update(),m.is(t.storyElement)){var x=Object.keys(Object.assign.apply(Object,[{}].concat(_toConsumableArray(S.styles))));m.css(x.reduce(function(e,t){return e[t]="inherit",e},{})),T.data({enchantedProperties:x})}else if(m.is("tw-passage")&&S.styles.some(function(e){return"margin-left"in e||"margin"in e||"margin-right"in e})){var k="padding-left",O="padding-right";t.storyElement.css(k,"0px").css(O,"0px"),T.data({enchantedProperties:[k,O]})}}m.is(t.storyElement)&&T.css({width:"100%",height:"100%"}),"true"===T.attr("collapsing")&&(T.find("[collapsing=false]").each(function(){e(this).removeAttr("collapsing")}),c(T)),w||y.push(T)}}),this.enchantments=e(y)},disenchant:function(){this.enchantments.each(function(){e(this).contents().unwrap();var n=e(this).data("enchantedProperties");n&&t.storyElement.css(n.reduce(function(e,t){return e[t]="",e},{}))})}};return Object.freeze(u)}),define("macrolib/enchantments",["jquery","utils","utils/operationutils","engine","state","passages","macros","datatypes/hookset","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/enchantment","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l,p,f){var d=n.is,h=o.TypeSignature,y=h.either,m=h.rest,g=h.optional;function v(e,t){if(c.isPrototypeOf(t)){var n=t.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return n.includes(e)}))return f.create("datatype","The changer given to ("+e+":) can't include a revision or enchantment changer like (replace:) or (click:).")}}["enchant","change"].forEach(function(e){o.addCommand(e,function(t,n){var r=v(e,n);if(r)return r},function(t,n,r){var a;n=s.from(n);var i=[];if(c.isPrototypeOf(r)){var o=l.create({section:t});if(r.run(o),(o.innerEnchantments||[]).length>0){var u=o.innerEnchantments.map(function(e){return e(n)});i.push.apply(i,_toConsumableArray(u))}}return i.push(p.create((_defineProperty(a={scope:n},c.isPrototypeOf(r)?"changer":"lambda",r),_defineProperty(a,"section",t),a))),i.forEach(function(n){"enchant"===e?(t.addEnchantment(n),t.updateEnchantments()):n.enchantScope()}),""},[y(s,String),y(c,u.TypeSignature("via"))],!1)}),o.addChanger("enchant-in",function(e,t,n){var r=v("enchant-in",n);return r||c.create("enchant-in",[t,n])},function(e,t,n){return e.innerEnchantments=(e.innerEnchantments||[]).concat(function(r){var a;return p.create((_defineProperty(a={scope:s.from(t),localHook:r},c.isPrototypeOf(n)?"changer":"lambda",n),_defineProperty(a,"section",e.section),a))}),e},[y(s,String),y(c,u.TypeSignature("via"))]),[["link-style",s.create({type:"name",data:"link"})],["line-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"lines",void 0)],["char-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"chars",void 0)]].forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];o.addChanger(n,function(e,t){var r=v(n,t);return r||c.create(n,[t])},function(e,t){return e.innerEnchantments=(e.innerEnchantments||[]).concat(function(n){var a;return p.create((_defineProperty(a={scope:r,localHook:n},c.isPrototypeOf(t)?"changer":"lambda",t),_defineProperty(a,"section",e.section),a))}),e},[y(c,u.TypeSignature("via"))])});var b=["replace","append","prepend"];function w(n,a){return t.onStartup(function(){var r=n.classList.replace(/ /g,"."),a=n.blockClassList?n.blockClassList.replace(/ /g,"."):"",i="."+r+(a?",."+a:"");t.storyElement.on(n.event.map(function(e){return e+".enchantment"}).join(" "),i,function(){var t=e(Array.from(e(this).parents(i).add(this)).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})}),[function(e,t,n){if(!t)return f.create("datatype","A string given to this ("+a+":) macro was empty.");if(n){var r=v(a,n);if(r)return r}return c.create(a,[s.from(t)].concat(n?[n]:[]))},function(e,t,i){e.enabled=!1,e.transitionDeferred=!0,n.rerender&&(e.newTargets=(e.newTargets||[]).concat({target:t,append:n.rerender}));var o=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),s=p.create(_defineProperty({functions:[function(e){e.attr("class",e.children().is("tw-story, tw-sidebar, tw-passage")||"block"===e.children().css("display")?n.blockClassList:n.classList)}],attr:(n.classList+"").match(/\b(?:link|enchantment-clickblock)\b/)?{tabIndex:"0"}:{},data:{enchantmentEvent:function(){e.section.stackTop&&e.section.stackTop.blocked||(n.once&&e.section.removeEnchantment(s),n.goto?r.goToPassage(n.goto,{transition:n.transition}):n.undo?r.goBack({transition:n.transition}):e.section.renderInto(e.source,null,Object.assign({},e,{enabled:!0,transitionDeferred:!1}),o))}},scope:t,section:e.section,name:a},c.isPrototypeOf(i)?"changer":"lambda",i));return e.section&&(e.section.addEnchantment(s),s.enchantScope()),e},[y(s,String),g(y(c,u.TypeSignature("via")))]]}b.forEach(function(t){o.addChanger(t,function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.every(Boolean)?c.create(t,r.map(s.from)):f.create("datatype","A string given to this ("+t+":) macro was empty.")},function(n){for(var r,a=arguments.length,i=Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return e(n.target).parents().filter("tw-collapsed,[collapsing=true]").length>0||n.attr.some(function(e){return e.collapsing})||(n.attr=[].concat(_toConsumableArray(n.attr),[{collapsing:!1}])),n.newTargets=n.newTargets||[],(r=n.newTargets).push.apply(r,_toConsumableArray(i.filter(function(e){return!n.newTargets.some(function(n){var r=n.target,a=n.append;return d(e,r)&&t===a})}).map(function(e){return{target:e,append:t,before:!0}}))),n},m(y(s,String)))(t+"-with",function(e,n){return c.create(t+"-with",[n])},function(e,n){return e.appendSource=(e.appendSource||[]).concat({source:n,append:t}),e},String)});var T="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,S=[{name:"click",enchantDesc:{event:["click"],once:!0,rerender:"",classList:"link enchantment-link",blockClassList:"enchantment-clickblock"}},{name:"mouseover",enchantDesc:{event:["mouseenter",T?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseover",blockClassList:"enchantment-mouseoverblock"}},{name:"mouseout",enchantDesc:{event:["mouseleave",T?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseout",blockClassList:"enchantment-mouseoutblock"}}];S.forEach(function(e){return o.addChanger.apply(o,[e.name].concat(_toConsumableArray(w(e.enchantDesc,e.name))))}),t.onStartup(function(){S.forEach(function(n){var r=n.enchantDesc;r.blockClassList&&t.storyElement.on(r.event.map(function(e){return e+".enchantment"}).join(" "),function(){var t=e(Array.from(e(this).parents("."+r.blockClassList.replace(/ /g,"."))).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})})}),b.forEach(function(e){S.forEach(function(t){var n=Object.assign({},t.enchantDesc,{rerender:e}),r=t.name+"-"+e;o.addChanger.apply(o,[r].concat(_toConsumableArray(w(n,r))))})}),S.forEach(function(e){["goto","undo"].forEach(function(t){var n=e.name+"-"+t;o.addCommand(n,function(e,r){return!e||!r&&"goto"===t?f.create("datatype","A string given to this ("+n+":) macro was empty."):"goto"!==t||i.hasValid(r)?void 0:f.create("macrocall","I can't ("+n+":) the passage '"+r+"' because it doesn't exist.")},function(r,i,o,c){if("undo"===t&&a.pastLength<1)return f.create("macrocall","I can't (undo:) on the first turn.");var u=w(Object.assign({},e.enchantDesc,{transition:r.data.passageT8n},"undo"===t?{undo:!0}:{goto:c}),n);return(0,_slicedToArray(u,2)[1])({section:i},s.from(o)),Object.assign(r,{source:""})},[y(s,String)].concat("undo"===t?[]:String))})})}),define("macrolib/metadata",["macros","renderer","utils/operationutils","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,a){var i=n.clone,o=n.objectName,s=n.isValidDatamapName,c=e.TypeSignature,u=c.zeroOrMore,l=c.Any,p=t.options.metadataMacros,f=function(e){return{TwineScript_TypeName:"a ("+e+":) macro",TwineScript_ObjectName:"a ("+e+":) macro",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}};[["storylet",r.TypeSignature("when")],["urgency",Number],["exclusivity",Number]].forEach(function(t){var n=_slicedToArray(t,2),r=n[0],a=n[1];e.add(r,function(e,t){return e.stackTop.speculativePassage?t:f(r)},a),p.push(r)}),e.add("metadata",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var c=void 0,u=new Map,l=n.reduce(function(e,t){var n=void 0;if(a.containsError(e))return e;if(void 0===c)c=t;else{if(n=a.containsError(s(u,c)))return n;if(u.has(c))return a.create("macrocall","You used the same data name ("+o(c)+") twice in the same (metadata:) call.");u.set(c,i(t)),c=void 0}return e},!0);return a.containsError(l)?l:void 0!==c?a.create("macrocall","This (metadata:) macro has a data name without a value."):e.stackTop.speculativePassage?u:f("storylet")},u(l)),p.push("metadata")}),define("macrolib/patterns",["jquery","macros","utils","utils/operationutils","datatypes/datatype","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,a,i,o){var s=n.anyRealLetter,c=n.anyUppercase,u=n.anyLowercase,l=n.anyCasedLetter,p=n.realWhitespace,f=n.impossible,d=r.objectName,h=r.toSource,y=t.TypeSignature,m=y.rest,g=y.either,v=y.optional,b=y.nonNegativeInteger,w=Object.assign,T=Object.create,S=m(g(String,a,i)),x=function e(t){var n,r=t.name,y=t.fullArgs,m=t.args,g=t.makeRegExpString,v=void 0===g?function(e){return e.join("")}:g,b=t.insensitive,S=void 0!==b&&b,x=t.canContainTypedVars,k=void 0===x||x,O=t.canBeUsedAlone,j=void 0===O||O,A=m||y,C=A.map(function e(t){if(i.isPrototypeOf(t)){if(!k)return o.create("operation","Optional string patterns, like ("+r+":)"+("p-many"===r?" with min 0":"")+", can't have typed variables inside them.");var n=e(t.datatype);return o.containsError(n)?n:"("+n+")"}if(a.isPrototypeOf(t)){if(!k&&"typedVars"in t&&t.typedVars().length)return o.create("operation","("+r+":) can't have typed variables inside its pattern.");if(t.regExp)return(t.rest?"(?:":"")+(S?t.insensitive().regExp:t.regExp)+(t.rest?")*":"");var h=t.name,y=t.rest?"*":"";return"alnum"===h?s+y:"whitespace"===h?p+y:"uppercase"===h?(S?l:c)+y:"lowercase"===h?(S?l:u)+y:"anycase"===h?l+y:"digit"===h?"\\d"+y:"linebreak"===h?"(?:\\r|\\n|\\r\\n)"+y:"str"===h?".*?":["even","odd","int","num"].includes(h)?o.create("datatype","Please use string datatypes like 'digit' in ("+r+":) instead of number datatypes."):o.create("datatype","The ("+r+":) macro must only be given string-related datatypes, not "+d(t)+".")}return"string"==typeof t?(t=t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),S&&(t=t.replace(RegExp("("+c+"|"+u+")","g"),function(e){return"["+e.toUpperCase()+e.toLowerCase()+"]"})),t):(f("createPattern","mapper() was given a non-string non-datatype "+t),"")});if(n=o.containsError(C))return n;var E=v(C),_=w(T(a),{name:r,regExp:E,insensitive:function(){return S?_:e({name:r,fullArgs:y,args:A.map(function(e){return a.isPrototypeOf(e)&&"function"==typeof e.insensitive?e.insensitive():e}),makeRegExpString:v,insensitive:!0,canContainTypedVars:k,canBeUsedAlone:j})},typedVars:function(){return A.reduce(function(t,n){return i.isPrototypeOf(n)&&(t=t.concat(S?i.create(e({name:"p-ins",fullArgs:[n.datatype],insensitive:!0}),n.varRef):n),n=n.datatype),a.isPrototypeOf(n)&&"function"==typeof n.typedVars&&(t=t.concat(n.typedVars())),t},[])},destructure:function(t){if("string"!=typeof t)return[o.create("operation","I can't unpack "+d(t)+" into "+this.TwineScript_ToSource()+" because it isn't a string.")];var n=this.typedVars();if(!n.length)return[];var r=(RegExp("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$").exec(t)||[]).slice(1);return r.length?r.map(function(t,r){var a=n[r];if(a)return a.datatype.rest&&!a.datatype.regExp&&((a=a.TwineScript_Clone()).datatype=e({name:"p",fullArgs:[a.datatype]})),{dest:a,value:t||"",src:void 0}}).filter(Boolean):[o.create("operation","I can't unpack "+d(t)+" because it doesn't match the pattern "+this.TwineScript_ToSource()+".")]},TwineScript_IsTypeOf:function(e){return j?"string"==typeof e&&!!e.match("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$"):o.create("operation","A ("+r+":) datatype must only be used with a (p:) macro.")},TwineScript_toTypeSignatureObject:function(){var e=this;return{pattern:"range",name:r,range:function(t){return e.TwineScript_IsTypeOf(t)}}},TwineScript_ToSource:function(){return(this.rest?"...":"")+"("+r+":"+y.map(h)+")"}});return Object.defineProperty(_,"TwineScript_ObjectName",{get:function(){return"a ("+r+":) datatype"}}),_};t.add(["p","pattern"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p",fullArgs:n})},S)(["p-either","pattern-either"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-either",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("|")+")"}})},S)(["p-opt","pattern-opt","p-optional","pattern-optional"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-opt",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("")+")?"}})},S)(["p-not","pattern-not"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.find(function(e){return"string"==typeof e?1!==[].concat(_toConsumableArray(e)).length:e.rest||e.regExp||["str","empty"].includes(e.name)})?o.create("datatype","(p-not:) should only be given single character"):x({name:"p-not",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"[^"+e.map(function(e){return e.startsWith("[")&&e.endsWith("]")?e.slice(1,-1):e}).join("")+"]"}})},S)(["p-many","pattern-many"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=n.slice(),c=void 0,u=void 0;if("number"==typeof n[0]&&(c=n.shift(),u="number"==typeof n[0]?n.shift():1/0),void 0!==u&&u<c)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");if(!n.length)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");var l=n.find(function(e){return"string"!=typeof e&&!a.isPrototypeOf(e)&&!i.isPrototypeOf(e)});return l?o.create("datatype","This (p-many:) macro can only be given a min and max number followed by datatypes or strings, but was also given "+d(l)+"."):x({name:"p-many",args:n,fullArgs:s,canContainTypedVars:c>0,makeRegExpString:function(e){return"(?:"+e.join("")+")"+(void 0!==c?"{"+c+(u===1/0?",":u!==c?","+u:"")+"}":"+")}})},[m(g(b,String,a,i))])(["p-ins","pattern-ins","p-insensitive","pattern-insensitive"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-ins",fullArgs:n,insensitive:!0})},S)(["split","splitted"],function(e,t,n){if(t=x({name:"split",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t))return t;if(!n)return[""];if(!t.regExp)return[].concat(_toConsumableArray(n));for(var r=RegExp(t.regExp),a=[],i=void 0;n&&(i=r.exec(n));){if(i.index+i[0].length===0)return a;a.push(n.slice(0,i.index)),n=n.slice(i.index+i[0].length)}return a.concat(n||[])},[g(String,a),String])("trimmed",function(e,t,n){return void 0===n||a.isPrototypeOf(t)&&"whitespace"===t.name?t.trim():(t=x({name:"trimmed",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t)?t:t.regExp?n.replace(RegExp("^("+t.regExp+")*|("+t.regExp+")*$","g"),""):n)},[g(String,a),v(String)])}),define("macrolib/links",["jquery","macros","utils","state","passages","engine","datatypes/changercommand","internaltypes/changedescriptor","datatypes/hookset","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c,u,l){var p=t.TypeSignature,f=p.optional,d=p.rest,h=p.either,y=["Links can't have empty strings for their displayed text.","In the link syntax, a link's displayed text is inside the [[ and ]], and on the non-pointy side of the -> or <- arrow if it's there."],m=Object.assign;function g(e,t,r){r=r||t;var i=a.hasValid(t)&&t===r,o=e.evaluateTwineMarkup(n.unescape(r),"a link's passage name"),s=void 0;if(i){var c=o.children().length>0?"`".repeat((r.match(/`+/)||[]).reduce(function(e,t){return Math.max(e,t.length+1)},1)):"";t=c+"\0".repeat(!!c)+t+"\0".repeat(!!c)+c}else o.findAndFilter("tw-error").length&&(s=o.findAndFilter("tw-error").data("TwineError")),r=o.text();return{text:t,passage:r,error:s}}n.onStartup(function(){e(n.storyElement).on("click.passage-link","tw-link",function(t){var n=e(this),r=n.closest("tw-expression"),a=n.closest("tw-expression, tw-hook"),o=a.data("clickEvent"),s=a.data("section");if(!(s&&s.stackTop&&s.stackTop.blocked)){if(o){if(n.find("tw-error").length>0)return;return t.stopPropagation(),void o(n)}var c=r.data("linkPassageName"),u=Object.assign({},r.data("passageT8n")||{});return r.find("tw-enchantment").each(function(t,n){Object.assign(u,e(n).data("passageT8n")||{})}),c?(t.stopPropagation(),void i.goToPassage(c,{transition:u})):n.is("[undo]")?(t.stopPropagation(),void i.goBack({transition:u})):n.is("[fullscreen]")?(t.stopPropagation(),void i.toggleFullscreen()):void 0}}),e(document).on("fullscreenchange",function(){e("tw-link[fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression, tw-hook").data("fullscreenEvent")||Object)(n)})})}),[["link","link-replace"],["link-reveal"],["link-repeat"],["link-rerun"]].forEach(function(e){return t.addChanger(e,function(t,n,r){if(!n)return l.create("datatype",y[0]);if(r){var a=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return a.includes(e)}))return l.create("datatype","The changer given to ("+e[0]+":) can't include a revision or enchantment changer like (replace:) or (click:).")}return o.create(e[0],[n].concat(r||[]))},function(t,n,r){var a=e[0],i=t.section&&t.section.stackTop?t.section.stackTop.tempVariables:Object.create(null),o=s.create({source:"<tw-link tabindex=0>"+n+"</tw-link>",target:function(){return t.target},append:"replace",data:{section:t.section,clickEvent:function(e){t.enablers=t.enablers.filter(function(e){return e.descriptor!==o}),"link-reveal"===a&&e.contents().unwrap();var n=e.parentsUntil(":not(tw-enchantment)").parent();if(n.length||(n=e.parent()),"link-rerun"===a){var r=e.parentsUntil(":not(tw-enchantment)");e.detach(),r.remove()}"link"!==a&&"link-rerun"!==a||n.empty(),t.section.renderInto("",null,t,i),"link-rerun"===a&&n.prepend(e)}}});return t.enablers=(t.enablers||[]).concat({descriptor:o,changer:r}),t},[String,f(o)])}),t.addCommand("link-goto",function(e){if(!e)return l.create.apply(l,["datatype"].concat(y))},function(e,t,i,o){var s,c=g(t,i,o);if(i=c.text,o=c.passage,s=c.error)return s;if(e.transition){var u="transition";return l.create("datatype","Please attach ("+u+"-depart:) or ("+u+"-arrive:) to a passage link, not ("+u+":).")}var p=void 0;return a.hasValid(o)||(p='<tw-broken-link passage-name="'+n.escape(o)+'">'+i+"</tw-broken-link>"),p=p||"<tw-link tabindex=0 "+(r.passageNameVisited(o)>0?'class="visited" ':"")+">"+i+"</tw-link>",e.data.linkPassageName=o,e.data.section=t,m(e,{source:p,transitionDeferred:!0})},[String,f(String)])("link-storylet",function(){var e,t=(e=1===arguments.length||"string"!=typeof(arguments.length<=0?void 0:arguments[0])?0:1,arguments.length<=e?void 0:arguments[e]);if(!t||"string"==typeof t)return l.create("datatype","(link-storylet:) should be given one index number or one 'where' lambda, after the optional link text string.")},function(e,t){var n,i,o,s=(n=2+(1==(arguments.length<=2?0:arguments.length-2)?0:3==(arguments.length<=2?0:arguments.length-2)||"string"==typeof(arguments.length<=2?void 0:arguments[2])?1:2),arguments.length<=n?void 0:arguments[n]),c="string"==typeof(arguments.length<=2?void 0:arguments[2])&&(arguments.length<=2?void 0:arguments[2]),p=(i=(arguments.length<=2?0:arguments.length-2)-1+2,(arguments.length<=i?void 0:arguments[i])!==s&&(o=(arguments.length<=2?0:arguments.length-2)-1+2,arguments.length<=o?void 0:arguments[o]));if(e.transition){var f="transition";return l.create("datatype","Please attach ("+f+"-depart:) or ("+f+"-arrive:) to (link-storylet:), not ("+f+":).")}var d=u.isPrototypeOf(s),h=a.getStorylets(t,d&&s),y=l.containsError(h);if(y)return y;var g=h[d?0:s<0?h.length+s:s-1],v=void 0;if(g)g=g.get("name"),c=c||g,v=v||"<tw-link tabindex=0 "+(r.passageNameVisited(g)>0?'class="visited" ':"")+">"+c+"</tw-link>",e.data.linkPassageName=g,e.data.section=t;else{if(!p)return e;v=p}return m(e,{source:v,transitionDeferred:!0})},[h(parseInt,String,u.TypeSignature("where")),f(h(parseInt,String,u.TypeSignature("where"))),f(String)])("link-undo",function(e){if(!e)return l.create("datatype",y[0])},function(e,t,n){return r.pastLength<1?l.create("macrocall","I can't use (link-undo:) on the first turn."):(e.data.section=t,m(e,{source:"<tw-link tabindex=0 undo>"+n+"</tw-link>",transitionDeferred:!0}))},[String])("link-show",function(e){if(!e)return l.create("datatype",y[0])},function(t,n,r){for(var a=arguments.length,i=Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];return t.data.section=n,t.data.clickEvent=function(r){r.contents().unwrap(),i.forEach(function(r){return r.forEach(n,function(r){var a=r.data("originalSource")||"",i=r.data("hidden");if(i)if(r.removeData("hidden"),i instanceof e)r.empty().append(i);else{var o=r.data("tempVariables");n.renderInto("",null,m({},t,{source:a,target:r,transitionDeferred:!1}),o&&Object.create(o))}})})},m(t,{source:"<tw-link tabindex=0>"+r+"</tw-link>",transitionDeferred:!0})},[String,d(c)])("link-fullscreen",function(e,t){if(!e||!t)return l.create("datatype",y[0])},function(e,t,n,r){var a=function(){return document.fullscreenEnabled||document.msFullscreenEnabled?"<tw-link tabindex=0 fullscreen>"+(document.fullscreenElement||document.msFullscreenElement?r:n)+"</tw-link>":r?"<tw-broken-link>"+r+"</tw-broken-link>":""},i=t.stackTop.tempVariables;return e.data.section=t,e.data.fullscreenEvent=function(){(document.fullscreenEnabled||document.msFullscreenEnabled)&&e.data.section.whenUnblocked(function(){var t=m({},e,{append:"replace",source:a(),transitionDeferred:!1});e.section.renderInto("",null,t,i)})},m(e,{source:a(),transitionDeferred:!0})},[String,String,f(String)]),t.addChanger(["link-reveal-goto"],function(e,t,n,r){if(!t)return l.create.apply(l,["datatype"].concat(y));if(o.isPrototypeOf(n)){if(o.isPrototypeOf(r))return l.create("datatype","You mustn't give two changers to (link-reveal-goto:)");r=n,n=void 0}if(r){var a=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return a.includes(e)}))return l.create("datatype","The changer given to (link-reveal-goto:) can't include a revision or enchantment changer like (replace:) or (click:).")}var i=g(e,t,n);return t=i.text,n=i.passage,i.error||o.create("link-reveal-goto",[t,n,r].filter(function(e){return void 0!==e}))},function(e,t,o,c){if(a.hasValid(o)){var u=r.passageNameVisited(o),l=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),p=s.create({source:"<tw-link tabindex=0 "+(u>0?'class="visited" ':"")+">"+t+"</tw-link>",target:e.target,append:"replace",data:{section:e.section,append:"replace",clickEvent:function(t){e.enablers=e.enablers.filter(function(e){return e.descriptor!==p}),t.contents().unwrap(),e.section.renderInto("",null,e,l),e.section.whenUnblocked(function(){return i.goToPassage(o,{transition:e.data.passageT8n})})}}});return e.enablers=(e.enablers||[]).concat({descriptor:p,changer:c}),e}e.source='<tw-broken-link passage-name="'+n.escape(o)+'">'+t+"</tw-broken-link>"},[String,f(h(o,String)),f(o)])}),define("macrolib/custommacros",["utils","macros","state","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/codehook","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,a,i,o,s,c){var u=t.add,l=t.addChanger,p=t.addCommand,f=t.TypeSignature,d=f.rest,h=f.either,y=f.Any,m=r.objectName;u("macro",function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var u=void 0,l=[];for(u=0;u<a.length;u+=1){var p=u===a.length-1;if(s.isPrototypeOf(a[u])===p)return c.create("datatype","The "+(p?"":e.nth(a.length-u+1)+"-")+"last value given to (macro:) should be a "+(p?"code hook":"datatyped variable")+", not "+m(a[u]));if(!p){var f="A custom macro";if(a[u].varRef.object===n.variables)return c.create("datatype",f+"'s typed variables must be temp variables (with a '_'), not global variables (with a '$').","Write them with a _ symbol at the start instead of a $ symbol.");if(a[u].varRef.propertyChain.length>1)return c.create("datatype",f+"'s typed variables can't be properties inside a data structure.");if(a[u].datatype.rest&&u!==a.length-2)return c.create("datatype",f+" can only have one spread variable, and it must be its last variable.");var d=a[u].varRef.propertyChain[0];if(l.includes(d))return c.create("datatype",f+"'s typed variables can't both be named '"+d+"'.");l.push(d)}}return i.create(a.slice(0,-1),a[a.length-1])},[d(h(s,o))]);var g=function(e,t,n){if(!t.some(function(e){if("function"==typeof e.output)return e.output(n),!0}))return c.create("macrocall","("+e+":) should only be used inside a code hook passed to (macro:).")};p(["output-data","out-data"],function(){},function(e,t){var n=e.stack;return g("output-data",n,t)||"blocked"},[y],!1),l(["output","out"],function(e){return Object.assign(a.create("output",[e]))},function(e,t){var n=t.stack,r=t.stackTop;return e.loopVars=Object.keys(r.tempVariables).reduce(function(e,t){return e[t]=[r.tempVariables[t]],e},{}),g("output",n,e),r.blocked=!0,e},[]),p("error",function(e){if(!e)return c.create("datatype","This (error:) macro was given an empty string.")},function(e,t){var n=e.stack;return g("error",n,c.create("user",t))||"blocked"},[String],!1)}),define("repl",["utils","engine","markup","twinescript/compiler","twinescript/environ"],function(e,t,n,r,a){e.onStartup(function(){return setTimeout(function(){t.options.debug&&(window.REPL=function(e){var t=r(n.lex("(print:"+e+")"));console.log(t);var i=a({}).eval(t);return i.TwineScript_Run?i.TwineScript_Run().source:i},window.LEX=function(e){var t=n.lex(e);return 1===t.length?t[0]:t})})})}),require.config({paths:{jquery:"../node_modules/jquery/dist/jquery",almond:"../node_modules/almond/almond","es6-shim":"../node_modules/es6-shim/es6-shim",jqueryplugins:"utils/jqueryplugins",markup:"./markup/markup",lexer:"./markup/lexer",patterns:"./markup/patterns"},deps:["es6-shim","jqueryplugins"]}),require(["jquery","debugmode/mode","renderer","state","section","engine","passages","utils","utils/renderutils","internaltypes/varscope","internaltypes/twineerror","macros","macrolib/values","macrolib/commands","macrolib/datastructures","macrolib/stylechangers","macrolib/enchantments","macrolib/metadata","macrolib/patterns","macrolib/links","macrolib/custommacros","repl"],function($,DebugMode,Renderer,State,Section,Engine,Passages,Utils,_ref118,VarScope,TwineError){var dialog=_ref118.dialog;function __HarloweEval(text){return eval(text+"")}var _installHandlers=function(){$(document.documentElement).on("keydown",function(e){13===e.which&&"0"===e.target.getAttribute("tabindex")&&$(e.target).trigger("click")}),Engine.options.debug?DebugMode():TwineError.on("error",function(e,t){return!$("tw-debugger").length&&DebugMode(e,t)}),_installHandlers=null},oldOnError;function printJSError(e){var t=e.name+": "+e.message;if(e.stack){var n=e.stack.split("\n"),r=n.findIndex(function(e){return e.includes("__HarloweEval")});t+="\n"+n.slice(0,r).join("\n").replace(/\([^\)]+\)/g,"")}return"<div style='font-family:monospace;overflow-y:scroll;max-height:30vh'>```"+t+"```</div>"}oldOnError=window.onerror,window.onerror=function(e,t,n,r,a){window.onerror=oldOnError,Utils.storyElement.parent().append(dialog({message:"Sorry to interrupt, but this page's code has got itself in a mess.\n\n"+printJSError(a)+"\n(This is probably due to a bug in the Harlowe game engine.)"})),"function"==typeof oldOnError&&oldOnError.apply(void 0,arguments)},Utils.onStartup(function(){var e=$("tw-storydata");if(0!==e.length){var t=e.attr("options");t&&t.split(/\s/).forEach(function(e){Renderer.options[e]=Engine.options[e]=!0});var n=e.attr("startnode");Renderer.options.ifid=Engine.options.ifid=e.attr("ifid"),n||(n=[].reduce.call($("tw-passagedata"),function(e,t){var n=t.getAttribute("pid");return n<e?n:e},1/0)),n=$("tw-passagedata[pid="+n+"]").attr("name"),_installHandlers();var r=!1;$("[role=script]").each(function(e){try{__HarloweEval($(this).html())}catch(t){r||(r=!0,dialog({parent:Utils.storyElement.parent(),message:"There is a problem with this story's "+Utils.nth(e+1)+" script:\n\n"+printJSError(t)}))}}),$("[role=stylesheet]").each(function(e){$(document.head).append('<style data-title="Story stylesheet '+(e+1)+'">'+$(this).html())});var a=Section.create();a.stack=[{tempVariables:Object.create(VarScope)}];var i=Passages.loadMetadata(a);if(i.length){var o=dialog({parent:Utils.storyElement.parent(),message:"These errors occurred when running the `(metadata:)` macro calls in this story's passages:<p></p>"});i.forEach(function(e){return o.find("p").append(e.render(""))})}var s=!Engine.options.debug&&State.hasSessionStorage&&sessionStorage.getItem("Saved Session");s&&!0===State.deserialise(a,s)?Engine.showPassage(State.passage,!1):Engine.goToPassage(n)}})}),define("harlowe",function(){}),require(["harlowe"])}();
</script>

</body>
</html>
